import{r as ce,w as ze,X as u,a as ee,c as le,o as p,d as he,b as a,e as r,f as N,m as re,F as ne,i as Ae,E as aa,aQ as me,aR as pe,q as Ie,n as Ee,aS as ua,t as ye,v as _e,a2 as ra,a3 as Ue,az as na,au as ia}from"./index-CyUyC-Fi.js";import{d as va,_ as sa,a as ca,c as da,b as ma}from"./VistaBayWindow-5tetxKrE.js";import{a as Pe,V as De,r as la,n as oa,_ as pa}from"./VistaVentanaCorredera-XTz8QlQL.js";import{a as E,V as ie}from"./VRadioGroup-BWS5JYLn.js";import{_ as fa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Te}from"./VDialog-BFiBrZ16.js";import{V as Le,b as Oe,c as Be}from"./VCard-pI-M5XDy.js";import{V as Ne}from"./VDivider-D7ltSook.js";import{V as ha}from"./VForm-C3Xw4OTR.js";import{V as se,a as S}from"./VRow-DjSGh7HE.js";import{V as fe}from"./VSelect-DHKXaaKa.js";import{V as ke}from"./VTextField-Ct43QDZC.js";import{V as qe}from"./VAlert-CdecUr87.js";import{V as ga}from"./VDataTable-DCXCfC_5.js";import{V as ba,a as We,b as Fe}from"./VList-C1_QPu4B.js";import{V as Ye}from"./VSpacer-jEz1tiM6.js";import{V as Va}from"./VCardText-CHDEe8Fq.js";import{V as ya}from"./VContainer-C4Nz5DRI.js";const xa={style:{"margin-bottom":"10px"}},G=50,ka=60,Re=0,Ge=300,Aa={__name:"VistaVentanaAbatirS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],material:[String,Number],tipoVidrio:[String,Number],productoVidrioProveedor:[String,Number],ladoInicial:{type:String,default:"izquierda",validator:T=>["izquierda","derecha"].includes(T)},direccionApertura:{type:String,default:"interior",validator:T=>["interior","exterior"].includes(T)}},emits:["update:ladoApertura","update:direccionApertura"],setup(T,{expose:xe,emit:s}){const W=T,X=s,h=ce(W.ladoInicial),A=ce(W.direccionApertura);ze(h,M=>{console.log("🔄 Lado apertura cambió a:",M),X("update:ladoApertura",M)}),ze(A,M=>{console.log("🔄 Dirección apertura cambió a:",M),X("update:direccionApertura",M)});const w={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},f={roble:new Image,nogal:new Image};f.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,f.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const e=u(()=>{var x,H,n;const M=typeof W.colorMarco=="object"?(H=(x=W.colorMarco)==null?void 0:x.nombre)==null?void 0:H.toLowerCase():(n=W.colorMarco)==null?void 0:n.toLowerCase();return w[M]||"#ffffff"});function d(M,x=!1){var n,l;const H=typeof W.colorMarco=="object"?(l=(n=W.colorMarco)==null?void 0:n.nombre)==null?void 0:l.toLowerCase():W.colorMarco.toLowerCase();return["roble","nogal"].includes(H)&&f[H]?{points:M,closed:!0,fillPatternImage:f[H],fillPatternRepeat:"repeat",fillPatternScale:{x:x?.15:.2,y:x?.15:.2},stroke:"black"}:{points:M,closed:!0,fill:e.value,stroke:"black"}}const ue=u(()=>{const M=Ge/W.ancho,x=Ge/W.alto;return Math.min(M,x,1)*.9}),R=u(()=>ka*ue.value),oe=u(()=>W.ancho*ue.value),P=u(()=>W.alto*ue.value),B={width:400,height:400},_=u(()=>d([G,G,G+oe.value,G,G+oe.value-R.value,G+R.value,G+R.value,G+R.value])),t=u(()=>d([G+oe.value,G,G+oe.value,G+P.value,G+oe.value-R.value,G+P.value-R.value,G+oe.value-R.value,G+R.value])),c=u(()=>d([G+oe.value,G+P.value,G,G+P.value,G+R.value,G+P.value-R.value,G+oe.value-R.value,G+P.value-R.value])),v=u(()=>d([G,G+P.value,G,G,G+R.value,G+R.value,G+R.value,G+P.value-R.value])),k=u(()=>({x:G+R.value,y:G+R.value,width:oe.value-R.value*2,height:P.value-R.value*2,fill:"#b3e5fc",stroke:"black"})),y=u(()=>k.value.x+Re*ue.value),b=u(()=>k.value.y+Re*ue.value),O=u(()=>k.value.width-Re*2*ue.value),U=u(()=>k.value.height-Re*2*ue.value),Z=u(()=>R.value*.8),i=u(()=>d([y.value,b.value,y.value+O.value,b.value,y.value+O.value-Z.value,b.value+Z.value,y.value+Z.value,b.value+Z.value],!0)),g=u(()=>d([y.value+O.value,b.value,y.value+O.value,b.value+U.value,y.value+O.value-Z.value,b.value+U.value-Z.value,y.value+O.value-Z.value,b.value+Z.value],!0)),I=u(()=>d([y.value+O.value,b.value+U.value,y.value,b.value+U.value,y.value+Z.value,b.value+U.value-Z.value,y.value+O.value-Z.value,b.value+U.value-Z.value],!0)),z=u(()=>d([y.value,b.value+U.value,y.value,b.value,y.value+Z.value,b.value+Z.value,y.value+Z.value,b.value+U.value-Z.value],!0)),q=u(()=>h.value==="izquierda"?y.value+O.value-15:y.value+15),$=u(()=>b.value+U.value/2),je=u(()=>h.value==="izquierda"?{points:[y.value+5,b.value+5,y.value+O.value-5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}:{points:[y.value+O.value-5,b.value+5,y.value+5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}),Me=u(()=>h.value==="izquierda"?{points:[y.value+5,b.value+U.value-5,y.value+O.value-5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}:{points:[y.value+O.value-5,b.value+U.value-5,y.value+5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}),ge=u(()=>Math.min(Math.max(W.ancho/100,20),40)),be=u(()=>({x:G+oe.value/2-30,y:G+P.value+10,text:`${W.ancho}mm`,fontSize:ge.value,fill:"black"})),Ce=u(()=>({x:G-25,y:G+P.value/2,text:`${W.alto}mm`,fontSize:ge.value,fill:"black",rotation:-90,offsetX:ge.value/2})),Se=u(()=>({x:be.value.x,y:be.value.y+ge.value+5,text:`Apertura ${A.value.charAt(0).toUpperCase()}${A.value.slice(1)}`,fontSize:Math.min(18,ge.value*.8),fill:"black"})),L=ce(null);return xe({exportarImagen:()=>L.value?L.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null}),(M,x)=>{const H=ee("v-line"),n=ee("v-rect"),l=ee("v-text"),o=ee("v-layer"),V=ee("v-stage");return p(),le("div",null,[he("div",xa,[a(ie,{modelValue:h.value,"onUpdate:modelValue":x[0]||(x[0]=m=>h.value=m),row:"",density:"compact",label:"Lado de apertura:"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ie,{modelValue:A.value,"onUpdate:modelValue":x[1]||(x[1]=m=>A.value=m),row:"",density:"compact",label:"Dirección de apertura:"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),a(V,{ref_key:"stageRef",ref:L,config:B},{default:r(()=>[a(o,null,{default:r(()=>[a(H,{config:_.value},null,8,["config"]),a(H,{config:t.value},null,8,["config"]),a(H,{config:c.value},null,8,["config"]),a(H,{config:v.value},null,8,["config"]),a(n,{config:k.value},null,8,["config"]),a(H,{config:i.value},null,8,["config"]),a(H,{config:g.value},null,8,["config"]),a(H,{config:I.value},null,8,["config"]),a(H,{config:z.value},null,8,["config"]),a(Pe,{x:q.value,y:$.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),a(H,{config:je.value},null,8,["config"]),a(H,{config:Me.value},null,8,["config"]),a(l,{config:be.value},null,8,["config"]),a(l,{config:Ce.value},null,8,["config"]),a(l,{config:Se.value},null,8,["config"])]),_:1})]),_:1},512)])}}},J=50,Ma=60,_a=80,Je=300,ja={__name:"VistaPuertaS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],ladoApertura:{type:String,default:"izquierda",validator:T=>["izquierda","derecha"].includes(T)},direccionApertura:{type:String,default:"interior",validator:T=>["interior","exterior"].includes(T)},pasoLibre:{type:Boolean,default:!1}},setup(T,{expose:xe}){const s=T;ce(s.ladoApertura);const W={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},X={roble:new Image,nogal:new Image};X.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,X.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const h=u(()=>{var M,x,H;const j=typeof s.colorMarco=="object"?(x=(M=s.colorMarco)==null?void 0:M.nombre)==null?void 0:x.toLowerCase():(H=s.colorMarco)==null?void 0:H.toLowerCase();return W[j]||"#ffffff"});function A(j,M=!1){var H,n;const x=typeof s.colorMarco=="object"?(n=(H=s.colorMarco)==null?void 0:H.nombre)==null?void 0:n.toLowerCase():s.colorMarco.toLowerCase();return["roble","nogal"].includes(x)&&X[x]?{points:j,closed:!0,fillPatternImage:X[x],fillPatternRepeat:"repeat",fillPatternScale:{x:M?.15:.2,y:M?.15:.2},stroke:"black"}:{points:j,closed:!0,fill:h.value,stroke:"black"}}const w=u(()=>{const j=Je/s.ancho,M=Je/s.alto;return Math.min(j,M,1)*.9}),f=u(()=>Ma*w.value),e=u(()=>s.ancho*w.value),d=u(()=>s.alto*w.value),ue=u(()=>A([J,J,J+e.value,J,J+e.value-f.value,J+f.value,J+f.value,J+f.value])),R=u(()=>A([J+e.value,J,J+e.value,J+d.value,J+e.value-f.value,J+d.value-(s.pasoLibre?0:f.value),J+e.value-f.value,J+f.value])),oe=u(()=>A([J,J+d.value,J,J,J+f.value,J+f.value,J+f.value,J+d.value-(s.pasoLibre?0:f.value)])),P=u(()=>s.pasoLibre?null:A([J+e.value,J+d.value,J,J+d.value,J+f.value,J+d.value-f.value,J+e.value-f.value,J+d.value-f.value])),B=u(()=>{const j=d.value-f.value-(s.pasoLibre?0:f.value),M=Math.max(j,5),x=Math.max(e.value-f.value*2,5);return{x:J+f.value,y:J+f.value,width:x,height:M,fill:"#b3e5fc",stroke:"black"}}),_=u(()=>B.value.x),t=u(()=>B.value.y),c=u(()=>B.value.width),v=u(()=>B.value.height),k=u(()=>{const j=_a*w.value,M=f.value*1.15,x=c.value*.45;return Math.min(Math.max(j,M),x)}),y=u(()=>A([_.value,t.value,_.value+c.value,t.value,_.value+c.value-k.value,t.value+k.value,_.value+k.value,t.value+k.value],!0)),b=u(()=>A([_.value+c.value,t.value,_.value+c.value,t.value+v.value,_.value+c.value-k.value,t.value+v.value-k.value,_.value+c.value-k.value,t.value+k.value],!0)),O=u(()=>A([_.value+c.value,t.value+v.value,_.value,t.value+v.value,_.value+k.value,t.value+v.value-k.value,_.value+c.value-k.value,t.value+v.value-k.value],!0)),U=u(()=>A([_.value,t.value+v.value,_.value,t.value,_.value+k.value,t.value+k.value,_.value+k.value,t.value+v.value-k.value],!0)),Z=u(()=>s.ladoApertura==="izquierda"?_.value+c.value-15:_.value+15),i=u(()=>t.value+v.value/2),g=u(()=>s.direccionApertura==="interior"?0:Math.min(Math.max(c.value*.1,8*w.value),25*w.value)),I=u(()=>{const j=s.ladoApertura==="izquierda",M=g.value*(j?-1:1),x=j?_.value:_.value+c.value,H=t.value+8,n=t.value+v.value-8,l=t.value+v.value/2,o=j?_.value+c.value-8:_.value+8,V=x+M;return[{points:[V,H,o,l],stroke:"black",dash:[10,5],strokeWidth:2},{points:[V,n,o,l],stroke:"black",dash:[10,5],strokeWidth:2}]}),z=u(()=>Math.min(Math.max(s.ancho/100,20),40)),q=u(()=>({x:J+e.value/2-30,y:J+d.value+10,text:`${s.ancho}mm`,fontSize:z.value,fill:"black"})),$=u(()=>({x:J-25,y:J+d.value/2,text:`${s.alto}mm`,fontSize:z.value,fill:"black",rotation:-90,offsetX:z.value/2})),je=u(()=>({x:q.value.x,y:q.value.y+z.value+5,text:`Apertura ${s.direccionApertura.charAt(0).toUpperCase()}${s.direccionApertura.slice(1)}`,fontSize:Math.min(18,z.value*.8),fill:"black"})),Me=ce(null);xe({exportarImagen:()=>Me.value?Me.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null});const be=u(()=>Math.max(28*w.value,f.value*.45)),Ce=u(()=>Math.min(Math.max(140*w.value,30*w.value),v.value*.4));u(()=>2*w.value);const Se=u(()=>s.direccionApertura==="interior"),L=u(()=>{if(!Se.value)return[];let j=v.value>2200?4:3;const M=Math.max(v.value-16*w.value,20);let x=Ce.value;x*j>M*.85&&(x=M*.85/j);const H=(M-x*j)/(j+1),n=[];for(let l=0;l<j;l++){const o=t.value+8*w.value+H*(l+1)+x*l,V=s.ladoApertura==="izquierda"?_.value-be.value/2+2*w.value:_.value+c.value-be.value/2-2*w.value;n.push({x:V,y:o,width:be.value,height:x,fill:"#888",stroke:"black",cornerRadius:2})}return n});return(j,M)=>{const x=ee("v-line"),H=ee("v-rect"),n=ee("v-text"),l=ee("v-layer"),o=ee("v-stage");return p(),le("div",null,[a(o,{ref_key:"stageRef",ref:Me,config:{width:400,height:400}},{default:r(()=>[a(l,null,{default:r(()=>[a(x,{config:ue.value},null,8,["config"]),a(x,{config:R.value},null,8,["config"]),a(x,{config:oe.value},null,8,["config"]),P.value?(p(),N(x,{key:0,config:P.value},null,8,["config"])):re("",!0),a(H,{config:B.value},null,8,["config"]),a(x,{config:y.value},null,8,["config"]),a(x,{config:b.value},null,8,["config"]),a(x,{config:O.value},null,8,["config"]),a(x,{config:U.value},null,8,["config"]),a(Pe,{x:Z.value,y:i.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),(p(!0),le(ne,null,Ae(I.value,(V,m)=>(p(),N(x,{key:"apertura-"+m,config:V},null,8,["config"]))),128)),(p(!0),le(ne,null,Ae(L.value,(V,m)=>(p(),N(H,{key:"hinge-"+m,config:V},null,8,["config"]))),128)),a(n,{config:q.value},null,8,["config"]),a(n,{config:$.value},null,8,["config"]),a(n,{config:je.value},null,8,["config"])]),_:1})]),_:1},512)])}}},K=50,za=60,Ca=80,Ke=320,Sa={__name:"VistaMamparaS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],hojaActiva:{type:String,default:"derecha",validator:T=>["izquierda","derecha"].includes(T)},direccionApertura:{type:String,default:"interior",validator:T=>["interior","exterior"].includes(T)},pasoLibre:{type:Boolean,default:!1}},setup(T,{expose:xe}){const s=T,W={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},X={roble:new Image,nogal:new Image};X.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,X.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const h=u(()=>{var F,C,D;const m=typeof s.colorMarco=="object"?(C=(F=s.colorMarco)==null?void 0:F.nombre)==null?void 0:C.toLowerCase():(D=s.colorMarco)==null?void 0:D.toLowerCase();return W[m]||"#ffffff"});function A(m,F=!1){var D,te,ve;const C=typeof s.colorMarco=="object"?(te=(D=s.colorMarco)==null?void 0:D.nombre)==null?void 0:te.toLowerCase():(ve=s.colorMarco)==null?void 0:ve.toLowerCase();return["roble","nogal"].includes(C)&&X[C]?{points:m,closed:!0,fillPatternImage:X[C],fillPatternRepeat:"repeat",fillPatternScale:{x:F?.15:.2,y:F?.15:.2},stroke:"black"}:{points:m,closed:!0,fill:h.value,stroke:"black"}}const w=u(()=>Math.min(Ke/s.ancho,Ke/s.alto,1)*.9),f=u(()=>za*w.value),e=u(()=>s.ancho*w.value),d=u(()=>s.alto*w.value),ue=u(()=>A([K,K,K+e.value,K,K+e.value-f.value,K+f.value,K+f.value,K+f.value])),R=u(()=>A([K+e.value,K,K+e.value,K+d.value,K+e.value-f.value,K+d.value-(s.pasoLibre?0:f.value),K+e.value-f.value,K+f.value])),oe=u(()=>A([K,K+d.value,K,K,K+f.value,K+f.value,K+f.value,K+d.value-(s.pasoLibre?0:f.value)])),P=u(()=>s.pasoLibre?null:A([K+e.value,K+d.value,K,K+d.value,K+f.value,K+d.value-f.value,K+e.value-f.value,K+d.value-f.value])),B=u(()=>{const m=Math.max(e.value-2*f.value,5),F=Math.max(d.value-f.value-(s.pasoLibre?0:f.value),5);return{x:K+f.value,y:K+f.value,width:m,height:F,fill:"#b3e5fc",stroke:"black"}}),_=u(()=>Math.max(6*w.value,f.value*.15)),t=u(()=>{const m=(B.value.width-_.value)/2;return{x:B.value.x,y:B.value.y,w:m,h:B.value.height}}),c=u(()=>{const m=(B.value.width-_.value)/2;return{x:B.value.x+m+_.value,y:B.value.y,w:m,h:B.value.height}}),v=u(()=>{const m=Ca*w.value,F=f.value*1.15,C=Math.min(t.value.w,c.value.w)*.45;return Math.min(Math.max(m,F),C)}),k=u(()=>A([t.value.x,t.value.y,t.value.x+t.value.w,t.value.y,t.value.x+t.value.w-v.value,t.value.y+v.value,t.value.x+v.value,t.value.y+v.value],!0)),y=u(()=>A([t.value.x+t.value.w,t.value.y,t.value.x+t.value.w,t.value.y+t.value.h,t.value.x+t.value.w-v.value,t.value.y+t.value.h-v.value,t.value.x+t.value.w-v.value,t.value.y+v.value],!0)),b=u(()=>A([t.value.x+t.value.w,t.value.y+t.value.h,t.value.x,t.value.y+t.value.h,t.value.x+v.value,t.value.y+t.value.h-v.value,t.value.x+t.value.w-v.value,t.value.y+t.value.h-v.value],!0)),O=u(()=>A([t.value.x,t.value.y+t.value.h,t.value.x,t.value.y,t.value.x+v.value,t.value.y+v.value,t.value.x+v.value,t.value.y+t.value.h-v.value],!0)),U=u(()=>A([c.value.x,c.value.y,c.value.x+c.value.w,c.value.y,c.value.x+c.value.w-v.value,c.value.y+v.value,c.value.x+v.value,c.value.y+v.value],!0)),Z=u(()=>A([c.value.x+c.value.w,c.value.y,c.value.x+c.value.w,c.value.y+c.value.h,c.value.x+c.value.w-v.value,c.value.y+c.value.h-v.value,c.value.x+c.value.w-v.value,c.value.y+v.value],!0)),i=u(()=>A([c.value.x+c.value.w,c.value.y+c.value.h,c.value.x,c.value.y+c.value.h,c.value.x+v.value,c.value.y+c.value.h-v.value,c.value.x+c.value.w-v.value,c.value.y+c.value.h-v.value],!0)),g=u(()=>A([c.value.x,c.value.y+c.value.h,c.value.x,c.value.y,c.value.x+v.value,c.value.y+v.value,c.value.x+v.value,c.value.y+c.value.h-v.value],!0)),I=u(()=>s.hojaActiva==="izquierda"?t.value.x+t.value.w-12:c.value.x+12),z=u(()=>B.value.y+B.value.height/2);function q(m){return s.direccionApertura==="interior"?0:Math.min(Math.max(m.w*.1,8*w.value),25*w.value)}function $(m,F){const C=F==="left",D=q(m)*(C?-1:1),ve=(C?m.x:m.x+m.w)+D,we=m.y+m.h/2,de=m.y+8,Ve=m.y+m.h-8,ae=C?m.x+m.w-8:m.x+8;return[{points:[ve,de,ae,we],stroke:"black",dash:[10,5],strokeWidth:2},{points:[ve,Ve,ae,we],stroke:"black",dash:[10,5],strokeWidth:2}]}const je=u(()=>$(t.value,"left")),Me=u(()=>$(c.value,"right")),ge=u(()=>s.direccionApertura==="interior"),be=u(()=>Math.max(28*w.value,f.value*.45)),Ce=u(()=>Math.min(Math.max(140*w.value,30*w.value),Math.min(t.value.h,c.value.h)*.4)),Se=u(()=>2*w.value);function L(m,F){const C=[];let D=m.h>2200*w.value?4:3;const te=Math.max(m.h-16*w.value,20);let ve=Ce.value;ve*D>te*.85&&(ve=te*.85/D);const we=(te-ve*D)/(D+1);for(let de=0;de<D;de++){const Ve=m.y+8*w.value+we*(de+1)+ve*de,ae=F==="left"?m.x-be.value/2+Se.value:m.x+m.w-be.value/2-Se.value;C.push({x:ae,y:Ve,width:be.value,height:ve,fill:"#888",stroke:"black",cornerRadius:2})}return C}const j=u(()=>ge.value?L(t.value,"left"):[]),M=u(()=>ge.value?L(c.value,"right"):[]),x=u(()=>Math.min(Math.max(s.ancho/100,20),40)),H=u(()=>({x:K+e.value/2-30,y:K+d.value+10,text:`${s.ancho}mm`,fontSize:x.value,fill:"black"})),n=u(()=>({x:K-25,y:K+d.value/2,text:`${s.alto}mm`,fontSize:x.value,fill:"black",rotation:-90,offsetX:x.value/2})),l=u(()=>({x:H.value.x,y:H.value.y+x.value+5,text:`Apertura ${s.direccionApertura.charAt(0).toUpperCase()}${s.direccionApertura.slice(1)}`,fontSize:Math.min(18,x.value*.8),fill:"black"})),o=ce(null);return xe({exportarImagen:()=>o.value?o.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null}),(m,F)=>{const C=ee("v-line"),D=ee("v-rect"),te=ee("v-text"),ve=ee("v-layer"),we=ee("v-stage");return p(),le("div",null,[a(we,{ref_key:"stageRef",ref:o,config:{width:420,height:420}},{default:r(()=>[a(ve,null,{default:r(()=>[a(C,{config:ue.value},null,8,["config"]),a(C,{config:R.value},null,8,["config"]),a(C,{config:oe.value},null,8,["config"]),P.value?(p(),N(C,{key:0,config:P.value},null,8,["config"])):re("",!0),a(D,{config:B.value},null,8,["config"]),a(C,{config:k.value},null,8,["config"]),a(C,{config:y.value},null,8,["config"]),a(C,{config:b.value},null,8,["config"]),a(C,{config:O.value},null,8,["config"]),a(C,{config:U.value},null,8,["config"]),a(C,{config:Z.value},null,8,["config"]),a(C,{config:i.value},null,8,["config"]),a(C,{config:g.value},null,8,["config"]),a(Pe,{x:I.value,y:z.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),(p(!0),le(ne,null,Ae(je.value,(de,Ve)=>(p(),N(C,{key:"apertura-left-"+Ve,config:de},null,8,["config"]))),128)),(p(!0),le(ne,null,Ae(Me.value,(de,Ve)=>(p(),N(C,{key:"apertura-right-"+Ve,config:de},null,8,["config"]))),128)),(p(!0),le(ne,null,Ae(j.value,(de,Ve)=>(p(),N(D,{key:"hl-"+Ve,config:de},null,8,["config"]))),128)),(p(!0),le(ne,null,Ae(M.value,(de,Ve)=>(p(),N(D,{key:"hr-"+Ve,config:de},null,8,["config"]))),128)),a(te,{config:H.value},null,8,["config"]),a(te,{config:n.value},null,8,["config"]),a(te,{config:l.value},null,8,["config"])]),_:1})]),_:1},512)])}}},wa={style:{"margin-bottom":"10px"}},Y=40,Ia=54,qa=98,Qe=20,Ze=300,Pa={__name:"VistaVentanaCorredera98",props:{ancho:Number,alto:Number,colorMarco:{type:String,default:"blanco"},hojasMoviles:{type:Number,default:"2"},hojaMovilSeleccionada:{type:Number,default:1},ordenHoja1AlFrente:{type:Boolean,default:!0},color:Object},setup(T,{expose:xe}){const s=ce(null);xe({exportarImagen:()=>{if(console.log("🖼️ exportarImagen llamado en VentanaCorredera"),console.log("🖼️ stageRef.value:",s.value),s.value)try{const n=s.value.getStage();console.log("🖼️ stage obtenido:",n),n.draw();const l=n.toDataURL({pixelRatio:1,quality:.9});return console.log("🖼️ dataURL generado:",l.substring(0,50)),l}catch(n){return console.error("❌ Error en exportarImagen:",n),null}return console.warn("⚠️ stageRef no disponible"),null}});const X={roble:null,nogal:null};aa(()=>{const n=(l,o)=>{const V=new Image;V.src=l,V.onload=()=>{X[o]=V}};n(la,"roble"),n(oa,"nogal")});const h=T,A=u(()=>h.colorMarco.toLowerCase());function w(n){const l=A.value.toLowerCase();return["roble","nogal"].includes(l)&&X[l]?{points:n,closed:!0,fillPatternImage:X[l],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:n,closed:!0,fill:P.value,stroke:"black"}}const f=ce(h.ordenHoja1AlFrente),e=u(()=>ue.value),d=u(()=>R.value);ze(()=>h.ordenHoja1AlFrente,n=>{f.value=n});const ue=u(()=>h.hojasMoviles===2||h.hojaMovilSeleccionada===1),R=u(()=>h.hojasMoviles===2||h.hojaMovilSeleccionada===2),oe={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},P=u(()=>{var l,o;const n=(o=(l=h.colorMarco)==null?void 0:l.toLowerCase)==null?void 0:o.call(l);return oe[n]||"#ffffff"}),B=u(()=>{const n=Ze/h.ancho,l=Ze/h.alto;return Math.min(n,l,1)*.9}),_=u(()=>Ia*B.value),t=u(()=>qa*B.value),c=u(()=>h.ancho*B.value),v=u(()=>h.alto*B.value),k=u(()=>Qe*B.value);function y(n){const l=h.colorMarco.toLowerCase();return["roble","nogal"].includes(l)&&X[l]?{points:n,closed:!0,fillPatternImage:X[l],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:n,closed:!0,fill:P.value,stroke:"black"}}const b=u(()=>y([Y,Y,Y+c.value,Y,Y+c.value-_.value,Y+_.value,Y+_.value,Y+_.value])),O=u(()=>y([Y+c.value,Y,Y+c.value,Y+v.value,Y+c.value-_.value,Y+v.value-_.value,Y+c.value-_.value,Y+_.value])),U=u(()=>y([Y+c.value,Y+v.value,Y,Y+v.value,Y+_.value,Y+v.value-_.value,Y+c.value-_.value,Y+v.value-_.value])),Z=u(()=>y([Y,Y+v.value,Y,Y,Y+_.value,Y+_.value,Y+_.value,Y+v.value-_.value])),i=u(()=>(c.value-_.value*2+Qe)/2),g=u(()=>v.value-_.value*2),I=u(()=>Y+_.value),z=u(()=>Y+_.value),q=u(()=>Y+c.value-_.value-i.value+k.value-t.value*.22),$=z,je=u(()=>f.value?[{points:[I.value,z.value,I.value+i.value,z.value,I.value+i.value-t.value,z.value+t.value,I.value+t.value,z.value+t.value],closed:!0,fill:P.value,stroke:"black"},{points:[I.value+i.value,z.value,I.value+i.value,z.value+g.value,I.value+i.value-t.value,z.value+g.value-t.value,I.value+i.value-t.value,z.value+t.value],closed:!0,fill:P.value,stroke:"black"},{points:[I.value+i.value,z.value+g.value,I.value,z.value+g.value,I.value+t.value,z.value+g.value-t.value,I.value+i.value-t.value,z.value+g.value-t.value],closed:!0,fill:P.value,stroke:"black"},{points:[I.value,z.value+g.value,I.value,z.value,I.value+t.value,z.value+t.value,I.value+t.value,z.value+g.value-t.value],closed:!0,fill:P.value,stroke:"black"}]:[{points:[I.value,z.value+g.value,I.value+t.value,z.value+g.value-t.value,I.value+i.value-t.value,z.value+g.value-t.value,I.value+i.value,z.value+g.value],closed:!0,fill:P.value,stroke:"black"},{points:[I.value,z.value+g.value,I.value,z.value,I.value+t.value,z.value+t.value,I.value+t.value,z.value+g.value-t.value],closed:!0,fill:P.value,stroke:"black"},{points:[I.value,z.value,I.value+i.value,z.value,I.value+i.value-t.value,z.value+t.value,I.value+t.value,z.value+t.value],closed:!0,fill:P.value,stroke:"black"},{points:[I.value+i.value,z.value,I.value+i.value,z.value+g.value,I.value+i.value-t.value,z.value+g.value-t.value,I.value+i.value-t.value,z.value+t.value],closed:!0,fill:P.value,stroke:"black"}]),Me=u(()=>f.value?[{points:[q.value,$.value,q.value+i.value,$.value,q.value+i.value-t.value,$.value+t.value,q.value+t.value,$.value+t.value],closed:!0,fill:P.value,stroke:"black"},{points:[q.value+i.value,$.value,q.value+i.value,$.value+g.value,q.value+i.value-t.value,$.value+g.value-t.value,q.value+i.value-t.value,$.value+t.value],closed:!0,fill:P.value,stroke:"black"},{points:[q.value+i.value,$.value+g.value,q.value,$.value+g.value,q.value+t.value,$.value+g.value-t.value,q.value+i.value-t.value,$.value+g.value-t.value],closed:!0,fill:P.value,stroke:"black"},{points:[q.value,$.value+g.value,q.value,$.value,q.value+t.value,$.value+t.value,q.value+t.value,$.value+g.value-t.value],closed:!0,fill:P.value,stroke:"black"}]:[{points:[q.value,$.value,q.value+i.value,$.value,q.value+i.value-t.value,$.value+t.value,q.value+t.value,$.value+t.value],closed:!0,fill:P.value,stroke:"black"},{points:[q.value+i.value,$.value,q.value+i.value,$.value+g.value,q.value+i.value-t.value,$.value+g.value-t.value,q.value+i.value-t.value,$.value+t.value],closed:!0,fill:P.value,stroke:"black"},{points:[q.value+i.value,$.value+g.value,q.value,$.value+g.value,q.value+t.value,$.value+g.value-t.value,q.value+i.value-t.value,$.value+g.value-t.value],closed:!0,fill:P.value,stroke:"black"},{points:[q.value,$.value+g.value,q.value,$.value,q.value+t.value,$.value+t.value,q.value+t.value,$.value+g.value-t.value],closed:!0,fill:P.value,stroke:"black"}]),ge=u(()=>{if(f.value)return{x:I.value+t.value,y:z.value+t.value,width:i.value-t.value*2,height:g.value-t.value*2,fill:"lightblue",stroke:"black"};const n=t.value*.35+B.value*50,l=t.value*1.3+B.value*1;return{x:I.value+n,y:z.value+t.value,width:i.value-l-15,height:g.value-t.value*2,fill:"lightblue",stroke:"black"}}),be=u(()=>{if(f.value){const n=t.value*.4+B.value*10,l=t.value*1.4+B.value*10;return{x:q.value+n+10,y:$.value+t.value,width:i.value-l-10,height:g.value-t.value*2,fill:"lightblue",stroke:"black"}}return{x:q.value+t.value,y:$.value+t.value,width:i.value-t.value*2,height:g.value-t.value*2,fill:"lightblue",stroke:"black"}}),Ce=u(()=>h.hojasMoviles===2||h.hojasMoviles===1&&h.hojaMovilSeleccionada===1?"→":"+"),Se=u(()=>h.hojasMoviles===2||h.hojasMoviles===1&&h.hojaMovilSeleccionada===2?"←":"+"),L=u(()=>({x:I.value+i.value/2-10,y:z.value+g.value/2+10,text:Ce.value,fontSize:30,fill:"black"})),j=u(()=>({x:q.value+i.value/2-10,y:$.value+g.value/2+10,text:Se.value,fontSize:30,fill:"black"})),M=u(()=>{const n=Math.max(h.ancho,h.alto);return Math.min(Math.max(n/100,20),40)}),x=u(()=>({x:Y+c.value/2-30,y:Y+v.value+10,text:`${h.ancho}mm`,fontSize:M.value,fill:"black"})),H=u(()=>({x:Y-25,y:Y+v.value/2,text:`${h.alto}mm`,fontSize:M.value,fill:"black",rotation:-90,offsetX:M.value/2}));return(n,l)=>{const o=ee("v-line"),V=ee("v-rect"),m=ee("v-text"),F=ee("v-layer"),C=ee("v-stage");return p(),le("div",null,[he("div",wa,[a(De,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=D=>f.value=D),label:"Hoja 1 adelante",density:"compact"},null,8,["modelValue"])]),a(C,{ref_key:"stageRef",ref:s,config:{width:400,height:400}},{default:r(()=>[a(F,null,{default:r(()=>[a(o,me(pe(b.value)),null,16),a(o,me(pe(O.value)),null,16),a(o,me(pe(U.value)),null,16),a(o,me(pe(Z.value)),null,16),f.value?(p(),le(ne,{key:0},[a(V,me(pe(be.value)),null,16),(p(!0),le(ne,null,Ae(Me.value,(D,te)=>(p(),N(o,Ie({key:"mitra-h2-"+te,ref_for:!0},w(D.points)),null,16))),128)),a(m,{x:q.value+i.value/2-10,y:Ee($)+g.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(V,me(pe(ge.value)),null,16),(p(!0),le(ne,null,Ae(je.value,(D,te)=>(p(),N(o,Ie({key:"mitra-h1-"+te,ref_for:!0},w(D.points)),null,16))),128)),a(m,{x:I.value+i.value/2-10,y:z.value+g.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)):(p(),le(ne,{key:1},[a(V,me(pe(ge.value)),null,16),(p(!0),le(ne,null,Ae(je.value,(D,te)=>(p(),N(o,Ie({key:"mitra-h1-"+te,ref_for:!0},w(D.points)),null,16))),128)),a(m,{x:I.value+i.value/2-10,y:z.value+g.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(V,me(pe(be.value)),null,16),(p(!0),le(ne,null,Ae(Me.value,(D,te)=>(p(),N(o,Ie({key:"mitra-h2-"+te,ref_for:!0},w(D.points)),null,16))),128)),a(m,{x:q.value+i.value/2-10,y:Ee($)+g.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)),a(m,me(pe(x.value)),null,16),a(m,me(pe(H.value)),null,16),a(m,me(pe(L.value)),null,16),a(m,me(pe(j.value)),null,16),e.value?(p(),N(Pe,{key:2,x:I.value+t.value-B.value*35,y:z.value+g.value/2,escalaManilla:B.value*4},null,8,["x","y","escalaManilla"])):re("",!0),d.value?(p(),N(Pe,{key:3,x:q.value+i.value-t.value+B.value*35,y:Ee($)+g.value/2,escalaManilla:B.value*4},null,8,["x","y","escalaManilla"])):re("",!0)]),_:1})]),_:1},512)])}}},Q=40,ea=300,Ua=54,La=80,Da={__name:"VistaVentanaMonorriel",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"},ladoApertura:{type:String,default:"derecha",validator:T=>["izquierda","derecha"].includes(T)}},setup(T,{expose:xe}){const s=T,W={roble:null,nogal:null};aa(()=>{const L=(j,M)=>{const x=new Image;x.src=j,x.onload=()=>W[M]=x};L(la,"roble"),L(oa,"nogal")});const X={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b",roble:"#c9a36b"},h=u(()=>{var L,j;return X[(j=(L=s.colorMarco)==null?void 0:L.toLowerCase)==null?void 0:j.call(L)]||"#ffffff"});function A(L){var M,x;const j=(x=(M=s.colorMarco)==null?void 0:M.toLowerCase)==null?void 0:x.call(M);return["roble","nogal"].includes(j)&&W[j]?{points:L,closed:!0,fillPatternImage:W[j],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:L,closed:!0,fill:h.value,stroke:"black"}}const w=ce(null),f=u(()=>Math.min(ea/s.ancho,ea/s.alto,1)*.9),e=u(()=>Ua*f.value),d=u(()=>La*f.value),ue=u(()=>s.ancho*f.value),R=u(()=>s.alto*f.value),oe=u(()=>s.ladoApertura==="derecha"),P=u(()=>A([Q,Q,Q+ue.value,Q,Q+ue.value-e.value,Q+e.value,Q+e.value,Q+e.value])),B=u(()=>A([Q+ue.value,Q,Q+ue.value,Q+R.value,Q+ue.value-e.value,Q+R.value-e.value,Q+ue.value-e.value,Q+e.value])),_=u(()=>A([Q+ue.value,Q+R.value,Q,Q+R.value,Q+e.value,Q+R.value-e.value,Q+ue.value-e.value,Q+R.value-e.value])),t=u(()=>A([Q,Q+R.value,Q,Q,Q+e.value,Q+e.value,Q+e.value,Q+R.value-e.value])),c=u(()=>Q+e.value),v=u(()=>Q+e.value),k=u(()=>Math.max(ue.value-2*e.value,5)),y=u(()=>Math.max(R.value-2*e.value,5)),b=u(()=>Math.max(k.value/2,10)),O=u(()=>oe.value?{x:c.value+b.value,y:v.value,w:b.value,h:y.value}:{x:c.value,y:v.value,w:b.value,h:y.value}),U=u(()=>oe.value?{x:c.value,y:v.value,w:b.value,h:y.value}:{x:c.value+b.value,y:v.value,w:b.value,h:y.value}),Z=u(()=>({x:O.value.x,y:O.value.y,width:O.value.w,height:O.value.h,fill:"lightblue",stroke:"black"}));function i(L,j,M,x){return[A([L,j,L+M,j,L+M-d.value,j+d.value,L+d.value,j+d.value]),A([L+M,j,L+M,j+x,L+M-d.value,j+x-d.value,L+M-d.value,j+d.value]),A([L+M,j+x,L,j+x,L+d.value,j+x-d.value,L+M-d.value,j+x-d.value]),A([L,j+x,L,j,L+d.value,j+d.value,L+d.value,j+x-d.value])]}const g=u(()=>i(U.value.x,U.value.y,U.value.w,U.value.h)),I=u(()=>({x:U.value.x+d.value,y:U.value.y+d.value,width:Math.max(U.value.w-2*d.value,5),height:Math.max(U.value.h-2*d.value,5),fill:"lightblue",stroke:"black"})),z=u(()=>{const L=U.value.x+d.value/2,j=U.value.x+U.value.w-d.value/2;return oe.value?L:j}),q=u(()=>U.value.y+U.value.h/2),$=u(()=>oe.value?"→":"←"),je=u(()=>U.value.x+U.value.w/2-10),Me=u(()=>U.value.y+U.value.h/2-15),ge=u(()=>Math.min(Math.max(Math.max(s.ancho,s.alto)/100,20),40)),be=u(()=>({x:Q+ue.value/2-30,y:Q+R.value+10,text:`${s.ancho}mm`,fontSize:ge.value,fill:"black"})),Ce=u(()=>({x:Q-25,y:Q+R.value/2,text:`${s.alto}mm`,fontSize:ge.value,fill:"black",rotation:-90,offsetX:ge.value/2}));return xe({exportarImagen:()=>{if(w.value){const L=w.value.getStage();return L.draw(),L.toDataURL({pixelRatio:1,quality:.9})}return null}}),(L,j)=>{const M=ee("v-line"),x=ee("v-rect"),H=ee("v-text"),n=ee("v-layer"),l=ee("v-stage");return p(),le("div",null,[a(l,{ref_key:"stageRef",ref:w,config:{width:400,height:400}},{default:r(()=>[a(n,null,{default:r(()=>[a(M,me(pe(P.value)),null,16),a(M,me(pe(B.value)),null,16),a(M,me(pe(_.value)),null,16),a(M,me(pe(t.value)),null,16),a(x,me(pe(Z.value)),null,16),a(x,me(pe(I.value)),null,16),(p(!0),le(ne,null,Ae(g.value,(o,V)=>(p(),N(M,Ie({key:"hm-"+V,ref_for:!0},o),null,16))),128)),a(Pe,{x:z.value,y:q.value,escalaManilla:f.value*4},null,8,["x","y","escalaManilla"]),a(H,{x:je.value,y:Me.value,text:$.value,fontSize:30,fontStyle:"bold",fill:"black"},null,8,["x","y","text"]),a(H,me(pe(be.value)),null,16),a(H,me(pe(Ce.value)),null,16)]),_:1})]),_:1},512)])}}},Na=Object.assign({name:"VistaVentanaCompuestaInterna"},{__name:"VistaVentanaCompuestaInterna",props:{ancho:{type:[Number,String],required:!0},alto:{type:[Number,String],required:!0},colorMarco:{type:[String,Object],default:"blanco"},orientacion:{type:String,default:"horizontal"},items:{type:Array,default:()=>[]},escala:{type:Number,default:1},x:{type:Number,default:0},y:{type:Number,default:0},pathPrefix:{type:String,default:""}},emits:["agregar","agregar-borde","editar-ventana","eliminar-ventana"],setup(T,{emit:xe}){const s=xe,W=ce(new Map),X=ce(new Map),h=T;function A(v){s("agregar",v)}function w(v){console.log("🔧 Editando ventana por path:",v),s("editar-ventana",v)}function f(v){s("eliminar-ventana",v)}function e(v,k){console.log("🔧 Click en botón editar:",k),v&&v.evt&&v.evt.stopPropagation&&v.evt.stopPropagation(),w(k)}function d(v,k){console.log("🗑️ Click en botón eliminar:",k),v&&v.evt&&v.evt.stopPropagation&&v.evt.stopPropagation(),f(k)}function ue(v){const k=Date.now(),y=X.value.get(v)||0,b=k-y;if(console.log(`👆 Click en ventana ${v}, tiempo desde último: ${b}ms`),b<400&&b>50){console.log("🎯 ¡DOBLE CLICK detectado! Editando ventana:",v),W.value.has(v)&&(clearTimeout(W.value.get(v)),W.value.delete(v)),X.value.delete(v),w(v);return}X.value.set(v,k),W.value.has(v)&&clearTimeout(W.value.get(v));const O=setTimeout(()=>{console.log("⏱️ Timer expirado para ventana:",v),X.value.delete(v),W.value.delete(v)},400);W.value.set(v,O)}ua(()=>{W.value.forEach(v=>clearTimeout(v)),W.value.clear(),X.value.clear()});const R=u(()=>Number(h.ancho)||1),oe=u(()=>Number(h.alto)||1),P=u(()=>h.items.filter(v=>v&&(typeof v.tipo=="number"||v.tipo==="compuesta")&&v.tipo!==null&&v.tipo!==void 0)),B=u(()=>{const v=P.value.length;if(!v)return[];const k=P.value.reduce((y,b)=>{const O=Number(b==null?void 0:b.sizePercent)||0;return y+O},0);return k>0?P.value.map(y=>{const b=Number(y==null?void 0:y.sizePercent)||0;return Math.max(0,Math.min(1,b/k))}):Array(v).fill(1/v)});ze(()=>h.items,()=>{console.log("🔄 Items cambiaron, forzando recálculo de segmentos")},{deep:!0});const _=u(()=>{console.log("🎯 INTERNA - RECALCULANDO SEGMENTOS"),console.log("Props colorMarco:",h.colorMarco);const v=[];let k=0,y=0;return P.value.forEach((b,O)=>{let U,Z;if(b.ancho&&b.alto)U=Number(b.ancho),Z=Number(b.alto),console.log(`📐 Ventana ${O} - Usando dimensiones específicas:`,{ancho:U,alto:Z});else{const q=B.value[O]||0;h.orientacion==="horizontal"?(U=R.value*q,Z=oe.value):(U=R.value,Z=oe.value*q),console.log(`📐 Ventana ${O} - Calculado por porcentaje:`,{ancho:U,alto:Z,porcentaje:q})}const i=h.x+(h.orientacion==="horizontal"?k*h.escala:0),g=h.y+(h.orientacion==="vertical"?y*h.escala:0),I=h.pathPrefix?`${h.pathPrefix}.${O}`:`${O}`,z={x:i,y:g,ancho:U,alto:Z,escala:h.escala,colorMarco:h.colorMarco};(b==null?void 0:b.tipo)==="compuesta"?v.push({key:"comp-"+O,path:I,isCompuesta:!0,props:{...z,orientacion:b.orientacion||"horizontal",items:b.items||[],pathPrefix:I}}):v.push({key:"simple-"+O,path:I,isCompuesta:!1,props:{...z,tipo:b.tipo,ladoApertura:b.ladoApertura||"izquierda",direccionApertura:b.direccionApertura||"interior"}}),h.orientacion==="horizontal"?k+=U:y+=Z}),v}),t=v=>{if(h.orientacion==="horizontal"){let k=h.x;for(let y=0;y<v;y++){const b=P.value[y];if(b!=null&&b.ancho)k+=Number(b.ancho)*h.escala;else{const O=B.value[y]||0;k+=R.value*O*h.escala}}return k}return h.x+R.value*h.escala/2},c=v=>{if(h.orientacion==="vertical"){let k=h.y;for(let y=0;y<v;y++){const b=P.value[y];if(b!=null&&b.alto)k+=Number(b.alto)*h.escala;else{const O=B.value[y]||0;k+=oe.value*O*h.escala}}return k}return h.y+oe.value*h.escala/2};return(v,k)=>{const y=ee("v-rect"),b=ee("v-circle"),O=ee("v-text"),U=ee("v-group"),Z=ee("VistaVentanaCompuestaInterna",!0);return p(),N(U,null,{default:r(()=>[(p(!0),le(ne,null,Ae(_.value,i=>(p(),le(ne,{key:i.key},[i.isCompuesta?(p(),N(Z,Ie({key:1,ref_for:!0},i.props,{"path-prefix":i.path,onAgregar:k[0]||(k[0]=g=>s("agregar",g)),onAgregarBorde:k[1]||(k[1]=g=>s("agregar-borde",g)),onEditarVentana:k[2]||(k[2]=g=>s("editar-ventana",g)),onEliminarVentana:k[3]||(k[3]=g=>s("eliminar-ventana",g))}),null,16,["path-prefix"])):(p(),N(U,{key:0},{default:r(()=>[a(va,Ie({ref_for:!0},i.props,{color:i.props.colorMarco,colorMarco:i.props.colorMarco}),null,16,["color","colorMarco"]),a(y,{x:i.props.x,y:i.props.y,width:i.props.ancho*i.props.escala,height:i.props.alto*i.props.escala,fill:"transparent",onClick:g=>ue(i.path),style:{cursor:"pointer"}},null,8,["x","y","width","height","onClick"]),a(b,{x:i.props.x+i.props.ancho*i.props.escala-15,y:i.props.y+10,radius:8,fill:"#2196f3",opacity:"0.8",onClick:g=>e(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(O,{x:i.props.x+i.props.ancho*i.props.escala-18,y:i.props.y+6,text:"✏",fontSize:"10",fill:"white",onClick:g=>e(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(b,{x:i.props.x+i.props.ancho*i.props.escala-35,y:i.props.y+10,radius:8,fill:"#f44336",opacity:"0.8",onClick:g=>d(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(O,{x:i.props.x+i.props.ancho*i.props.escala-38,y:i.props.y+6,text:"✖",fontSize:"10",fill:"white",onClick:g=>d(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"])]),_:2},1024))],64))),128)),(p(!0),le(ne,null,Ae(P.value.length+1,i=>(p(),N(U,{key:"plus-"+i,onClick:g=>A(i-1),style:{cursor:"pointer"}},{default:r(()=>[a(b,{x:t(i-1),y:c(i-1),radius:14,fill:"#fff",stroke:"#1976d2",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(O,{x:t(i-1)-7,y:c(i-1)-10,text:"+",fontSize:"24",fill:"#1976d2",fontStyle:"bold"},null,8,["x","y"])]),_:2},1032,["onClick"]))),128))]),_:1})}}}),Ra=fa(Na,[["__scopeId","data-v-86a7a837"]]),He=860,Xe=360,$a={__name:"VistaVentanaCompuestaDinamica",props:{ancho:{type:[Number,String],required:!0},alto:{type:[Number,String],required:!0},colorMarco:{type:[String,Object],default:"blanco"},orientacion:{type:String,default:"horizontal"},items:{type:Array,default:()=>[]},forceReRender:{type:Number,default:0}},emits:["agregar","agregar-borde","editar-ventana","eliminar-ventana"],setup(T,{emit:xe}){const s=xe,W=T,X=u(()=>Number(W.ancho)||1),h=u(()=>Number(W.alto)||1),A=u(()=>{const e=He/X.value,d=Xe/h.value,ue=Math.min(e,d);return Math.max(ue,.1)}),w=u(()=>{const e=X.value*A.value;return e<He?(He-e)/2+20:20}),f=u(()=>{const e=h.value*A.value;return e<Xe?(Xe-e)/2+20:20});return(e,d)=>{const ue=ee("v-rect"),R=ee("v-circle"),oe=ee("v-text"),P=ee("v-group"),B=ee("v-layer"),_=ee("v-stage");return p(),N(_,{config:{width:900,height:420}},{default:r(()=>[a(B,null,{default:r(()=>[a(ue,{x:0,y:0,width:900,height:420,stroke:"#444",strokeWidth:1}),(p(),N(Ra,{key:`interna-${T.forceReRender}`,ancho:T.ancho,alto:T.alto,colorMarco:T.colorMarco,orientacion:T.orientacion,items:T.items,escala:A.value,x:w.value,y:f.value,onAgregar:d[0]||(d[0]=t=>s("agregar",t)),onAgregarBorde:d[1]||(d[1]=t=>s("agregar-borde",t)),onEditarVentana:d[2]||(d[2]=t=>s("editar-ventana",t)),onEliminarVentana:d[3]||(d[3]=t=>s("eliminar-ventana",t))},null,8,["ancho","alto","colorMarco","orientacion","items","escala","x","y"])),a(P,{onClick:d[4]||(d[4]=t=>s("agregar-borde","arriba")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:w.value+X.value*A.value/2,y:f.value-15,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(oe,{x:w.value+X.value*A.value/2-7,y:f.value-25,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(P,{onClick:d[5]||(d[5]=t=>s("agregar-borde","abajo")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:w.value+X.value*A.value/2,y:f.value+h.value*A.value+15,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(oe,{x:w.value+X.value*A.value/2-7,y:f.value+h.value*A.value+5,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(P,{onClick:d[6]||(d[6]=t=>s("agregar-borde","izquierda")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:w.value-15,y:f.value+h.value*A.value/2,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(oe,{x:w.value-22,y:f.value+h.value*A.value/2-10,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(P,{onClick:d[7]||(d[7]=t=>s("agregar-borde","derecha")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:w.value+X.value*A.value+15,y:f.value+h.value*A.value/2,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(oe,{x:w.value+X.value*A.value+8,y:f.value+h.value*A.value/2-10,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1})]),_:1})]),_:1})}}},Ea={class:"d-flex align-center justify-space-between"},Ta={class:"text-h6"},Oa={class:"text-caption"},Ba=.45,Ha={__name:"AgregarVentanaModal2",props:{mostrar:Boolean,materiales:Array,colores:Array,tiposVidrio:Array,tiposVentana:Array,productosVidrio:Array,ventana:Object,materialDefault:[String,Number],colorDefault:[String,Number],tipoVidrioDefault:[String,Number],productoVidrioDefault:[String,Number]},emits:["update:mostrar","guardar"],setup(T,{emit:xe}){const s=T,W=xe,X=ce(s.mostrar);ze(()=>s.mostrar,n=>{X.value=n}),ze(X,n=>{W("update:mostrar",n)});const h=u(()=>!!s.ventana),A=()=>({tipo:2,sizePercent:null,ladoApertura:"izquierda",direccionApertura:"interior"});function w(){const n=Math.min(Math.max(Number(e.value.cantidadComp||2),2),8);if(e.value.cantidadComp=n,e.value.itemsComp||(e.value.itemsComp=[]),e.value.itemsComp.length<n){const l=n-e.value.itemsComp.length;for(let o=0;o<l;o++)e.value.itemsComp.push(A())}else e.value.itemsComp.length>n&&e.value.itemsComp.splice(n);e.value.itemsComp.forEach(l=>{l.tipo||(l.tipo=2)}),console.log("ajustarCantidadItems ejecutado, items finales:",e.value.itemsComp)}const f={tipo:null,ancho:null,alto:null,cantidad:1,material:s.materialDefault??null,color:s.colorDefault??null,tipoVidrio:s.tipoVidrioDefault??null,productoVidrioProveedor:s.productoVidrioDefault??null,hojas_totales:2,hojas_moviles:2,materiales:[],costo_total:0,costo_total_unitario:0,costo:0,precio_unitario:0,precio:0,hoja1AlFrente:!0,ladoApertura:"izquierda",direccionApertura:"interior",pasoLibre:!1,hojaActiva:"derecha",tipoVentanaIzquierda:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaDerecha:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaCentro:{tipo:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:null,hoja1AlFrente:!0},ancho_izquierda:null,ancho_centro:null,ancho_derecha:null,orientacionComp:"horizontal",cantidadComp:2,itemsComp:[A(),A()]},e=ce({...f,...s.ventana||{}}),d=[{id:2,nombre:"Fija"},{id:45,nombre:"Proyectante"},{id:3,nombre:"Corredera"},{id:49,nombre:"Abatible"},{id:50,nombre:"Puerta S60"}],ue=[{id:2,nombre:"Fija"},{id:3,nombre:"Corredera Sliding"},{id:45,nombre:"Proyectante S60"},{id:50,nombre:"Puerta S60"}];ze(()=>s.mostrar,n=>{n&&!s.ventana&&(e.value={...f,material:s.materialDefault??null,color:s.colorDefault??null,tipoVidrio:s.tipoVidrioDefault??null,productoVidrioProveedor:s.productoVidrioDefault??null,tipoVentanaIzquierda:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaDerecha:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"}]}}),n&&s.ventana&&(e.value={...f,...s.ventana})},{immediate:!0});const R=u(()=>e.value.tipoVidrio?s.productosVidrio.filter(n=>n.tipo_producto_id===e.value.tipoVidrio).flatMap(n=>n.colores_por_proveedor.map(l=>{var o;return{id:l.id,producto_id:n.id,proveedor_id:l.proveedor_id,nombre:`${n.nombre} (${((o=l.proveedor)==null?void 0:o.nombre)||"Proveedor desconocido"})`}})):[]),oe=u(()=>{const n=e.value.material??s.materialDefault;return s.tiposVentana.filter(l=>l.material_id===n)}),P=ce(null),B=()=>{X.value=!1};async function _(){if(e.value.tipo&&e.value.ancho&&e.value.alto&&e.value.cantidad&&e.value.color&&e.value.productoVidrioProveedor)try{const n=s.productosVidrio.flatMap(V=>V.colores_por_proveedor.map(m=>({id:m.id,producto_id:V.id,proveedor_id:m.proveedor_id}))).find(V=>V.id===e.value.productoVidrioProveedor),l={tipo_ventana_id:e.value.tipo,tipo:e.value.tipo,ancho:e.value.ancho,alto:e.value.alto,cantidad:e.value.cantidad,color_id:e.value.color,color:e.value.color,producto_vidrio_proveedor_id:e.value.productoVidrioProveedor,producto_id:n==null?void 0:n.producto_id,proveedor_id:n==null?void 0:n.proveedor_id,productoVidrio:n==null?void 0:n.producto_id,proveedorVidrio:n==null?void 0:n.proveedor_id,hojas_totales:[3,46].includes(e.value.tipo)?e.value.hojas_totales:void 0,hojas_moviles:[3,46].includes(e.value.tipo)?e.value.hojas_moviles:void 0,hojaMovilSeleccionada:[3,46].includes(e.value.tipo)?e.value.hojaMovilSeleccionada:void 0,hoja1AlFrente:[3,46].includes(e.value.tipo)?e.value.hoja1AlFrente:void 0,direccionApertura:e.value.direccionApertura,ladoApertura:e.value.ladoApertura,pasoLibre:[50,51].includes(e.value.tipo)?e.value.pasoLibre:void 0,hojaActiva:e.value.tipo===51?e.value.hojaActiva:void 0,tipoVidrio:e.value.tipoVidrio};console.log("Payload a calcular-materiales:",l);const{data:o}=await ia.post("/api/cotizador/calcular-materiales",l);e.value.costo_total_unitario=o.costo_unitario,e.value.costo_total=o.costo_unitario*e.value.cantidad,e.value.precio=Math.ceil(e.value.costo_total/(1-Ba)),e.value.materiales=o.materiales}catch{e.value.costo_total_unitario=0,e.value.costo_total=0,e.value.precio=0,e.value.materiales=[]}else e.value.costo_total_unitario=0,e.value.costo_total=0,e.value.precio=0,e.value.materiales=[]}const t=()=>{var n;if(!e.value.tipo||!e.value.ancho||!e.value.alto||!e.value.cantidad){alert("Completa todos los campos obligatorios");return}W("guardar",{...e.value,index:(n=s.ventana)==null?void 0:n.index}),B()};ze(()=>e.value.material,()=>{e.value.tipo=null}),ze(()=>[e.value.tipo,e.value.ancho,e.value.alto,e.value.cantidad,e.value.material,e.value.color,e.value.tipoVidrio,e.value.productoVidrioProveedor,e.value.direccionApertura,e.value.ladoApertura,e.value.pasoLibre],_,{immediate:!0}),ze(()=>e.value.productoVidrioProveedor,n=>{const l=s.productosVidrio.flatMap(o=>o.colores_por_proveedor.map(V=>({...o,cpp:V}))).find(o=>o.cpp.id===n);e.value.productoVidrio=l?l.id:null});const c=n=>{if(n==null)return!1;const l=Number(n);return!Number.isNaN(l)&&l===49||String(n).toLowerCase().includes("abat")},v=ce([]);ze(()=>{var n,l;return(l=(n=e.value)==null?void 0:n.itemsComp)==null?void 0:l.length},()=>{v.value=[]}),ze(()=>e.value.tipo,n=>{var l,o,V;Number(n)===54&&((l=e.value).orientacionComp??(l.orientacionComp="horizontal"),(o=e.value).cantidadComp??(o.cantidadComp=2),(V=e.value).itemsComp??(V.itemsComp=[A(),A()]))});const k=ce(!1),y=ce(null);function b(n){y.value=n,k.value=!0}function O(n){console.log("=== AGREGAR BORDE ==="),console.log("Posición:",n),console.log("Orientación actual:",e.value.orientacionComp),console.log("Items ANTES:",JSON.stringify(e.value.itemsComp,null,2));const l=["arriba","abajo"].includes(n)?"vertical":"horizontal";if(console.log("Nueva orientación necesaria:",l),e.value.orientacionComp!==l){console.log("Orientación cambió, envolviendo items existentes...");const o=[...e.value.itemsComp],V={tipo:"compuesta",orientacion:e.value.orientacionComp,items:o};e.value.itemsComp=[V],e.value.orientacionComp=l,console.log("Items después de envolver:",JSON.stringify(e.value.itemsComp,null,2))}else console.log("Orientación NO cambió, no envolviendo");switch(n){case"arriba":case"izquierda":y.value=0;break;case"abajo":case"derecha":y.value=e.value.itemsComp.length;break}console.log("Índice para insertar:",y.value),console.log("Orientación final:",e.value.orientacionComp),console.log("=== FIN DEBUG ==="),k.value=!0}function U(n){const l=A();l.tipo=n||2,e.value.itemsComp.splice(y.value,0,l),e.value.itemsComp=[...e.value.itemsComp],L.value++,console.log("Items después de agregar:",e.value.itemsComp),k.value=!1}function Z(){const n={tipo:"compuesta",orientacion:"horizontal",items:[{tipo:2,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:2,ladoApertura:"izquierda",direccionApertura:"interior"}]};e.value.itemsComp.splice(y.value,0,n),L.value++,k.value=!1}const i=ce(null),g=ce(!1),I=ce("");function z(n){console.log("=== EDITAR VENTANA INDIVIDUAL ==="),console.log("Path:",n),I.value=n;const l=Ce(n);if(l){const o=q(n);i.value={tipo:l.tipo||2,ancho:o.ancho,alto:o.alto,sizePercent:l.sizePercent||null,ladoApertura:l.ladoApertura||"izquierda",direccionApertura:l.direccionApertura||"interior",...l},console.log("Dimensiones reales calculadas:",o),console.log("Datos de ventana a editar:",i.value),g.value=!0}else console.error("No se encontró ventana en path:",n)}function q(n){const l=n.split(".").map(Number);let o=e.value.ancho||2e3,V=e.value.alto||2e3,m=e.value.orientacionComp||"horizontal",F=e.value.itemsComp;console.log("🔍 Calculando dimensiones para path:",n),console.log("Dimensiones iniciales:",{ancho:o,alto:V,orientacion:m});for(let D=0;D<l.length;D++){const te=l[D],ve=F[te];if(!ve){console.error("Item no encontrado en nivel",D,"índice",te);break}console.log(`Nivel ${D}, índice ${te}:`,ve);const we=F.length,de=F.map($e=>Number($e.sizePercent)||0),Ve=de.reduce(($e,ta)=>$e+ta,0);let ae;if(Ve>0?ae=de[te]/Ve:ae=1/we,console.log(`Porcentaje del item en este nivel: ${ae} (${(ae*100).toFixed(1)}%)`),m==="horizontal"?o=o*ae:V=V*ae,console.log(`Nuevas dimensiones: ${o} x ${V}`),D===l.length-1)break;if(ve.tipo==="compuesta")m=ve.orientacion||"horizontal",F=ve.items||[],console.log(`Navegando a compuesta con orientación: ${m}`);else{console.error("Item no es compuesta pero no es el último nivel");break}}const C={ancho:Math.round(o),alto:Math.round(V)};return console.log("✅ Dimensiones finales calculadas:",C),C}const $=u(()=>{const n=Number(i.value.ancho)||0,l=Number(i.value.alto)||0;return n*l/1e6}),je=u(()=>{const n=$.value,l=i.value.tipo;return n*({2:15e4,3:2e5,45:22e4,49:25e4,50:28e4}[l]||15e4)});function Me(n){const l=d.find(o=>o.id===n);return l?l.nombre:`Tipo ${n}`}function ge(){var l;function n(o,V,m){var F;if(o.tipo==="compuesta")return((F=o.items)==null?void 0:F.reduce((C,D)=>C+n(D,V,m),0))||0;{const C=o.ancho||V,D=o.alto||m;return C*D/1e6*({2:15e4,3:2e5,45:22e4,49:25e4,50:28e4}[o.tipo]||15e4)}}return((l=e.value.itemsComp)==null?void 0:l.reduce((o,V)=>o+n(V,e.value.ancho,e.value.alto),0))||0}const be=u(()=>ge());function Ce(n){var m;const l=n.split(".").map(Number);let o=e.value.itemsComp;console.log("Navegando path:",n,"indices:",l),console.log("Items iniciales:",o);for(let F=0;F<l.length-1;F++){const C=l[F];if(console.log(`Navegando índice ${F}: ${C}`),((m=o[C])==null?void 0:m.tipo)==="compuesta")o=o[C].items,console.log("Items en nivel",F+1,":",o);else return console.error("No es compuesta en índice",C),null}const V=l[l.length-1];return console.log("Índice final:",V,"Item encontrado:",o[V]),o[V]}function Se(n,l){var F;const o=n.split(".").map(Number);let V=e.value.itemsComp;for(let C=0;C<o.length-1;C++){const D=o[C];if(((F=V[D])==null?void 0:F.tipo)==="compuesta")V=V[D].items;else return console.error("Error: no es compuesta en índice",D),!1}const m=o[o.length-1];if(V[m]){const C={...V[m],tipo:l.tipo,ancho:l.ancho,alto:l.alto,sizePercent:l.sizePercent,ladoApertura:l.ladoApertura,direccionApertura:l.direccionApertura};return V[m]=C,console.log("Ventana actualizada:",V[m]),e.value.itemsComp=JSON.parse(JSON.stringify(e.value.itemsComp)),e.value={...e.value},na(()=>{console.log("✅ Forzando re-render después de actualizar ventana")}),!0}return!1}const L=ce(0);function j(){console.log("=== GUARDANDO CAMBIOS ==="),console.log("Datos a guardar:",i.value),console.log("Path:",I.value),Se(I.value,{tipo:i.value.tipo,ancho:i.value.ancho,alto:i.value.alto,sizePercent:i.value.sizePercent,ladoApertura:i.value.ladoApertura,direccionApertura:i.value.direccionApertura})?(console.log("✅ Ventana actualizada correctamente"),M(),L.value++,console.log("🔄 Forzando re-render con key:",L.value),g.value=!1):(console.error("❌ Error al actualizar ventana"),alert("Error al actualizar la ventana"))}function M(){console.log("=== DEBUG ITEMS COMPUESTA ==="),console.log("Items actuales:",JSON.stringify(e.value.itemsComp,null,2)),console.log("Orientación:",e.value.orientacionComp),console.log("Dimensiones contenedor:",{ancho:e.value.ancho,alto:e.value.alto}),console.log("=== FIN DEBUG ===")}function x(n){console.log("=== ELIMINAR VENTANA ==="),console.log("Path:",n),confirm("¿Estás seguro de eliminar esta ventana?")&&(H(n)?(console.log("✅ Ventana eliminada correctamente"),L.value++):(console.error("❌ Error al eliminar ventana"),alert("Error al eliminar la ventana")))}function H(n){var C;const l=n.split(".").map(Number);let o=e.value.itemsComp,V=null,m=null;for(let D=0;D<l.length-1;D++){const te=l[D];if(V=o,m=te,((C=o[te])==null?void 0:C.tipo)==="compuesta")o=o[te].items;else return console.error("Error: no es compuesta en índice",te),!1}const F=l[l.length-1];if(V===null&&(V={items:e.value.itemsComp},o=e.value.itemsComp),o[F]){if(o.splice(F,1),console.log("Ventana eliminada. Items restantes:",o.length),o.length===1&&V!==null&&m!==null){const D=o[0];V.items?V.items[m]=D:V[m]=D,console.log("Compuesta simplificada porque quedó solo 1 item")}return e.value.itemsComp.length===0&&(e.value.itemsComp=[A(),A()],console.log("Sin items restantes, reiniciando con defaults")),e.value.itemsComp=[...e.value.itemsComp],!0}return!1}return(n,l)=>(p(),le(ne,null,[a(Te,{modelValue:X.value,"onUpdate:modelValue":l[53]||(l[53]=o=>X.value=o),"max-width":"1200px",persistent:""},{default:r(()=>[a(Le,{class:"pa-4"},{default:r(()=>[a(Oe,{class:"text-h5"},{default:r(()=>[ye(_e(h.value?"Editar ventana":"Agregar ventana"),1)]),_:1}),a(Ne,{class:"mb-4"}),a(ha,{ref_key:"formRef",ref:P,onSubmit:ra(t,["prevent"])},{default:r(()=>[a(se,{dense:""},{default:r(()=>[a(S,{cols:"12",md:"4"},{default:r(()=>[a(fe,{modelValue:e.value.tipo,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.tipo=o),items:oe.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","items","rules"])]),_:1}),a(S,{cols:"6",md:"2"},{default:r(()=>[a(ke,{modelValue:e.value.ancho,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.ancho=o),modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",min:"1",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1}),a(S,{cols:"6",md:"2"},{default:r(()=>[a(ke,{modelValue:e.value.alto,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",min:"1",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1}),a(S,{cols:"6",md:"2"},{default:r(()=>[a(ke,{modelValue:e.value.cantidad,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.cantidad=o),modelModifiers:{number:!0},label:"Cantidad",type:"number",min:"1",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),a(se,{dense:""},{default:r(()=>[a(S,{cols:"6",md:"3"},{default:r(()=>[a(fe,{modelValue:e.value.material,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.material=o),items:T.materiales,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(S,{cols:"6",md:"3"},{default:r(()=>[a(fe,{modelValue:e.value.color,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.color=o),items:T.colores,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(S,{cols:"6",md:"3"},{default:r(()=>[a(fe,{modelValue:e.value.tipoVidrio,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.tipoVidrio=o),items:T.tiposVidrio,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(S,{cols:"6",md:"3"},{default:r(()=>[a(fe,{modelValue:e.value.productoVidrioProveedor,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.productoVidrioProveedor=o),items:R.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),e.value.tipo===47?(p(),N(se,{key:0,dense:""},{default:r(()=>[a(S,{cols:"4"},{default:r(()=>[a(ke,{modelValue:e.value.ancho_izquierda,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.ancho_izquierda=o),modelModifiers:{number:!0},label:"Ancho izquierda (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(S,{cols:"4"},{default:r(()=>[a(ke,{modelValue:e.value.ancho_centro,"onUpdate:modelValue":l[9]||(l[9]=o=>e.value.ancho_centro=o),modelModifiers:{number:!0},label:"Ancho centro (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(S,{cols:"4"},{default:r(()=>[a(ke,{modelValue:e.value.ancho_derecha,"onUpdate:modelValue":l[10]||(l[10]=o=>e.value.ancho_derecha=o),modelModifiers:{number:!0},label:"Ancho derecha (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})):re("",!0),e.value.tipo===47?(p(),N(se,{key:1,dense:""},{default:r(()=>[a(S,{cols:"6"},{default:r(()=>[a(De,{modelValue:e.value.tipoVentanaIzquierda.compuesta,"onUpdate:modelValue":l[11]||(l[11]=o=>e.value.tipoVentanaIzquierda.compuesta=o),label:"¿Ventana izquierda compuesta?",color:"primary"},null,8,["modelValue"])]),_:1}),a(S,{cols:"6"},{default:r(()=>[a(De,{modelValue:e.value.tipoVentanaDerecha.compuesta,"onUpdate:modelValue":l[12]||(l[12]=o=>e.value.tipoVentanaDerecha.compuesta=o),label:"¿Ventana derecha compuesta?",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})):re("",!0),e.value.tipo===47?(p(),le(ne,{key:2},[a(se,{dense:""},{default:r(()=>[a(S,{cols:"12"},{default:r(()=>l[64]||(l[64]=[he("h4",null,"Ventana Izquierda",-1)])),_:1}),e.value.tipoVentanaIzquierda.compuesta?(p(),le(ne,{key:0},[a(S,{cols:"6"},{default:r(()=>[l[65]||(l[65]=he("h5",null,"Parte superior",-1)),a(fe,{modelValue:e.value.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":l[13]||(l[13]=o=>e.value.tipoVentanaIzquierda.partes[0].tipo=o),items:d,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(ke,{modelValue:e.value.tipoVentanaIzquierda.partes[0].alto,"onUpdate:modelValue":l[14]||(l[14]=o=>e.value.tipoVentanaIzquierda.partes[0].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaIzquierda.partes[0].tipo)?(p(),le(ne,{key:0},[a(ie,{modelValue:e.value.tipoVentanaIzquierda.partes[0].ladoApertura,"onUpdate:modelValue":l[15]||(l[15]=o=>e.value.tipoVentanaIzquierda.partes[0].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ie,{modelValue:e.value.tipoVentanaIzquierda.partes[0].direccionApertura,"onUpdate:modelValue":l[16]||(l[16]=o=>e.value.tipoVentanaIzquierda.partes[0].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1}),a(S,{cols:"6"},{default:r(()=>[l[66]||(l[66]=he("h5",null,"Parte inferior",-1)),a(fe,{modelValue:e.value.tipoVentanaIzquierda.partes[1].tipo,"onUpdate:modelValue":l[17]||(l[17]=o=>e.value.tipoVentanaIzquierda.partes[1].tipo=o),items:d,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(ke,{modelValue:e.value.tipoVentanaIzquierda.partes[1].alto,"onUpdate:modelValue":l[18]||(l[18]=o=>e.value.tipoVentanaIzquierda.partes[1].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaIzquierda.partes[1].tipo)?(p(),le(ne,{key:0},[a(ie,{modelValue:e.value.tipoVentanaIzquierda.partes[1].ladoApertura,"onUpdate:modelValue":l[19]||(l[19]=o=>e.value.tipoVentanaIzquierda.partes[1].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ie,{modelValue:e.value.tipoVentanaIzquierda.partes[1].direccionApertura,"onUpdate:modelValue":l[20]||(l[20]=o=>e.value.tipoVentanaIzquierda.partes[1].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1})],64)):(p(),le(ne,{key:1},[a(S,{cols:"4"},{default:r(()=>[a(fe,{modelValue:e.value.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":l[21]||(l[21]=o=>e.value.tipoVentanaIzquierda.partes[0].tipo=o),items:d,"item-title":"nombre","item-value":"id",label:"Tipo de ventana izquierda",outlined:""},null,8,["modelValue"])]),_:1}),c(e.value.tipoVentanaIzquierda.partes[0].tipo)?(p(),N(S,{key:0,cols:"4"},{default:r(()=>[a(ie,{modelValue:e.value.tipoVentanaIzquierda.ladoApertura,"onUpdate:modelValue":l[22]||(l[22]=o=>e.value.tipoVentanaIzquierda.ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1})):re("",!0),c(e.value.tipoVentanaIzquierda.partes[0].tipo)?(p(),N(S,{key:1,cols:"4"},{default:r(()=>[a(ie,{modelValue:e.value.tipoVentanaIzquierda.direccionApertura,"onUpdate:modelValue":l[23]||(l[23]=o=>e.value.tipoVentanaIzquierda.direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})):re("",!0)],64))]),_:1}),a(se,{dense:""},{default:r(()=>[a(S,{cols:"12"},{default:r(()=>l[67]||(l[67]=[he("h4",null,"Ventana Centro",-1)])),_:1}),a(S,{cols:"4"},{default:r(()=>[a(fe,{modelValue:e.value.tipoVentanaCentro.tipo,"onUpdate:modelValue":l[24]||(l[24]=o=>e.value.tipoVentanaCentro.tipo=o),items:ue,"item-title":"nombre","item-value":"id",label:"Tipo de ventana centro",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),e.value.tipoVentanaCentro&&[3,46].includes(e.value.tipoVentanaCentro.tipo)?(p(),le(ne,{key:0},[a(S,{cols:"4"},{default:r(()=>[a(fe,{modelValue:e.value.tipoVentanaCentro.hojas_totales,"onUpdate:modelValue":l[25]||(l[25]=o=>e.value.tipoVentanaCentro.hojas_totales=o),items:[1,2,3,4],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(S,{cols:"4"},{default:r(()=>[a(fe,{modelValue:e.value.tipoVentanaCentro.hojas_moviles,"onUpdate:modelValue":l[26]||(l[26]=o=>e.value.tipoVentanaCentro.hojas_moviles=o),items:[1,2,3,4],label:"Hojas móviles",disabled:!e.value.tipoVentanaCentro.hojas_totales,outlined:"",color:"primary"},null,8,["modelValue","disabled"])]),_:1}),e.value.tipoVentanaCentro.hojas_moviles===1?(p(),N(S,{key:0,cols:"12"},{default:r(()=>[a(ie,{modelValue:e.value.tipoVentanaCentro.hojaMovilSeleccionada,"onUpdate:modelValue":l[27]||(l[27]=o=>e.value.tipoVentanaCentro.hojaMovilSeleccionada=o),row:"",label:"Selecciona la hoja que se mueve"},{default:r(()=>[a(E,{label:"Mover hoja izquierda (1)",value:1}),a(E,{label:"Mover hoja derecha (2)",value:2})]),_:1},8,["modelValue"])]),_:1})):re("",!0)],64)):re("",!0)]),_:1}),a(se,{dense:""},{default:r(()=>[a(S,{cols:"12"},{default:r(()=>l[68]||(l[68]=[he("h4",null,"Ventana Derecha",-1)])),_:1}),e.value.tipoVentanaDerecha.compuesta?(p(),le(ne,{key:0},[a(S,{cols:"6"},{default:r(()=>[l[69]||(l[69]=he("h5",null,"Parte superior",-1)),a(fe,{modelValue:e.value.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":l[28]||(l[28]=o=>e.value.tipoVentanaDerecha.partes[0].tipo=o),items:d,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(ke,{modelValue:e.value.tipoVentanaDerecha.partes[0].alto,"onUpdate:modelValue":l[29]||(l[29]=o=>e.value.tipoVentanaDerecha.partes[0].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaDerecha.partes[0].tipo)?(p(),le(ne,{key:0},[a(ie,{modelValue:e.value.tipoVentanaDerecha.partes[0].ladoApertura,"onUpdate:modelValue":l[30]||(l[30]=o=>e.value.tipoVentanaDerecha.partes[0].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ie,{modelValue:e.value.tipoVentanaDerecha.partes[0].direccionApertura,"onUpdate:modelValue":l[31]||(l[31]=o=>e.value.tipoVentanaDerecha.partes[0].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1}),a(S,{cols:"6"},{default:r(()=>[l[70]||(l[70]=he("h5",null,"Parte inferior",-1)),a(fe,{modelValue:e.value.tipoVentanaDerecha.partes[1].tipo,"onUpdate:modelValue":l[32]||(l[32]=o=>e.value.tipoVentanaDerecha.partes[1].tipo=o),items:d,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(ke,{modelValue:e.value.tipoVentanaDerecha.partes[1].alto,"onUpdate:modelValue":l[33]||(l[33]=o=>e.value.tipoVentanaDerecha.partes[1].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaDerecha.partes[1].tipo)?(p(),le(ne,{key:0},[a(ie,{modelValue:e.value.tipoVentanaDerecha.partes[1].ladoApertura,"onUpdate:modelValue":l[34]||(l[34]=o=>e.value.tipoVentanaDerecha.partes[1].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ie,{modelValue:e.value.tipoVentanaDerecha.partes[1].direccionApertura,"onUpdate:modelValue":l[35]||(l[35]=o=>e.value.tipoVentanaDerecha.partes[1].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1})],64)):(p(),le(ne,{key:1},[a(S,{cols:"4"},{default:r(()=>[a(fe,{modelValue:e.value.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":l[36]||(l[36]=o=>e.value.tipoVentanaDerecha.partes[0].tipo=o),items:d,"item-title":"nombre","item-value":"id",label:"Tipo de ventana derecha",outlined:""},null,8,["modelValue"])]),_:1}),c(e.value.tipoVentanaDerecha.partes[0].tipo)?(p(),N(S,{key:0,cols:"4"},{default:r(()=>[a(ie,{modelValue:e.value.tipoVentanaDerecha.ladoApertura,"onUpdate:modelValue":l[37]||(l[37]=o=>e.value.tipoVentanaDerecha.ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1})):re("",!0),c(e.value.tipoVentanaDerecha.partes[0].tipo)?(p(),N(S,{key:1,cols:"4"},{default:r(()=>[a(ie,{modelValue:e.value.tipoVentanaDerecha.direccionApertura,"onUpdate:modelValue":l[38]||(l[38]=o=>e.value.tipoVentanaDerecha.direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})):re("",!0)],64))]),_:1})],64)):re("",!0),[3,46,52].includes(e.value.tipo)?(p(),N(se,{key:3},{default:r(()=>[a(S,{cols:"6",md:"3"},{default:r(()=>[a(fe,{modelValue:e.value.hojas_totales,"onUpdate:modelValue":l[39]||(l[39]=o=>e.value.hojas_totales=o),items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(S,{cols:"6",md:"3"},{default:r(()=>[a(fe,{modelValue:e.value.hojas_moviles,"onUpdate:modelValue":l[40]||(l[40]=o=>e.value.hojas_moviles=o),items:[1,2,3,4],label:"Hojas móviles",disabled:!e.value.hojas_totales,rules:[o=>!o||o<=e.value.hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","disabled","rules"])]),_:1}),e.value.hojas_moviles===1?(p(),N(S,{key:0,cols:"12",md:"6"},{default:r(()=>[a(ie,{modelValue:e.value.hojaMovilSeleccionada,"onUpdate:modelValue":l[41]||(l[41]=o=>e.value.hojaMovilSeleccionada=o),row:"",label:"Selecciona la hoja que se mueve"},{default:r(()=>[a(E,{label:"Mover hoja izquierda (1)",value:1}),a(E,{label:"Mover hoja derecha (2)",value:2})]),_:1},8,["modelValue"])]),_:1})):re("",!0)]),_:1})):re("",!0),e.value.tipo===50?(p(),N(se,{key:4,dense:""},{default:r(()=>[a(S,{cols:"12",md:"4"},{default:r(()=>[a(ie,{modelValue:e.value.ladoApertura,"onUpdate:modelValue":l[42]||(l[42]=o=>e.value.ladoApertura=o),label:"Lado apertura",row:""},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(S,{cols:"12",md:"4"},{default:r(()=>[a(ie,{modelValue:e.value.direccionApertura,"onUpdate:modelValue":l[43]||(l[43]=o=>e.value.direccionApertura=o),label:"Apertura",row:""},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1}),a(S,{cols:"12",md:"4"},{default:r(()=>[a(De,{modelValue:e.value.pasoLibre,"onUpdate:modelValue":l[44]||(l[44]=o=>e.value.pasoLibre=o),inset:"",color:"primary",label:e.value.pasoLibre?"Paso libre (sin perfil inferior)":"Paso cerrado"},null,8,["modelValue","label"])]),_:1})]),_:1})):re("",!0),e.value.tipo===51?(p(),N(se,{key:5,dense:""},{default:r(()=>[a(S,{cols:"12",md:"4"},{default:r(()=>[a(ie,{modelValue:e.value.hojaActiva,"onUpdate:modelValue":l[45]||(l[45]=o=>e.value.hojaActiva=o),label:"Hoja activa",row:""},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(S,{cols:"12",md:"4"},{default:r(()=>[a(ie,{modelValue:e.value.direccionApertura,"onUpdate:modelValue":l[46]||(l[46]=o=>e.value.direccionApertura=o),label:"Apertura",row:""},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1}),a(S,{cols:"12",md:"4"},{default:r(()=>[a(De,{modelValue:e.value.pasoLibre,"onUpdate:modelValue":l[47]||(l[47]=o=>e.value.pasoLibre=o),inset:"",color:"primary",label:e.value.pasoLibre?"Paso libre (sin perfil inferior)":"Paso cerrado"},null,8,["modelValue","label"])]),_:1})]),_:1})):re("",!0),e.value.tipo===53?(p(),N(se,{key:6,dense:""},{default:r(()=>[a(S,{cols:"12",md:"6"},{default:r(()=>[a(ie,{modelValue:e.value.ladoApertura,"onUpdate:modelValue":l[48]||(l[48]=o=>e.value.ladoApertura=o),label:"Lado de apertura (movimiento)",row:""},{default:r(()=>[a(E,{label:"Hacia la derecha",value:"derecha"}),a(E,{label:"Hacia la izquierda",value:"izquierda"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):re("",!0),e.value.tipo===54?(p(),N(Le,{key:7,class:"pa-3",variant:"tonal"},{default:r(()=>[a(se,{dense:""},{default:r(()=>[a(S,{cols:"12",sm:"3"},{default:r(()=>[a(fe,{modelValue:e.value.orientacionComp,"onUpdate:modelValue":l[49]||(l[49]=o=>e.value.orientacionComp=o),items:[{title:"Horizontal",value:"horizontal"},{title:"Vertical",value:"vertical"}],label:"Orientación",density:"comfortable"},null,8,["modelValue"])]),_:1}),a(S,{cols:"12",sm:"3"},{default:r(()=>[a(ke,{modelValue:e.value.cantidadComp,"onUpdate:modelValue":l[50]||(l[50]=o=>e.value.cantidadComp=o),modelModifiers:{number:!0},type:"number",min:"2",max:"8",label:"Cantidad de ventanas",density:"comfortable",onBlur:l[51]||(l[51]=o=>w())},null,8,["modelValue"])]),_:1})]),_:1}),a(Ne,{class:"my-2"}),a(se,{dense:""},{default:r(()=>[(p(!0),le(ne,null,Ae(e.value.itemsComp,(o,V)=>(p(),N(S,{key:"comp-item-"+V,cols:"12",md:"6"},{default:r(()=>[a(Le,{class:"pa-3"},{default:r(()=>[he("div",Ea,[he("strong",null,"Sección "+_e(V+1),1),a(ke,{modelValue:o.sizePercent,"onUpdate:modelValue":m=>o.sizePercent=m,modelModifiers:{number:!0},type:"number",min:"0",max:"100",suffix:"%",label:"Tamaño",density:"compact",style:{"max-width":"140px"}},null,8,["modelValue","onUpdate:modelValue"])]),a(fe,{modelValue:o.tipo,"onUpdate:modelValue":m=>o.tipo=m,items:d,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue"]),c(o.tipo)?(p(),le(ne,{key:0},[a(ie,{modelValue:o.ladoApertura,"onUpdate:modelValue":m=>o.ladoApertura=m,row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),a(ie,{modelValue:o.direccionApertura,"onUpdate:modelValue":m=>o.direccionApertura=m,row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):re("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(qe,{type:"info",variant:"text",density:"compact",class:"mt-2"},{default:r(()=>l[71]||(l[71]=[ye(" Si no defines porcentajes, las secciones se reparten por igual. ")])),_:1})]),_:1})):re("",!0),a(se,null,{default:r(()=>[a(S,{cols:"12"},{default:r(()=>{var o,V,m,F,C,D,te,ve,we,de,Ve;return[e.value.tipo===2?(p(),N(sa,{key:0,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((o=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:o.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===45?(p(),N(ca,{key:1,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((V=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:V.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===3?(p(),N(pa,{key:2,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((m=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:m.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===52?(p(),N(Pa,{key:3,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((F=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:F.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===46?(p(),N(da,{key:4,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((C=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:C.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===53?(p(),N(Da,{key:5,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((D=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:D.nombre)||"blanco","lado-apertura":e.value.ladoApertura},null,8,["ancho","alto","color-marco","lado-apertura"])):e.value.tipo===47?(p(),N(ma,{key:6,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((te=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:te.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"ancho-izquierda":e.value.ancho_izquierda,"ancho-centro":e.value.ancho_centro,"ancho-derecha":e.value.ancho_derecha,"tipo-ventana-izquierda":e.value.tipoVentanaIzquierda,"tipo-ventana-centro":e.value.tipoVentanaCentro,"tipo-ventana-derecha":e.value.tipoVentanaDerecha},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","ancho-izquierda","ancho-centro","ancho-derecha","tipo-ventana-izquierda","tipo-ventana-centro","tipo-ventana-derecha"])):e.value.tipo===49?(p(),N(Aa,{key:7,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((ve=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:ve.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"lado-inicial":e.value.ladoApertura||"izquierda",direccionApertura:e.value.direccionApertura,"onUpdate:direccionApertura":l[52]||(l[52]=ae=>e.value.direccionApertura=ae)},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-inicial","direccionApertura"])):e.value.tipo===50?(p(),N(ja,{key:8,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((we=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:we.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"lado-apertura":e.value.ladoApertura,"direccion-apertura":e.value.direccionApertura,"paso-libre":e.value.pasoLibre},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-apertura","direccion-apertura","paso-libre"])):e.value.tipo===51?(p(),N(Sa,{key:9,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((de=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:de.nombre)||"blanco","hoja-activa":e.value.hojaActiva,"direccion-apertura":e.value.direccionApertura,"paso-libre":e.value.pasoLibre},null,8,["ancho","alto","color-marco","hoja-activa","direccion-apertura","paso-libre"])):e.value.tipo===54?(p(),N($a,{key:`compuesta-${L.value}`,ancho:e.value.ancho||2e3,alto:e.value.alto||2e3,"color-marco":((Ve=T.colores.find(ae=>ae.id===e.value.color))==null?void 0:Ve.nombre)||"blanco",orientacion:e.value.orientacionComp||"horizontal",items:e.value.itemsComp||[],forceReRender:L.value,onAgregar:b,onAgregarBorde:O,onEditarVentana:z,onEliminarVentana:x},null,8,["ancho","alto","color-marco","orientacion","items","forceReRender"])):re("",!0)]}),_:1})]),_:1}),a(Ne,{class:"my-4"}),a(se,null,{default:r(()=>[a(S,{cols:"12",md:"4"},{default:r(()=>[e.value.costo_total_unitario?(p(),N(qe,{key:0,type:"info",variant:"outlined"},{default:r(()=>[l[72]||(l[72]=he("strong",null,"Costo unitario:",-1)),ye(" $"+_e(e.value.costo_total_unitario),1)]),_:1})):re("",!0)]),_:1}),a(S,{cols:"12",md:"4"},{default:r(()=>[e.value.costo_total?(p(),N(qe,{key:0,type:"info",variant:"tonal"},{default:r(()=>[l[73]||(l[73]=he("strong",null,"Costo total:",-1)),ye(" $"+_e(e.value.costo_total),1)]),_:1})):re("",!0)]),_:1}),a(S,{cols:"12",md:"4"},{default:r(()=>[e.value.precio?(p(),N(qe,{key:0,type:"success",variant:"tonal"},{default:r(()=>[l[74]||(l[74]=he("strong",null,"Precio de venta:",-1)),ye(" $"+_e(e.value.precio),1)]),_:1})):re("",!0)]),_:1})]),_:1}),e.value.materiales&&e.value.materiales.length?(p(),N(se,{key:8},{default:r(()=>[a(S,{cols:"12"},{default:r(()=>[a(ga,{headers:[{title:"Material",key:"nombre"},{title:"Proveedor",key:"proveedor"},{title:"Cantidad",key:"cantidad"},{title:"Unidad",key:"unidad"},{title:"Costo unitario",key:"costo_unitario"},{title:"Costo total",key:"costo_total"}],items:e.value.materiales,class:"mt-2",dense:"","hide-default-footer":""},{"item.costo_unitario":r(({item:o})=>[ye(" $"+_e(o.costo_unitario),1)]),"item.costo_total":r(({item:o})=>[ye(" $"+_e(o.costo_total),1)]),_:1},8,["items"])]),_:1})]),_:1})):re("",!0),e.value.tipo===54?(p(),N(se,{key:9},{default:r(()=>[a(S,{cols:"12"},{default:r(()=>[a(qe,{color:"success",variant:"tonal"},{default:r(()=>[l[75]||(l[75]=he("strong",null,"Costo total compuesta:",-1)),ye(" $"+_e(be.value.toLocaleString())+" ",1),l[76]||(l[76]=he("div",{class:"text-caption"}," Suma de todas las ventanas individuales con sus medidas específicas ",-1))]),_:1})]),_:1})]),_:1})):re("",!0),a(Be,{class:"justify-end"},{default:r(()=>[a(Ue,{color:"secondary",variant:"text",onClick:B},{default:r(()=>l[77]||(l[77]=[ye(" Cancelar ")])),_:1}),a(Ue,{color:"primary",type:"submit"},{default:r(()=>[ye(_e(h.value?"Guardar cambios":"Agregar ventana"),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),a(Te,{modelValue:k.value,"onUpdate:modelValue":l[55]||(l[55]=o=>k.value=o),"max-width":"400"},{default:r(()=>[a(Le,null,{default:r(()=>[a(Oe,null,{default:r(()=>l[78]||(l[78]=[ye("Agregar ventana")])),_:1}),a(Ne),a(ba,null,{default:r(()=>[(p(),le(ne,null,Ae(d,o=>a(We,{key:o.id,onClick:V=>U(o.id)},{default:r(()=>[a(Fe,null,{default:r(()=>[ye(_e(o.nombre),1)]),_:2},1024)]),_:2},1032,["onClick"])),64)),a(We,{onClick:Z},{default:r(()=>[a(Fe,null,{default:r(()=>l[79]||(l[79]=[ye("Compuesta (anidada)")])),_:1})]),_:1})]),_:1}),a(Be,null,{default:r(()=>[a(Ye),a(Ue,{text:"",onClick:l[54]||(l[54]=o=>k.value=!1)},{default:r(()=>l[80]||(l[80]=[ye("Cancelar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Te,{modelValue:g.value,"onUpdate:modelValue":l[63]||(l[63]=o=>g.value=o),"max-width":"600px"},{default:r(()=>[a(Le,null,{default:r(()=>[a(Oe,null,{default:r(()=>l[81]||(l[81]=[he("span",{class:"text-h5"},"Editar Ventana Individual",-1)])),_:1}),a(Va,null,{default:r(()=>[a(ya,null,{default:r(()=>[a(se,null,{default:r(()=>[a(S,{cols:"12",sm:"6"},{default:r(()=>[a(ke,{modelValue:i.value.ancho,"onUpdate:modelValue":l[56]||(l[56]=o=>i.value.ancho=o),modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(S,{cols:"12",sm:"6"},{default:r(()=>[a(ke,{modelValue:i.value.alto,"onUpdate:modelValue":l[57]||(l[57]=o=>i.value.alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(se,null,{default:r(()=>[a(S,{cols:"12",sm:"6"},{default:r(()=>[a(ke,{modelValue:i.value.sizePercent,"onUpdate:modelValue":l[58]||(l[58]=o=>i.value.sizePercent=o),modelModifiers:{number:!0},label:"Porcentaje del espacio (%)",type:"number",min:"10",max:"80",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(S,{cols:"12",sm:"6"},{default:r(()=>[a(fe,{modelValue:i.value.tipo,"onUpdate:modelValue":l[59]||(l[59]=o=>i.value.tipo=o),items:d,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),c(i.value.tipo)?(p(),N(se,{key:0},{default:r(()=>[a(S,{cols:"12",sm:"6"},{default:r(()=>[a(ie,{modelValue:i.value.ladoApertura,"onUpdate:modelValue":l[60]||(l[60]=o=>i.value.ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(S,{cols:"12",sm:"6"},{default:r(()=>[a(ie,{modelValue:i.value.direccionApertura,"onUpdate:modelValue":l[61]||(l[61]=o=>i.value.direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):re("",!0),a(se,null,{default:r(()=>[a(S,{cols:"12"},{default:r(()=>[a(qe,{color:"info",variant:"tonal"},{default:r(()=>[he("div",Ta,"Costo estimado: $"+_e(je.value.toLocaleString()),1),he("div",Oa," ID Tipo: "+_e(i.value.tipo)+" | Área: "+_e($.value.toFixed(2))+" m² | Tipo: "+_e(Me(i.value.tipo)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(Be,null,{default:r(()=>[a(Ye),a(Ue,{color:"blue-darken-1",variant:"text",onClick:l[62]||(l[62]=o=>g.value=!1)},{default:r(()=>l[82]||(l[82]=[ye(" Cancelar ")])),_:1}),a(Ue,{color:"blue-darken-1",variant:"text",onClick:j},{default:r(()=>l[83]||(l[83]=[ye(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},vl=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"}));export{vl as A,Ha as _,Pa as a,Da as b,Aa as c,ja as d,Sa as e,$a as f};
