import{r as k,D as $,at as m,f as _,e,j as g,o as x,b as i,s as n,a2 as s,m as f,Y as d,t as p}from"./index-DSpdjK4Q.js";import{V as w,b as A}from"./VCard-DD3VMs3y.js";import{V as D}from"./VSpacer-BRiSNnp1.js";import{V as E}from"./VDataTable-6AP4BVMc.js";import{V as B}from"./VChip-B0f8PvnB.js";import"./VAvatar-wQDiyjur.js";import"./VImg-BIVIgcNF.js";import"./index-DB-2EOUy.js";import"./VCardText-CB02Z-DT.js";/* empty css              */import"./VSelect-V_XHzyal.js";import"./VTextField-B2Oyrwcs.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-Bu_21Wxr.js";import"./VDivider-vxdHBkin.js";import"./VOverlay-D_v1GgS9.js";import"./VMenu-DCFpGudB.js";import"./VCheckboxBtn-CgRL2_y5.js";const U={__name:"index",setup(h){const v="https://proyectovialum-backend-production.up.railway.app",c=g(),u=k([]),z=[{title:"ID",value:"id"},{title:"Cliente",value:"cliente"},{title:"Vendedor",value:"vendedor"},{title:"Fecha",value:"fecha"},{title:"Estado",value:"estado"},{title:"Acciones",value:"acciones",sortable:!1}],C=t=>{switch(t){case"Evaluación":return"grey";case"Aprobada":return"green";case"Rechazada":return"red";default:return"blue"}},b=t=>{c.push(`/cotizacion-ver?id=${t.id}`)},V=t=>{c.push(`/cotizacion-editar?id=${t.id}`)},y=async t=>{if(confirm(`¿Deseas duplicar la cotización #${t.id}?`))try{const a=await m.post(`/api/cotizaciones/${t.id}/duplicar`);alert("Cotización duplicada con éxito"),c.push(`/cotizacion-editar?id=${a.data.id}`)}catch(a){console.error(a),alert("Error al duplicar la cotización")}};return $(async()=>{try{const t=await m.get("/api/cotizaciones");u.value=Array.isArray(t.data)?t.data:[]}catch(t){console.error("Error al cargar cotizaciones:",t),u.value=[]}}),(t,a)=>(x(),_(w,null,{default:e(()=>[i(A,null,{default:e(()=>[a[2]||(a[2]=n(" Cotizaciones ")),i(D),i(s,{color:"primary",onClick:a[0]||(a[0]=o=>f(c).push({name:"cotizador"}))},{default:e(()=>a[1]||(a[1]=[n("Nueva")])),_:1})]),_:1}),i(E,{headers:z,items:u.value,"items-per-page":10,class:"elevation-1"},{"item.cliente":e(({item:o})=>{var r;return[n(p(((r=o.cliente)==null?void 0:r.razon_social)||"—"),1)]}),"item.vendedor":e(({item:o})=>{var r;return[n(p(((r=o.vendedor)==null?void 0:r.name)||"—"),1)]}),"item.estado":e(({item:o})=>{var r;return[i(B,{color:C((r=o.estado)==null?void 0:r.nombre)},{default:e(()=>{var l;return[n(p(((l=o.estado)==null?void 0:l.nombre)||"—"),1)]}),_:2},1032,["color"])]}),"item.acciones":e(({item:o})=>{var r;return[i(s,{icon:"",onClick:l=>b(o)},{default:e(()=>[i(d,null,{default:e(()=>a[3]||(a[3]=[n("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),i(s,{icon:"",onClick:l=>V(o),disabled:((r=o.estado)==null?void 0:r.nombre)==="Aprobada"},{default:e(()=>[i(d,null,{default:e(()=>a[4]||(a[4]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick","disabled"]),i(s,{icon:"",href:`${f(v)}/api/cotizaciones/${o.id}/pdf`,target:"_blank"},{default:e(()=>[i(d,null,{default:e(()=>a[5]||(a[5]=[n("mdi-file-pdf-box")])),_:1})]),_:2},1032,["href"]),i(s,{icon:"",onClick:l=>y(o)},{default:e(()=>[i(d,null,{default:e(()=>a[6]||(a[6]=[n("mdi-content-copy")])),_:1})]),_:2},1032,["onClick"])]}),_:1},8,["items"])]),_:1}))}};export{U as default};
