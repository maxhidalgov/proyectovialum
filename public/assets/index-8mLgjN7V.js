import{r as $,D as k,at as m,f as _,e as t,j as g,o as x,b as i,s as n,a2 as s,m as f,Y as d,t as p}from"./index-CeU55BBl.js";import{V as A,b as D}from"./VCard-DGNaQtK9.js";import{V as E}from"./VSpacer-CHW44O6o.js";import{V as h}from"./VDataTable-D0qmgLxe.js";import{V as w}from"./VChip-BzCoETa1.js";import"./VAvatar-CHBLcCNe.js";import"./VImg-bY_mMLKO.js";import"./index-BmgxbC-7.js";import"./VCardText-DhhqeDKu.js";/* empty css              */import"./VSelect-CDNCIPns.js";import"./VTextField-Do1o4gI4.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-DRLm2zaZ.js";import"./VDivider-B1opHg5D.js";import"./VOverlay-DmRX7kOP.js";import"./VMenu-BdsDKH8b.js";import"./VCheckboxBtn-BhlBUea3.js";const U={__name:"index",setup(B){const v="http://localhost:8000",c=g(),u=$([]),z=[{title:"ID",value:"id"},{title:"Cliente",value:"cliente"},{title:"Vendedor",value:"vendedor"},{title:"Fecha",value:"fecha"},{title:"Estado",value:"estado"},{title:"Acciones",value:"acciones",sortable:!1}],C=a=>{switch(a){case"Evaluación":return"grey";case"Aprobada":return"green";case"Rechazada":return"red";default:return"blue"}},b=a=>{c.push(`/cotizacion-ver?id=${a.id}`)},V=a=>{c.push(`/cotizacion-editar?id=${a.id}`)},y=async a=>{if(confirm(`¿Deseas duplicar la cotización #${a.id}?`))try{const e=await m.post(`/api/cotizaciones/${a.id}/duplicar`);alert("Cotización duplicada con éxito"),c.push(`/cotizacion-editar?id=${e.data.id}`)}catch(e){console.error(e),alert("Error al duplicar la cotización")}};return k(async()=>{try{const a=await m.get("/api/cotizaciones");u.value=Array.isArray(a.data)?a.data:[]}catch(a){console.error("Error al cargar cotizaciones:",a),u.value=[]}}),(a,e)=>(x(),_(A,null,{default:t(()=>[i(D,null,{default:t(()=>[e[2]||(e[2]=n(" Cotizaciones ")),i(E),i(s,{color:"primary",onClick:e[0]||(e[0]=o=>f(c).push({name:"cotizador"}))},{default:t(()=>e[1]||(e[1]=[n("Nueva")])),_:1})]),_:1}),i(h,{headers:z,items:u.value,"items-per-page":10,class:"elevation-1"},{"item.cliente":t(({item:o})=>{var r;return[n(p(((r=o.cliente)==null?void 0:r.razon_social)||"—"),1)]}),"item.vendedor":t(({item:o})=>{var r;return[n(p(((r=o.vendedor)==null?void 0:r.name)||"—"),1)]}),"item.estado":t(({item:o})=>{var r;return[i(w,{color:C((r=o.estado)==null?void 0:r.nombre)},{default:t(()=>{var l;return[n(p(((l=o.estado)==null?void 0:l.nombre)||"—"),1)]}),_:2},1032,["color"])]}),"item.acciones":t(({item:o})=>{var r;return[i(s,{icon:"",onClick:l=>b(o)},{default:t(()=>[i(d,null,{default:t(()=>e[3]||(e[3]=[n("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),i(s,{icon:"",onClick:l=>V(o),disabled:((r=o.estado)==null?void 0:r.nombre)==="Aprobada"},{default:t(()=>[i(d,null,{default:t(()=>e[4]||(e[4]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick","disabled"]),i(s,{icon:"",href:`${f(v)}/api/cotizaciones/${o.id}/pdf`,target:"_blank"},{default:t(()=>[i(d,null,{default:t(()=>e[5]||(e[5]=[n("mdi-file-pdf-box")])),_:1})]),_:2},1032,["href"]),i(s,{icon:"",onClick:l=>y(o)},{default:t(()=>[i(d,null,{default:t(()=>e[6]||(e[6]=[n("mdi-content-copy")])),_:1})]),_:2},1032,["onClick"])]}),_:1},8,["items"])]),_:1}))}};export{U as default};
