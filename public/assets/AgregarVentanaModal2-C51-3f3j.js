import{X as l,a as Y,f as E,o as b,e as u,b as a,r as se,w as Fe,c as J,d as ne,m as ue,aU as le,aV as oe,F as ce,n as ia,i as Ue,q as we,E as Ca,b5 as Nl,t as ee,v as Ce,Z as qe,a2 as aa,a3 as Ie,H as Ge,x as wl,h as Ul,I as ml,J as fl,aD as _l,ar as pl}from"./index-UAcmQ-rO.js";import{d as El,_ as Rl,a as Tl,c as Wl,b as Fl}from"./VistaBayWindow-PRuB4eJZ.js";import{a as Ze,r as Sl,n as $l,_ as Il}from"./VistaVentanaCorredera-DgPWz8EP.js";import{V as ua}from"./VSwitch-CWR-vUqS.js";import{a as re,V as $e}from"./VRadioGroup-RA5fxAyA.js";import{_ as xa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as hl}from"./VTooltip-BcJtiTco.js";import{b as Qe,V as Je,c as sa}from"./VCard-CZz663uP.js";import{V as na}from"./VCardText-CB4SeAGw.js";import{V as Ll,a as ya,b as Va,d as gl}from"./VList-CFq1dd_8.js";import{V as ma}from"./VDivider-4aqBfXal.js";import{V as Ne}from"./VTextField-Bagt0BLy.js";import{V as ka}from"./VAutocomplete-CHSE4NQI.js";import{V as fa}from"./VSpacer-BBc6dgl7.js";import{V as va}from"./VDialog-C_xnG4VU.js";import{V as Hl}from"./VForm-BFMo_38w.js";import{V as Se,a as Z}from"./VRow-CpMuqGkr.js";import{V as Pe}from"./VSelect-Dts1OQTN.js";import{V as ra}from"./VAlert-C0xbOk4w.js";import{V as Ol}from"./VDataTable-CqPYNA1M.js";import{V as Xl}from"./VContainer-L0AKVWNG.js";const he=50,Bl=60,bl=300,Yl={__name:"VistaVentanaFijaAL42",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"#000000"}},setup(j){const W={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},p={roble:new Image,nogal:new Image};p.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,p.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const T=l(()=>{var c;let v="";return typeof r.colorMarco=="object"&&((c=r.colorMarco)!=null&&c.nombre)?v=String(r.colorMarco.nombre).toLowerCase():typeof r.colorMarco=="string"&&(v=r.colorMarco.toLowerCase()),W[v]||"#ffffff"});function g(v,c=!1){var L;let y="";return typeof r.colorMarco=="object"&&((L=r.colorMarco)!=null&&L.nombre)?y=String(r.colorMarco.nombre).toLowerCase():typeof r.colorMarco=="string"&&(y=r.colorMarco.toLowerCase()),["roble","nogal"].includes(y)&&p[y]?{points:v,closed:!0,fillPatternImage:p[y],fillPatternRepeat:"repeat",fillPatternScale:{x:c?.15:.2,y:c?.15:.2},stroke:"black"}:{points:v,closed:!0,fill:T.value,stroke:"black"}}const r=j,s=l(()=>{const v=bl/r.ancho,c=bl/r.alto;return Math.min(v,c,1)*.9}),m=l(()=>Bl*s.value),f=l(()=>r.ancho*s.value),e=l(()=>r.alto*s.value),w=l(()=>g([he,he,he+f.value,he,he+f.value-m.value,he+m.value,he+m.value,he+m.value])),N=l(()=>g([he+f.value,he,he+f.value,he+e.value,he+f.value-m.value,he+e.value-m.value,he+f.value-m.value,he+m.value])),R=l(()=>g([he+f.value,he+e.value,he,he+e.value,he+m.value,he+e.value-m.value,he+f.value-m.value,he+e.value-m.value])),G=l(()=>g([he,he+e.value,he,he,he+m.value,he+m.value,he+m.value,he+e.value-m.value])),k=l(()=>({x:he+m.value,y:he+m.value,width:f.value-m.value*2,height:e.value-m.value*2,fill:"#b3e5fc",stroke:"black"})),A=l(()=>{const v=Math.max(r.ancho,r.alto);return Math.min(Math.max(v/100,20),40)}),h=l(()=>({x:he+f.value/2-30,y:he+e.value+10,text:`${r.ancho}mm`,fontSize:A.value,fill:"black"})),n=l(()=>({x:he-25,y:he+e.value/2,text:`${r.alto}mm`,fontSize:A.value,fill:"black",rotation:-90,offsetX:A.value/2}));return(v,c)=>{const y=Y("v-line"),L=Y("v-rect"),V=Y("v-text"),q=Y("v-layer"),_=Y("v-stage");return b(),E(_,{config:{width:400,height:400}},{default:u(()=>[a(q,null,{default:u(()=>[a(y,{config:w.value},null,8,["config"]),a(y,{config:N.value},null,8,["config"]),a(y,{config:R.value},null,8,["config"]),a(y,{config:G.value},null,8,["config"]),a(L,{config:k.value},null,8,["config"]),a(V,{config:h.value},null,8,["config"]),a(V,{config:n.value},null,8,["config"])]),_:1})]),_:1})}}},ge=50,Gl=60,pa=0,yl=300,Jl={__name:"VistaVentanaProyectanteAL42",props:{ancho:Number,alto:Number,colorMarco:[String,Object]},setup(j){const W=j,p={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},T={roble:new Image,nogal:new Image};T.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,T.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const g=l(()=>{var H,ve,ze;const S=typeof W.colorMarco=="object"?(ve=(H=W.colorMarco)==null?void 0:H.nombre)==null?void 0:ve.toLowerCase():(ze=W.colorMarco)==null?void 0:ze.toLowerCase();return p[S]||"#ffffff"});function r(S,H=!1){var ze,Me;const ve=typeof W.colorMarco=="object"?(Me=(ze=W.colorMarco)==null?void 0:ze.nombre)==null?void 0:Me.toLowerCase():W.colorMarco.toLowerCase();return["roble","nogal"].includes(ve)&&T[ve]?{points:S,closed:!0,fillPatternImage:T[ve],fillPatternRepeat:"repeat",fillPatternScale:{x:H?.15:.2,y:H?.15:.2},stroke:"black"}:{points:S,closed:!0,fill:g.value,stroke:"black"}}const s=l(()=>{const S=yl/W.ancho,H=yl/W.alto;return Math.min(S,H,1)*.9}),m=l(()=>Gl*s.value),f=l(()=>W.ancho*s.value),e=l(()=>W.alto*s.value),w={width:400,height:400},N=l(()=>r([ge,ge,ge+f.value,ge,ge+f.value-m.value,ge+m.value,ge+m.value,ge+m.value])),R=l(()=>r([ge+f.value,ge,ge+f.value,ge+e.value,ge+f.value-m.value,ge+e.value-m.value,ge+f.value-m.value,ge+m.value])),G=l(()=>r([ge+f.value,ge+e.value,ge,ge+e.value,ge+m.value,ge+e.value-m.value,ge+f.value-m.value,ge+e.value-m.value])),k=l(()=>r([ge,ge+e.value,ge,ge,ge+m.value,ge+m.value,ge+m.value,ge+e.value-m.value])),A=l(()=>({x:ge+m.value,y:ge+m.value,width:f.value-m.value*2,height:e.value-m.value*2,fill:"#b3e5fc",stroke:"black"})),h=l(()=>A.value.x+pa*s.value),n=l(()=>A.value.y+pa*s.value),v=l(()=>A.value.width-pa*2*s.value),c=l(()=>A.value.height-pa*2*s.value),y=l(()=>m.value*.8),L=l(()=>r([h.value,n.value,h.value+v.value,n.value,h.value+v.value-y.value,n.value+y.value,h.value+y.value,n.value+y.value],!0)),V=l(()=>r([h.value+v.value,n.value,h.value+v.value,n.value+c.value,h.value+v.value-y.value,n.value+c.value-y.value,h.value+v.value-y.value,n.value+y.value],!0)),q=l(()=>r([h.value+v.value,n.value+c.value,h.value,n.value+c.value,h.value+y.value,n.value+c.value-y.value,h.value+v.value-y.value,n.value+c.value-y.value],!0)),_=l(()=>r([h.value,n.value+c.value,h.value,n.value,h.value+y.value,n.value+y.value,h.value+y.value,n.value+c.value-y.value],!0)),D=l(()=>({points:[h.value+5,n.value+5,h.value+v.value/2,n.value+c.value-5],stroke:"black",dash:[10,5],strokeWidth:2})),M=l(()=>({points:[h.value+v.value-5,n.value+5,h.value+v.value/2,n.value+c.value-5],stroke:"black",dash:[10,5],strokeWidth:2})),C=l(()=>Math.min(Math.max(W.ancho/100,20),40)),$=l(()=>({x:ge+f.value/2-30,y:ge+e.value+10,text:`${W.ancho}mm`,fontSize:C.value,fill:"black"})),I=l(()=>({x:ge-25,y:ge+e.value/2,text:`${W.alto}mm`,fontSize:C.value,fill:"black",rotation:-90,offsetX:C.value/2}));return(S,H)=>{const ve=Y("v-line"),ze=Y("v-rect"),Me=Y("v-text"),ke=Y("v-layer"),De=Y("v-stage");return b(),E(De,{config:w},{default:u(()=>[a(ke,null,{default:u(()=>[a(ve,{config:N.value},null,8,["config"]),a(ve,{config:R.value},null,8,["config"]),a(ve,{config:G.value},null,8,["config"]),a(ve,{config:k.value},null,8,["config"]),a(ze,{config:A.value},null,8,["config"]),a(ve,{config:L.value},null,8,["config"]),a(ve,{config:V.value},null,8,["config"]),a(ve,{config:q.value},null,8,["config"]),a(ve,{config:_.value},null,8,["config"]),a(Ze,{x:h.value+v.value/2,y:n.value+c.value+2,width:20,height:6,rotation:90,offsetX:10,offsetY:2.5},null,8,["x","y"]),a(ve,{config:D.value},null,8,["config"]),a(ve,{config:M.value},null,8,["config"]),a(Me,{config:$.value},null,8,["config"]),a(Me,{config:I.value},null,8,["config"])]),_:1})]),_:1})}}},Kl={style:{"margin-bottom":"10px"}},We=40,Ql=54,Zl=80,Vl=20,xl=300,eo={__name:"VistaVentanaCorrederaAL25",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"},hoja1AlFrente:{type:Boolean,default:!0},hojasMoviles:{type:Number,default:2},hojaMovilSeleccionada:{type:Number,default:1}},setup(j,{expose:W}){const p=se(null);W({exportarImagen:()=>{if(p.value)try{const i=p.value.getStage();return i.draw(),i.toDataURL({pixelRatio:1,quality:.9})}catch(i){return console.error("âŒ Error en exportarImagen:",i),null}return null}});const g=j,r=se(g.hoja1AlFrente),s=l(()=>g.hojasMoviles===2||g.hojaMovilSeleccionada===1),m=l(()=>g.hojasMoviles===2||g.hojaMovilSeleccionada===2),f=l(()=>s.value),e=l(()=>m.value);Fe(()=>g.hoja1AlFrente,i=>{r.value=i});const w={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b",bronce:"#CD7F32","negro mate":"#1A1A1A",inox:"#C0C0C0"},N=l(()=>{var o,t;const i=(t=(o=g.colorMarco)==null?void 0:o.toLowerCase)==null?void 0:t.call(o);return w[i]||"#ffffff"}),R=l(()=>{const i=xl/g.ancho,o=xl/g.alto;return Math.min(i,o,1)*.9}),G=l(()=>Ql*R.value),k=l(()=>Zl*R.value),A=l(()=>g.ancho*R.value),h=l(()=>g.alto*R.value),n=l(()=>Vl*R.value),v=l(()=>({x:We,y:We,width:A.value,height:G.value,fill:N.value,stroke:"black",strokeWidth:1})),c=l(()=>({x:We+A.value-G.value,y:We,width:G.value,height:h.value,fill:N.value,stroke:"black",strokeWidth:1})),y=l(()=>({x:We,y:We+h.value-G.value,width:A.value,height:G.value,fill:N.value,stroke:"black",strokeWidth:1})),L=l(()=>({x:We,y:We,width:G.value,height:h.value,fill:N.value,stroke:"black",strokeWidth:1})),V=l(()=>(A.value-G.value*2+Vl)/2),q=l(()=>h.value-G.value*2),_=l(()=>We+G.value),D=l(()=>We+G.value),M=l(()=>We+A.value-G.value-V.value+n.value-k.value*.22),C=D,$=l(()=>({x:_.value,y:D.value,width:V.value,height:k.value,fill:N.value,stroke:"black",strokeWidth:1})),I=l(()=>({x:_.value+V.value-k.value,y:D.value,width:k.value,height:q.value,fill:N.value,stroke:"black",strokeWidth:1})),S=l(()=>({x:_.value,y:D.value+q.value-k.value,width:V.value,height:k.value,fill:N.value,stroke:"black",strokeWidth:1})),H=l(()=>({x:_.value,y:D.value,width:k.value,height:q.value,fill:N.value,stroke:"black",strokeWidth:1})),ve=l(()=>({x:M.value,y:C.value,width:V.value,height:k.value,fill:N.value,stroke:"black",strokeWidth:1})),ze=l(()=>({x:M.value+V.value-k.value,y:C.value,width:k.value,height:q.value,fill:N.value,stroke:"black",strokeWidth:1})),Me=l(()=>({x:M.value,y:C.value+q.value-k.value,width:V.value,height:k.value,fill:N.value,stroke:"black",strokeWidth:1})),ke=l(()=>({x:M.value,y:C.value,width:k.value,height:q.value,fill:N.value,stroke:"black",strokeWidth:1})),De=l(()=>{if(r.value)return{x:_.value+k.value,y:D.value+k.value,width:V.value-k.value*2,height:q.value-k.value*2,fill:"lightblue",stroke:"black"};const i=k.value*.35+R.value*50,o=k.value*1.3+R.value*1;return{x:_.value+i,y:D.value+k.value,width:V.value-o-15,height:q.value-k.value*2,fill:"lightblue",stroke:"black"}}),Le=l(()=>{if(r.value){const i=k.value*.4+R.value*10,o=k.value*1.4+R.value*10;return{x:M.value+i+10,y:C.value+k.value,width:V.value-o-10,height:q.value-k.value*2,fill:"lightblue",stroke:"black"}}return{x:M.value+k.value,y:C.value+k.value,width:V.value-k.value*2,height:q.value-k.value*2,fill:"lightblue",stroke:"black"}}),ae=l(()=>g.hojasMoviles===2||g.hojasMoviles===1&&g.hojaMovilSeleccionada===1?"â†’":"+"),Q=l(()=>g.hojasMoviles===2||g.hojasMoviles===1&&g.hojaMovilSeleccionada===2?"â†":"+"),X=l(()=>({x:_.value+V.value/2-10,y:D.value+q.value/2+10,text:ae.value,fontSize:30,fill:"black"})),P=l(()=>({x:M.value+V.value/2-10,y:C.value+q.value/2+10,text:Q.value,fontSize:30,fill:"black"})),B=l(()=>({x:We-30,y:We+h.value/4-10,text:"AL25",fontSize:12,fill:"#666",fontStyle:"bold"})),F=l(()=>({x:We-30,y:We+h.value/4+5,text:"Corredera",fontSize:10,fill:"#999"})),K=l(()=>{const i=Math.max(g.ancho,g.alto);return Math.min(Math.max(i/100,20),40)}),x=l(()=>({x:We+A.value/2-30,y:We+h.value+10,text:`${g.ancho}mm`,fontSize:K.value,fill:"black"})),d=l(()=>({x:We-25,y:We+h.value/2,text:`${g.alto}mm`,fontSize:K.value,fill:"black",rotation:-90,offsetX:K.value/2}));return(i,o)=>{const t=Y("v-rect"),z=Y("v-text"),U=Y("v-layer"),O=Y("v-stage");return b(),J("div",null,[ne("div",Kl,[a(ua,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=ie=>r.value=ie),label:"Hoja 1 adelante",density:"compact"},null,8,["modelValue"])]),a(O,{ref_key:"stageRef",ref:p,config:{width:400,height:400}},{default:u(()=>[a(U,null,{default:u(()=>[a(t,le(oe(v.value)),null,16),a(t,le(oe(c.value)),null,16),a(t,le(oe(y.value)),null,16),a(t,le(oe(L.value)),null,16),r.value?(b(),J(ce,{key:0},[a(t,le(oe(Le.value)),null,16),a(t,le(oe(ve.value)),null,16),a(t,le(oe(ze.value)),null,16),a(t,le(oe(Me.value)),null,16),a(t,le(oe(ke.value)),null,16),a(z,{x:M.value+V.value/2-10,y:ia(C)+q.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(t,le(oe(De.value)),null,16),a(t,le(oe($.value)),null,16),a(t,le(oe(I.value)),null,16),a(t,le(oe(S.value)),null,16),a(t,le(oe(H.value)),null,16),a(z,{x:_.value+V.value/2-10,y:D.value+q.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)):(b(),J(ce,{key:1},[a(t,le(oe(De.value)),null,16),a(t,le(oe($.value)),null,16),a(t,le(oe(I.value)),null,16),a(t,le(oe(S.value)),null,16),a(t,le(oe(H.value)),null,16),a(z,{x:_.value+V.value/2-10,y:D.value+q.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(t,le(oe(Le.value)),null,16),a(t,le(oe(ve.value)),null,16),a(t,le(oe(ze.value)),null,16),a(t,le(oe(Me.value)),null,16),a(t,le(oe(ke.value)),null,16),a(z,{x:M.value+V.value/2-10,y:ia(C)+q.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)),a(z,le(oe(x.value)),null,16),a(z,le(oe(d.value)),null,16),a(z,le(oe(B.value)),null,16),a(z,le(oe(F.value)),null,16),a(z,le(oe(X.value)),null,16),a(z,le(oe(P.value)),null,16),f.value?(b(),E(Ze,{key:2,x:_.value+k.value-R.value*35,y:D.value+q.value/2,escalaManilla:R.value*4},null,8,["x","y","escalaManilla"])):ue("",!0),e.value?(b(),E(Ze,{key:3,x:M.value+V.value-k.value+R.value*35,y:ia(C)+q.value/2,escalaManilla:R.value*4},null,8,["x","y","escalaManilla"])):ue("",!0)]),_:1})]),_:1},512)])}}},de=40,ao=54,lo=54,ql={__name:"VistaVentanaCompuestaAL42",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"},filas:{type:Number,default:1},columnas:{type:Number,default:1},altosFilas:{type:Array,default:()=>[]},anchosColumnas:{type:Array,default:()=>[]},secciones:{type:Array,default:()=>[[{tipo:1}]]}},setup(j,{expose:W}){const p=se(null),T=se(0),g=j;Fe(()=>[g.ancho,g.alto,g.filas,g.columnas],([V,q,_,D])=>{console.log("ðŸ”„ Props cambiaron:",{ancho:V,alto:q,filas:_,columnas:D}),T.value++,console.log("ðŸ”‘ Nuevo render key:",T.value)});const r=l(()=>320/Math.max(g.ancho,g.alto)),s=l(()=>g.ancho*r.value),m=l(()=>g.alto*r.value),f=l(()=>ao*r.value),e=l(()=>lo*r.value);l(()=>`${g.ancho}-${g.alto}-${g.filas}-${g.columnas}-${JSON.stringify(g.altosFilas)}-${JSON.stringify(g.anchosColumnas)}-${JSON.stringify(g.secciones)}`);const w=l(()=>{var D,M,C;const V=[],q=s.value-f.value*2-e.value*(g.columnas-1),_=m.value-f.value*2-e.value*(g.filas-1);for(let $=0;$<g.filas;$++)for(let I=0;I<g.columnas;I++){let S=de+f.value;for(let P=0;P<I;P++){const F=(g.anchosColumnas[P]||g.ancho/g.columnas)/g.ancho;S+=q*F+e.value}let H=de+f.value;for(let P=0;P<$;P++){const F=(g.altosFilas[P]||g.alto/g.filas)/g.alto;H+=_*F+e.value}const ze=(g.anchosColumnas[I]||g.ancho/g.columnas)/g.ancho,Me=q*ze,De=(g.altosFilas[$]||g.alto/g.filas)/g.alto,Le=_*De,ae={x:S,y:H,width:Me,height:Le,fill:"#b3e5fc",stroke:"black",strokeWidth:.5},Q=(((C=(M=(D=g.secciones)==null?void 0:D[$])==null?void 0:M[I])==null?void 0:C.tipo)||1)===56,X={key:`f${$}-c${I}`,vidrio:ae,esProyectante:Q};if(Q){const P=e.value*.35,B=ae.x,F=ae.y,K=ae.width,x=ae.height;X.hojaTop={points:[B,F,B+K,F,B+K-P,F+P,B+P,F+P],closed:!0,fill:N.value,stroke:"black",strokeWidth:.4},X.hojaRight={points:[B+K,F,B+K,F+x,B+K-P,F+x-P,B+K-P,F+P],closed:!0,fill:N.value,stroke:"black",strokeWidth:.4},X.hojaBottom={points:[B+K,F+x,B,F+x,B+P,F+x-P,B+K-P,F+x-P],closed:!0,fill:N.value,stroke:"black",strokeWidth:.4},X.hojaLeft={points:[B,F+x,B,F,B+P,F+P,B+P,F+x-P],closed:!0,fill:N.value,stroke:"black",strokeWidth:.4},X.lineaApertura1={points:[B+5,F+5,B+K/2,F+x-5],stroke:"black",strokeWidth:.8,dash:[3,2]},X.lineaApertura2={points:[B+K-5,F+5,B+K/2,F+x-5],stroke:"black",strokeWidth:.8,dash:[3,2]}}V.push(X)}return V}),N=l(()=>{var _,D,M;const V={blanco:"#FFFFFF",mate:"#D8D8D8",negro:"#2C2C2C",bronce:"#CD7F32",champagne:"#F7E7CE",grafito:"#4A4A4A",cafe:"#8B4513",cafÃ©:"#8B4513"},q=typeof g.colorMarco=="object"?(D=(_=g.colorMarco)==null?void 0:_.nombre)==null?void 0:D.toLowerCase():(M=g.colorMarco)==null?void 0:M.toLowerCase();return V[q]||V.blanco}),R=l(()=>({points:[de,de,de+s.value,de,de+s.value-f.value,de+f.value,de+f.value,de+f.value],closed:!0,fill:N.value,stroke:"black",strokeWidth:.8})),G=l(()=>({points:[de+s.value,de,de+s.value,de+m.value,de+s.value-f.value,de+m.value-f.value,de+s.value-f.value,de+f.value],closed:!0,fill:N.value,stroke:"black",strokeWidth:.8})),k=l(()=>({points:[de+s.value,de+m.value,de,de+m.value,de+f.value,de+m.value-f.value,de+s.value-f.value,de+m.value-f.value],closed:!0,fill:N.value,stroke:"black",strokeWidth:.8})),A=l(()=>({points:[de,de+m.value,de,de,de+f.value,de+f.value,de+f.value,de+m.value-f.value],closed:!0,fill:N.value,stroke:"black",strokeWidth:.8})),h=l(()=>{const V=[];for(let q=0;q<g.filas-1;q++){let _=de+f.value;for(let D=0;D<=q;D++){const C=(g.altosFilas[D]||g.alto/g.filas)/g.alto,$=c()*C;_+=$,D<q&&(_+=e.value)}V.push({x:de+f.value,y:_,width:s.value-f.value*2,height:e.value,fill:N.value,stroke:"black",strokeWidth:.8})}return V}),n=l(()=>{const V=[];for(let q=0;q<g.columnas-1;q++){let _=de+f.value;for(let D=0;D<=q;D++){const C=(g.anchosColumnas[D]||g.ancho/g.columnas)/g.ancho,$=v()*C;_+=$,D<q&&(_+=e.value)}V.push({x:_,y:de+f.value,width:e.value,height:m.value-f.value*2,fill:N.value,stroke:"black",strokeWidth:.8})}return V});function v(){const V=s.value,q=f.value*2,_=e.value*(g.columnas-1);return V-q-_}function c(){const V=m.value,q=f.value*2,_=e.value*(g.filas-1);return V-q-_}const y=l(()=>({x:de+s.value/2-30,y:de+m.value+15,text:`${g.ancho}mm`,fontSize:14,fill:"black"})),L=l(()=>({x:de-20,y:de+m.value/2,text:`${g.alto}mm`,fontSize:14,fill:"black",rotation:-90}));return W({getStage:()=>{var V;return(V=p.value)==null?void 0:V.getStage()},exportarImagen:()=>{if(p.value)try{return p.value.getStage().toDataURL({pixelRatio:2})}catch(V){return console.error("âŒ Error en exportarImagen:",V),null}return null}}),(V,q)=>{const _=Y("v-line"),D=Y("v-rect"),M=Y("v-text"),C=Y("v-layer"),$=Y("v-stage");return b(),E($,{ref_key:"stageRef",ref:p,config:{width:400,height:400},key:T.value},{default:u(()=>[a(C,null,{default:u(()=>[a(_,le(oe(R.value)),null,16),a(_,le(oe(G.value)),null,16),a(_,le(oe(k.value)),null,16),a(_,le(oe(A.value)),null,16),(b(!0),J(ce,null,Ue(h.value,(I,S)=>(b(),E(D,we({key:"ph-"+S,ref_for:!0},I),null,16))),128)),(b(!0),J(ce,null,Ue(n.value,(I,S)=>(b(),E(D,we({key:"pv-"+S,ref_for:!0},I),null,16))),128)),(b(!0),J(ce,null,Ue(w.value,I=>(b(),J(ce,{key:I.key},[a(D,we({ref_for:!0},I.vidrio),null,16),I.esProyectante?(b(),J(ce,{key:0},[a(_,we({ref_for:!0},I.hojaTop),null,16),a(_,we({ref_for:!0},I.hojaRight),null,16),a(_,we({ref_for:!0},I.hojaBottom),null,16),a(_,we({ref_for:!0},I.hojaLeft),null,16),a(_,we({ref_for:!0},I.lineaApertura1),null,16),a(_,we({ref_for:!0},I.lineaApertura2),null,16)],64)):ue("",!0)],64))),128)),a(M,le(oe(y.value)),null,16),a(M,le(oe(L.value)),null,16)]),_:1})]),_:1})}}},oo={style:{"margin-bottom":"10px"}},be=50,to=60,ha=0,kl=300,Pl={__name:"VistaVentanaAbatirS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],material:[String,Number],tipoVidrio:[String,Number],productoVidrioProveedor:[String,Number],ladoInicial:{type:String,default:"izquierda",validator:j=>["izquierda","derecha"].includes(j)},direccionApertura:{type:String,default:"interior",validator:j=>["interior","exterior"].includes(j)}},emits:["update:ladoApertura","update:direccionApertura"],setup(j,{expose:W,emit:p}){const T=j,g=p,r=se(T.ladoInicial),s=se(T.direccionApertura);Fe(r,X=>{console.log("ðŸ”„ Lado apertura cambiÃ³ a:",X),g("update:ladoApertura",X)}),Fe(s,X=>{console.log("ðŸ”„ DirecciÃ³n apertura cambiÃ³ a:",X),g("update:direccionApertura",X)});const m={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},f={roble:new Image,nogal:new Image};f.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,f.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const e=l(()=>{var P,B,F;const X=typeof T.colorMarco=="object"?(B=(P=T.colorMarco)==null?void 0:P.nombre)==null?void 0:B.toLowerCase():(F=T.colorMarco)==null?void 0:F.toLowerCase();return m[X]||"#ffffff"});function w(X,P=!1){var F,K;const B=typeof T.colorMarco=="object"?(K=(F=T.colorMarco)==null?void 0:F.nombre)==null?void 0:K.toLowerCase():T.colorMarco.toLowerCase();return["roble","nogal"].includes(B)&&f[B]?{points:X,closed:!0,fillPatternImage:f[B],fillPatternRepeat:"repeat",fillPatternScale:{x:P?.15:.2,y:P?.15:.2},stroke:"black"}:{points:X,closed:!0,fill:e.value,stroke:"black"}}const N=l(()=>{const X=kl/T.ancho,P=kl/T.alto;return Math.min(X,P,1)*.9}),R=l(()=>to*N.value),G=l(()=>T.ancho*N.value),k=l(()=>T.alto*N.value),A={width:400,height:400},h=l(()=>w([be,be,be+G.value,be,be+G.value-R.value,be+R.value,be+R.value,be+R.value])),n=l(()=>w([be+G.value,be,be+G.value,be+k.value,be+G.value-R.value,be+k.value-R.value,be+G.value-R.value,be+R.value])),v=l(()=>w([be+G.value,be+k.value,be,be+k.value,be+R.value,be+k.value-R.value,be+G.value-R.value,be+k.value-R.value])),c=l(()=>w([be,be+k.value,be,be,be+R.value,be+R.value,be+R.value,be+k.value-R.value])),y=l(()=>({x:be+R.value,y:be+R.value,width:G.value-R.value*2,height:k.value-R.value*2,fill:"#b3e5fc",stroke:"black"})),L=l(()=>y.value.x+ha*N.value),V=l(()=>y.value.y+ha*N.value),q=l(()=>y.value.width-ha*2*N.value),_=l(()=>y.value.height-ha*2*N.value),D=l(()=>R.value*.8),M=l(()=>w([L.value,V.value,L.value+q.value,V.value,L.value+q.value-D.value,V.value+D.value,L.value+D.value,V.value+D.value],!0)),C=l(()=>w([L.value+q.value,V.value,L.value+q.value,V.value+_.value,L.value+q.value-D.value,V.value+_.value-D.value,L.value+q.value-D.value,V.value+D.value],!0)),$=l(()=>w([L.value+q.value,V.value+_.value,L.value,V.value+_.value,L.value+D.value,V.value+_.value-D.value,L.value+q.value-D.value,V.value+_.value-D.value],!0)),I=l(()=>w([L.value,V.value+_.value,L.value,V.value,L.value+D.value,V.value+D.value,L.value+D.value,V.value+_.value-D.value],!0)),S=l(()=>r.value==="izquierda"?L.value+q.value-15:L.value+15),H=l(()=>V.value+_.value/2),ve=l(()=>r.value==="izquierda"?{points:[L.value+5,V.value+5,L.value+q.value-5,V.value+_.value/2],stroke:"black",dash:[10,5],strokeWidth:2}:{points:[L.value+q.value-5,V.value+5,L.value+5,V.value+_.value/2],stroke:"black",dash:[10,5],strokeWidth:2}),ze=l(()=>r.value==="izquierda"?{points:[L.value+5,V.value+_.value-5,L.value+q.value-5,V.value+_.value/2],stroke:"black",dash:[10,5],strokeWidth:2}:{points:[L.value+q.value-5,V.value+_.value-5,L.value+5,V.value+_.value/2],stroke:"black",dash:[10,5],strokeWidth:2}),Me=l(()=>Math.min(Math.max(T.ancho/100,20),40)),ke=l(()=>({x:be+G.value/2-30,y:be+k.value+10,text:`${T.ancho}mm`,fontSize:Me.value,fill:"black"})),De=l(()=>({x:be-25,y:be+k.value/2,text:`${T.alto}mm`,fontSize:Me.value,fill:"black",rotation:-90,offsetX:Me.value/2})),Le=l(()=>({x:ke.value.x,y:ke.value.y+Me.value+5,text:`Apertura ${s.value.charAt(0).toUpperCase()}${s.value.slice(1)}`,fontSize:Math.min(18,Me.value*.8),fill:"black"})),ae=se(null);return W({exportarImagen:()=>ae.value?ae.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null}),(X,P)=>{const B=Y("v-line"),F=Y("v-rect"),K=Y("v-text"),x=Y("v-layer"),d=Y("v-stage");return b(),J("div",null,[ne("div",oo,[a($e,{modelValue:r.value,"onUpdate:modelValue":P[0]||(P[0]=i=>r.value=i),row:"",density:"compact",label:"Lado de apertura:"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a($e,{modelValue:s.value,"onUpdate:modelValue":P[1]||(P[1]=i=>s.value=i),row:"",density:"compact",label:"DirecciÃ³n de apertura:"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),a(d,{ref_key:"stageRef",ref:ae,config:A},{default:u(()=>[a(x,null,{default:u(()=>[a(B,{config:h.value},null,8,["config"]),a(B,{config:n.value},null,8,["config"]),a(B,{config:v.value},null,8,["config"]),a(B,{config:c.value},null,8,["config"]),a(F,{config:y.value},null,8,["config"]),a(B,{config:M.value},null,8,["config"]),a(B,{config:C.value},null,8,["config"]),a(B,{config:$.value},null,8,["config"]),a(B,{config:I.value},null,8,["config"]),a(Ze,{x:S.value,y:H.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),a(B,{config:ve.value},null,8,["config"]),a(B,{config:ze.value},null,8,["config"]),a(K,{config:ke.value},null,8,["config"]),a(K,{config:De.value},null,8,["config"]),a(K,{config:Le.value},null,8,["config"])]),_:1})]),_:1},512)])}}},ye=50,no=60,uo=80,Ml=300,Dl={__name:"VistaPuertaS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],ladoApertura:{type:String,default:"izquierda",validator:j=>["izquierda","derecha"].includes(j)},direccionApertura:{type:String,default:"interior",validator:j=>["interior","exterior"].includes(j)},pasoLibre:{type:Boolean,default:!1}},setup(j,{expose:W}){const p=j;se(p.ladoApertura);const T={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},g={roble:new Image,nogal:new Image};g.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,g.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const r=l(()=>{var X,P,B;const Q=typeof p.colorMarco=="object"?(P=(X=p.colorMarco)==null?void 0:X.nombre)==null?void 0:P.toLowerCase():(B=p.colorMarco)==null?void 0:B.toLowerCase();return T[Q]||"#ffffff"});function s(Q,X=!1){var B,F;const P=typeof p.colorMarco=="object"?(F=(B=p.colorMarco)==null?void 0:B.nombre)==null?void 0:F.toLowerCase():p.colorMarco.toLowerCase();return["roble","nogal"].includes(P)&&g[P]?{points:Q,closed:!0,fillPatternImage:g[P],fillPatternRepeat:"repeat",fillPatternScale:{x:X?.15:.2,y:X?.15:.2},stroke:"black"}:{points:Q,closed:!0,fill:r.value,stroke:"black"}}const m=l(()=>{const Q=Ml/p.ancho,X=Ml/p.alto;return Math.min(Q,X,1)*.9}),f=l(()=>no*m.value),e=l(()=>p.ancho*m.value),w=l(()=>p.alto*m.value),N=l(()=>s([ye,ye,ye+e.value,ye,ye+e.value-f.value,ye+f.value,ye+f.value,ye+f.value])),R=l(()=>s([ye+e.value,ye,ye+e.value,ye+w.value,ye+e.value-f.value,ye+w.value-(p.pasoLibre?0:f.value),ye+e.value-f.value,ye+f.value])),G=l(()=>s([ye,ye+w.value,ye,ye,ye+f.value,ye+f.value,ye+f.value,ye+w.value-(p.pasoLibre?0:f.value)])),k=l(()=>p.pasoLibre?null:s([ye+e.value,ye+w.value,ye,ye+w.value,ye+f.value,ye+w.value-f.value,ye+e.value-f.value,ye+w.value-f.value])),A=l(()=>{const Q=w.value-f.value-(p.pasoLibre?0:f.value),X=Math.max(Q,5),P=Math.max(e.value-f.value*2,5);return{x:ye+f.value,y:ye+f.value,width:P,height:X,fill:"#b3e5fc",stroke:"black"}}),h=l(()=>A.value.x),n=l(()=>A.value.y),v=l(()=>A.value.width),c=l(()=>A.value.height),y=l(()=>{const Q=uo*m.value,X=f.value*1.15,P=v.value*.45;return Math.min(Math.max(Q,X),P)}),L=l(()=>s([h.value,n.value,h.value+v.value,n.value,h.value+v.value-y.value,n.value+y.value,h.value+y.value,n.value+y.value],!0)),V=l(()=>s([h.value+v.value,n.value,h.value+v.value,n.value+c.value,h.value+v.value-y.value,n.value+c.value-y.value,h.value+v.value-y.value,n.value+y.value],!0)),q=l(()=>s([h.value+v.value,n.value+c.value,h.value,n.value+c.value,h.value+y.value,n.value+c.value-y.value,h.value+v.value-y.value,n.value+c.value-y.value],!0)),_=l(()=>s([h.value,n.value+c.value,h.value,n.value,h.value+y.value,n.value+y.value,h.value+y.value,n.value+c.value-y.value],!0)),D=l(()=>p.ladoApertura==="izquierda"?h.value+v.value-15:h.value+15),M=l(()=>n.value+c.value/2),C=l(()=>p.direccionApertura==="interior"?0:Math.min(Math.max(v.value*.1,8*m.value),25*m.value)),$=l(()=>{const Q=p.ladoApertura==="izquierda",X=C.value*(Q?-1:1),P=Q?h.value:h.value+v.value,B=n.value+8,F=n.value+c.value-8,K=n.value+c.value/2,x=Q?h.value+v.value-8:h.value+8,d=P+X;return[{points:[d,B,x,K],stroke:"black",dash:[10,5],strokeWidth:2},{points:[d,F,x,K],stroke:"black",dash:[10,5],strokeWidth:2}]}),I=l(()=>Math.min(Math.max(p.ancho/100,20),40)),S=l(()=>({x:ye+e.value/2-30,y:ye+w.value+10,text:`${p.ancho}mm`,fontSize:I.value,fill:"black"})),H=l(()=>({x:ye-25,y:ye+w.value/2,text:`${p.alto}mm`,fontSize:I.value,fill:"black",rotation:-90,offsetX:I.value/2})),ve=l(()=>({x:S.value.x,y:S.value.y+I.value+5,text:`Apertura ${p.direccionApertura.charAt(0).toUpperCase()}${p.direccionApertura.slice(1)}`,fontSize:Math.min(18,I.value*.8),fill:"black"})),ze=se(null);W({exportarImagen:()=>ze.value?ze.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null});const ke=l(()=>Math.max(28*m.value,f.value*.45)),De=l(()=>Math.min(Math.max(140*m.value,30*m.value),c.value*.4));l(()=>2*m.value);const Le=l(()=>p.direccionApertura==="interior"),ae=l(()=>{if(!Le.value)return[];let Q=c.value>2200?4:3;const X=Math.max(c.value-16*m.value,20);let P=De.value;P*Q>X*.85&&(P=X*.85/Q);const B=(X-P*Q)/(Q+1),F=[];for(let K=0;K<Q;K++){const x=n.value+8*m.value+B*(K+1)+P*K,d=p.ladoApertura==="izquierda"?h.value-ke.value/2+2*m.value:h.value+v.value-ke.value/2-2*m.value;F.push({x:d,y:x,width:ke.value,height:P,fill:"#888",stroke:"black",cornerRadius:2})}return F});return(Q,X)=>{const P=Y("v-line"),B=Y("v-rect"),F=Y("v-text"),K=Y("v-layer"),x=Y("v-stage");return b(),J("div",null,[a(x,{ref_key:"stageRef",ref:ze,config:{width:400,height:400}},{default:u(()=>[a(K,null,{default:u(()=>[a(P,{config:N.value},null,8,["config"]),a(P,{config:R.value},null,8,["config"]),a(P,{config:G.value},null,8,["config"]),k.value?(b(),E(P,{key:0,config:k.value},null,8,["config"])):ue("",!0),a(B,{config:A.value},null,8,["config"]),a(P,{config:L.value},null,8,["config"]),a(P,{config:V.value},null,8,["config"]),a(P,{config:q.value},null,8,["config"]),a(P,{config:_.value},null,8,["config"]),a(Ze,{x:D.value,y:M.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),(b(!0),J(ce,null,Ue($.value,(d,i)=>(b(),E(P,{key:"apertura-"+i,config:d},null,8,["config"]))),128)),(b(!0),J(ce,null,Ue(ae.value,(d,i)=>(b(),E(B,{key:"hinge-"+i,config:d},null,8,["config"]))),128)),a(F,{config:S.value},null,8,["config"]),a(F,{config:H.value},null,8,["config"]),a(F,{config:ve.value},null,8,["config"])]),_:1})]),_:1},512)])}}},Ve=50,ro=60,io=80,jl=320,so={__name:"VistaMamparaS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],hojaActiva:{type:String,default:"derecha",validator:j=>["izquierda","derecha"].includes(j)},direccionApertura:{type:String,default:"interior",validator:j=>["interior","exterior"].includes(j)},pasoLibre:{type:Boolean,default:!1}},setup(j,{expose:W}){const p=j,T={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},g={roble:new Image,nogal:new Image};g.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,g.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const r=l(()=>{var o,t,z;const i=typeof p.colorMarco=="object"?(t=(o=p.colorMarco)==null?void 0:o.nombre)==null?void 0:t.toLowerCase():(z=p.colorMarco)==null?void 0:z.toLowerCase();return T[i]||"#ffffff"});function s(i,o=!1){var z,U,O;const t=typeof p.colorMarco=="object"?(U=(z=p.colorMarco)==null?void 0:z.nombre)==null?void 0:U.toLowerCase():(O=p.colorMarco)==null?void 0:O.toLowerCase();return["roble","nogal"].includes(t)&&g[t]?{points:i,closed:!0,fillPatternImage:g[t],fillPatternRepeat:"repeat",fillPatternScale:{x:o?.15:.2,y:o?.15:.2},stroke:"black"}:{points:i,closed:!0,fill:r.value,stroke:"black"}}const m=l(()=>Math.min(jl/p.ancho,jl/p.alto,1)*.9),f=l(()=>ro*m.value),e=l(()=>p.ancho*m.value),w=l(()=>p.alto*m.value),N=l(()=>s([Ve,Ve,Ve+e.value,Ve,Ve+e.value-f.value,Ve+f.value,Ve+f.value,Ve+f.value])),R=l(()=>s([Ve+e.value,Ve,Ve+e.value,Ve+w.value,Ve+e.value-f.value,Ve+w.value-(p.pasoLibre?0:f.value),Ve+e.value-f.value,Ve+f.value])),G=l(()=>s([Ve,Ve+w.value,Ve,Ve,Ve+f.value,Ve+f.value,Ve+f.value,Ve+w.value-(p.pasoLibre?0:f.value)])),k=l(()=>p.pasoLibre?null:s([Ve+e.value,Ve+w.value,Ve,Ve+w.value,Ve+f.value,Ve+w.value-f.value,Ve+e.value-f.value,Ve+w.value-f.value])),A=l(()=>{const i=Math.max(e.value-2*f.value,5),o=Math.max(w.value-f.value-(p.pasoLibre?0:f.value),5);return{x:Ve+f.value,y:Ve+f.value,width:i,height:o,fill:"#b3e5fc",stroke:"black"}}),h=l(()=>Math.max(6*m.value,f.value*.15)),n=l(()=>{const i=(A.value.width-h.value)/2;return{x:A.value.x,y:A.value.y,w:i,h:A.value.height}}),v=l(()=>{const i=(A.value.width-h.value)/2;return{x:A.value.x+i+h.value,y:A.value.y,w:i,h:A.value.height}}),c=l(()=>{const i=io*m.value,o=f.value*1.15,t=Math.min(n.value.w,v.value.w)*.45;return Math.min(Math.max(i,o),t)}),y=l(()=>s([n.value.x,n.value.y,n.value.x+n.value.w,n.value.y,n.value.x+n.value.w-c.value,n.value.y+c.value,n.value.x+c.value,n.value.y+c.value],!0)),L=l(()=>s([n.value.x+n.value.w,n.value.y,n.value.x+n.value.w,n.value.y+n.value.h,n.value.x+n.value.w-c.value,n.value.y+n.value.h-c.value,n.value.x+n.value.w-c.value,n.value.y+c.value],!0)),V=l(()=>s([n.value.x+n.value.w,n.value.y+n.value.h,n.value.x,n.value.y+n.value.h,n.value.x+c.value,n.value.y+n.value.h-c.value,n.value.x+n.value.w-c.value,n.value.y+n.value.h-c.value],!0)),q=l(()=>s([n.value.x,n.value.y+n.value.h,n.value.x,n.value.y,n.value.x+c.value,n.value.y+c.value,n.value.x+c.value,n.value.y+n.value.h-c.value],!0)),_=l(()=>s([v.value.x,v.value.y,v.value.x+v.value.w,v.value.y,v.value.x+v.value.w-c.value,v.value.y+c.value,v.value.x+c.value,v.value.y+c.value],!0)),D=l(()=>s([v.value.x+v.value.w,v.value.y,v.value.x+v.value.w,v.value.y+v.value.h,v.value.x+v.value.w-c.value,v.value.y+v.value.h-c.value,v.value.x+v.value.w-c.value,v.value.y+c.value],!0)),M=l(()=>s([v.value.x+v.value.w,v.value.y+v.value.h,v.value.x,v.value.y+v.value.h,v.value.x+c.value,v.value.y+v.value.h-c.value,v.value.x+v.value.w-c.value,v.value.y+v.value.h-c.value],!0)),C=l(()=>s([v.value.x,v.value.y+v.value.h,v.value.x,v.value.y,v.value.x+c.value,v.value.y+c.value,v.value.x+c.value,v.value.y+v.value.h-c.value],!0)),$=l(()=>p.hojaActiva==="izquierda"?n.value.x+n.value.w-12:v.value.x+12),I=l(()=>A.value.y+A.value.height/2);function S(i){return p.direccionApertura==="interior"?0:Math.min(Math.max(i.w*.1,8*m.value),25*m.value)}function H(i,o){const t=o==="left",z=S(i)*(t?-1:1),O=(t?i.x:i.x+i.w)+z,ie=i.y+i.h/2,te=i.y+8,me=i.y+i.h-8,_e=t?i.x+i.w-8:i.x+8;return[{points:[O,te,_e,ie],stroke:"black",dash:[10,5],strokeWidth:2},{points:[O,me,_e,ie],stroke:"black",dash:[10,5],strokeWidth:2}]}const ve=l(()=>H(n.value,"left")),ze=l(()=>H(v.value,"right")),Me=l(()=>p.direccionApertura==="interior"),ke=l(()=>Math.max(28*m.value,f.value*.45)),De=l(()=>Math.min(Math.max(140*m.value,30*m.value),Math.min(n.value.h,v.value.h)*.4)),Le=l(()=>2*m.value);function ae(i,o){const t=[];let z=i.h>2200*m.value?4:3;const U=Math.max(i.h-16*m.value,20);let O=De.value;O*z>U*.85&&(O=U*.85/z);const ie=(U-O*z)/(z+1);for(let te=0;te<z;te++){const me=i.y+8*m.value+ie*(te+1)+O*te,_e=o==="left"?i.x-ke.value/2+Le.value:i.x+i.w-ke.value/2-Le.value;t.push({x:_e,y:me,width:ke.value,height:O,fill:"#888",stroke:"black",cornerRadius:2})}return t}const Q=l(()=>Me.value?ae(n.value,"left"):[]),X=l(()=>Me.value?ae(v.value,"right"):[]),P=l(()=>Math.min(Math.max(p.ancho/100,20),40)),B=l(()=>({x:Ve+e.value/2-30,y:Ve+w.value+10,text:`${p.ancho}mm`,fontSize:P.value,fill:"black"})),F=l(()=>({x:Ve-25,y:Ve+w.value/2,text:`${p.alto}mm`,fontSize:P.value,fill:"black",rotation:-90,offsetX:P.value/2})),K=l(()=>({x:B.value.x,y:B.value.y+P.value+5,text:`Apertura ${p.direccionApertura.charAt(0).toUpperCase()}${p.direccionApertura.slice(1)}`,fontSize:Math.min(18,P.value*.8),fill:"black"})),x=se(null);return W({exportarImagen:()=>x.value?x.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null}),(i,o)=>{const t=Y("v-line"),z=Y("v-rect"),U=Y("v-text"),O=Y("v-layer"),ie=Y("v-stage");return b(),J("div",null,[a(ie,{ref_key:"stageRef",ref:x,config:{width:420,height:420}},{default:u(()=>[a(O,null,{default:u(()=>[a(t,{config:N.value},null,8,["config"]),a(t,{config:R.value},null,8,["config"]),a(t,{config:G.value},null,8,["config"]),k.value?(b(),E(t,{key:0,config:k.value},null,8,["config"])):ue("",!0),a(z,{config:A.value},null,8,["config"]),a(t,{config:y.value},null,8,["config"]),a(t,{config:L.value},null,8,["config"]),a(t,{config:V.value},null,8,["config"]),a(t,{config:q.value},null,8,["config"]),a(t,{config:_.value},null,8,["config"]),a(t,{config:D.value},null,8,["config"]),a(t,{config:M.value},null,8,["config"]),a(t,{config:C.value},null,8,["config"]),a(Ze,{x:$.value,y:I.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),(b(!0),J(ce,null,Ue(ve.value,(te,me)=>(b(),E(t,{key:"apertura-left-"+me,config:te},null,8,["config"]))),128)),(b(!0),J(ce,null,Ue(ze.value,(te,me)=>(b(),E(t,{key:"apertura-right-"+me,config:te},null,8,["config"]))),128)),(b(!0),J(ce,null,Ue(Q.value,(te,me)=>(b(),E(z,{key:"hl-"+me,config:te},null,8,["config"]))),128)),(b(!0),J(ce,null,Ue(X.value,(te,me)=>(b(),E(z,{key:"hr-"+me,config:te},null,8,["config"]))),128)),a(U,{config:B.value},null,8,["config"]),a(U,{config:F.value},null,8,["config"]),a(U,{config:K.value},null,8,["config"])]),_:1})]),_:1},512)])}}},vo={style:{"margin-bottom":"10px"}},pe=40,co=54,mo=98,Al=20,Cl=300,fo={__name:"VistaVentanaCorredera98",props:{ancho:Number,alto:Number,colorMarco:{type:String,default:"blanco"},hojasMoviles:{type:Number,default:"2"},hojaMovilSeleccionada:{type:Number,default:1},ordenHoja1AlFrente:{type:Boolean,default:!0},color:Object},setup(j,{expose:W}){const p=se(null);W({exportarImagen:()=>{if(console.log("ðŸ–¼ï¸ exportarImagen llamado en VentanaCorredera"),console.log("ðŸ–¼ï¸ stageRef.value:",p.value),p.value)try{const F=p.value.getStage();console.log("ðŸ–¼ï¸ stage obtenido:",F),F.draw();const K=F.toDataURL({pixelRatio:1,quality:.9});return console.log("ðŸ–¼ï¸ dataURL generado:",K.substring(0,50)),K}catch(F){return console.error("âŒ Error en exportarImagen:",F),null}return console.warn("âš ï¸ stageRef no disponible"),null}});const g={roble:null,nogal:null};Ca(()=>{const F=(K,x)=>{const d=new Image;d.src=K,d.onload=()=>{g[x]=d}};F(Sl,"roble"),F($l,"nogal")});const r=j,s=l(()=>r.colorMarco.toLowerCase());function m(F){const K=s.value.toLowerCase();return["roble","nogal"].includes(K)&&g[K]?{points:F,closed:!0,fillPatternImage:g[K],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:F,closed:!0,fill:k.value,stroke:"black"}}const f=se(r.ordenHoja1AlFrente),e=l(()=>N.value),w=l(()=>R.value);Fe(()=>r.ordenHoja1AlFrente,F=>{f.value=F});const N=l(()=>r.hojasMoviles===2||r.hojaMovilSeleccionada===1),R=l(()=>r.hojasMoviles===2||r.hojaMovilSeleccionada===2),G={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},k=l(()=>{var K,x;const F=(x=(K=r.colorMarco)==null?void 0:K.toLowerCase)==null?void 0:x.call(K);return G[F]||"#ffffff"}),A=l(()=>{const F=Cl/r.ancho,K=Cl/r.alto;return Math.min(F,K,1)*.9}),h=l(()=>co*A.value),n=l(()=>mo*A.value),v=l(()=>r.ancho*A.value),c=l(()=>r.alto*A.value),y=l(()=>Al*A.value);function L(F){const K=r.colorMarco.toLowerCase();return["roble","nogal"].includes(K)&&g[K]?{points:F,closed:!0,fillPatternImage:g[K],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:F,closed:!0,fill:k.value,stroke:"black"}}const V=l(()=>L([pe,pe,pe+v.value,pe,pe+v.value-h.value,pe+h.value,pe+h.value,pe+h.value])),q=l(()=>L([pe+v.value,pe,pe+v.value,pe+c.value,pe+v.value-h.value,pe+c.value-h.value,pe+v.value-h.value,pe+h.value])),_=l(()=>L([pe+v.value,pe+c.value,pe,pe+c.value,pe+h.value,pe+c.value-h.value,pe+v.value-h.value,pe+c.value-h.value])),D=l(()=>L([pe,pe+c.value,pe,pe,pe+h.value,pe+h.value,pe+h.value,pe+c.value-h.value])),M=l(()=>(v.value-h.value*2+Al)/2),C=l(()=>c.value-h.value*2),$=l(()=>pe+h.value),I=l(()=>pe+h.value),S=l(()=>pe+v.value-h.value-M.value+y.value-n.value*.22),H=I,ve=l(()=>f.value?[{points:[$.value,I.value,$.value+M.value,I.value,$.value+M.value-n.value,I.value+n.value,$.value+n.value,I.value+n.value],closed:!0,fill:k.value,stroke:"black"},{points:[$.value+M.value,I.value,$.value+M.value,I.value+C.value,$.value+M.value-n.value,I.value+C.value-n.value,$.value+M.value-n.value,I.value+n.value],closed:!0,fill:k.value,stroke:"black"},{points:[$.value+M.value,I.value+C.value,$.value,I.value+C.value,$.value+n.value,I.value+C.value-n.value,$.value+M.value-n.value,I.value+C.value-n.value],closed:!0,fill:k.value,stroke:"black"},{points:[$.value,I.value+C.value,$.value,I.value,$.value+n.value,I.value+n.value,$.value+n.value,I.value+C.value-n.value],closed:!0,fill:k.value,stroke:"black"}]:[{points:[$.value,I.value+C.value,$.value+n.value,I.value+C.value-n.value,$.value+M.value-n.value,I.value+C.value-n.value,$.value+M.value,I.value+C.value],closed:!0,fill:k.value,stroke:"black"},{points:[$.value,I.value+C.value,$.value,I.value,$.value+n.value,I.value+n.value,$.value+n.value,I.value+C.value-n.value],closed:!0,fill:k.value,stroke:"black"},{points:[$.value,I.value,$.value+M.value,I.value,$.value+M.value-n.value,I.value+n.value,$.value+n.value,I.value+n.value],closed:!0,fill:k.value,stroke:"black"},{points:[$.value+M.value,I.value,$.value+M.value,I.value+C.value,$.value+M.value-n.value,I.value+C.value-n.value,$.value+M.value-n.value,I.value+n.value],closed:!0,fill:k.value,stroke:"black"}]),ze=l(()=>f.value?[{points:[S.value,H.value,S.value+M.value,H.value,S.value+M.value-n.value,H.value+n.value,S.value+n.value,H.value+n.value],closed:!0,fill:k.value,stroke:"black"},{points:[S.value+M.value,H.value,S.value+M.value,H.value+C.value,S.value+M.value-n.value,H.value+C.value-n.value,S.value+M.value-n.value,H.value+n.value],closed:!0,fill:k.value,stroke:"black"},{points:[S.value+M.value,H.value+C.value,S.value,H.value+C.value,S.value+n.value,H.value+C.value-n.value,S.value+M.value-n.value,H.value+C.value-n.value],closed:!0,fill:k.value,stroke:"black"},{points:[S.value,H.value+C.value,S.value,H.value,S.value+n.value,H.value+n.value,S.value+n.value,H.value+C.value-n.value],closed:!0,fill:k.value,stroke:"black"}]:[{points:[S.value,H.value,S.value+M.value,H.value,S.value+M.value-n.value,H.value+n.value,S.value+n.value,H.value+n.value],closed:!0,fill:k.value,stroke:"black"},{points:[S.value+M.value,H.value,S.value+M.value,H.value+C.value,S.value+M.value-n.value,H.value+C.value-n.value,S.value+M.value-n.value,H.value+n.value],closed:!0,fill:k.value,stroke:"black"},{points:[S.value+M.value,H.value+C.value,S.value,H.value+C.value,S.value+n.value,H.value+C.value-n.value,S.value+M.value-n.value,H.value+C.value-n.value],closed:!0,fill:k.value,stroke:"black"},{points:[S.value,H.value+C.value,S.value,H.value,S.value+n.value,H.value+n.value,S.value+n.value,H.value+C.value-n.value],closed:!0,fill:k.value,stroke:"black"}]),Me=l(()=>{if(f.value)return{x:$.value+n.value,y:I.value+n.value,width:M.value-n.value*2,height:C.value-n.value*2,fill:"lightblue",stroke:"black"};const F=n.value*.35+A.value*50,K=n.value*1.3+A.value*1;return{x:$.value+F,y:I.value+n.value,width:M.value-K-15,height:C.value-n.value*2,fill:"lightblue",stroke:"black"}}),ke=l(()=>{if(f.value){const F=n.value*.4+A.value*10,K=n.value*1.4+A.value*10;return{x:S.value+F+10,y:H.value+n.value,width:M.value-K-10,height:C.value-n.value*2,fill:"lightblue",stroke:"black"}}return{x:S.value+n.value,y:H.value+n.value,width:M.value-n.value*2,height:C.value-n.value*2,fill:"lightblue",stroke:"black"}}),De=l(()=>r.hojasMoviles===2||r.hojasMoviles===1&&r.hojaMovilSeleccionada===1?"â†’":"+"),Le=l(()=>r.hojasMoviles===2||r.hojasMoviles===1&&r.hojaMovilSeleccionada===2?"â†":"+"),ae=l(()=>({x:$.value+M.value/2-10,y:I.value+C.value/2+10,text:De.value,fontSize:30,fill:"black"})),Q=l(()=>({x:S.value+M.value/2-10,y:H.value+C.value/2+10,text:Le.value,fontSize:30,fill:"black"})),X=l(()=>{const F=Math.max(r.ancho,r.alto);return Math.min(Math.max(F/100,20),40)}),P=l(()=>({x:pe+v.value/2-30,y:pe+c.value+10,text:`${r.ancho}mm`,fontSize:X.value,fill:"black"})),B=l(()=>({x:pe-25,y:pe+c.value/2,text:`${r.alto}mm`,fontSize:X.value,fill:"black",rotation:-90,offsetX:X.value/2}));return(F,K)=>{const x=Y("v-line"),d=Y("v-rect"),i=Y("v-text"),o=Y("v-layer"),t=Y("v-stage");return b(),J("div",null,[ne("div",vo,[a(ua,{modelValue:f.value,"onUpdate:modelValue":K[0]||(K[0]=z=>f.value=z),label:"Hoja 1 adelante",density:"compact"},null,8,["modelValue"])]),a(t,{ref_key:"stageRef",ref:p,config:{width:400,height:400}},{default:u(()=>[a(o,null,{default:u(()=>[a(x,le(oe(V.value)),null,16),a(x,le(oe(q.value)),null,16),a(x,le(oe(_.value)),null,16),a(x,le(oe(D.value)),null,16),f.value?(b(),J(ce,{key:0},[a(d,le(oe(ke.value)),null,16),(b(!0),J(ce,null,Ue(ze.value,(z,U)=>(b(),E(x,we({key:"mitra-h2-"+U,ref_for:!0},m(z.points)),null,16))),128)),a(i,{x:S.value+M.value/2-10,y:ia(H)+C.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(d,le(oe(Me.value)),null,16),(b(!0),J(ce,null,Ue(ve.value,(z,U)=>(b(),E(x,we({key:"mitra-h1-"+U,ref_for:!0},m(z.points)),null,16))),128)),a(i,{x:$.value+M.value/2-10,y:I.value+C.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)):(b(),J(ce,{key:1},[a(d,le(oe(Me.value)),null,16),(b(!0),J(ce,null,Ue(ve.value,(z,U)=>(b(),E(x,we({key:"mitra-h1-"+U,ref_for:!0},m(z.points)),null,16))),128)),a(i,{x:$.value+M.value/2-10,y:I.value+C.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(d,le(oe(ke.value)),null,16),(b(!0),J(ce,null,Ue(ze.value,(z,U)=>(b(),E(x,we({key:"mitra-h2-"+U,ref_for:!0},m(z.points)),null,16))),128)),a(i,{x:S.value+M.value/2-10,y:ia(H)+C.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)),a(i,le(oe(P.value)),null,16),a(i,le(oe(B.value)),null,16),a(i,le(oe(ae.value)),null,16),a(i,le(oe(Q.value)),null,16),e.value?(b(),E(Ze,{key:2,x:$.value+n.value-A.value*35,y:I.value+C.value/2,escalaManilla:A.value*4},null,8,["x","y","escalaManilla"])):ue("",!0),w.value?(b(),E(Ze,{key:3,x:S.value+M.value-n.value+A.value*35,y:ia(H)+C.value/2,escalaManilla:A.value*4},null,8,["x","y","escalaManilla"])):ue("",!0)]),_:1})]),_:1},512)])}}},xe=40,zl=300,po=54,ho=80,go={__name:"VistaVentanaMonorriel",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"},ladoApertura:{type:String,default:"derecha",validator:j=>["izquierda","derecha"].includes(j)}},setup(j,{expose:W}){const p=j,T={roble:null,nogal:null};Ca(()=>{const ae=(Q,X)=>{const P=new Image;P.src=Q,P.onload=()=>T[X]=P};ae(Sl,"roble"),ae($l,"nogal")});const g={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b",roble:"#c9a36b"},r=l(()=>{var ae,Q;return g[(Q=(ae=p.colorMarco)==null?void 0:ae.toLowerCase)==null?void 0:Q.call(ae)]||"#ffffff"});function s(ae){var X,P;const Q=(P=(X=p.colorMarco)==null?void 0:X.toLowerCase)==null?void 0:P.call(X);return["roble","nogal"].includes(Q)&&T[Q]?{points:ae,closed:!0,fillPatternImage:T[Q],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:ae,closed:!0,fill:r.value,stroke:"black"}}const m=se(null),f=l(()=>Math.min(zl/p.ancho,zl/p.alto,1)*.9),e=l(()=>po*f.value),w=l(()=>ho*f.value),N=l(()=>p.ancho*f.value),R=l(()=>p.alto*f.value),G=l(()=>p.ladoApertura==="derecha"),k=l(()=>s([xe,xe,xe+N.value,xe,xe+N.value-e.value,xe+e.value,xe+e.value,xe+e.value])),A=l(()=>s([xe+N.value,xe,xe+N.value,xe+R.value,xe+N.value-e.value,xe+R.value-e.value,xe+N.value-e.value,xe+e.value])),h=l(()=>s([xe+N.value,xe+R.value,xe,xe+R.value,xe+e.value,xe+R.value-e.value,xe+N.value-e.value,xe+R.value-e.value])),n=l(()=>s([xe,xe+R.value,xe,xe,xe+e.value,xe+e.value,xe+e.value,xe+R.value-e.value])),v=l(()=>xe+e.value),c=l(()=>xe+e.value),y=l(()=>Math.max(N.value-2*e.value,5)),L=l(()=>Math.max(R.value-2*e.value,5)),V=l(()=>Math.max(y.value/2,10)),q=l(()=>G.value?{x:v.value+V.value,y:c.value,w:V.value,h:L.value}:{x:v.value,y:c.value,w:V.value,h:L.value}),_=l(()=>G.value?{x:v.value,y:c.value,w:V.value,h:L.value}:{x:v.value+V.value,y:c.value,w:V.value,h:L.value}),D=l(()=>({x:q.value.x,y:q.value.y,width:q.value.w,height:q.value.h,fill:"lightblue",stroke:"black"}));function M(ae,Q,X,P){return[s([ae,Q,ae+X,Q,ae+X-w.value,Q+w.value,ae+w.value,Q+w.value]),s([ae+X,Q,ae+X,Q+P,ae+X-w.value,Q+P-w.value,ae+X-w.value,Q+w.value]),s([ae+X,Q+P,ae,Q+P,ae+w.value,Q+P-w.value,ae+X-w.value,Q+P-w.value]),s([ae,Q+P,ae,Q,ae+w.value,Q+w.value,ae+w.value,Q+P-w.value])]}const C=l(()=>M(_.value.x,_.value.y,_.value.w,_.value.h)),$=l(()=>({x:_.value.x+w.value,y:_.value.y+w.value,width:Math.max(_.value.w-2*w.value,5),height:Math.max(_.value.h-2*w.value,5),fill:"lightblue",stroke:"black"})),I=l(()=>{const ae=_.value.x+w.value/2,Q=_.value.x+_.value.w-w.value/2;return G.value?ae:Q}),S=l(()=>_.value.y+_.value.h/2),H=l(()=>G.value?"â†’":"â†"),ve=l(()=>_.value.x+_.value.w/2-10),ze=l(()=>_.value.y+_.value.h/2-15),Me=l(()=>Math.min(Math.max(Math.max(p.ancho,p.alto)/100,20),40)),ke=l(()=>({x:xe+N.value/2-30,y:xe+R.value+10,text:`${p.ancho}mm`,fontSize:Me.value,fill:"black"})),De=l(()=>({x:xe-25,y:xe+R.value/2,text:`${p.alto}mm`,fontSize:Me.value,fill:"black",rotation:-90,offsetX:Me.value/2}));return W({exportarImagen:()=>{if(m.value){const ae=m.value.getStage();return ae.draw(),ae.toDataURL({pixelRatio:1,quality:.9})}return null}}),(ae,Q)=>{const X=Y("v-line"),P=Y("v-rect"),B=Y("v-text"),F=Y("v-layer"),K=Y("v-stage");return b(),J("div",null,[a(K,{ref_key:"stageRef",ref:m,config:{width:400,height:400}},{default:u(()=>[a(F,null,{default:u(()=>[a(X,le(oe(k.value)),null,16),a(X,le(oe(A.value)),null,16),a(X,le(oe(h.value)),null,16),a(X,le(oe(n.value)),null,16),a(P,le(oe(D.value)),null,16),a(P,le(oe($.value)),null,16),(b(!0),J(ce,null,Ue(C.value,(x,d)=>(b(),E(X,we({key:"hm-"+d,ref_for:!0},x),null,16))),128)),a(Ze,{x:I.value,y:S.value,escalaManilla:f.value*4},null,8,["x","y","escalaManilla"]),a(B,{x:ve.value,y:ze.value,text:H.value,fontSize:30,fontStyle:"bold",fill:"black"},null,8,["x","y","text"]),a(B,le(oe(ke.value)),null,16),a(B,le(oe(De.value)),null,16)]),_:1})]),_:1},512)])}}},bo=Object.assign({name:"VistaVentanaCompuestaInterna"},{__name:"VistaVentanaCompuestaInterna",props:{ancho:{type:[Number,String],required:!0},alto:{type:[Number,String],required:!0},colorMarco:{type:[String,Object],default:"blanco"},orientacion:{type:String,default:"horizontal"},items:{type:Array,default:()=>[]},escala:{type:Number,default:1},x:{type:Number,default:0},y:{type:Number,default:0},pathPrefix:{type:String,default:""}},emits:["agregar","agregar-borde","editar-ventana","eliminar-ventana"],setup(j,{emit:W}){const p=W,T=se(new Map),g=se(new Map),r=j;function s(c){p("agregar",c)}function m(c){console.log("ðŸ”§ Editando ventana por path:",c),p("editar-ventana",c)}function f(c){p("eliminar-ventana",c)}function e(c,y){console.log("ðŸ”§ Click en botÃ³n editar:",y),c&&c.evt&&c.evt.stopPropagation&&c.evt.stopPropagation(),m(y)}function w(c,y){console.log("ðŸ—‘ï¸ Click en botÃ³n eliminar:",y),c&&c.evt&&c.evt.stopPropagation&&c.evt.stopPropagation(),f(y)}function N(c){const y=Date.now(),L=g.value.get(c)||0,V=y-L;if(console.log(`ðŸ‘† Click en ventana ${c}, tiempo desde Ãºltimo: ${V}ms`),V<400&&V>50){console.log("ðŸŽ¯ Â¡DOBLE CLICK detectado! Editando ventana:",c),T.value.has(c)&&(clearTimeout(T.value.get(c)),T.value.delete(c)),g.value.delete(c),m(c);return}g.value.set(c,y),T.value.has(c)&&clearTimeout(T.value.get(c));const q=setTimeout(()=>{console.log("â±ï¸ Timer expirado para ventana:",c),g.value.delete(c),T.value.delete(c)},400);T.value.set(c,q)}Nl(()=>{T.value.forEach(c=>clearTimeout(c)),T.value.clear(),g.value.clear()});const R=l(()=>Number(r.ancho)||1),G=l(()=>Number(r.alto)||1),k=l(()=>r.items.filter(c=>c&&(typeof c.tipo=="number"||c.tipo==="compuesta")&&c.tipo!==null&&c.tipo!==void 0)),A=l(()=>{const c=k.value.length;if(!c)return[];const y=k.value.reduce((L,V)=>{const q=Number(V==null?void 0:V.sizePercent)||0;return L+q},0);return y>0?k.value.map(L=>{const V=Number(L==null?void 0:L.sizePercent)||0;return Math.max(0,Math.min(1,V/y))}):Array(c).fill(1/c)});Fe(()=>r.items,()=>{console.log("ðŸ”„ Items cambiaron, forzando recÃ¡lculo de segmentos")},{deep:!0});const h=l(()=>{console.log("ðŸŽ¯ INTERNA - RECALCULANDO SEGMENTOS"),console.log("Props colorMarco:",r.colorMarco);const c=[];let y=0,L=0;return k.value.forEach((V,q)=>{let _,D;if(V.ancho&&V.alto)_=Number(V.ancho),D=Number(V.alto),console.log(`ðŸ“ Ventana ${q} - Usando dimensiones especÃ­ficas:`,{ancho:_,alto:D});else{const S=A.value[q]||0;r.orientacion==="horizontal"?(_=R.value*S,D=G.value):(_=R.value,D=G.value*S),console.log(`ðŸ“ Ventana ${q} - Calculado por porcentaje:`,{ancho:_,alto:D,porcentaje:S})}const M=r.x+(r.orientacion==="horizontal"?y*r.escala:0),C=r.y+(r.orientacion==="vertical"?L*r.escala:0),$=r.pathPrefix?`${r.pathPrefix}.${q}`:`${q}`,I={x:M,y:C,ancho:_,alto:D,escala:r.escala,colorMarco:r.colorMarco};(V==null?void 0:V.tipo)==="compuesta"?c.push({key:"comp-"+q,path:$,isCompuesta:!0,props:{...I,orientacion:V.orientacion||"horizontal",items:V.items||[],pathPrefix:$}}):c.push({key:"simple-"+q,path:$,isCompuesta:!1,props:{...I,tipo:V.tipo,ladoApertura:V.ladoApertura||"izquierda",direccionApertura:V.direccionApertura||"interior"}}),r.orientacion==="horizontal"?y+=_:L+=D}),c}),n=c=>{if(r.orientacion==="horizontal"){let y=r.x;for(let L=0;L<c;L++){const V=k.value[L];if(V!=null&&V.ancho)y+=Number(V.ancho)*r.escala;else{const q=A.value[L]||0;y+=R.value*q*r.escala}}return y}return r.x+R.value*r.escala/2},v=c=>{if(r.orientacion==="vertical"){let y=r.y;for(let L=0;L<c;L++){const V=k.value[L];if(V!=null&&V.alto)y+=Number(V.alto)*r.escala;else{const q=A.value[L]||0;y+=G.value*q*r.escala}}return y}return r.y+G.value*r.escala/2};return(c,y)=>{const L=Y("v-rect"),V=Y("v-circle"),q=Y("v-text"),_=Y("v-group"),D=Y("VistaVentanaCompuestaInterna",!0);return b(),E(_,null,{default:u(()=>[(b(!0),J(ce,null,Ue(h.value,M=>(b(),J(ce,{key:M.key},[M.isCompuesta?(b(),E(D,we({key:1,ref_for:!0},M.props,{"path-prefix":M.path,onAgregar:y[0]||(y[0]=C=>p("agregar",C)),onAgregarBorde:y[1]||(y[1]=C=>p("agregar-borde",C)),onEditarVentana:y[2]||(y[2]=C=>p("editar-ventana",C)),onEliminarVentana:y[3]||(y[3]=C=>p("eliminar-ventana",C))}),null,16,["path-prefix"])):(b(),E(_,{key:0},{default:u(()=>[a(El,we({ref_for:!0},M.props,{color:M.props.colorMarco,colorMarco:M.props.colorMarco}),null,16,["color","colorMarco"]),a(L,{x:M.props.x,y:M.props.y,width:M.props.ancho*M.props.escala,height:M.props.alto*M.props.escala,fill:"transparent",onClick:C=>N(M.path),style:{cursor:"pointer"}},null,8,["x","y","width","height","onClick"]),a(V,{x:M.props.x+M.props.ancho*M.props.escala-15,y:M.props.y+10,radius:8,fill:"#2196f3",opacity:"0.8",onClick:C=>e(C,M.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(q,{x:M.props.x+M.props.ancho*M.props.escala-18,y:M.props.y+6,text:"âœ",fontSize:"10",fill:"white",onClick:C=>e(C,M.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(V,{x:M.props.x+M.props.ancho*M.props.escala-35,y:M.props.y+10,radius:8,fill:"#f44336",opacity:"0.8",onClick:C=>w(C,M.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(q,{x:M.props.x+M.props.ancho*M.props.escala-38,y:M.props.y+6,text:"âœ–",fontSize:"10",fill:"white",onClick:C=>w(C,M.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"])]),_:2},1024))],64))),128)),(b(!0),J(ce,null,Ue(k.value.length+1,M=>(b(),E(_,{key:"plus-"+M,onClick:C=>s(M-1),style:{cursor:"pointer"}},{default:u(()=>[a(V,{x:n(M-1),y:v(M-1),radius:14,fill:"#fff",stroke:"#1976d2",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(q,{x:n(M-1)-7,y:v(M-1)-10,text:"+",fontSize:"24",fill:"#1976d2",fontStyle:"bold"},null,8,["x","y"])]),_:2},1032,["onClick"]))),128))]),_:1})}}}),yo=xa(bo,[["__scopeId","data-v-86a7a837"]]),Ma=860,ja=360,Vo={__name:"VistaVentanaCompuestaDinamica",props:{ancho:{type:[Number,String],required:!0},alto:{type:[Number,String],required:!0},colorMarco:{type:[String,Object],default:"blanco"},orientacion:{type:String,default:"horizontal"},items:{type:Array,default:()=>[]},forceReRender:{type:Number,default:0}},emits:["agregar","agregar-borde","editar-ventana","eliminar-ventana"],setup(j,{emit:W}){const p=W,T=j,g=l(()=>Number(T.ancho)||1),r=l(()=>Number(T.alto)||1),s=l(()=>{const e=Ma/g.value,w=ja/r.value,N=Math.min(e,w);return Math.max(N,.1)}),m=l(()=>{const e=g.value*s.value;return e<Ma?(Ma-e)/2+20:20}),f=l(()=>{const e=r.value*s.value;return e<ja?(ja-e)/2+20:20});return(e,w)=>{const N=Y("v-rect"),R=Y("v-circle"),G=Y("v-text"),k=Y("v-group"),A=Y("v-layer"),h=Y("v-stage");return b(),E(h,{config:{width:900,height:420}},{default:u(()=>[a(A,null,{default:u(()=>[a(N,{x:0,y:0,width:900,height:420,stroke:"#444",strokeWidth:1}),(b(),E(yo,{key:`interna-${j.forceReRender}`,ancho:j.ancho,alto:j.alto,colorMarco:j.colorMarco,orientacion:j.orientacion,items:j.items,escala:s.value,x:m.value,y:f.value,onAgregar:w[0]||(w[0]=n=>p("agregar",n)),onAgregarBorde:w[1]||(w[1]=n=>p("agregar-borde",n)),onEditarVentana:w[2]||(w[2]=n=>p("editar-ventana",n)),onEliminarVentana:w[3]||(w[3]=n=>p("eliminar-ventana",n))},null,8,["ancho","alto","colorMarco","orientacion","items","escala","x","y"])),a(k,{onClick:w[4]||(w[4]=n=>p("agregar-borde","arriba")),style:{cursor:"pointer"}},{default:u(()=>[a(R,{x:m.value+g.value*s.value/2,y:f.value-15,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(G,{x:m.value+g.value*s.value/2-7,y:f.value-25,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(k,{onClick:w[5]||(w[5]=n=>p("agregar-borde","abajo")),style:{cursor:"pointer"}},{default:u(()=>[a(R,{x:m.value+g.value*s.value/2,y:f.value+r.value*s.value+15,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(G,{x:m.value+g.value*s.value/2-7,y:f.value+r.value*s.value+5,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(k,{onClick:w[6]||(w[6]=n=>p("agregar-borde","izquierda")),style:{cursor:"pointer"}},{default:u(()=>[a(R,{x:m.value-15,y:f.value+r.value*s.value/2,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(G,{x:m.value-22,y:f.value+r.value*s.value/2-10,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(k,{onClick:w[7]||(w[7]=n=>p("agregar-borde","derecha")),style:{cursor:"pointer"}},{default:u(()=>[a(R,{x:m.value+g.value*s.value+15,y:f.value+r.value*s.value/2,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(G,{x:m.value+g.value*s.value+8,y:f.value+r.value*s.value/2-10,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1})]),_:1})]),_:1})}}},xo={class:"nodo-estructura"},ko={class:"nodo-nombre"},Mo={class:"nodo-dimensiones"},jo={key:0,class:"nodo-hijos"},Ao={class:"text-caption"},Co={__name:"NodoEstructura",props:{nodo:{type:Object,required:!0},nivel:{type:Number,default:0},seleccionado:{type:Boolean,default:!1}},emits:["seleccionar","dividir","asignar-tipo","eliminar"],setup(j){const W=j;function p(){return W.nodo.tipo==="marco"?"mdi-border-all":W.nodo.tipoVentanaId?"mdi-window-closed-variant":W.nodo.hijos?"mdi-view-split-vertical":"mdi-square-outline"}function T(){return W.nodo.tipo==="marco"?"Marco Principal":W.nodo.tipoVentanaId?`Ventana Tipo ${W.nodo.tipoVentanaId}`:"Espacio"}return(g,r)=>{const s=Y("NodoEstructura",!0);return b(),J("div",xo,[ne("div",{class:wl(["nodo-item",{seleccionado:j.seleccionado,"con-tipo":j.nodo.tipoVentanaId}]),style:Ge({paddingLeft:`${j.nivel*16}px`}),onClick:r[3]||(r[3]=aa(m=>g.$emit("seleccionar",j.nodo),["stop"]))},[a(qe,{size:"small",class:"mr-2"},{default:u(()=>[ee(Ce(p()),1)]),_:1}),ne("span",ko,Ce(T()),1),ne("span",Mo,Ce(j.nodo.ancho)+" Ã— "+Ce(j.nodo.alto),1),ne("div",{class:"nodo-acciones",onClick:r[2]||(r[2]=aa(()=>{},["stop"]))},[!j.nodo.tipoVentanaId&&!j.nodo.hijos?(b(),E(Ie,{key:0,icon:"",size:"x-small",variant:"text",onClick:r[0]||(r[0]=aa(m=>g.$emit("dividir",j.nodo),["stop"]))},{default:u(()=>[a(qe,{size:"small"},{default:u(()=>r[12]||(r[12]=[ee("mdi-call-split")])),_:1}),a(hl,{activator:"parent",location:"top"},{default:u(()=>r[13]||(r[13]=[ee("Dividir")])),_:1})]),_:1})):ue("",!0),!j.nodo.tipoVentanaId&&!j.nodo.hijos?(b(),E(Ie,{key:1,icon:"",size:"x-small",variant:"text",onClick:r[1]||(r[1]=aa(m=>g.$emit("asignar-tipo",j.nodo),["stop"]))},{default:u(()=>[a(qe,{size:"small"},{default:u(()=>r[14]||(r[14]=[ee("mdi-window-closed-variant")])),_:1}),a(hl,{activator:"parent",location:"top"},{default:u(()=>r[15]||(r[15]=[ee("Asignar Tipo")])),_:1})]),_:1})):ue("",!0)])],6),j.nodo.hijos?(b(),J("div",jo,[ne("div",{class:"divisor-info",style:Ge({paddingLeft:`${(j.nivel+1)*16}px`})},[a(qe,{size:"x-small",class:"mr-1"},{default:u(()=>r[16]||(r[16]=[ee("mdi-minus")])),_:1}),ne("span",Ao," Divisor "+Ce(j.nodo.hijos.orientacion==="horizontal"?"Horizontal":"Vertical")+" @ "+Ce(j.nodo.hijos.divisor.posicion)+"mm ",1)],4),a(s,{nodo:j.nodo.hijos.nodo1,nivel:j.nivel+1,seleccionado:j.seleccionado,onSeleccionar:r[4]||(r[4]=m=>g.$emit("seleccionar",m)),onDividir:r[5]||(r[5]=m=>g.$emit("dividir",m)),onAsignarTipo:r[6]||(r[6]=m=>g.$emit("asignar-tipo",m)),onEliminar:r[7]||(r[7]=m=>g.$emit("eliminar",m))},null,8,["nodo","nivel","seleccionado"]),a(s,{nodo:j.nodo.hijos.nodo2,nivel:j.nivel+1,seleccionado:j.seleccionado,onSeleccionar:r[8]||(r[8]=m=>g.$emit("seleccionar",m)),onDividir:r[9]||(r[9]=m=>g.$emit("dividir",m)),onAsignarTipo:r[10]||(r[10]=m=>g.$emit("asignar-tipo",m)),onEliminar:r[11]||(r[11]=m=>g.$emit("eliminar",m))},null,8,["nodo","nivel","seleccionado"])])):ue("",!0)])}}},zo=xa(Co,[["__scopeId","data-v-3dae09e3"]]),wo={key:2,class:"componente-wrapper"},_o={key:3,class:"division"},So={class:"divisor-inner"},$o={key:4,class:"espacio-vacio"},Io={class:"espacio-placeholder"},Lo={class:"text-caption text-grey mt-1"},qo={__name:"NodoVista",props:{nodo:{type:Object,required:!0},colorMarco:{type:String,default:"blanco"},componentesVista:{type:Object,required:!0},escalaGlobal:{type:Number,default:1},mostrarEtiquetas:{type:Boolean,default:!0},etiquetasVisibles:{type:Boolean,default:!0}},emits:["click-nodo","actualizar-dimension","mover-divisor","finalizar-movimiento-divisor"],setup(j,{emit:W}){const p=j,T=W,g=se(null),r=se({x:0,y:0}),s=se(!1);se(0);function m(n,v){g.value=v,r.value={x:n.clientX,y:n.clientY},n.dataTransfer.effectAllowed="move"}function f(n){if(!p.nodo.hijos)return;s.value=!0;const v=p.nodo.hijos.orientacion,c=v==="horizontal"?n.clientY:n.clientX,y=p.nodo.hijos.divisor.posicion,L=q=>{if(!s.value)return;const M=((v==="horizontal"?q.clientY:q.clientX)-c)/p.escalaGlobal,C=y+M,$=v==="horizontal"?p.nodo.alto:p.nodo.ancho,I=50,H=$-I-8;C>=I&&C<=H&&T("mover-divisor",{nodo:p.nodo,nuevaPosicion:Math.round(C)})},V=()=>{s.value=!1,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",V),T("finalizar-movimiento-divisor")};document.addEventListener("mousemove",L),document.addEventListener("mouseup",V),n.preventDefault(),n.stopPropagation()}function e(n){const v=n==="ancho"?p.nodo.ancho:p.nodo.alto,c=prompt(`Ingrese el nuevo ${n} en milÃ­metros:`,v);if(c!==null&&!isNaN(c)){const y=parseInt(c);y>0&&T("actualizar-dimension",{nodo:p.nodo,tipo:n,valor:y})}}function w(){return{width:`${p.nodo.ancho}px`,height:`${p.nodo.alto}px`,position:"relative",border:"1px solid #666",boxSizing:"border-box",overflow:"visible"}}function N(){return p.nodo.hijos?{display:"flex",flexDirection:p.nodo.hijos.orientacion==="horizontal"?"column":"row",width:"100%",height:"100%"}:{}}function R(){if(!p.nodo.hijos)return{};const n=p.nodo.hijos.orientacion,v=p.nodo.hijos.divisor.posicion||0;return n==="horizontal"?{width:"100%",height:`${v}px`,flexShrink:0}:{width:`${v}px`,height:"100%",flexShrink:0}}function G(){if(!p.nodo.hijos)return{};const n=p.nodo.hijos.orientacion,v=p.nodo.hijos.divisor.posicion||0,L=(n==="horizontal"?p.nodo.alto:p.nodo.ancho)-v-8;return n==="horizontal"?{width:"100%",height:`${L}px`,flexShrink:0}:{width:`${L}px`,height:"100%",flexShrink:0}}function k(){if(!p.nodo.hijos)return{};const n=p.nodo.hijos.orientacion,v="8px";return{background:"#1a1a1a",[n==="horizontal"?"height":"width"]:v,[n==="horizontal"?"width":"height"]:"100%",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",boxShadow:"0 0 4px rgba(0, 0, 0, 0.8)",border:"1px solid #000",cursor:n==="horizontal"?"ns-resize":"ew-resize",userSelect:"none",transition:"background 0.2s"}}function A(){const n=14/p.escalaGlobal,v=4/p.escalaGlobal,c=2/p.escalaGlobal,y=28/p.escalaGlobal;return{position:"absolute",fontSize:`${n}px`,padding:`${v}px ${v*2}px`,borderWidth:`${c}px`,top:`-${y}px`,left:"50%",transform:"translateX(-50%)",zIndex:100}}function h(){const n=14/p.escalaGlobal,v=4/p.escalaGlobal,c=2/p.escalaGlobal,y=28/p.escalaGlobal;return{position:"absolute",fontSize:`${n}px`,padding:`${v}px ${v*2}px`,borderWidth:`${c}px`,left:`-${y}px`,top:"50%",transform:"translateY(-50%) rotate(-90deg)",transformOrigin:"center",zIndex:100}}return(n,v)=>{const c=Y("NodoVista",!0);return b(),J("div",{class:wl(["nodo-vista",{clickable:!j.nodo.hijos}]),style:Ge(w()),onClick:v[13]||(v[13]=aa(y=>n.$emit("click-nodo",j.nodo),["stop"]))},[j.mostrarEtiquetas&&j.etiquetasVisibles&&j.nodo.tipo!=="marco"?(b(),J("div",{key:0,class:"etiqueta-dimension etiqueta-ancho",style:Ge(A()),draggable:"true",onDragstart:v[0]||(v[0]=y=>m(y,"ancho")),onClick:v[1]||(v[1]=aa(y=>e("ancho"),["stop"]))},Ce(j.nodo.ancho)+"mm ",37)):ue("",!0),j.mostrarEtiquetas&&j.etiquetasVisibles&&j.nodo.tipo!=="marco"?(b(),J("div",{key:1,class:"etiqueta-dimension etiqueta-alto",style:Ge(h()),draggable:"true",onDragstart:v[2]||(v[2]=y=>m(y,"alto")),onClick:v[3]||(v[3]=aa(y=>e("alto"),["stop"]))},Ce(j.nodo.alto)+"mm ",37)):ue("",!0),j.nodo.tipoVentanaId&&!j.nodo.hijos?(b(),J("div",wo,[(b(),E(Ul(j.componentesVista[j.nodo.tipoVentanaId]),{ancho:j.nodo.ancho,alto:j.nodo.alto,"color-marco":j.colorMarco},null,8,["ancho","alto","color-marco"]))])):j.nodo.hijos?(b(),J("div",_o,[ne("div",{class:"division-container",style:Ge(N())},[ne("div",{class:"hijo-nodo",style:Ge(R())},[a(c,{nodo:j.nodo.hijos.nodo1,"color-marco":j.colorMarco,"componentes-vista":j.componentesVista,"escala-global":j.escalaGlobal,"mostrar-etiquetas":!0,"etiquetas-visibles":j.etiquetasVisibles,onClickNodo:v[4]||(v[4]=y=>n.$emit("click-nodo",y)),onActualizarDimension:v[5]||(v[5]=y=>n.$emit("actualizar-dimension",y)),onMoverDivisor:v[6]||(v[6]=y=>n.$emit("mover-divisor",y)),onFinalizarMovimientoDivisor:v[7]||(v[7]=y=>n.$emit("finalizar-movimiento-divisor"))},null,8,["nodo","color-marco","componentes-vista","escala-global","etiquetas-visibles"])],4),ne("div",{class:"divisor-visual",style:Ge(k()),onMousedown:f,onClick:v[8]||(v[8]=aa(()=>{},["stop"]))},[ne("div",So,[a(qe,{size:"16",color:"white"},{default:u(()=>[ee(Ce(j.nodo.hijos.orientacion==="horizontal"?"mdi-drag-horizontal-variant":"mdi-drag-vertical-variant"),1)]),_:1})])],36),ne("div",{class:"hijo-nodo",style:Ge(G())},[a(c,{nodo:j.nodo.hijos.nodo2,"color-marco":j.colorMarco,"componentes-vista":j.componentesVista,"escala-global":j.escalaGlobal,"mostrar-etiquetas":!0,"etiquetas-visibles":j.etiquetasVisibles,onClickNodo:v[9]||(v[9]=y=>n.$emit("click-nodo",y)),onActualizarDimension:v[10]||(v[10]=y=>n.$emit("actualizar-dimension",y)),onMoverDivisor:v[11]||(v[11]=y=>n.$emit("mover-divisor",y)),onFinalizarMovimientoDivisor:v[12]||(v[12]=y=>n.$emit("finalizar-movimiento-divisor"))},null,8,["nodo","color-marco","componentes-vista","escala-global","etiquetas-visibles"])],4)],4)])):(b(),J("div",$o,[ne("div",Io,[a(qe,{size:"32",color:"grey-lighten-1"},{default:u(()=>v[14]||(v[14]=[ee("mdi-crop-square")])),_:1}),ne("div",Lo,Ce(j.nodo.ancho)+"mm Ã— "+Ce(j.nodo.alto)+"mm ",1)])]))],6)}}},Po=xa(qo,[["__scopeId","data-v-5f9dd5aa"]]),Re=60,Do={__name:"VistaVentanaFijaArmador",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"}},setup(j){const W={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},p={roble:new Image,nogal:new Image};p.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,p.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const T=l(()=>{var A;let k="";return typeof r.colorMarco=="object"&&((A=r.colorMarco)!=null&&A.nombre)?k=String(r.colorMarco.nombre).toLowerCase():typeof r.colorMarco=="string"&&(k=r.colorMarco.toLowerCase()),W[k]||"#ffffff"});function g(k){var h;let A="";return typeof r.colorMarco=="object"&&((h=r.colorMarco)!=null&&h.nombre)?A=String(r.colorMarco.nombre).toLowerCase():typeof r.colorMarco=="string"&&(A=r.colorMarco.toLowerCase()),["roble","nogal"].includes(A)&&p[A]?{points:k,closed:!0,fillPatternImage:p[A],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black",strokeWidth:1}:{points:k,closed:!0,fill:T.value,stroke:"black",strokeWidth:1}}const r=j,s=l(()=>r.ancho),m=l(()=>r.alto),f=l(()=>({width:r.ancho,height:r.alto})),e=l(()=>g([0,0,s.value,0,s.value-Re,Re,Re,Re])),w=l(()=>g([s.value,0,s.value,m.value,s.value-Re,m.value-Re,s.value-Re,Re])),N=l(()=>g([s.value,m.value,0,m.value,Re,m.value-Re,s.value-Re,m.value-Re])),R=l(()=>g([0,m.value,0,0,Re,Re,Re,m.value-Re])),G=l(()=>({x:Re,y:Re,width:s.value-Re*2,height:m.value-Re*2,fill:"#b3e5fc",stroke:"black",strokeWidth:.5}));return(k,A)=>{const h=Y("v-line"),n=Y("v-rect"),v=Y("v-layer"),c=Y("v-stage");return b(),E(c,{config:f.value},{default:u(()=>[a(v,null,{default:u(()=>[a(h,{config:e.value},null,8,["config"]),a(h,{config:w.value},null,8,["config"]),a(h,{config:N.value},null,8,["config"]),a(h,{config:R.value},null,8,["config"]),a(n,{config:G.value},null,8,["config"])]),_:1})]),_:1},8,["config"])}}},Ee=60,ga=0,No={__name:"VistaVentanaProyectanteArmador",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"}},setup(j){const W=j,p={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},T={roble:new Image,nogal:new Image};T.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,T.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const g=l(()=>{var M,C,$;const D=typeof W.colorMarco=="object"?(C=(M=W.colorMarco)==null?void 0:M.nombre)==null?void 0:C.toLowerCase():($=W.colorMarco)==null?void 0:$.toLowerCase();return p[D]||"#ffffff"});function r(D,M=!1){var $,I,S;const C=typeof W.colorMarco=="object"?(I=($=W.colorMarco)==null?void 0:$.nombre)==null?void 0:I.toLowerCase():(S=W.colorMarco)==null?void 0:S.toLowerCase();return["roble","nogal"].includes(C)&&T[C]?{points:D,closed:!0,fillPatternImage:T[C],fillPatternRepeat:"repeat",fillPatternScale:{x:M?.15:.2,y:M?.15:.2},stroke:"black",strokeWidth:1}:{points:D,closed:!0,fill:g.value,stroke:"black",strokeWidth:1}}const s=l(()=>W.ancho),m=l(()=>W.alto),f=l(()=>({width:W.ancho,height:W.alto})),e=l(()=>r([0,0,s.value,0,s.value-Ee,Ee,Ee,Ee])),w=l(()=>r([s.value,0,s.value,m.value,s.value-Ee,m.value-Ee,s.value-Ee,Ee])),N=l(()=>r([s.value,m.value,0,m.value,Ee,m.value-Ee,s.value-Ee,m.value-Ee])),R=l(()=>r([0,m.value,0,0,Ee,Ee,Ee,m.value-Ee])),G=l(()=>({x:Ee,y:Ee,width:s.value-Ee*2,height:m.value-Ee*2,fill:"#b3e5fc",stroke:"black",strokeWidth:.5})),k=l(()=>G.value.x+ga),A=l(()=>G.value.y+ga),h=l(()=>G.value.width-ga*2),n=l(()=>G.value.height-ga*2),v=Ee*.8,c=l(()=>r([k.value,A.value,k.value+h.value,A.value,k.value+h.value-v,A.value+v,k.value+v,A.value+v],!0)),y=l(()=>r([k.value+h.value,A.value,k.value+h.value,A.value+n.value,k.value+h.value-v,A.value+n.value-v,k.value+h.value-v,A.value+v],!0)),L=l(()=>r([k.value+h.value,A.value+n.value,k.value,A.value+n.value,k.value+v,A.value+n.value-v,k.value+h.value-v,A.value+n.value-v],!0)),V=l(()=>r([k.value,A.value+n.value,k.value,A.value,k.value+v,A.value+v,k.value+v,A.value+n.value-v],!0)),q=l(()=>({points:[k.value+5,A.value+5,k.value+h.value/2,A.value+n.value-5],stroke:"black",dash:[10,5],strokeWidth:2})),_=l(()=>({points:[k.value+h.value-5,A.value+5,k.value+h.value/2,A.value+n.value-5],stroke:"black",dash:[10,5],strokeWidth:2}));return(D,M)=>{const C=Y("v-line"),$=Y("v-rect"),I=Y("v-layer"),S=Y("v-stage");return b(),E(S,{config:f.value},{default:u(()=>[a(I,null,{default:u(()=>[a(C,{config:e.value},null,8,["config"]),a(C,{config:w.value},null,8,["config"]),a(C,{config:N.value},null,8,["config"]),a(C,{config:R.value},null,8,["config"]),a($,{config:G.value},null,8,["config"]),a(C,{config:c.value},null,8,["config"]),a(C,{config:y.value},null,8,["config"]),a(C,{config:L.value},null,8,["config"]),a(C,{config:V.value},null,8,["config"]),a(Ze,{x:k.value+h.value/2,y:A.value+n.value+2,width:20,height:6,rotation:90,offsetX:10,offsetY:2.5},null,8,["x","y"]),a(C,{config:q.value},null,8,["config"]),a(C,{config:_.value},null,8,["config"])]),_:1})]),_:1},8,["config"])}}},je=0,Aa=1,Uo=60,Eo={__name:"VistaVentanaFijaAL42Armador",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"}},setup(j){const W={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},p={roble:new Image,nogal:new Image};p.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,p.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const T=l(()=>{var h;let A="";return typeof r.colorMarco=="object"&&((h=r.colorMarco)!=null&&h.nombre)?A=String(r.colorMarco.nombre).toLowerCase():typeof r.colorMarco=="string"&&(A=r.colorMarco.toLowerCase()),W[A]||"#ffffff"});function g(A){var n;let h="";return typeof r.colorMarco=="object"&&((n=r.colorMarco)!=null&&n.nombre)?h=String(r.colorMarco.nombre).toLowerCase():typeof r.colorMarco=="string"&&(h=r.colorMarco.toLowerCase()),["roble","nogal"].includes(h)&&p[h]?{points:A,closed:!0,fillPatternImage:p[h],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:A,closed:!0,fill:T.value,stroke:"black"}}const r=j,s=Uo*Aa,m=r.ancho*Aa,f=r.alto*Aa,e=l(()=>({width:r.ancho,height:r.alto})),w=l(()=>g([je,je,je+m,je,je+m-s,je+s,je+s,je+s])),N=l(()=>g([je+m,je,je+m,je+f,je+m-s,je+f-s,je+m-s,je+s])),R=l(()=>g([je,je+f,je+m,je+f,je+m-s,je+f-s,je+s,je+f-s])),G=l(()=>g([je,je,je,je+f,je+s,je+f-s,je+s,je+s])),k=l(()=>({x:je+s,y:je+s,width:m-2*s,height:f-2*s,fill:"rgba(135, 206, 235, 0.3)",stroke:"rgba(0, 0, 0, 0.2)",strokeWidth:1}));return(A,h)=>{const n=Y("v-line"),v=Y("v-rect"),c=Y("v-layer"),y=Y("v-stage");return b(),E(y,{config:e.value},{default:u(()=>[a(c,null,{default:u(()=>[a(n,{config:w.value},null,8,["config"]),a(n,{config:N.value},null,8,["config"]),a(n,{config:R.value},null,8,["config"]),a(n,{config:G.value},null,8,["config"]),a(v,{config:k.value},null,8,["config"])]),_:1})]),_:1},8,["config"])}}},Ae=0,ta=1,Ro=60,ba=0,To={__name:"VistaVentanaProyectanteAL42Armador",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"}},setup(j){const W=j,p={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},T={roble:new Image,nogal:new Image};T.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,T.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const g=l(()=>{var C,$,I;const M=typeof W.colorMarco=="object"?($=(C=W.colorMarco)==null?void 0:C.nombre)==null?void 0:$.toLowerCase():(I=W.colorMarco)==null?void 0:I.toLowerCase();return p[M]||"#ffffff"});function r(M,C=!1){var I,S,H;const $=typeof W.colorMarco=="object"?(S=(I=W.colorMarco)==null?void 0:I.nombre)==null?void 0:S.toLowerCase():(H=W.colorMarco)==null?void 0:H.toLowerCase();return["roble","nogal"].includes($)&&T[$]?{points:M,closed:!0,fillPatternImage:T[$],fillPatternRepeat:"repeat",fillPatternScale:{x:C?.15:.2,y:C?.15:.2},stroke:"black"}:{points:M,closed:!0,fill:g.value,stroke:"black"}}const s=Ro*ta,m=W.ancho*ta,f=W.alto*ta,e=l(()=>({width:W.ancho,height:W.alto})),w=l(()=>r([Ae,Ae,Ae+m,Ae,Ae+m-s,Ae+s,Ae+s,Ae+s])),N=l(()=>r([Ae+m,Ae,Ae+m,Ae+f,Ae+m-s,Ae+f-s,Ae+m-s,Ae+s])),R=l(()=>r([Ae+m,Ae+f,Ae,Ae+f,Ae+s,Ae+f-s,Ae+m-s,Ae+f-s])),G=l(()=>r([Ae,Ae+f,Ae,Ae,Ae+s,Ae+s,Ae+s,Ae+f-s])),k=l(()=>({x:Ae+s,y:Ae+s,width:m-s*2,height:f-s*2,fill:"rgba(135, 206, 235, 0.3)",stroke:"rgba(0, 0, 0, 0.2)",strokeWidth:1})),A=l(()=>k.value.x+ba*ta),h=l(()=>k.value.y+ba*ta),n=l(()=>k.value.width-ba*2*ta),v=l(()=>k.value.height-ba*2*ta),c=l(()=>s*.8),y=l(()=>r([A.value,h.value,A.value+n.value,h.value,A.value+n.value-c.value,h.value+c.value,A.value+c.value,h.value+c.value],!0)),L=l(()=>r([A.value+n.value,h.value,A.value+n.value,h.value+v.value,A.value+n.value-c.value,h.value+v.value-c.value,A.value+n.value-c.value,h.value+c.value],!0)),V=l(()=>r([A.value+n.value,h.value+v.value,A.value,h.value+v.value,A.value+c.value,h.value+v.value-c.value,A.value+n.value-c.value,h.value+v.value-c.value],!0)),q=l(()=>r([A.value,h.value+v.value,A.value,h.value,A.value+c.value,h.value+c.value,A.value+c.value,h.value+v.value-c.value],!0)),_=l(()=>({points:[A.value+5,h.value+5,A.value+n.value/2,h.value+v.value-5],stroke:"black",dash:[10,5],strokeWidth:2})),D=l(()=>({points:[A.value+n.value-5,h.value+5,A.value+n.value/2,h.value+v.value-5],stroke:"black",dash:[10,5],strokeWidth:2}));return(M,C)=>{const $=Y("v-line"),I=Y("v-rect"),S=Y("v-layer"),H=Y("v-stage");return b(),E(H,{config:e.value},{default:u(()=>[a(S,null,{default:u(()=>[a($,{config:w.value},null,8,["config"]),a($,{config:N.value},null,8,["config"]),a($,{config:R.value},null,8,["config"]),a($,{config:G.value},null,8,["config"]),a(I,{config:k.value},null,8,["config"]),a($,{config:y.value},null,8,["config"]),a($,{config:L.value},null,8,["config"]),a($,{config:V.value},null,8,["config"]),a($,{config:q.value},null,8,["config"]),a($,{config:_.value},null,8,["config"]),a($,{config:D.value},null,8,["config"])]),_:1})]),_:1},8,["config"])}}},Ke=25,Te=25,Ye=120,la=25,Wo={__name:"VistaVentanaCorrederaAL25Armador",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"}},setup(j){const W=j,p={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},T=se(!0),g=se(!0),r=se(!0),s=()=>{console.log("ðŸ”„ Cambiando orden de hojas correderas"),T.value=!T.value},m=()=>{g.value=!g.value,console.log("ðŸªŸ Hoja 1:",g.value?"MÃ³vil":"Fija")},f=()=>{r.value=!r.value,console.log("ðŸªŸ Hoja 2:",r.value?"MÃ³vil":"Fija")},e=l(()=>({width:W.ancho,height:W.alto})),w=l(()=>p[W.colorMarco]||"#ffffff"),N=l(()=>({x:0,y:0,width:W.ancho,height:Ke,fill:w.value,stroke:"#333",strokeWidth:1})),R=l(()=>({x:W.ancho-Ke,y:0,width:Ke,height:W.alto,fill:w.value,stroke:"#333",strokeWidth:1})),G=l(()=>({x:0,y:W.alto-Ke,width:W.ancho,height:Ke,fill:w.value,stroke:"#333",strokeWidth:1})),k=l(()=>({x:0,y:0,width:Ke,height:W.alto,fill:w.value,stroke:"#333",strokeWidth:1})),A=l(()=>W.ancho-2*Ke),h=l(()=>W.alto-2*Ke),n=Ke,v=Ke,c=l(()=>A.value/2),y=l(()=>h.value),L=l(()=>n),V=l(()=>v),q=l(()=>({x:L.value+Te,y:V.value+Te,width:c.value-2*Te,height:y.value-2*Te,fill:"rgba(173, 216, 230, 0.3)",stroke:"#aaa",strokeWidth:.5,cursor:"pointer"})),_=l(()=>({x:L.value,y:V.value,width:c.value,height:Te,fill:w.value,stroke:"#666",strokeWidth:1})),D=l(()=>({x:L.value+c.value-Te,y:V.value,width:Te,height:y.value,fill:w.value,stroke:"#666",strokeWidth:1})),M=l(()=>({x:L.value,y:V.value+y.value-Te,width:c.value,height:Te,fill:w.value,stroke:"#666",strokeWidth:1})),C=l(()=>({x:L.value,y:V.value,width:Te,height:y.value,fill:w.value,stroke:"#666",strokeWidth:1})),$=l(()=>n+c.value),I=l(()=>v),S=l(()=>({x:$.value+Te,y:I.value+Te,width:c.value-2*Te,height:y.value-2*Te,fill:"rgba(173, 216, 230, 0.3)",stroke:"#aaa",strokeWidth:.5,cursor:"pointer"})),H=l(()=>({x:$.value,y:I.value,width:c.value,height:Te,fill:w.value,stroke:"#666",strokeWidth:1})),ve=l(()=>({x:$.value+c.value-Te,y:I.value,width:Te,height:y.value,fill:w.value,stroke:"#666",strokeWidth:1})),ze=l(()=>({x:$.value,y:I.value+y.value-Te,width:c.value,height:Te,fill:w.value,stroke:"#666",strokeWidth:1})),Me=l(()=>({x:$.value,y:I.value,width:Te,height:y.value,fill:w.value,stroke:"#666",strokeWidth:1})),ke=l(()=>({points:[L.value+c.value/2-Ye/2,V.value+y.value/2,L.value+c.value/2+Ye/2,V.value+y.value/2],stroke:T.value?"#FF5722":"#9E9E9E",strokeWidth:5,lineCap:"round",hitStrokeWidth:20,cursor:"pointer"})),De=l(()=>({points:[L.value+c.value/2+Ye/2,V.value+y.value/2,L.value+c.value/2+Ye/2-la,V.value+y.value/2-la/2],stroke:T.value?"#FF5722":"#9E9E9E",strokeWidth:5,lineCap:"round",hitStrokeWidth:20,cursor:"pointer"})),Le=l(()=>({points:[L.value+c.value/2+Ye/2,V.value+y.value/2,L.value+c.value/2+Ye/2-la,V.value+y.value/2+la/2],stroke:T.value?"#FF5722":"#9E9E9E",strokeWidth:5,lineCap:"round",hitStrokeWidth:20,cursor:"pointer"})),ae=l(()=>({points:[$.value+c.value/2-Ye/2,I.value+y.value/2,$.value+c.value/2+Ye/2,I.value+y.value/2],stroke:T.value?"#9E9E9E":"#FF5722",strokeWidth:5,lineCap:"round",hitStrokeWidth:20,cursor:"pointer"})),Q=l(()=>({points:[$.value+c.value/2-Ye/2,I.value+y.value/2,$.value+c.value/2-Ye/2+la,I.value+y.value/2-la/2],stroke:T.value?"#9E9E9E":"#FF5722",strokeWidth:5,lineCap:"round",hitStrokeWidth:20,cursor:"pointer"})),X=l(()=>({points:[$.value+c.value/2-Ye/2,I.value+y.value/2,$.value+c.value/2-Ye/2+la,I.value+y.value/2+la/2],stroke:T.value?"#9E9E9E":"#FF5722",strokeWidth:5,lineCap:"round",hitStrokeWidth:20,cursor:"pointer"})),P=l(()=>({x:L.value+c.value/2,y:V.value+y.value/2,text:"FIJA",fontSize:30,fontStyle:"bold",fill:"#757575",align:"center",offsetX:30,offsetY:15})),B=l(()=>({x:$.value+c.value/2,y:I.value+y.value/2,text:"FIJA",fontSize:30,fontStyle:"bold",fill:"#757575",align:"center",offsetX:30,offsetY:15}));return(F,K)=>{const x=Y("v-rect"),d=Y("v-line"),i=Y("v-text"),o=Y("v-layer"),t=Y("v-stage");return b(),E(t,{config:e.value},{default:u(()=>[a(o,null,{default:u(()=>[a(x,le(oe(N.value)),null,16),a(x,le(oe(R.value)),null,16),a(x,le(oe(G.value)),null,16),a(x,le(oe(k.value)),null,16),T.value?ue("",!0):(b(),J(ce,{key:0},[a(x,we(S.value,{onClick:f}),null,16),a(x,we(H.value,{onClick:f}),null,16),a(x,we(ve.value,{onClick:f}),null,16),a(x,we(ze.value,{onClick:f}),null,16),a(x,we(Me.value,{onClick:f}),null,16),r.value?(b(),J(ce,{key:0},[a(d,{config:ae.value,onMousedown:s,onTouchstart:s},null,8,["config"]),a(d,{config:Q.value,onMousedown:s,onTouchstart:s},null,8,["config"]),a(d,{config:X.value,onMousedown:s,onTouchstart:s},null,8,["config"])],64)):(b(),E(i,{key:1,config:B.value},null,8,["config"]))],64)),a(x,we(q.value,{onClick:m}),null,16),a(x,we(_.value,{onClick:m}),null,16),a(x,we(D.value,{onClick:m}),null,16),a(x,we(M.value,{onClick:m}),null,16),a(x,we(C.value,{onClick:m}),null,16),g.value?(b(),J(ce,{key:1},[a(d,{config:ke.value,onMousedown:s,onTouchstart:s},null,8,["config"]),a(d,{config:De.value,onMousedown:s,onTouchstart:s},null,8,["config"]),a(d,{config:Le.value,onMousedown:s,onTouchstart:s},null,8,["config"])],64)):(b(),E(i,{key:2,config:P.value},null,8,["config"])),T.value?(b(),J(ce,{key:3},[a(x,we(S.value,{onClick:f}),null,16),a(x,we(H.value,{onClick:f}),null,16),a(x,we(ve.value,{onClick:f}),null,16),a(x,we(ze.value,{onClick:f}),null,16),a(x,we(Me.value,{onClick:f}),null,16),r.value?(b(),J(ce,{key:0},[a(d,{config:ae.value,onMousedown:s,onTouchstart:s},null,8,["config"]),a(d,{config:Q.value,onMousedown:s,onTouchstart:s},null,8,["config"]),a(d,{config:X.value,onMousedown:s,onTouchstart:s},null,8,["config"])],64)):(b(),E(i,{key:1,config:B.value},null,8,["config"]))],64)):ue("",!0)]),_:1})]),_:1},8,["config"])}}},Fo={class:"armador-complejas"},Ho={class:"toolbar-top"},Oo={class:"toolbar-title"},Xo={class:"toolbar-actions"},Bo={class:"armador-content"},Yo={class:"panel-tree"},Go={key:0,class:"text-center py-8"},Jo={key:1},Ko={class:"panel-preview"},Qo={class:"d-flex align-center"},Zo={class:"d-flex align-center gap-2"},et={class:"text-caption"},at={key:0,class:"empty-preview"},lt={key:0,class:"dimensiones-principales"},ot={class:"panel-properties"},tt={key:0,class:"text-center py-8 text-grey"},nt={key:1},ut={class:"d-flex flex-column gap-2"},rt={class:"actions-bottom"},it={key:0,class:"text-caption text-grey mb-2"},st={__name:"ArmadorVentanasComplejas",props:{tiposVentana:{type:Array,default:()=>[]},perfilesMarco:{type:Array,default:()=>[]},perfilesDivisores:{type:Array,default:()=>[]},colorMarco:{type:String,default:"blanco"}},emits:["actualizar","cancelar"],setup(j,{emit:W}){const p={2:Do,45:No,3:Il,49:Pl,50:Dl,1:Eo,55:Wo,56:To,57:ql},T=j,g=W;Fe(()=>T.tiposVentana,x=>{console.log("ðŸªŸ Tipos de ventana en ArmadorVentanasComplejas:",x)},{immediate:!0});const r=se(null),s=se(null),m=se([]),f=se(-1),e=se(null),w=se(!0),N=se(!0),R=se(0),G=se(!1),k=se(!1),A=se(!1),h=se({ancho:2400,alto:1600,perfilId:null}),n=se({orientacion:"horizontal",posicion:800,perfilId:null}),v=se(null),c=l(()=>f.value>0),y=l(()=>f.value<m.value.length-1);Fe(()=>r.value,x=>{x&&g("actualizar",x)},{deep:!0});let L=1;function V(){return`nodo-${L++}`}function q(){r.value={id:V(),tipo:"marco",ancho:h.value.ancho,alto:h.value.alto,perfilId:h.value.perfilId,hijos:null,tipoVentanaId:null},G.value=!1,ve(),ke()}function _(x){s.value=x}function D(x,d){n.value={...d},s.value=x,k.value=!0}function M(){if(!s.value)return;const x=n.value.orientacion,d=n.value.posicion,i=x==="horizontal"?s.value.alto:s.value.ancho;if(d<=0||d>=i){alert(`La posiciÃ³n debe estar entre 0 y ${i}`);return}const o=8;s.value.hijos={orientacion:x,divisor:{posicion:d,perfilId:n.value.perfilId},nodo1:{id:V(),tipo:"espacio",ancho:x==="vertical"?d:s.value.ancho,alto:x==="horizontal"?d:s.value.alto,hijos:null,tipoVentanaId:null},nodo2:{id:V(),tipo:"espacio",ancho:x==="vertical"?s.value.ancho-d-o:s.value.ancho,alto:x==="horizontal"?s.value.alto-d-o:s.value.alto,hijos:null,tipoVentanaId:null}},k.value=!1,ve(),ke()}function C(x){s.value=x,v.value=x.tipoVentanaId,A.value=!0}function $(){!s.value||!v.value||(s.value.tipoVentanaId=v.value,A.value=!1,ve(),ke())}function I(){s.value&&(s.value.tipoVentanaId=null,ve(),ke())}function S(x){console.log("Eliminar nodo:",x)}function H(){confirm("Â¿EstÃ¡s seguro de limpiar toda la estructura?")&&(r.value=null,s.value=null,ve())}function ve(){const x=JSON.parse(JSON.stringify(r.value));m.value=m.value.slice(0,f.value+1),m.value.push(x),f.value++}function ze(){c.value&&(f.value--,r.value=JSON.parse(JSON.stringify(m.value[f.value])),ke())}function Me(){y.value&&(f.value++,r.value=JSON.parse(JSON.stringify(m.value[f.value])),ke())}function ke(){g("actualizar",r.value)}function De({nodo:x,tipo:d,valor:i}){d==="ancho"?x.ancho=i:d==="alto"&&(x.alto=i),r.value&&Le(r.value,x,d,i),x.hijos&&ae(x),ve(),ke(),R.value++}function Le(x,d,i,o){const t=(z,U,O=null,ie=!1)=>{if(z===U){if(O&&O.hijos){const te=O.hijos.orientacion,me=8;if(O.hijos.divisor.posicion,i==="ancho"&&te==="vertical"){const _e=O.hijos.nodo1.ancho,He=O.hijos.nodo2.ancho,Oe=_e+He+me;O.ancho=Oe,Le(x,O,i,Oe)}else if(i==="alto"&&te==="horizontal"){const _e=O.hijos.nodo1.alto,He=O.hijos.nodo2.alto,Oe=_e+He+me;O.alto=Oe,Le(x,O,i,Oe)}else i==="ancho"&&te==="horizontal"?(O.ancho=o,O.hijos.nodo1.ancho=o,O.hijos.nodo2.ancho=o,Le(x,O,i,o)):i==="alto"&&te==="vertical"&&(O.alto=o,O.hijos.nodo1.alto=o,O.hijos.nodo2.alto=o,Le(x,O,i,o))}return!0}return!!(z.hijos&&(t(z.hijos.nodo1,U,z,!0)||t(z.hijos.nodo2,U,z,!1)))};t(x,d)}function ae(x){if(!x.hijos)return;const d=x.hijos.orientacion,i=x.hijos.divisor.posicion,o=8;d==="vertical"?(x.hijos.nodo1.ancho=i,x.hijos.nodo2.ancho=x.ancho-i-o,x.hijos.nodo1.alto=x.alto,x.hijos.nodo2.alto=x.alto):(x.hijos.nodo1.alto=i,x.hijos.nodo2.alto=x.alto-i-o,x.hijos.nodo1.ancho=x.ancho,x.hijos.nodo2.ancho=x.ancho),x.hijos.nodo1.hijos&&ae(x.hijos.nodo1),x.hijos.nodo2.hijos&&ae(x.hijos.nodo2)}function Q({nodo:x,nuevaPosicion:d}){if(!x.hijos)return;const i=x.hijos.orientacion,o=8;x.hijos.divisor.posicion=d,i==="vertical"?(x.hijos.nodo1.ancho=d,x.hijos.nodo2.ancho=x.ancho-d-o):(x.hijos.nodo1.alto=d,x.hijos.nodo2.alto=x.alto-d-o),x.hijos.nodo1.hijos&&ae(x.hijos.nodo1),x.hijos.nodo2.hijos&&ae(x.hijos.nodo2)}function X(){ve(),R.value++}function P(){if(!r.value)return{};const x=w.value?500:800,d=600,i=40,o=(x-i)/r.value.ancho,t=(d-i)/r.value.alto;return{transform:`scale(${Math.min(o,t)})`,transformOrigin:"top left",marginLeft:`${i/2}px`,marginTop:`${i/2}px`}}function B(){if(!r.value)return{};const x=w.value?500:800,d=600,i=40,o=(x-i)/r.value.ancho,t=(d-i)/r.value.alto,z=Math.min(o,t),U=r.value.ancho*z;return{top:"5px",left:`${i/2+U/2}px`,transform:"translateX(-50%)"}}function F(){if(!r.value)return{};const x=w.value?500:800,d=600,i=40,o=(x-i)/r.value.ancho,t=(d-i)/r.value.alto,z=Math.min(o,t),U=r.value.alto*z;return{left:"5px",top:`${i/2+U/2}px`,transform:"translateY(-50%) rotate(-90deg)"}}function K(){if(!r.value)return 1;const x=w.value?500:800,d=600,i=40,o=(x-i)/r.value.ancho,t=(d-i)/r.value.alto;return Math.min(o,t)}return Fe(w,()=>{_l(()=>{R.value++})}),(x,d)=>(b(),J("div",Fo,[ne("div",Ho,[ne("div",Oo,[a(qe,null,{default:u(()=>d[20]||(d[20]=[ee("mdi-view-dashboard")])),_:1}),d[21]||(d[21]=ne("span",{class:"ml-2"},"Armador de Ventanas Complejas",-1))]),ne("div",Xo,[a(Ie,{size:"small",variant:"text",onClick:ze,disabled:!c.value},{default:u(()=>[a(qe,null,{default:u(()=>d[22]||(d[22]=[ee("mdi-undo")])),_:1})]),_:1},8,["disabled"]),a(Ie,{size:"small",variant:"text",onClick:Me,disabled:!y.value},{default:u(()=>[a(qe,null,{default:u(()=>d[23]||(d[23]=[ee("mdi-redo")])),_:1})]),_:1},8,["disabled"]),a(Ie,{size:"small",variant:"text",color:"error",onClick:H},{default:u(()=>[a(qe,null,{default:u(()=>d[24]||(d[24]=[ee("mdi-delete-sweep")])),_:1})]),_:1})])]),ne("div",Bo,[ne("div",Yo,[a(Je,{elevation:"0",class:"fill-height"},{default:u(()=>[a(Qe,{class:"d-flex align-center pa-3 bg-primary"},{default:u(()=>[a(qe,{class:"mr-2"},{default:u(()=>d[25]||(d[25]=[ee("mdi-file-tree")])),_:1}),d[26]||(d[26]=ee(" Estructura "))]),_:1}),a(na,{class:"pa-3"},{default:u(()=>{var i;return[r.value?(b(),J("div",Jo,[a(zo,{nodo:r.value,nivel:0,seleccionado:((i=s.value)==null?void 0:i.id)===r.value.id,onSeleccionar:_,onDividir:D,onAsignarTipo:C,onEliminar:S},null,8,["nodo","seleccionado"])])):(b(),J("div",Go,[a(qe,{size:"64",color:"grey-lighten-1"},{default:u(()=>d[27]||(d[27]=[ee("mdi-window-closed-variant")])),_:1}),d[30]||(d[30]=ne("div",{class:"text-body-2 text-grey mt-2"}," Define el marco principal ",-1)),a(Ie,{color:"primary",variant:"flat",class:"mt-4",onClick:d[0]||(d[0]=o=>G.value=!0)},{default:u(()=>[a(qe,{left:""},{default:u(()=>d[28]||(d[28]=[ee("mdi-plus")])),_:1}),d[29]||(d[29]=ee(" Crear Marco "))]),_:1})]))]}),_:1})]),_:1})]),ne("div",Ko,[a(Je,{elevation:"0",class:"fill-height"},{default:u(()=>[a(Qe,{class:"d-flex align-center justify-space-between pa-3 bg-primary"},{default:u(()=>[ne("div",Qo,[a(qe,{class:"mr-2"},{default:u(()=>d[31]||(d[31]=[ee("mdi-eye")])),_:1}),d[32]||(d[32]=ee(" Vista Previa "))]),ne("div",Zo,[ne("div",et,Ce(r.value?`${r.value.ancho}mm Ã— ${r.value.alto}mm`:""),1),a(Ie,{icon:"",size:"small",variant:"tonal",color:"white",onClick:d[1]||(d[1]=i=>N.value=!N.value),title:N.value?"Ocultar etiquetas":"Mostrar etiquetas"},{default:u(()=>[a(qe,null,{default:u(()=>[ee(Ce(N.value?"mdi-label":"mdi-label-off"),1)]),_:1})]),_:1},8,["title"]),a(Ie,{icon:"",size:"small",variant:"tonal",color:"white",onClick:d[2]||(d[2]=i=>w.value=!w.value),title:w.value?"Ocultar propiedades":"Mostrar propiedades"},{default:u(()=>[a(qe,null,{default:u(()=>[ee(Ce(w.value?"mdi-chevron-right":"mdi-chevron-left"),1)]),_:1})]),_:1},8,["title"])])]),_:1}),a(na,{class:"pa-4 preview-content"},{default:u(()=>[r.value?(b(),J("div",{key:1,class:"preview-wrapper",ref_key:"previewContainer",ref:e},[r.value?ml((b(),J("div",lt,[ne("div",{class:"label-dimension label-ancho-principal",style:Ge(B())},Ce(r.value.ancho)+"mm ",5),ne("div",{class:"label-dimension label-alto-principal",style:Ge(F())},Ce(r.value.alto)+"mm ",5)],512)),[[fl,N.value]]):ue("",!0),(b(),J("div",{class:"preview-scaler",key:R.value,style:Ge(P())},[a(Po,{nodo:r.value,"color-marco":j.colorMarco,"componentes-vista":p,"escala-global":K(),"mostrar-etiquetas":!1,"etiquetas-visibles":N.value,onClickNodo:_,onActualizarDimension:De,onMoverDivisor:Q,onFinalizarMovimientoDivisor:X},null,8,["nodo","color-marco","escala-global","etiquetas-visibles"])],4))],512)):(b(),J("div",at,[a(qe,{size:"80",color:"grey-lighten-2"},{default:u(()=>d[33]||(d[33]=[ee("mdi-image-off")])),_:1}),d[34]||(d[34]=ne("div",{class:"text-body-2 text-grey mt-3"}," Crea un marco para ver la vista previa ",-1))]))]),_:1})]),_:1})]),ml(ne("div",ot,[a(Je,{elevation:"0",class:"fill-height"},{default:u(()=>[a(Qe,{class:"d-flex align-center pa-3 bg-primary"},{default:u(()=>[a(qe,{class:"mr-2"},{default:u(()=>d[35]||(d[35]=[ee("mdi-cog")])),_:1}),d[36]||(d[36]=ee(" Propiedades "))]),_:1}),a(na,{class:"pa-3"},{default:u(()=>[s.value?(b(),J("div",nt,[a(Ll,{density:"compact"},{default:u(()=>[a(ya,null,{default:u(()=>[a(Va,{class:"text-caption text-grey"},{default:u(()=>d[39]||(d[39]=[ee("Tipo")])),_:1}),a(gl,{class:"text-body-2 font-weight-bold"},{default:u(()=>[ee(Ce(s.value.tipo==="marco"?"Marco":s.value.tipoVentanaId?"Ventana":"Espacio"),1)]),_:1})]),_:1}),a(ya,null,{default:u(()=>[a(Va,{class:"text-caption text-grey"},{default:u(()=>d[40]||(d[40]=[ee("Dimensiones")])),_:1}),a(gl,{class:"text-body-2"},{default:u(()=>[ee(Ce(s.value.ancho)+"mm Ã— "+Ce(s.value.alto)+"mm ",1)]),_:1})]),_:1})]),_:1}),a(ma,{class:"my-3"}),ne("div",ut,[!s.value.tipoVentanaId&&!s.value.hijos?(b(),E(Ie,{key:0,block:"",color:"primary",variant:"tonal",size:"small",onClick:d[3]||(d[3]=i=>k.value=!0)},{default:u(()=>[a(qe,{left:""},{default:u(()=>d[41]||(d[41]=[ee("mdi-page-layout-sidebar-left")])),_:1}),d[42]||(d[42]=ee(" Dividir "))]),_:1})):ue("",!0),!s.value.tipoVentanaId&&!s.value.hijos?(b(),E(Ie,{key:1,block:"",color:"success",variant:"tonal",size:"small",onClick:d[4]||(d[4]=i=>A.value=!0)},{default:u(()=>[a(qe,{left:""},{default:u(()=>d[43]||(d[43]=[ee("mdi-window-closed-variant")])),_:1}),d[44]||(d[44]=ee(" Asignar Tipo "))]),_:1})):ue("",!0),s.value.tipoVentanaId?(b(),E(Ie,{key:2,block:"",color:"warning",variant:"tonal",size:"small",onClick:I},{default:u(()=>[a(qe,{left:""},{default:u(()=>d[45]||(d[45]=[ee("mdi-eraser")])),_:1}),d[46]||(d[46]=ee(" Quitar Tipo "))]),_:1})):ue("",!0),s.value.tipo!=="marco"?(b(),E(Ie,{key:3,block:"",color:"error",variant:"outlined",size:"small",onClick:d[5]||(d[5]=i=>S(s.value))},{default:u(()=>[a(qe,{left:""},{default:u(()=>d[47]||(d[47]=[ee("mdi-delete")])),_:1}),d[48]||(d[48]=ee(" Eliminar "))]),_:1})):ue("",!0)])])):(b(),J("div",tt,[a(qe,{size:"48"},{default:u(()=>d[37]||(d[37]=[ee("mdi-cursor-default-click")])),_:1}),d[38]||(d[38]=ne("div",{class:"text-body-2 mt-2"}," Selecciona un elemento ",-1))]))]),_:1})]),_:1})],512),[[fl,w.value]])]),ne("div",rt,[a(Ie,{onClick:d[6]||(d[6]=i=>x.$emit("cancelar")),variant:"text"},{default:u(()=>d[49]||(d[49]=[ee(" Cancelar ")])),_:1}),a(Ie,{onClick:ke,color:"primary",variant:"flat",disabled:!r.value},{default:u(()=>[a(qe,{left:""},{default:u(()=>d[50]||(d[50]=[ee("mdi-check")])),_:1}),d[51]||(d[51]=ee(" Aplicar ConfiguraciÃ³n "))]),_:1},8,["disabled"])]),a(va,{modelValue:G.value,"onUpdate:modelValue":d[11]||(d[11]=i=>G.value=i),"max-width":"500"},{default:u(()=>[a(Je,null,{default:u(()=>[a(Qe,null,{default:u(()=>d[52]||(d[52]=[ee("Crear Marco Principal")])),_:1}),a(na,null,{default:u(()=>[a(Ne,{modelValue:h.value.ancho,"onUpdate:modelValue":d[7]||(d[7]=i=>h.value.ancho=i),modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",variant:"outlined",density:"compact",class:"mb-3"},null,8,["modelValue"]),a(Ne,{modelValue:h.value.alto,"onUpdate:modelValue":d[8]||(d[8]=i=>h.value.alto=i),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",variant:"outlined",density:"compact",class:"mb-3"},null,8,["modelValue"]),a(ka,{modelValue:h.value.perfilId,"onUpdate:modelValue":d[9]||(d[9]=i=>h.value.perfilId=i),items:j.perfilesMarco,"item-title":"nombre","item-value":"id",label:"Perfil del Marco",variant:"outlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),a(sa,null,{default:u(()=>[a(fa),a(Ie,{onClick:d[10]||(d[10]=i=>G.value=!1)},{default:u(()=>d[53]||(d[53]=[ee("Cancelar")])),_:1}),a(Ie,{color:"primary",onClick:q},{default:u(()=>d[54]||(d[54]=[ee("Crear")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(va,{modelValue:k.value,"onUpdate:modelValue":d[16]||(d[16]=i=>k.value=i),"max-width":"500"},{default:u(()=>[a(Je,null,{default:u(()=>[a(Qe,null,{default:u(()=>d[55]||(d[55]=[ee("Dividir Espacio")])),_:1}),a(na,null,{default:u(()=>[a($e,{modelValue:n.value.orientacion,"onUpdate:modelValue":d[12]||(d[12]=i=>n.value.orientacion=i)},{default:u(()=>[a(re,{label:"Horizontal",value:"horizontal"}),a(re,{label:"Vertical",value:"vertical"})]),_:1},8,["modelValue"]),a(Ne,{modelValue:n.value.posicion,"onUpdate:modelValue":d[13]||(d[13]=i=>n.value.posicion=i),modelModifiers:{number:!0},label:`PosiciÃ³n (mm) - Max: ${s.value?n.value.orientacion==="horizontal"?s.value.alto:s.value.ancho:0}`,type:"number",variant:"outlined",density:"compact",max:s.value?n.value.orientacion==="horizontal"?s.value.alto:s.value.ancho:0},null,8,["modelValue","label","max"]),a(ka,{modelValue:n.value.perfilId,"onUpdate:modelValue":d[14]||(d[14]=i=>n.value.perfilId=i),items:j.perfilesDivisores,"item-title":"nombre","item-value":"id",label:"Perfil del Divisor",variant:"outlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),a(sa,null,{default:u(()=>[a(fa),a(Ie,{onClick:d[15]||(d[15]=i=>k.value=!1)},{default:u(()=>d[56]||(d[56]=[ee("Cancelar")])),_:1}),a(Ie,{color:"primary",onClick:M},{default:u(()=>d[57]||(d[57]=[ee("Dividir")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(va,{modelValue:A.value,"onUpdate:modelValue":d[19]||(d[19]=i=>A.value=i),"max-width":"500"},{default:u(()=>[a(Je,null,{default:u(()=>[a(Qe,null,{default:u(()=>d[58]||(d[58]=[ee("Asignar Tipo de Ventana")])),_:1}),a(na,null,{default:u(()=>[j.tiposVentana.length===0?(b(),J("div",it," âš ï¸ No hay tipos de ventana disponibles para este material ")):ue("",!0),a(ka,{modelValue:v.value,"onUpdate:modelValue":d[17]||(d[17]=i=>v.value=i),items:j.tiposVentana,"item-title":"nombre","item-value":"id",label:"Tipo de Ventana",variant:"outlined",density:"compact","no-data-text":"No hay tipos de ventana disponibles"},null,8,["modelValue","items"])]),_:1}),a(sa,null,{default:u(()=>[a(fa),a(Ie,{onClick:d[18]||(d[18]=i=>A.value=!1)},{default:u(()=>d[59]||(d[59]=[ee("Cancelar")])),_:1}),a(Ie,{color:"primary",onClick:$},{default:u(()=>d[60]||(d[60]=[ee("Asignar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},vt=xa(st,[["__scopeId","data-v-41b38f81"]]),ct={class:"text-body-1"},dt={class:"mt-4"},mt={class:"d-flex align-center justify-space-between"},ft={class:"text-h6"},pt={class:"text-caption"},ht=.45,gt={__name:"AgregarVentanaModal2",props:{mostrar:Boolean,materiales:Array,colores:Array,tiposVidrio:Array,tiposVentana:Array,productosVidrio:Array,ventana:Object,materialDefault:[String,Number],colorDefault:[String,Number],tipoVidrioDefault:[String,Number],productoVidrioDefault:[String,Number]},emits:["update:mostrar","guardar"],setup(j,{emit:W}){const p=j,T=W,g=se(p.mostrar);Fe(()=>p.mostrar,i=>{g.value=i}),Fe(g,i=>{T("update:mostrar",i)});const r=l(()=>!!p.ventana),s=()=>({tipo:2,sizePercent:null,ladoApertura:"izquierda",direccionApertura:"interior"});function m(){const i=Math.min(Math.max(Number(e.value.cantidadComp||2),2),8);if(e.value.cantidadComp=i,e.value.itemsComp||(e.value.itemsComp=[]),e.value.itemsComp.length<i){const o=i-e.value.itemsComp.length;for(let t=0;t<o;t++)e.value.itemsComp.push(s())}else e.value.itemsComp.length>i&&e.value.itemsComp.splice(i);e.value.itemsComp.forEach(o=>{o.tipo||(o.tipo=2)}),console.log("ajustarCantidadItems ejecutado, items finales:",e.value.itemsComp)}const f={tipo:null,ancho:null,alto:null,cantidad:1,material:p.materialDefault??null,color:p.colorDefault??null,tipoVidrio:p.tipoVidrioDefault??null,productoVidrioProveedor:p.productoVidrioDefault??null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:null,manillon:!1,filas:1,columnas:1,altosFilas:[],anchosColumnas:[],secciones:[[{tipo:1}]],materiales:[],costo_total:0,costo_total_unitario:0,costo:0,precio_unitario:0,precio:0,hoja1AlFrente:!0,ladoApertura:"izquierda",direccionApertura:"interior",pasoLibre:!1,hojaActiva:"derecha",tipoVentanaIzquierda:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaDerecha:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaCentro:{tipo:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:null,hoja1AlFrente:!0},ancho_izquierda:null,ancho_centro:null,ancho_derecha:null,orientacionComp:"horizontal",cantidadComp:2,itemsComp:[s(),s()],configuracionArmador:null},e=se({...f,...p.ventana||{}}),w=[{id:2,nombre:"Fija"},{id:45,nombre:"Proyectante"},{id:3,nombre:"Corredera"},{id:49,nombre:"Abatible"},{id:50,nombre:"Puerta S60"}],N=l(()=>{const i=e.value.material??p.materialDefault,o=p.tiposVentana.filter(z=>z.material_id===i);console.log("ðŸ” Filtrando tipos ventana:",{materialId:i,tiposVentanaTotal:p.tiposVentana.length,tiposDisponibles:o.length,tiposDisponiblesIds:o.map(z=>({id:z.id,nombre:z.nombre})),tiposBase:w.length});const t=w.filter(z=>o.some(U=>U.id===z.id));return console.log("âœ… Tipos ventana filtrados:",t),t.length===0&&o.length>0?(console.log("âš ï¸ No hay coincidencias con base, usando todos los disponibles"),o.map(z=>({id:z.id,nombre:z.nombre}))):t}),R=[{id:2,nombre:"Fija"},{id:3,nombre:"Corredera Sliding"},{id:45,nombre:"Proyectante S60"},{id:50,nombre:"Puerta S60"}],G=se([]),k=se([]);Ca(async()=>{try{const o=(await pl.get("/api/productos")).data.data||[];G.value=o.filter(t=>t.nombre&&(t.nombre.toLowerCase().includes("marco")||t.nombre.toLowerCase().includes("jamba"))),k.value=o.filter(t=>t.nombre&&(t.nombre.toLowerCase().includes("divisor")||t.nombre.toLowerCase().includes("travesaÃ±o")||t.nombre.toLowerCase().includes("parteluz"))),console.log("Perfiles cargados:",{marcos:G.value.length,divisores:k.value.length})}catch(i){console.error("Error cargando perfiles:",i)}}),Fe(()=>p.mostrar,i=>{i&&!p.ventana&&(e.value={...f,material:p.materialDefault??null,color:p.colorDefault??null,tipoVidrio:p.tipoVidrioDefault??null,productoVidrioProveedor:p.productoVidrioDefault??null,tipoVentanaIzquierda:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaDerecha:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"}]}}),i&&p.ventana&&(e.value={...f,...p.ventana})},{immediate:!0});const A=l(()=>e.value.tipoVidrio?p.productosVidrio.filter(i=>i.tipo_producto_id===e.value.tipoVidrio).flatMap(i=>i.colores_por_proveedor.map(o=>{var t;return{id:o.id,producto_id:i.id,proveedor_id:o.proveedor_id,nombre:`${i.nombre} (${((t=o.proveedor)==null?void 0:t.nombre)||"Proveedor desconocido"})`}})):[]),h=l(()=>{const i=e.value.material??p.materialDefault;return p.tiposVentana.filter(o=>o.material_id===i)}),n=se(null),v=()=>{g.value=!1};async function c(){var o,t,z;const i=e.value.tipo===58?((o=e.value.configuracionArmador)==null?void 0:o.ancho)&&((t=e.value.configuracionArmador)==null?void 0:t.alto):e.value.ancho&&e.value.alto;if(e.value.tipo&&i&&e.value.cantidad&&e.value.color&&e.value.productoVidrioProveedor)try{const U=p.productosVidrio.flatMap(te=>te.colores_por_proveedor.map(me=>({id:me.id,producto_id:te.id,proveedor_id:me.proveedor_id}))).find(te=>te.id===e.value.productoVidrioProveedor);if(!U){console.error("âŒ No se encontrÃ³ la relaciÃ³n producto-proveedor para ID:",e.value.productoVidrioProveedor);return}const O={tipo_ventana_id:e.value.tipo,tipo:e.value.tipo,ancho:e.value.tipo===58&&e.value.configuracionArmador?e.value.configuracionArmador.ancho:e.value.ancho,alto:e.value.tipo===58&&e.value.configuracionArmador?e.value.configuracionArmador.alto:e.value.alto,cantidad:e.value.cantidad,color_id:e.value.color,color:e.value.color,producto_vidrio_proveedor_id:e.value.productoVidrioProveedor,producto_id:U.producto_id,proveedor_id:U.proveedor_id,productoVidrio:U.producto_id,proveedorVidrio:U.proveedor_id,tipoVidrio:e.value.tipoVidrio,manillon:e.value.tipo===55?e.value.manillon:void 0,hojas_totales:[3,46,52,55].includes(e.value.tipo)?e.value.hojas_totales:void 0,hojas_moviles:[3,46,52,55].includes(e.value.tipo)?e.value.hojas_moviles:void 0,hojaMovilSeleccionada:[3,46,52,55].includes(e.value.tipo)?e.value.hojaMovilSeleccionada:void 0,hoja1AlFrente:[3,46,52].includes(e.value.tipo)?e.value.hoja1AlFrente:void 0,direccionApertura:e.value.direccionApertura,ladoApertura:e.value.ladoApertura,pasoLibre:[50,51].includes(e.value.tipo)?e.value.pasoLibre:void 0,hojaActiva:e.value.tipo===51?e.value.hojaActiva:void 0,...e.value.tipo===57&&{filas:e.value.filas,columnas:e.value.columnas,altos_filas:e.value.altosFilas,anchos_columnas:e.value.anchosColumnas,secciones:e.value.secciones},...e.value.tipo===58&&e.value.configuracionArmador&&{configuracionArmador:e.value.configuracionArmador},...e.value.tipo===47&&{ancho_izquierda:e.value.ancho_izquierda,ancho_centro:e.value.ancho_centro,ancho_derecha:e.value.ancho_derecha,tipoVentanaIzquierda:e.value.tipoVentanaIzquierda,tipoVentanaCentro:e.value.tipoVentanaCentro,tipoVentanaDerecha:e.value.tipoVentanaDerecha}};console.log("ðŸ’° Payload a calcular-materiales:",O),console.log("ðŸ“¦ Tipo 58 - configuracionArmador:",e.value.configuracionArmador);const{data:ie}=await pl.post("/api/cotizador/calcular-materiales",O);console.log("âœ… Respuesta del backend:",ie),e.value.costo_total_unitario=ie.costo_unitario,e.value.costo_total=ie.costo_unitario*e.value.cantidad,e.value.precio=Math.ceil(e.value.costo_total/(1-ht)),e.value.materiales=ie.materiales,console.log("ðŸ’µ Valores asignados:"),console.log("   - costo_total_unitario:",e.value.costo_total_unitario),console.log("   - costo_total:",e.value.costo_total),console.log("   - precio:",e.value.precio),console.log("   - materiales:",((z=e.value.materiales)==null?void 0:z.length)||0,"items")}catch(U){console.error("âŒ Error en recalcularCostos:",U),e.value.costo_total_unitario=0,e.value.costo_total=0,e.value.precio=0,e.value.materiales=[]}else e.value.costo_total_unitario=0,e.value.costo_total=0,e.value.precio=0,e.value.materiales=[]}const y=()=>{var i;if(!e.value.tipo||!e.value.ancho||!e.value.alto||!e.value.cantidad){alert("Completa todos los campos obligatorios");return}T("guardar",{...e.value,index:(i=p.ventana)==null?void 0:i.index}),v()};Fe(()=>e.value.material,()=>{e.value.tipo=null}),Fe(()=>{var i,o,t,z,U,O,ie,te,me,_e,He,Oe,Xe,Be,ea,oa,ca,da,fe,za,wa,_a,Sa,$a,Ia,La,qa,Pa,Da,Na,Ua,Ea,Ra,Ta,Wa,Fa,Ha,Oa,Xa,Ba,Ya,Ga,Ja,Ka,Qa,Za,el,al,ll,ol,tl,nl,ul,rl,il,sl,vl,cl,dl;return[e.value.tipo,e.value.ancho,e.value.alto,e.value.cantidad,e.value.material,e.value.color,e.value.tipoVidrio,e.value.productoVidrioProveedor,e.value.manillon,e.value.hojas_totales,e.value.hojas_moviles,e.value.hojaMovilSeleccionada,e.value.direccionApertura,e.value.ladoApertura,e.value.pasoLibre,e.value.ancho_izquierda,e.value.ancho_centro,e.value.ancho_derecha,(i=e.value.tipoVentanaIzquierda)==null?void 0:i.compuesta,(o=e.value.tipoVentanaIzquierda)==null?void 0:o.ladoApertura,(t=e.value.tipoVentanaIzquierda)==null?void 0:t.direccionApertura,(O=(U=(z=e.value.tipoVentanaIzquierda)==null?void 0:z.partes)==null?void 0:U[0])==null?void 0:O.tipo,(me=(te=(ie=e.value.tipoVentanaIzquierda)==null?void 0:ie.partes)==null?void 0:te[0])==null?void 0:me.alto,(Oe=(He=(_e=e.value.tipoVentanaIzquierda)==null?void 0:_e.partes)==null?void 0:He[0])==null?void 0:Oe.ladoApertura,(ea=(Be=(Xe=e.value.tipoVentanaIzquierda)==null?void 0:Xe.partes)==null?void 0:Be[0])==null?void 0:ea.direccionApertura,(da=(ca=(oa=e.value.tipoVentanaIzquierda)==null?void 0:oa.partes)==null?void 0:ca[1])==null?void 0:da.tipo,(wa=(za=(fe=e.value.tipoVentanaIzquierda)==null?void 0:fe.partes)==null?void 0:za[1])==null?void 0:wa.alto,($a=(Sa=(_a=e.value.tipoVentanaIzquierda)==null?void 0:_a.partes)==null?void 0:Sa[1])==null?void 0:$a.ladoApertura,(qa=(La=(Ia=e.value.tipoVentanaIzquierda)==null?void 0:Ia.partes)==null?void 0:La[1])==null?void 0:qa.direccionApertura,(Pa=e.value.tipoVentanaCentro)==null?void 0:Pa.tipo,(Da=e.value.tipoVentanaCentro)==null?void 0:Da.hojas_totales,(Na=e.value.tipoVentanaCentro)==null?void 0:Na.hojas_moviles,(Ua=e.value.tipoVentanaCentro)==null?void 0:Ua.hojaMovilSeleccionada,(Ea=e.value.tipoVentanaCentro)==null?void 0:Ea.hoja1AlFrente,(Ra=e.value.tipoVentanaDerecha)==null?void 0:Ra.compuesta,(Ta=e.value.tipoVentanaDerecha)==null?void 0:Ta.ladoApertura,(Wa=e.value.tipoVentanaDerecha)==null?void 0:Wa.direccionApertura,(Oa=(Ha=(Fa=e.value.tipoVentanaDerecha)==null?void 0:Fa.partes)==null?void 0:Ha[0])==null?void 0:Oa.tipo,(Ya=(Ba=(Xa=e.value.tipoVentanaDerecha)==null?void 0:Xa.partes)==null?void 0:Ba[0])==null?void 0:Ya.alto,(Ka=(Ja=(Ga=e.value.tipoVentanaDerecha)==null?void 0:Ga.partes)==null?void 0:Ja[0])==null?void 0:Ka.ladoApertura,(el=(Za=(Qa=e.value.tipoVentanaDerecha)==null?void 0:Qa.partes)==null?void 0:Za[0])==null?void 0:el.direccionApertura,(ol=(ll=(al=e.value.tipoVentanaDerecha)==null?void 0:al.partes)==null?void 0:ll[1])==null?void 0:ol.tipo,(ul=(nl=(tl=e.value.tipoVentanaDerecha)==null?void 0:tl.partes)==null?void 0:nl[1])==null?void 0:ul.alto,(sl=(il=(rl=e.value.tipoVentanaDerecha)==null?void 0:rl.partes)==null?void 0:il[1])==null?void 0:sl.ladoApertura,(dl=(cl=(vl=e.value.tipoVentanaDerecha)==null?void 0:vl.partes)==null?void 0:cl[1])==null?void 0:dl.direccionApertura,e.value.filas,e.value.columnas,JSON.stringify(e.value.altosFilas),JSON.stringify(e.value.anchosColumnas),JSON.stringify(e.value.secciones),JSON.stringify(e.value.configuracionArmador)]},c,{immediate:!0}),Fe(()=>e.value.productoVidrioProveedor,i=>{const o=p.productosVidrio.flatMap(t=>t.colores_por_proveedor.map(z=>({...t,cpp:z}))).find(t=>t.cpp.id===i);e.value.productoVidrio=o?o.id:null});const L=i=>{if(i==null)return!1;const o=Number(i);return!Number.isNaN(o)&&o===49||String(i).toLowerCase().includes("abat")},V=se([]);Fe(()=>{var i,o;return(o=(i=e.value)==null?void 0:i.itemsComp)==null?void 0:o.length},()=>{V.value=[]}),Fe(()=>e.value.tipo,i=>{var o,t,z,U,O;Number(i)===54&&((o=e.value).orientacionComp??(o.orientacionComp="horizontal"),(t=e.value).cantidadComp??(t.cantidadComp=2),(z=e.value).itemsComp??(z.itemsComp=[s(),s()])),Number(i)===57&&((U=e.value).filas??(U.filas=1),(O=e.value).columnas??(O.columnas=1),q())}),Fe(()=>[e.value.filas,e.value.columnas],()=>{e.value.tipo===57&&q()}),Fe(()=>[e.value.alto,e.value.ancho],([i,o],[t,z])=>{var U,O;if(e.value.tipo===57&&i&&o){const ie=e.value.filas||1,te=e.value.columnas||1,me=(U=e.value.altosFilas)==null?void 0:U.every((He,Oe,Xe)=>Math.abs(He-Xe[0])<1),_e=(O=e.value.anchosColumnas)==null?void 0:O.every((He,Oe,Xe)=>Math.abs(He-Xe[0])<1);i!==t&&me&&e.value.altosFilas&&(e.value.altosFilas=Array(ie).fill(i/ie)),o!==z&&_e&&e.value.anchosColumnas&&(e.value.anchosColumnas=Array(te).fill(o/te))}});function q(){var O,ie;const i=e.value.filas||1,o=e.value.columnas||1,t=[];for(let te=0;te<i;te++){const me=[];for(let _e=0;_e<o;_e++){const He=(ie=(O=e.value.secciones)==null?void 0:O[te])==null?void 0:ie[_e];me.push(He||{tipo:1})}t.push(me)}e.value.secciones=t;const z=e.value.alto||1e3,U=e.value.ancho||1e3;e.value.altosFilas=Array(i).fill(z/i),e.value.anchosColumnas=Array(o).fill(U/o)}const _=se(!1),D=se(null);function M(i){D.value=i,_.value=!0}function C(i){console.log("=== AGREGAR BORDE ==="),console.log("PosiciÃ³n:",i),console.log("OrientaciÃ³n actual:",e.value.orientacionComp),console.log("Items ANTES:",JSON.stringify(e.value.itemsComp,null,2));const o=["arriba","abajo"].includes(i)?"vertical":"horizontal";if(console.log("Nueva orientaciÃ³n necesaria:",o),e.value.orientacionComp!==o){console.log("OrientaciÃ³n cambiÃ³, envolviendo items existentes...");const t=[...e.value.itemsComp],z={tipo:"compuesta",orientacion:e.value.orientacionComp,items:t};e.value.itemsComp=[z],e.value.orientacionComp=o,console.log("Items despuÃ©s de envolver:",JSON.stringify(e.value.itemsComp,null,2))}else console.log("OrientaciÃ³n NO cambiÃ³, no envolviendo");switch(i){case"arriba":case"izquierda":D.value=0;break;case"abajo":case"derecha":D.value=e.value.itemsComp.length;break}console.log("Ãndice para insertar:",D.value),console.log("OrientaciÃ³n final:",e.value.orientacionComp),console.log("=== FIN DEBUG ==="),_.value=!0}function $(i){const o=s();o.tipo=i||2,e.value.itemsComp.splice(D.value,0,o),e.value.itemsComp=[...e.value.itemsComp],B.value++,console.log("Items despuÃ©s de agregar:",e.value.itemsComp),_.value=!1}function I(){const i={tipo:"compuesta",orientacion:"horizontal",items:[{tipo:2,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:2,ladoApertura:"izquierda",direccionApertura:"interior"}]};e.value.itemsComp.splice(D.value,0,i),B.value++,_.value=!1}const S=se(null),H=se(!1),ve=se("");function ze(i){console.log("=== EDITAR VENTANA INDIVIDUAL ==="),console.log("Path:",i),ve.value=i;const o=X(i);if(o){const t=Me(i);S.value={tipo:o.tipo||2,ancho:t.ancho,alto:t.alto,sizePercent:o.sizePercent||null,ladoApertura:o.ladoApertura||"izquierda",direccionApertura:o.direccionApertura||"interior",...o},console.log("Dimensiones reales calculadas:",t),console.log("Datos de ventana a editar:",S.value),H.value=!0}else console.error("No se encontrÃ³ ventana en path:",i)}function Me(i){const o=i.split(".").map(Number);let t=e.value.ancho||2e3,z=e.value.alto||2e3,U=e.value.orientacionComp||"horizontal",O=e.value.itemsComp;console.log("ðŸ” Calculando dimensiones para path:",i),console.log("Dimensiones iniciales:",{ancho:t,alto:z,orientacion:U});for(let te=0;te<o.length;te++){const me=o[te],_e=O[me];if(!_e){console.error("Item no encontrado en nivel",te,"Ã­ndice",me);break}console.log(`Nivel ${te}, Ã­ndice ${me}:`,_e);const He=O.length,Oe=O.map(ea=>Number(ea.sizePercent)||0),Xe=Oe.reduce((ea,oa)=>ea+oa,0);let Be;if(Xe>0?Be=Oe[me]/Xe:Be=1/He,console.log(`Porcentaje del item en este nivel: ${Be} (${(Be*100).toFixed(1)}%)`),U==="horizontal"?t=t*Be:z=z*Be,console.log(`Nuevas dimensiones: ${t} x ${z}`),te===o.length-1)break;if(_e.tipo==="compuesta")U=_e.orientacion||"horizontal",O=_e.items||[],console.log(`Navegando a compuesta con orientaciÃ³n: ${U}`);else{console.error("Item no es compuesta pero no es el Ãºltimo nivel");break}}const ie={ancho:Math.round(t),alto:Math.round(z)};return console.log("âœ… Dimensiones finales calculadas:",ie),ie}const ke=l(()=>{const i=Number(S.value.ancho)||0,o=Number(S.value.alto)||0;return i*o/1e6}),De=l(()=>{const i=ke.value,o=S.value.tipo;return i*({2:15e4,3:2e5,45:22e4,49:25e4,50:28e4}[o]||15e4)});function Le(i){const o=N.value.find(t=>t.id===i);return o?o.nombre:`Tipo ${i}`}function ae(){var o;function i(t,z,U){var O;if(t.tipo==="compuesta")return((O=t.items)==null?void 0:O.reduce((ie,te)=>ie+i(te,z,U),0))||0;{const ie=t.ancho||z,te=t.alto||U;return ie*te/1e6*({2:15e4,3:2e5,45:22e4,49:25e4,50:28e4}[t.tipo]||15e4)}}return((o=e.value.itemsComp)==null?void 0:o.reduce((t,z)=>t+i(z,e.value.ancho,e.value.alto),0))||0}const Q=l(()=>ae());function X(i){var U;const o=i.split(".").map(Number);let t=e.value.itemsComp;console.log("Navegando path:",i,"indices:",o),console.log("Items iniciales:",t);for(let O=0;O<o.length-1;O++){const ie=o[O];if(console.log(`Navegando Ã­ndice ${O}: ${ie}`),((U=t[ie])==null?void 0:U.tipo)==="compuesta")t=t[ie].items,console.log("Items en nivel",O+1,":",t);else return console.error("No es compuesta en Ã­ndice",ie),null}const z=o[o.length-1];return console.log("Ãndice final:",z,"Item encontrado:",t[z]),t[z]}function P(i,o){var O;const t=i.split(".").map(Number);let z=e.value.itemsComp;for(let ie=0;ie<t.length-1;ie++){const te=t[ie];if(((O=z[te])==null?void 0:O.tipo)==="compuesta")z=z[te].items;else return console.error("Error: no es compuesta en Ã­ndice",te),!1}const U=t[t.length-1];if(z[U]){const ie={...z[U],tipo:o.tipo,ancho:o.ancho,alto:o.alto,sizePercent:o.sizePercent,ladoApertura:o.ladoApertura,direccionApertura:o.direccionApertura};return z[U]=ie,console.log("Ventana actualizada:",z[U]),e.value.itemsComp=JSON.parse(JSON.stringify(e.value.itemsComp)),e.value={...e.value},_l(()=>{console.log("âœ… Forzando re-render despuÃ©s de actualizar ventana")}),!0}return!1}const B=se(0);function F(){console.log("=== GUARDANDO CAMBIOS ==="),console.log("Datos a guardar:",S.value),console.log("Path:",ve.value),P(ve.value,{tipo:S.value.tipo,ancho:S.value.ancho,alto:S.value.alto,sizePercent:S.value.sizePercent,ladoApertura:S.value.ladoApertura,direccionApertura:S.value.direccionApertura})?(console.log("âœ… Ventana actualizada correctamente"),K(),B.value++,console.log("ðŸ”„ Forzando re-render con key:",B.value),H.value=!1):(console.error("âŒ Error al actualizar ventana"),alert("Error al actualizar la ventana"))}function K(){console.log("=== DEBUG ITEMS COMPUESTA ==="),console.log("Items actuales:",JSON.stringify(e.value.itemsComp,null,2)),console.log("OrientaciÃ³n:",e.value.orientacionComp),console.log("Dimensiones contenedor:",{ancho:e.value.ancho,alto:e.value.alto}),console.log("=== FIN DEBUG ===")}function x(i){console.log("=== ELIMINAR VENTANA ==="),console.log("Path:",i),confirm("Â¿EstÃ¡s seguro de eliminar esta ventana?")&&(d(i)?(console.log("âœ… Ventana eliminada correctamente"),B.value++):(console.error("âŒ Error al eliminar ventana"),alert("Error al eliminar la ventana")))}function d(i){var ie;const o=i.split(".").map(Number);let t=e.value.itemsComp,z=null,U=null;for(let te=0;te<o.length-1;te++){const me=o[te];if(z=t,U=me,((ie=t[me])==null?void 0:ie.tipo)==="compuesta")t=t[me].items;else return console.error("Error: no es compuesta en Ã­ndice",me),!1}const O=o[o.length-1];if(z===null&&(z={items:e.value.itemsComp},t=e.value.itemsComp),t[O]){if(t.splice(O,1),console.log("Ventana eliminada. Items restantes:",t.length),t.length===1&&z!==null&&U!==null){const te=t[0];z.items?z.items[U]=te:z[U]=te,console.log("Compuesta simplificada porque quedÃ³ solo 1 item")}return e.value.itemsComp.length===0&&(e.value.itemsComp=[s(),s()],console.log("Sin items restantes, reiniciando con defaults")),e.value.itemsComp=[...e.value.itemsComp],!0}return!1}return(i,o)=>(b(),J(ce,null,[a(va,{modelValue:g.value,"onUpdate:modelValue":o[60]||(o[60]=t=>g.value=t),"max-width":"1200px",persistent:""},{default:u(()=>[a(Je,{class:"pa-4"},{default:u(()=>[a(Qe,{class:"text-h5"},{default:u(()=>[ee(Ce(r.value?"Editar ventana":"Agregar ventana"),1)]),_:1}),a(ma,{class:"mb-4"}),a(Hl,{ref_key:"formRef",ref:n,onSubmit:aa(y,["prevent"])},{default:u(()=>[a(Se,{dense:""},{default:u(()=>[a(Z,{cols:"12",md:"4"},{default:u(()=>[a(Pe,{modelValue:e.value.tipo,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.tipo=t),items:h.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",rules:[t=>!!t||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","items","rules"])]),_:1}),e.value.tipo!==58?(b(),E(Z,{key:0,cols:"6",md:"2"},{default:u(()=>[a(Ne,{modelValue:e.value.ancho,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.ancho=t),modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",min:"1",rules:[t=>!!t||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1})):ue("",!0),e.value.tipo!==58?(b(),E(Z,{key:1,cols:"6",md:"2"},{default:u(()=>[a(Ne,{modelValue:e.value.alto,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.alto=t),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",min:"1",rules:[t=>!!t||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1})):ue("",!0),a(Z,{cols:"6",md:"2"},{default:u(()=>[a(Ne,{modelValue:e.value.cantidad,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value.cantidad=t),modelModifiers:{number:!0},label:"Cantidad",type:"number",min:"1",rules:[t=>!!t||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),a(Se,{dense:""},{default:u(()=>[a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.material,"onUpdate:modelValue":o[4]||(o[4]=t=>e.value.material=t),items:j.materiales,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.color,"onUpdate:modelValue":o[5]||(o[5]=t=>e.value.color=t),items:j.colores,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.tipoVidrio,"onUpdate:modelValue":o[6]||(o[6]=t=>e.value.tipoVidrio=t),items:j.tiposVidrio,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.productoVidrioProveedor,"onUpdate:modelValue":o[7]||(o[7]=t=>e.value.productoVidrioProveedor=t),items:A.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),e.value.tipo===55?(b(),E(Se,{key:0,dense:"",class:"mt-2"},{default:u(()=>[a(Z,{cols:"12",md:"6"},{default:u(()=>[a(ua,{modelValue:e.value.manillon,"onUpdate:modelValue":o[8]||(o[8]=t=>e.value.manillon=t),color:"primary",label:"ManillÃ³n","hide-details":"",inset:""},{label:u(()=>[ne("span",ct,[o[71]||(o[71]=ne("strong",null,"Herraje:",-1)),ee(" "+Ce(e.value.manillon?"ManillÃ³n":"Pestillo"),1)])]),_:1},8,["modelValue"]),o[72]||(o[72]=ne("div",{class:"text-caption text-medium-emphasis ml-2"}," Seleccione el tipo de herraje para la ventana corredera ",-1))]),_:1})]),_:1})):ue("",!0),e.value.tipo===55?(b(),E(Se,{key:1,dense:"",class:"mt-2"},{default:u(()=>[a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.hojas_totales,"onUpdate:modelValue":o[9]||(o[9]=t=>e.value.hojas_totales=t),items:[2],label:"Hojas totales",outlined:"",color:"primary",disabled:"",hint:"AL25 siempre tiene 2 hojas","persistent-hint":""},null,8,["modelValue"])]),_:1}),a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.hojas_moviles,"onUpdate:modelValue":o[10]||(o[10]=t=>e.value.hojas_moviles=t),items:[1,2],label:"Hojas mÃ³viles",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),e.value.hojas_moviles===1?(b(),E(Z,{key:0,cols:"12",md:"6"},{default:u(()=>[a(Pe,{modelValue:e.value.hojaMovilSeleccionada,"onUpdate:modelValue":o[11]||(o[11]=t=>e.value.hojaMovilSeleccionada=t),items:[{value:1,title:"Hoja 1 (Izquierda)"},{value:2,title:"Hoja 2 (Derecha)"}],"item-title":"title","item-value":"value",label:"Â¿CuÃ¡l hoja se mueve?",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1})):ue("",!0)]),_:1})):ue("",!0),e.value.tipo===57?(b(),E(Se,{key:2,dense:"",class:"mt-2"},{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>[a(Je,{variant:"outlined",class:"pa-3"},{default:u(()=>[a(Qe,{class:"text-subtitle-1 pa-0 mb-2"},{default:u(()=>o[73]||(o[73]=[ee(" ðŸªŸ ConfiguraciÃ³n de Ventana Compuesta ")])),_:1}),a(Se,{dense:""},{default:u(()=>[a(Z,{cols:"6"},{default:u(()=>[a(Ne,{modelValue:e.value.filas,"onUpdate:modelValue":o[12]||(o[12]=t=>e.value.filas=t),modelModifiers:{number:!0},label:"NÃºmero de filas",type:"number",min:"1",outlined:"",color:"primary",hint:"Divisiones horizontales","persistent-hint":""},null,8,["modelValue"])]),_:1}),a(Z,{cols:"6"},{default:u(()=>[a(Ne,{modelValue:e.value.columnas,"onUpdate:modelValue":o[13]||(o[13]=t=>e.value.columnas=t),modelModifiers:{number:!0},label:"NÃºmero de columnas",type:"number",min:"1",outlined:"",color:"primary",hint:"Divisiones verticales","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),a(Se,{dense:"",class:"mt-3"},{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>o[74]||(o[74]=[ne("div",{class:"text-caption mb-2"},"ðŸ“ Dimensiones personalizadas:",-1)])),_:1}),a(Z,{cols:"6"},{default:u(()=>[o[75]||(o[75]=ne("div",{class:"text-caption mb-1"},"Altos de filas (mm):",-1)),(b(!0),J(ce,null,Ue(e.value.altosFilas,(t,z)=>(b(),E(Ne,{key:"alto-"+z,modelValue:e.value.altosFilas[z],"onUpdate:modelValue":U=>e.value.altosFilas[z]=U,modelModifiers:{number:!0},label:`Fila ${z+1}`,type:"number",min:"1",outlined:"",dense:"",color:"primary","hide-details":"",class:"mb-2"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1}),a(Z,{cols:"6"},{default:u(()=>[o[76]||(o[76]=ne("div",{class:"text-caption mb-1"},"Anchos de columnas (mm):",-1)),(b(!0),J(ce,null,Ue(e.value.anchosColumnas,(t,z)=>(b(),E(Ne,{key:"ancho-"+z,modelValue:e.value.anchosColumnas[z],"onUpdate:modelValue":U=>e.value.anchosColumnas[z]=U,modelModifiers:{number:!0},label:`Columna ${z+1}`,type:"number",min:"1",outlined:"",dense:"",color:"primary","hide-details":"",class:"mb-2"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1}),ne("div",dt,[o[77]||(o[77]=ne("div",{class:"text-caption mb-2"},"Configurar cada secciÃ³n:",-1)),(b(!0),J(ce,null,Ue(e.value.secciones,(t,z)=>(b(),J("div",{key:"fila-"+z,class:"mb-2"},[a(Se,{dense:""},{default:u(()=>[(b(!0),J(ce,null,Ue(t,(U,O)=>(b(),E(Z,{key:"sec-"+z+"-"+O,cols:12/e.value.columnas},{default:u(()=>[a(Pe,{modelValue:U.tipo,"onUpdate:modelValue":ie=>U.tipo=ie,items:[{value:1,title:"Fija"},{value:56,title:"Proyectante"}],"item-title":"title","item-value":"value",label:`F${z+1}C${O+1}`,outlined:"",dense:"",color:"primary","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1032,["cols"]))),128))]),_:2},1024)]))),128))])]),_:1})]),_:1})]),_:1})):ue("",!0),e.value.tipo===47?(b(),E(Se,{key:3,dense:""},{default:u(()=>[a(Z,{cols:"4"},{default:u(()=>[a(Ne,{modelValue:e.value.ancho_izquierda,"onUpdate:modelValue":o[14]||(o[14]=t=>e.value.ancho_izquierda=t),modelModifiers:{number:!0},label:"Ancho izquierda (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"4"},{default:u(()=>[a(Ne,{modelValue:e.value.ancho_centro,"onUpdate:modelValue":o[15]||(o[15]=t=>e.value.ancho_centro=t),modelModifiers:{number:!0},label:"Ancho centro (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"4"},{default:u(()=>[a(Ne,{modelValue:e.value.ancho_derecha,"onUpdate:modelValue":o[16]||(o[16]=t=>e.value.ancho_derecha=t),modelModifiers:{number:!0},label:"Ancho derecha (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})):ue("",!0),e.value.tipo===47?(b(),E(Se,{key:4,dense:""},{default:u(()=>[a(Z,{cols:"6"},{default:u(()=>[a(ua,{modelValue:e.value.tipoVentanaIzquierda.compuesta,"onUpdate:modelValue":o[17]||(o[17]=t=>e.value.tipoVentanaIzquierda.compuesta=t),label:"Â¿Ventana izquierda compuesta?",color:"primary"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"6"},{default:u(()=>[a(ua,{modelValue:e.value.tipoVentanaDerecha.compuesta,"onUpdate:modelValue":o[18]||(o[18]=t=>e.value.tipoVentanaDerecha.compuesta=t),label:"Â¿Ventana derecha compuesta?",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})):ue("",!0),e.value.tipo===47?(b(),J(ce,{key:5},[a(Se,{dense:""},{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>o[78]||(o[78]=[ne("h4",null,"Ventana Izquierda",-1)])),_:1}),e.value.tipoVentanaIzquierda.compuesta?(b(),J(ce,{key:0},[a(Z,{cols:"6"},{default:u(()=>[o[79]||(o[79]=ne("h5",null,"Parte superior",-1)),a(Pe,{modelValue:e.value.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":o[19]||(o[19]=t=>e.value.tipoVentanaIzquierda.partes[0].tipo=t),items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","items"]),a(Ne,{modelValue:e.value.tipoVentanaIzquierda.partes[0].alto,"onUpdate:modelValue":o[20]||(o[20]=t=>e.value.tipoVentanaIzquierda.partes[0].alto=t),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),L(e.value.tipoVentanaIzquierda.partes[0].tipo)?(b(),J(ce,{key:0},[a($e,{modelValue:e.value.tipoVentanaIzquierda.partes[0].ladoApertura,"onUpdate:modelValue":o[21]||(o[21]=t=>e.value.tipoVentanaIzquierda.partes[0].ladoApertura=t),row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a($e,{modelValue:e.value.tipoVentanaIzquierda.partes[0].direccionApertura,"onUpdate:modelValue":o[22]||(o[22]=t=>e.value.tipoVentanaIzquierda.partes[0].direccionApertura=t),row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):ue("",!0)]),_:1}),a(Z,{cols:"6"},{default:u(()=>[o[80]||(o[80]=ne("h5",null,"Parte inferior",-1)),a(Pe,{modelValue:e.value.tipoVentanaIzquierda.partes[1].tipo,"onUpdate:modelValue":o[23]||(o[23]=t=>e.value.tipoVentanaIzquierda.partes[1].tipo=t),items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","items"]),a(Ne,{modelValue:e.value.tipoVentanaIzquierda.partes[1].alto,"onUpdate:modelValue":o[24]||(o[24]=t=>e.value.tipoVentanaIzquierda.partes[1].alto=t),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),L(e.value.tipoVentanaIzquierda.partes[1].tipo)?(b(),J(ce,{key:0},[a($e,{modelValue:e.value.tipoVentanaIzquierda.partes[1].ladoApertura,"onUpdate:modelValue":o[25]||(o[25]=t=>e.value.tipoVentanaIzquierda.partes[1].ladoApertura=t),row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a($e,{modelValue:e.value.tipoVentanaIzquierda.partes[1].direccionApertura,"onUpdate:modelValue":o[26]||(o[26]=t=>e.value.tipoVentanaIzquierda.partes[1].direccionApertura=t),row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):ue("",!0)]),_:1})],64)):(b(),J(ce,{key:1},[a(Z,{cols:"4"},{default:u(()=>[a(Pe,{modelValue:e.value.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":o[27]||(o[27]=t=>e.value.tipoVentanaIzquierda.partes[0].tipo=t),items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana izquierda",outlined:""},null,8,["modelValue","items"])]),_:1}),L(e.value.tipoVentanaIzquierda.partes[0].tipo)?(b(),E(Z,{key:0,cols:"4"},{default:u(()=>[a($e,{modelValue:e.value.tipoVentanaIzquierda.ladoApertura,"onUpdate:modelValue":o[28]||(o[28]=t=>e.value.tipoVentanaIzquierda.ladoApertura=t),row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1})):ue("",!0),L(e.value.tipoVentanaIzquierda.partes[0].tipo)?(b(),E(Z,{key:1,cols:"4"},{default:u(()=>[a($e,{modelValue:e.value.tipoVentanaIzquierda.direccionApertura,"onUpdate:modelValue":o[29]||(o[29]=t=>e.value.tipoVentanaIzquierda.direccionApertura=t),row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})):ue("",!0)],64))]),_:1}),a(Se,{dense:""},{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>o[81]||(o[81]=[ne("h4",null,"Ventana Centro",-1)])),_:1}),a(Z,{cols:"4"},{default:u(()=>[a(Pe,{modelValue:e.value.tipoVentanaCentro.tipo,"onUpdate:modelValue":o[30]||(o[30]=t=>e.value.tipoVentanaCentro.tipo=t),items:R,"item-title":"nombre","item-value":"id",label:"Tipo de ventana centro",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),e.value.tipoVentanaCentro&&[3,46].includes(e.value.tipoVentanaCentro.tipo)?(b(),J(ce,{key:0},[a(Z,{cols:"4"},{default:u(()=>[a(Pe,{modelValue:e.value.tipoVentanaCentro.hojas_totales,"onUpdate:modelValue":o[31]||(o[31]=t=>e.value.tipoVentanaCentro.hojas_totales=t),items:[1,2,3,4],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"4"},{default:u(()=>[a(Pe,{modelValue:e.value.tipoVentanaCentro.hojas_moviles,"onUpdate:modelValue":o[32]||(o[32]=t=>e.value.tipoVentanaCentro.hojas_moviles=t),items:[1,2,3,4],label:"Hojas mÃ³viles",disabled:!e.value.tipoVentanaCentro.hojas_totales,outlined:"",color:"primary"},null,8,["modelValue","disabled"])]),_:1}),e.value.tipoVentanaCentro.hojas_moviles===1?(b(),E(Z,{key:0,cols:"12"},{default:u(()=>[a($e,{modelValue:e.value.tipoVentanaCentro.hojaMovilSeleccionada,"onUpdate:modelValue":o[33]||(o[33]=t=>e.value.tipoVentanaCentro.hojaMovilSeleccionada=t),row:"",label:"Selecciona la hoja que se mueve"},{default:u(()=>[a(re,{label:"Mover hoja izquierda (1)",value:1}),a(re,{label:"Mover hoja derecha (2)",value:2})]),_:1},8,["modelValue"])]),_:1})):ue("",!0)],64)):ue("",!0)]),_:1}),a(Se,{dense:""},{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>o[82]||(o[82]=[ne("h4",null,"Ventana Derecha",-1)])),_:1}),e.value.tipoVentanaDerecha.compuesta?(b(),J(ce,{key:0},[a(Z,{cols:"6"},{default:u(()=>[o[83]||(o[83]=ne("h5",null,"Parte superior",-1)),a(Pe,{modelValue:e.value.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":o[34]||(o[34]=t=>e.value.tipoVentanaDerecha.partes[0].tipo=t),items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","items"]),a(Ne,{modelValue:e.value.tipoVentanaDerecha.partes[0].alto,"onUpdate:modelValue":o[35]||(o[35]=t=>e.value.tipoVentanaDerecha.partes[0].alto=t),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),L(e.value.tipoVentanaDerecha.partes[0].tipo)?(b(),J(ce,{key:0},[a($e,{modelValue:e.value.tipoVentanaDerecha.partes[0].ladoApertura,"onUpdate:modelValue":o[36]||(o[36]=t=>e.value.tipoVentanaDerecha.partes[0].ladoApertura=t),row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a($e,{modelValue:e.value.tipoVentanaDerecha.partes[0].direccionApertura,"onUpdate:modelValue":o[37]||(o[37]=t=>e.value.tipoVentanaDerecha.partes[0].direccionApertura=t),row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):ue("",!0)]),_:1}),a(Z,{cols:"6"},{default:u(()=>[o[84]||(o[84]=ne("h5",null,"Parte inferior",-1)),a(Pe,{modelValue:e.value.tipoVentanaDerecha.partes[1].tipo,"onUpdate:modelValue":o[38]||(o[38]=t=>e.value.tipoVentanaDerecha.partes[1].tipo=t),items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","items"]),a(Ne,{modelValue:e.value.tipoVentanaDerecha.partes[1].alto,"onUpdate:modelValue":o[39]||(o[39]=t=>e.value.tipoVentanaDerecha.partes[1].alto=t),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),L(e.value.tipoVentanaDerecha.partes[1].tipo)?(b(),J(ce,{key:0},[a($e,{modelValue:e.value.tipoVentanaDerecha.partes[1].ladoApertura,"onUpdate:modelValue":o[40]||(o[40]=t=>e.value.tipoVentanaDerecha.partes[1].ladoApertura=t),row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a($e,{modelValue:e.value.tipoVentanaDerecha.partes[1].direccionApertura,"onUpdate:modelValue":o[41]||(o[41]=t=>e.value.tipoVentanaDerecha.partes[1].direccionApertura=t),row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):ue("",!0)]),_:1})],64)):(b(),J(ce,{key:1},[a(Z,{cols:"4"},{default:u(()=>[a(Pe,{modelValue:e.value.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":o[42]||(o[42]=t=>e.value.tipoVentanaDerecha.partes[0].tipo=t),items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana derecha",outlined:""},null,8,["modelValue","items"])]),_:1}),L(e.value.tipoVentanaDerecha.partes[0].tipo)?(b(),E(Z,{key:0,cols:"4"},{default:u(()=>[a($e,{modelValue:e.value.tipoVentanaDerecha.ladoApertura,"onUpdate:modelValue":o[43]||(o[43]=t=>e.value.tipoVentanaDerecha.ladoApertura=t),row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1})):ue("",!0),L(e.value.tipoVentanaDerecha.partes[0].tipo)?(b(),E(Z,{key:1,cols:"4"},{default:u(()=>[a($e,{modelValue:e.value.tipoVentanaDerecha.direccionApertura,"onUpdate:modelValue":o[44]||(o[44]=t=>e.value.tipoVentanaDerecha.direccionApertura=t),row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})):ue("",!0)],64))]),_:1})],64)):ue("",!0),[3,46,52].includes(e.value.tipo)?(b(),E(Se,{key:6},{default:u(()=>[a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.hojas_totales,"onUpdate:modelValue":o[45]||(o[45]=t=>e.value.hojas_totales=t),items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"6",md:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.hojas_moviles,"onUpdate:modelValue":o[46]||(o[46]=t=>e.value.hojas_moviles=t),items:[1,2,3,4],label:"Hojas mÃ³viles",disabled:!e.value.hojas_totales,rules:[t=>!t||t<=e.value.hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","disabled","rules"])]),_:1}),e.value.hojas_moviles===1?(b(),E(Z,{key:0,cols:"12",md:"6"},{default:u(()=>[a($e,{modelValue:e.value.hojaMovilSeleccionada,"onUpdate:modelValue":o[47]||(o[47]=t=>e.value.hojaMovilSeleccionada=t),row:"",label:"Selecciona la hoja que se mueve"},{default:u(()=>[a(re,{label:"Mover hoja izquierda (1)",value:1}),a(re,{label:"Mover hoja derecha (2)",value:2})]),_:1},8,["modelValue"])]),_:1})):ue("",!0)]),_:1})):ue("",!0),e.value.tipo===50?(b(),E(Se,{key:7,dense:""},{default:u(()=>[a(Z,{cols:"12",md:"4"},{default:u(()=>[a($e,{modelValue:e.value.ladoApertura,"onUpdate:modelValue":o[48]||(o[48]=t=>e.value.ladoApertura=t),label:"Lado apertura",row:""},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(Z,{cols:"12",md:"4"},{default:u(()=>[a($e,{modelValue:e.value.direccionApertura,"onUpdate:modelValue":o[49]||(o[49]=t=>e.value.direccionApertura=t),label:"Apertura",row:""},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1}),a(Z,{cols:"12",md:"4"},{default:u(()=>[a(ua,{modelValue:e.value.pasoLibre,"onUpdate:modelValue":o[50]||(o[50]=t=>e.value.pasoLibre=t),inset:"",color:"primary",label:e.value.pasoLibre?"Paso libre (sin perfil inferior)":"Paso cerrado"},null,8,["modelValue","label"])]),_:1})]),_:1})):ue("",!0),e.value.tipo===51?(b(),E(Se,{key:8,dense:""},{default:u(()=>[a(Z,{cols:"12",md:"4"},{default:u(()=>[a($e,{modelValue:e.value.hojaActiva,"onUpdate:modelValue":o[51]||(o[51]=t=>e.value.hojaActiva=t),label:"Hoja activa",row:""},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(Z,{cols:"12",md:"4"},{default:u(()=>[a($e,{modelValue:e.value.direccionApertura,"onUpdate:modelValue":o[52]||(o[52]=t=>e.value.direccionApertura=t),label:"Apertura",row:""},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1}),a(Z,{cols:"12",md:"4"},{default:u(()=>[a(ua,{modelValue:e.value.pasoLibre,"onUpdate:modelValue":o[53]||(o[53]=t=>e.value.pasoLibre=t),inset:"",color:"primary",label:e.value.pasoLibre?"Paso libre (sin perfil inferior)":"Paso cerrado"},null,8,["modelValue","label"])]),_:1})]),_:1})):ue("",!0),e.value.tipo===53?(b(),E(Se,{key:9,dense:""},{default:u(()=>[a(Z,{cols:"12",md:"6"},{default:u(()=>[a($e,{modelValue:e.value.ladoApertura,"onUpdate:modelValue":o[54]||(o[54]=t=>e.value.ladoApertura=t),label:"Lado de apertura (movimiento)",row:""},{default:u(()=>[a(re,{label:"Hacia la derecha",value:"derecha"}),a(re,{label:"Hacia la izquierda",value:"izquierda"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):ue("",!0),e.value.tipo===54?(b(),E(Je,{key:10,class:"pa-3",variant:"tonal"},{default:u(()=>[a(Se,{dense:""},{default:u(()=>[a(Z,{cols:"12",sm:"3"},{default:u(()=>[a(Pe,{modelValue:e.value.orientacionComp,"onUpdate:modelValue":o[55]||(o[55]=t=>e.value.orientacionComp=t),items:[{title:"Horizontal",value:"horizontal"},{title:"Vertical",value:"vertical"}],label:"OrientaciÃ³n",density:"comfortable"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"12",sm:"3"},{default:u(()=>[a(Ne,{modelValue:e.value.cantidadComp,"onUpdate:modelValue":o[56]||(o[56]=t=>e.value.cantidadComp=t),modelModifiers:{number:!0},type:"number",min:"2",max:"8",label:"Cantidad de ventanas",density:"comfortable",onBlur:o[57]||(o[57]=t=>m())},null,8,["modelValue"])]),_:1})]),_:1}),a(ma,{class:"my-2"}),a(Se,{dense:""},{default:u(()=>[(b(!0),J(ce,null,Ue(e.value.itemsComp,(t,z)=>(b(),E(Z,{key:"comp-item-"+z,cols:"12",md:"6"},{default:u(()=>[a(Je,{class:"pa-3"},{default:u(()=>[ne("div",mt,[ne("strong",null,"SecciÃ³n "+Ce(z+1),1),a(Ne,{modelValue:t.sizePercent,"onUpdate:modelValue":U=>t.sizePercent=U,modelModifiers:{number:!0},type:"number",min:"0",max:"100",suffix:"%",label:"TamaÃ±o",density:"compact",style:{"max-width":"140px"}},null,8,["modelValue","onUpdate:modelValue"])]),a(Pe,{modelValue:t.tipo,"onUpdate:modelValue":U=>t.tipo=U,items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","items"]),L(t.tipo)?(b(),J(ce,{key:0},[a($e,{modelValue:t.ladoApertura,"onUpdate:modelValue":U=>t.ladoApertura=U,row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),a($e,{modelValue:t.direccionApertura,"onUpdate:modelValue":U=>t.direccionApertura=U,row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):ue("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(ra,{type:"info",variant:"text",density:"compact",class:"mt-2"},{default:u(()=>o[85]||(o[85]=[ee(" Si no defines porcentajes, las secciones se reparten por igual. ")])),_:1})]),_:1})):ue("",!0),a(Se,null,{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>{var t,z,U,O,ie,te,me,_e,He,Oe,Xe,Be,ea,oa,ca,da;return[e.value.tipo===1?(b(),E(Yl,{key:0,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((t=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:t.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===2?(b(),E(Rl,{key:1,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((z=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:z.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===45?(b(),E(Tl,{key:2,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((U=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:U.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===56?(b(),E(Jl,{key:3,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((O=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:O.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===55?(b(),E(eo,{key:4,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((ie=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:ie.nombre)||"blanco",hoja1AlFrente:e.value.hoja1AlFrente,"hojas-moviles":e.value.hojas_moviles||2,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada||1},null,8,["ancho","alto","color-marco","hoja1AlFrente","hojas-moviles","hoja-movil-seleccionada"])):e.value.tipo===57?(b(),E(ql,{key:`compuesta-${e.value.ancho}-${e.value.alto}-${e.value.filas}-${e.value.columnas}`,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((te=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:te.nombre)||"blanco",filas:e.value.filas,columnas:e.value.columnas,"altos-filas":e.value.altosFilas,"anchos-columnas":e.value.anchosColumnas,secciones:e.value.secciones},null,8,["ancho","alto","color-marco","filas","columnas","altos-filas","anchos-columnas","secciones"])):e.value.tipo===3?(b(),E(Il,{key:6,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((me=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:me.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===52?(b(),E(fo,{key:7,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((_e=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:_e.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===46?(b(),E(Wl,{key:8,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((He=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:He.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===53?(b(),E(go,{key:9,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((Oe=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:Oe.nombre)||"blanco","lado-apertura":e.value.ladoApertura},null,8,["ancho","alto","color-marco","lado-apertura"])):e.value.tipo===47?(b(),E(Fl,{key:10,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((Xe=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:Xe.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"ancho-izquierda":e.value.ancho_izquierda,"ancho-centro":e.value.ancho_centro,"ancho-derecha":e.value.ancho_derecha,"tipo-ventana-izquierda":e.value.tipoVentanaIzquierda,"tipo-ventana-centro":e.value.tipoVentanaCentro,"tipo-ventana-derecha":e.value.tipoVentanaDerecha},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","ancho-izquierda","ancho-centro","ancho-derecha","tipo-ventana-izquierda","tipo-ventana-centro","tipo-ventana-derecha"])):e.value.tipo===49?(b(),E(Pl,{key:11,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((Be=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:Be.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"lado-inicial":e.value.ladoApertura||"izquierda",direccionApertura:e.value.direccionApertura,"onUpdate:direccionApertura":o[58]||(o[58]=fe=>e.value.direccionApertura=fe)},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-inicial","direccionApertura"])):e.value.tipo===50?(b(),E(Dl,{key:12,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((ea=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:ea.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"lado-apertura":e.value.ladoApertura,"direccion-apertura":e.value.direccionApertura,"paso-libre":e.value.pasoLibre},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-apertura","direccion-apertura","paso-libre"])):e.value.tipo===51?(b(),E(so,{key:13,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((oa=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:oa.nombre)||"blanco","hoja-activa":e.value.hojaActiva,"direccion-apertura":e.value.direccionApertura,"paso-libre":e.value.pasoLibre},null,8,["ancho","alto","color-marco","hoja-activa","direccion-apertura","paso-libre"])):e.value.tipo===54?(b(),E(Vo,{key:`compuesta-${B.value}`,ancho:e.value.ancho||2e3,alto:e.value.alto||2e3,"color-marco":((ca=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:ca.nombre)||"blanco",orientacion:e.value.orientacionComp||"horizontal",items:e.value.itemsComp||[],forceReRender:B.value,onAgregar:M,onAgregarBorde:C,onEditarVentana:ze,onEliminarVentana:x},null,8,["ancho","alto","color-marco","orientacion","items","forceReRender"])):e.value.tipo===58?(b(),E(vt,{key:15,"tipos-ventana":N.value,"perfiles-marco":G.value,"perfiles-divisores":k.value,"color-marco":(((da=j.colores.find(fe=>fe.id===e.value.color))==null?void 0:da.nombre)||"blanco").toLowerCase(),onActualizar:o[59]||(o[59]=fe=>{console.log("ðŸ“¦ ConfiguraciÃ³n armador actualizada:",fe),e.value.configuracionArmador=fe,c()}),onCancelar:()=>{}},null,8,["tipos-ventana","perfiles-marco","perfiles-divisores","color-marco"])):ue("",!0)]}),_:1})]),_:1}),a(ma,{class:"my-4"}),a(Se,null,{default:u(()=>[a(Z,{cols:"12",md:"4"},{default:u(()=>[e.value.costo_total_unitario?(b(),E(ra,{key:0,type:"info",variant:"outlined"},{default:u(()=>[o[86]||(o[86]=ne("strong",null,"Costo unitario:",-1)),ee(" $"+Ce(e.value.costo_total_unitario),1)]),_:1})):ue("",!0)]),_:1}),a(Z,{cols:"12",md:"4"},{default:u(()=>[e.value.costo_total?(b(),E(ra,{key:0,type:"info",variant:"tonal"},{default:u(()=>[o[87]||(o[87]=ne("strong",null,"Costo total:",-1)),ee(" $"+Ce(e.value.costo_total),1)]),_:1})):ue("",!0)]),_:1}),a(Z,{cols:"12",md:"4"},{default:u(()=>[e.value.precio?(b(),E(ra,{key:0,type:"success",variant:"tonal"},{default:u(()=>[o[88]||(o[88]=ne("strong",null,"Precio de venta:",-1)),ee(" $"+Ce(e.value.precio),1)]),_:1})):ue("",!0)]),_:1})]),_:1}),e.value.materiales&&e.value.materiales.length?(b(),E(Se,{key:11},{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>[a(Ol,{headers:[{title:"Material",key:"nombre"},{title:"Proveedor",key:"proveedor"},{title:"Cantidad",key:"cantidad"},{title:"Unidad",key:"unidad"},{title:"Costo unitario",key:"costo_unitario"},{title:"Costo total",key:"costo_total"}],items:e.value.materiales,class:"mt-2",dense:"","hide-default-footer":""},{"item.costo_unitario":u(({item:t})=>[ee(" $"+Ce(t.costo_unitario),1)]),"item.costo_total":u(({item:t})=>[ee(" $"+Ce(t.costo_total),1)]),_:1},8,["items"])]),_:1})]),_:1})):ue("",!0),e.value.tipo===54?(b(),E(Se,{key:12},{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>[a(ra,{color:"success",variant:"tonal"},{default:u(()=>[o[89]||(o[89]=ne("strong",null,"Costo total compuesta:",-1)),ee(" $"+Ce(Q.value.toLocaleString())+" ",1),o[90]||(o[90]=ne("div",{class:"text-caption"}," Suma de todas las ventanas individuales con sus medidas especÃ­ficas ",-1))]),_:1})]),_:1})]),_:1})):ue("",!0),a(sa,{class:"justify-end"},{default:u(()=>[a(Ie,{color:"secondary",variant:"text",onClick:v},{default:u(()=>o[91]||(o[91]=[ee(" Cancelar ")])),_:1}),a(Ie,{color:"primary",type:"submit"},{default:u(()=>[ee(Ce(r.value?"Guardar cambios":"Agregar ventana"),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),a(va,{modelValue:_.value,"onUpdate:modelValue":o[62]||(o[62]=t=>_.value=t),"max-width":"400"},{default:u(()=>[a(Je,null,{default:u(()=>[a(Qe,null,{default:u(()=>o[92]||(o[92]=[ee("Agregar ventana")])),_:1}),a(ma),a(Ll,null,{default:u(()=>[(b(!0),J(ce,null,Ue(N.value,t=>(b(),E(ya,{key:t.id,onClick:z=>$(t.id)},{default:u(()=>[a(Va,null,{default:u(()=>[ee(Ce(t.nombre),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),a(ya,{onClick:I},{default:u(()=>[a(Va,null,{default:u(()=>o[93]||(o[93]=[ee("Compuesta (anidada)")])),_:1})]),_:1})]),_:1}),a(sa,null,{default:u(()=>[a(fa),a(Ie,{text:"",onClick:o[61]||(o[61]=t=>_.value=!1)},{default:u(()=>o[94]||(o[94]=[ee("Cancelar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(va,{modelValue:H.value,"onUpdate:modelValue":o[70]||(o[70]=t=>H.value=t),"max-width":"600px"},{default:u(()=>[a(Je,null,{default:u(()=>[a(Qe,null,{default:u(()=>o[95]||(o[95]=[ne("span",{class:"text-h5"},"Editar Ventana Individual",-1)])),_:1}),a(na,null,{default:u(()=>[a(Xl,null,{default:u(()=>[a(Se,null,{default:u(()=>[a(Z,{cols:"12",sm:"6"},{default:u(()=>[a(Ne,{modelValue:S.value.ancho,"onUpdate:modelValue":o[63]||(o[63]=t=>S.value.ancho=t),modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"12",sm:"6"},{default:u(()=>[a(Ne,{modelValue:S.value.alto,"onUpdate:modelValue":o[64]||(o[64]=t=>S.value.alto=t),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(Se,null,{default:u(()=>[a(Z,{cols:"12",sm:"6"},{default:u(()=>[a(Ne,{modelValue:S.value.sizePercent,"onUpdate:modelValue":o[65]||(o[65]=t=>S.value.sizePercent=t),modelModifiers:{number:!0},label:"Porcentaje del espacio (%)",type:"number",min:"10",max:"80",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(Z,{cols:"12",sm:"6"},{default:u(()=>[a(Pe,{modelValue:S.value.tipo,"onUpdate:modelValue":o[66]||(o[66]=t=>S.value.tipo=t),items:N.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",variant:"outlined"},null,8,["modelValue","items"])]),_:1})]),_:1}),L(S.value.tipo)?(b(),E(Se,{key:0},{default:u(()=>[a(Z,{cols:"12",sm:"6"},{default:u(()=>[a($e,{modelValue:S.value.ladoApertura,"onUpdate:modelValue":o[67]||(o[67]=t=>S.value.ladoApertura=t),row:"",density:"compact",label:"Lado apertura"},{default:u(()=>[a(re,{label:"Izquierda",value:"izquierda"}),a(re,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(Z,{cols:"12",sm:"6"},{default:u(()=>[a($e,{modelValue:S.value.direccionApertura,"onUpdate:modelValue":o[68]||(o[68]=t=>S.value.direccionApertura=t),row:"",density:"compact",label:"DirecciÃ³n apertura"},{default:u(()=>[a(re,{label:"Interior",value:"interior"}),a(re,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):ue("",!0),a(Se,null,{default:u(()=>[a(Z,{cols:"12"},{default:u(()=>[a(ra,{color:"info",variant:"tonal"},{default:u(()=>[ne("div",ft,"Costo estimado: $"+Ce(De.value.toLocaleString()),1),ne("div",pt," ID Tipo: "+Ce(S.value.tipo)+" | Ãrea: "+Ce(ke.value.toFixed(2))+" mÂ² | Tipo: "+Ce(Le(S.value.tipo)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(sa,null,{default:u(()=>[a(fa),a(Ie,{color:"blue-darken-1",variant:"text",onClick:o[69]||(o[69]=t=>H.value=!1)},{default:u(()=>o[96]||(o[96]=[ee(" Cancelar ")])),_:1}),a(Ie,{color:"blue-darken-1",variant:"text",onClick:F},{default:u(()=>o[97]||(o[97]=[ee(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Et=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"}));export{Et as A,gt as _,Yl as a,Jl as b,eo as c,ql as d,fo as e,go as f,Pl as g,Dl as h,so as i};
