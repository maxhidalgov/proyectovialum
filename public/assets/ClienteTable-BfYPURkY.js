import{au as s,f as d,e as i,o as u,b as n,t as l,a3 as m}from"./index-BfHK3Q1m.js";import{V as p,b as f}from"./VCard-CeWeuS--.js";import{V as y}from"./VDataTable-BApvmJuw.js";async function T(){try{return(await s.get("/api/bsale-clientes")).data}catch(a){return console.error("Error al obtener clientes de Bsale:",a),[]}}async function _(a){try{return(await s.post("/api/clientes",a)).data}catch(r){throw console.error("Error al guardar cliente:",r),r}}async function V(){try{return(await s.post("/api/clientes/importar-todos")).data}catch(a){throw console.error("❌ Error al importar todos los clientes:",a),a}}const C={__name:"ClienteTable",props:{clientes:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(a){const r=async t=>{const e={first_name:t.firstName,last_name:t.lastName,email:t.email,identification:t.identification,phone:t.phone,address:t.address,tipo_cliente:t.tipo_cliente??"",razon_social:t.razon_social??t.company??"",giro:t.giro??t.activity??"",ciudad:t.ciudad??t.city??"",comuna:t.comuna??t.municipality??""};try{const o=await _(e);alert(`✅ Cliente guardado: ${o.cliente.first_name} ${o.cliente.last_name}`)}catch{alert("❌ Error al guardar cliente")}},c=[{title:"Empresa",value:"razon_social"},{title:"Contacto",value:"firstName"},{title:"Email",value:"email"},{title:"RUT",value:"identification"},{title:"Direccion",value:"address"},{title:"Acciones",value:"acciones",sortable:!1}];return(t,e)=>(u(),d(p,null,{default:i(()=>[n(f,null,{default:i(()=>e[0]||(e[0]=[l("Clientes desde Bsale")])),_:1}),n(y,{headers:c,items:a.clientes,loading:a.loading,class:"elevation-1","loading-text":"Cargando clientes...","no-data-text":"No hay clientes"},{"item.acciones":i(({item:o})=>[n(m,{size:"x-small",color:"primary",onClick:g=>r(o)},{default:i(()=>e[1]||(e[1]=[l(" Importar ")])),_:2},1032,["onClick"])]),_:1},8,["items","loading"])]),_:1}))}},w=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{w as C,C as _,T as f,V as i};
