import{d as so}from"./debounce-zRTcBVAC.js";import{r as p,X as oo,av as no,E as To,au as N,w as eo,c as x,b as l,e as i,F as ao,k as So,o as f,m as lo,t as c,d as P,f as C,i as co,v as I,Z as S,a3 as z,aw as zo}from"./index-BVpA1Ywp.js";/* empty css                                                                */import{_ as Do}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Shapes-DW6qcN1k.js";import{_ as jo,a as Oo,b as ko,c as Ro}from"./VistaBayWindow-CHF2LBBd.js";import{_ as Uo,a as Lo,b as wo,c as Mo,d as xo,e as qo,f as Bo}from"./AgregarVentanaModal2-CO8Ch0rF.js";import{_ as Fo}from"./VistaVentanaCorredera-CwmK8hIh.js";import{V as Go}from"./VContainer-BRpYNVHh.js";import{V as Ko}from"./VDialog-wDD9wl6W.js";import{V as q,b as G,d as K,c as Qo}from"./VCard-C1RMa97J.js";import{V as D}from"./VDivider-DDPKeGJQ.js";import{V as j,a as g}from"./VRow-BZumZuoX.js";import{V as O}from"./VTextField-D456lAgx.js";import{V as Yo,a as Ho,b as Xo,d as Zo}from"./VList-D6lOss7d.js";import{V as Jo}from"./VTextarea-CXfRP-0t.js";import{V as Q}from"./VSelect-B1lTgiKR.js";import{V as Wo}from"./VDataTable-5Qc8kTby.js";import{V as uo}from"./VCardText-vvruW0LQ.js";import{V as oe}from"./VAlert-U45pBzdr.js";import{V as ee}from"./VForm-CGghkbox.js";import{V as ae}from"./VSpacer-D4z7Uk_7.js";import"./VSwitch-C0dzuavd.js";import"./VInput-BlO8iqzh.js";import"./transition-D46Ro-98.js";import"./VSelectionControl-DZMqUHzU.js";import"./VRadioGroup-DmKb6bTH.js";/* empty css              */import"./VOverlay-DUx1217U.js";import"./forwardRefs-DWGaNmQL.js";import"./VAvatar-5gBSmyPY.js";import"./VImg-CJ-qG-Yc.js";import"./VMenu-CCdsEvyz.js";import"./VCheckboxBtn-BN_jGbjA.js";import"./VChip--cc27nVh.js";const le={style:{position:"relative"}},re={key:0,class:"mt-6"},ie=.45,te={__name:"index",setup(se){const y=p([]),k=p([]),mo=So(),ro=oo(()=>{const r={};for(const e of k.value)r[Number(e.id)]=e.nombre;return r}),n=no({cliente_id:null,observaciones:"",material:"",color:"",tipoVidrio:"",productoVidrioProveedor:"",ventanas:[]});p({});const B=p(!1),E=no({cliente:null}),Y=p([]),_=p([]),H=p([]),R=p([]),X=p([]),u=p([]),U=p(!1),Z=p(null),$=p(""),A=p(!1);p("");const L=p(!1);p(0);const v=p({razon_social:"",identification:"",email:"",phone:"",address:"",ciudad:"",comuna:"",giro:""});oo(()=>R.value.flatMap(r=>r.colores_por_proveedor.map(e=>{var o;return{id:`${r.id}-${e.proveedor_id}`,producto_id:r.id,proveedor_id:e.proveedor_id,nombre:`${r.nombre} (${((o=e.proveedor)==null?void 0:o.nombre)||"Proveedor desconocido"})`}})));const po=oo(()=>{const r=n.tipoVidrio;return R.value.filter(e=>e.tipo_producto_id===r).flatMap(e=>e.colores_por_proveedor.map(o=>{var a;return{id:o.id,producto_id:e.id,proveedor_id:o.proveedor_id,nombre:`${e.nombre} (${((a=o.proveedor)==null?void 0:a.nombre)||"Proveedor desconocido"})`}}))});To(async()=>{console.log("ğŸ”„ Iniciando carga de datos...");try{const[r,e,o,a,s]=await Promise.all([N.get("/api/tipos_material"),N.get("/api/colores"),N.get("/api/tipos_producto"),N.get("/api/productos"),N.get("/api/tipos_ventana")]);console.log("âœ… Datos bÃ¡sicos cargados"),Y.value=r.data,_.value=e.data,H.value=o.data.filter(d=>[1,2].includes(d.id)),R.value=a.data.filter(d=>[1,2].includes(d.tipo_producto_id)),k.value=s.data,console.log("TIPOS VENTANA CARGADOS:",k.value),console.log("ğŸ”„ Cargando primeros clientes..."),Po(),document.addEventListener("click",d=>{const m=d.target;!m.closest(".v-text-field")&&!m.closest(".v-card")&&(A.value=!1)})}catch(r){console.error("âŒ Error cargando datos:",r),alert("Error cargando datos: "+r.message)}});const io=r=>(r=parseInt(r),R.value.flatMap(e=>e.colores_por_proveedor.map(o=>({id:o.id,producto_id:e.id,proveedor_id:o.proveedor_id}))).find(e=>e.id===r)),w=p(!1),J=p(null),fo=[{title:"Tipo",key:"tipo"},{title:"Ancho",key:"ancho"},{title:"Alto",key:"alto"},{title:"Cantidad",key:"cantidad"},{title:"Precio",key:"precio",align:"end"},{title:"Acciones",key:"acciones",sortable:!1}],Vo=()=>{J.value=null,w.value=!0},go=r=>{J.value={...n.ventanas[r],index:r},w.value=!0},vo=r=>{console.log("VENTANA RECIBIDA:",r),r.index!==void 0?n.ventanas[r.index]={...r}:n.ventanas.push({...r}),w.value=!1},_o=r=>{n.ventanas.splice(r,1)},ho=so(async(r,e)=>{if(!r.productoVidrio||!r.proveedorVidrio){console.warn("âš ï¸ Faltan datos en el payload para calcular materiales:",r);return}try{const o=await N.post("/api/cotizador/calcular-materiales",r);e.costo_total_unitario=o.data.costo_unitario;const a=e.cantidad>0?e.cantidad:1;e.costo_total=o.data.costo_unitario*e.cantidad,e.precio=Math.ceil(e.costo_total/(1-ie)),e.materiales=o.data.materiales}catch(o){console.error("âŒ Error al calcular materiales",o),e.costo_total=0,e.materiales=[]}},1e3);eo(()=>n.ventanas,r=>{r.forEach(e=>{eo(()=>[e.tipo,e.ancho,e.alto,e.cantidad,e.material,e.color,e.tipoVidrio,e.productoVidrioProveedor,e.hojas_totales,e.hojas_moviles],()=>{const o=[];e.tipo||o.push("tipo_ventana_id faltante"),e.ancho||o.push("ancho faltante"),e.alto||o.push("alto faltante"),(!e.cantidad||e.cantidad<=0)&&o.push("cantidad invÃ¡lida"),e.productoVidrioProveedor||o.push("productoVidrioProveedor faltante");const a=io(e.productoVidrioProveedor);if(a||o.push(`relaciÃ³n producto-proveedor no encontrada (ID: ${e.productoVidrioProveedor})`),o.length>0){console.warn(`âŒ No se puede recalcular la ventana (tipo ${e.tipo}):`,o.join(", "));return}const s={...e,productoVidrio:a.producto_id,proveedorVidrio:a.proveedor_id,hojas_moviles:e.tipo===3||e.tipo===46?e.hojas_moviles:void 0};console.log("âœ… Recalculando ventana:",s),ho(s,e)},{deep:!0,immediate:!1})})},{deep:!0}),eo(()=>E.cliente,r=>{console.log("âœ… Cliente seleccionado:",r),r&&(console.log("âœ… Nombre:",r.razon_social),console.log("âœ… RUT:",r.identification))});const bo=()=>{L.value=!0},Co=async()=>{var e,o;if(E.cliente)return;const r=(e=$.value)==null?void 0:e.trim();if(console.log("ğŸ” BÃšSQUEDA LOCAL:",r),!r||r.length<2){u.value=[],A.value=!1;return}U.value=!0,A.value=!0;try{const a=await N.get(`/api/clientes/buscar?q=${encodeURIComponent(r)}`);console.log("âœ… RESPUESTA LOCAL:",a.data),((o=a.data)==null?void 0:o.length)>0?(u.value=a.data.map(s=>({id:s.id,razon_social:s.razon_social||`${s.first_name||""} ${s.last_name||""}`.trim()||"Sin nombre",identification:s.identification||"",email:s.email||"",phone:s.phone||""})),console.log("âœ… CLIENTES PROCESADOS:",u.value),A.value=!0):(u.value=[],A.value=!1,console.log("âŒ NO HAY CLIENTES"))}catch(a){console.error("âŒ ERROR:",a),u.value=[],A.value=!1}finally{U.value=!1}},yo=r=>{console.log("âœ… CLIENTE SELECCIONADO:",r),E.cliente=r,$.value=r.razon_social,A.value=!1,u.value=[]},Eo=()=>{u.value.length>0&&!E.cliente&&(A.value=!0)},Ao=()=>{$.value="",u.value=[],A.value=!1,E.cliente=null},No=async()=>{var r,e;try{console.log("ğŸ’¾ Guardando cliente local:",v.value);const o=await N.post("/api/clientes",v.value);console.log("âœ… Respuesta completa:",o.data);const a=o.data.cliente||o.data;console.log("âœ… Cliente creado:",a),u.value.push(a),E.cliente=a,n.cliente_id=a.id,$.value=a.razon_social,A.value=!1,u.value=[],L.value=!1,v.value={razon_social:"",identification:"",email:"",phone:"",address:"",ciudad:""},console.log("âœ… Cliente seleccionado:",E.cliente),console.log("âœ… Cliente ID asignado:",n.cliente_id),console.log("âœ… TÃ©rmino bÃºsqueda:",$.value),alert("âœ… Cliente creado y seleccionado exitosamente")}catch(o){console.error("âŒ Error al crear cliente:",o),alert("âŒ Error al crear cliente: "+(((e=(r=o.response)==null?void 0:r.data)==null?void 0:e.message)||o.message))}};so(async r=>{var e;if(r||(r=$.value),console.log("ğŸ” Buscando clientes con query:",r),!r||r.length<2){u.value=X.value.slice(0,20),console.log("ğŸ“‹ Mostrando clientes iniciales:",u.value.length);return}U.value=!0;try{console.log("ğŸŒ Buscando en API de Bsale...");const o=await N.get(`/api/bsale-clientes/buscar?q=${encodeURIComponent(r)}`);console.log("âœ… Respuesta de API:",o.data),o.data&&o.data.items&&o.data.items.length>0?(u.value=o.data.items.map(a=>{console.log("ğŸ” Procesando cliente:",a);let s="";a.company&&a.company.trim()?s=a.company.trim():a.firstName||a.lastName?s=`${a.firstName||""} ${a.lastName||""}`.trim():a.razon_social?s=a.razon_social:a.displayName?s=a.displayName:s="Cliente sin nombre",(!s||s.trim()==="")&&(s=`Cliente ID: ${a.id}`);const d={id:a.id,razon_social:s,identification:a.identification||"",email:a.email||"",phone:a.phone||"",address:a.address||"",city:a.city||"",municipality:a.municipality||"",first_name:a.firstName||"",last_name:a.lastName||"",company:a.company||"",tipo_cliente:a.companyOrPerson==1?"empresa":"persona"};return console.log("âœ… Cliente procesado:",d),d}),console.log("âœ… Total clientes procesados:",u.value.length),console.log("âœ… Lista final:",u.value),u.value.length>0&&(console.log("ğŸ” Primer cliente para autocomplete:",{id:u.value[0].id,razon_social:u.value[0].razon_social,hasId:!!u.value[0].id,hasTitle:!!u.value[0].razon_social}),setTimeout(()=>{Z.value&&Z.value.menu&&(console.log("ğŸ¯ Forzando apertura del menÃº..."),Z.value.menu=!0)},100))):(console.log("âŒ No se encontraron clientes en la respuesta"),u.value=[])}catch(o){console.error("âŒ Error en bÃºsqueda:",o),console.error("âŒ Detalles del error:",(e=o.response)==null?void 0:e.data),u.value=[]}finally{U.value=!1}},300);const Po=async()=>{var r;try{const e=await N.get("/api/bsale-clientes?limit=50&offset=0");console.log("âœ… Primeros clientes cargados:",e.data);const o=((r=e.data.items)==null?void 0:r.map(a=>({id:a.id,razon_social:a.razon_social||a.displayName||"Sin nombre",identification:a.identification,email:a.email,phone:a.phone,address:a.address,city:a.city,municipality:a.municipality,first_name:a.firstName,last_name:a.lastName,company:a.company,tipo_cliente:a.companyOrPerson==1?"empresa":"persona"})))||[];X.value=o,u.value=o.slice(0,20),console.log("âœ… Clientes iniciales listos:",X.value.length)}catch(e){console.error("âŒ Error cargando clientes iniciales:",e),u.value=[]}},$o=async()=>{var e,o;await new Promise(a=>setTimeout(a,2e3));const r=[];console.log("ğŸ” INICIANDO CAPTURA DE IMÃGENES"),console.log("ğŸ” VENTANA REFS:",y.value),console.log("ğŸ” TOTAL VENTANAS:",n.ventanas.length);for(let a=0;a<n.ventanas.length;a++){const s=n.ventanas[a];console.log(`ğŸ” VENTANA ${a} - TIPO:`,s.tipo);try{const d=y.value[a];if(console.log(`ğŸ” COMPONENTE ${a}:`,d),console.log(`ğŸ” TIPO DE COMPONENTE ${a}:`,typeof d),console.log(`ğŸ” $el DE COMPONENTE ${a}:`,d==null?void 0:d.$el),console.log(`ğŸ” TIPO DE $el ${a}:`,typeof(d==null?void 0:d.$el)),d!=null&&d.exportarImagen&&typeof d.exportarImagen=="function"){console.log(`ğŸ”§ Usando exportarImagen() del componente ${a}`);try{const m=await d.exportarImagen();if(m&&m!==null){console.log(`âœ… IMAGEN ${a} CAPTURADA VIA exportarImagen:`,m.substring(0,50)),r.push(m);continue}else console.warn(`âš ï¸ exportarImagen() devolviÃ³ null para componente ${a}`)}catch(m){console.error(`âŒ Error en exportarImagen del componente ${a}:`,m)}}if(d!=null&&d.$el&&d.$el.nodeType===Node.ELEMENT_NODE&&typeof d.$el.querySelectorAll=="function"){console.log(`ğŸ” ELEMENTO DOM ${a} VÃLIDO:`,d.$el.tagName);const m=d.$el.querySelectorAll("canvas");console.log(`ğŸ” CANVAS ENCONTRADOS EN COMPONENTE ${a}:`,m.length);let h=null;for(let V=0;V<m.length;V++){const b=m[V];console.log(`ğŸ” CANVAS ${a}.${V} - DIMENSIONES:`,b.width,"x",b.height);try{const M=b.getContext("2d").getImageData(0,0,b.width,b.height).data.some(F=>F!==0);if(console.log(`ğŸ” CANVAS ${a}.${V} - TIENE CONTENIDO:`,M),M){h=b;break}}catch(T){console.error(`âŒ Error verificando canvas ${a}.${V}:`,T)}}if(h){try{const b=(e=h.getStage)==null?void 0:e.call(h);b&&(console.log(`ğŸ”„ Forzando redibujado de Konva en ventana ${a}`),b.draw(),await new Promise(T=>setTimeout(T,500)))}catch{console.log(`â„¹ï¸ Ventana ${a} no es Konva`)}const V=h.toDataURL("image/png");console.log(`âœ… IMAGEN ${a} CAPTURADA VIA CANVAS:`,V.substring(0,50)),r.push(V)}else if(m.length>0){console.log("ğŸ”§ Usando primer canvas aunque estÃ© vacÃ­o...");try{const V=m[0].toDataURL("image/png");r.push(V)}catch(V){console.error("âŒ Error en toDataURL:",V),r.push(null)}}else console.warn(`âš ï¸ No se encontraron canvas en componente ${a}`),r.push(null)}else{console.warn(`âš ï¸ Componente ${a} no tiene $el vÃ¡lido o querySelectorAll`),console.log("ğŸ” Â¿$el existe?:",!!(d!=null&&d.$el)),console.log("ğŸ” Â¿Es Element?:",(d==null?void 0:d.$el)instanceof Element),console.log("ğŸ” Â¿Tiene querySelectorAll?:",typeof((o=d==null?void 0:d.$el)==null?void 0:o.querySelectorAll)),console.log("ğŸ”§ Ãšltimo recurso: buscando canvas globalmente...");const m=document.querySelectorAll("canvas");if(console.log("ğŸ” Canvas globales encontrados:",m.length),m.length>a)try{const h=m[a].toDataURL("image/png");console.log(`âœ… IMAGEN ${a} CAPTURADA VIA BÃšSQUEDA GLOBAL`),r.push(h)}catch(h){console.error("âŒ Error en canvas global:",h),r.push(null)}else r.push(null)}}catch(d){console.error(`âŒ ERROR GENERAL capturando imagen ${a}:`,d),r.push(null)}}return console.log("ğŸ–¼ï¸ RESULTADO FINAL:",r.map((a,s)=>`${s}: ${a?"OK":"NULL"}`)),r},Io=async()=>{var r;B.value=!0;try{const e=await $o();console.log("ğŸ–¼ï¸ IMÃGENES CAPTURADAS:",e),console.log("ğŸ–¼ï¸ NÃšMERO DE IMÃGENES:",e.length),console.log("ğŸ–¼ï¸ PRIMERA IMAGEN (primeros 100 chars):",(r=e[0])==null?void 0:r.substring(0,100));const o=E.cliente;if(!o||n.ventanas.length===0){alert("Debes seleccionar un cliente y agregar al menos una ventana");return}const a={cliente_id:o.id,vendedor_id:1,fecha:new Date().toISOString().split("T")[0],estado_cotizacion_id:n.estado_cotizacion_id??1,observaciones:n.observaciones,imagenes_ventanas:e,ventanas:n.ventanas.map(s=>{const d=io(s.productoVidrioProveedor);return{tipo_ventana_id:s.tipo,ancho:s.ancho,alto:s.alto,cantidad:s.cantidad,color_id:s.color,producto_vidrio_proveedor_id:s.productoVidrioProveedor,producto_id:d==null?void 0:d.producto_id,proveedor_id:d==null?void 0:d.proveedor_id,costo:s.costo_total||s.costo||0,costo_unitario:s.costo_unitario||0,precio:s.precio||0,precio_unitario:s.precio_unitario||0,tipo_ventana_izquierda:s.tipoVentanaIzquierda??null,tipo_ventana_centro:s.tipoVentanaCentro??null,tipo_ventana_derecha:s.tipoVentanaDerecha??null,ancho_izquierda:s.ancho_izquierda??null,ancho_centro:s.ancho_centro??null,ancho_derecha:s.ancho_derecha??null}})};console.log("ğŸ“¤ PAYLOAD A ENVIAR:",a),console.log("ğŸ“¤ VENTANAS ESPECÃFICAS:",a.ventanas),await N.post("api/cotizaciones",a),alert("CotizaciÃ³n guardada correctamente"),mo.push({name:"cotizaciones"})}catch(e){console.error("Error al guardar cotizaciÃ³n:",e),alert("Error al guardar la cotizaciÃ³n")}finally{B.value=!1}};return(r,e)=>(f(),x(ao,null,[l(Go,{fluid:""},{default:i(()=>[l(q,{class:"pa-6",elevation:"2"},{default:i(()=>[l(G,{class:"text-h5 mb-4"},{default:i(()=>e[15]||(e[15]=[c("Nueva CotizaciÃ³n")])),_:1}),l(K,{class:"text-h5"},{default:i(()=>e[16]||(e[16]=[c("Datos generales")])),_:1}),l(D,{class:"mb-4"}),l(j,{dense:""},{default:i(()=>[l(g,{cols:"6",md:"4"},{default:i(()=>[l(j,{"no-gutters":"",align:"center"},{default:i(()=>[l(g,null,{default:i(()=>[P("div",le,[l(O,{modelValue:$.value,"onUpdate:modelValue":e[0]||(e[0]=o=>$.value=o),onInput:Co,onFocus:Eo,label:"Cliente",placeholder:"Buscar por RUT o nombre...",outlined:"",clearable:"",loading:U.value,color:"primary",onClear:Ao,"append-inner-icon":E.cliente?"mdi-check-circle":"mdi-magnify",hint:E.cliente?`Seleccionado: ${E.cliente.razon_social}`:"","persistent-hint":"","readonly-when-selected":""},null,8,["modelValue","loading","append-inner-icon","hint"]),A.value&&u.value.length>0&&!E.cliente?(f(),C(q,{key:0,style:{position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto"},class:"mt-1",elevation:"8"},{default:i(()=>[l(Yo,{density:"compact"},{default:i(()=>[(f(!0),x(ao,null,co(u.value,o=>(f(),C(Ho,{key:o.id,onClick:a=>yo(o),class:"cursor-pointer",hover:""},{prepend:i(()=>[l(S,null,{default:i(()=>e[17]||(e[17]=[c("mdi-account")])),_:1})]),default:i(()=>[l(Xo,null,{default:i(()=>[c(I(o.razon_social),1)]),_:2},1024),l(Zo,null,{default:i(()=>[c(I(o.identification),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):lo("",!0)])]),_:1}),l(g,{cols:"auto"},{default:i(()=>[l(z,{icon:"",color:"primary",onClick:bo,class:"ml-2"},{default:i(()=>[l(S,null,{default:i(()=>e[18]||(e[18]=[c("mdi-plus")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(j,{dense:""},{default:i(()=>[l(g,{cols:"6"},{default:i(()=>[l(Jo,{modelValue:n.observaciones,"onUpdate:modelValue":e[1]||(e[1]=o=>n.observaciones=o),label:"Observaciones",outlined:"",color:"primary","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(j,{dense:"",class:"mb-4"},{default:i(()=>[l(g,{cols:"12",md:"6"},{default:i(()=>[l(Q,{modelValue:n.material,"onUpdate:modelValue":e[2]||(e[2]=o=>n.material=o),items:Y.value,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),l(g,{cols:"12",md:"6"},{default:i(()=>[l(Q,{modelValue:n.color,"onUpdate:modelValue":e[3]||(e[3]=o=>n.color=o),items:_.value,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(K,{class:"text-h5"},{default:i(()=>e[19]||(e[19]=[c("Vidrio por defecto")])),_:1}),l(D,{class:"mb-4"}),l(j,{dense:"",class:"mb-4"},{default:i(()=>[l(g,{cols:"12",sm:"6"},{default:i(()=>[l(Q,{modelValue:n.tipoVidrio,"onUpdate:modelValue":e[4]||(e[4]=o=>n.tipoVidrio=o),items:H.value,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),l(g,{cols:"12",sm:"6"},{default:i(()=>[l(Q,{modelValue:n.productoVidrioProveedor,"onUpdate:modelValue":e[5]||(e[5]=o=>n.productoVidrioProveedor=o),items:po.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(K,{class:"text-h5"},{default:i(()=>e[20]||(e[20]=[c("Ventanas")])),_:1}),l(D,{class:"mb-4"}),l(z,{color:"primary",onClick:Vo,disabled:!k.value.length},{default:i(()=>[l(S,{left:""},{default:i(()=>e[21]||(e[21]=[c("mdi-plus")])),_:1}),e[22]||(e[22]=c(" Agregar ventana "))]),_:1},8,["disabled"]),l(Wo,{headers:fo,items:n.ventanas,class:"mt-4","items-per-page":5},{"item.tipo":i(({item:o})=>[c(I(ro.value[Number(o.tipo)]||o.tipo),1)]),"item.acciones":i(({item:o,index:a})=>[l(z,{icon:"",onClick:s=>go(a)},{default:i(()=>[l(S,null,{default:i(()=>e[23]||(e[23]=[c("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),l(z,{icon:"",color:"error",onClick:s=>_o(a)},{default:i(()=>[l(S,null,{default:i(()=>e[24]||(e[24]=[c("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"]),l(Uo,{mostrar:w.value,"onUpdate:mostrar":e[6]||(e[6]=o=>w.value=o),materiales:Y.value,colores:_.value,tiposVidrio:H.value,productosVidrio:R.value,tiposVentana:k.value,ventana:J.value,"material-default":n.material,"color-default":n.color,"tipo-vidrio-default":n.tipoVidrio,"producto-vidrio-default":n.productoVidrioProveedor,onGuardar:vo},null,8,["mostrar","materiales","colores","tiposVidrio","productosVidrio","tiposVentana","ventana","material-default","color-default","tipo-vidrio-default","producto-vidrio-default"]),l(D,{class:"my-4"}),l(z,{color:"primary",loading:B.value,disabled:B.value,onClick:Io},{loader:i(()=>[l(zo,{indeterminate:"",color:"white",size:"20"})]),default:i(()=>[e[25]||(e[25]=c(" Guardar CotizaciÃ³n "))]),_:1},8,["loading","disabled"]),n.ventanas.length>0?(f(),x("div",re,[l(K,{class:"text-h5"},{default:i(()=>e[26]||(e[26]=[c("Vista previa de ventanas")])),_:1}),l(D,{class:"mb-4"}),(f(!0),x(ao,null,co(n.ventanas,(o,a)=>(f(),x("div",{key:a,class:"mb-4"},[l(q,{class:"pa-4",outlined:""},{default:i(()=>[l(G,null,{default:i(()=>[c(I(ro.value[o.tipo]||`Ventana ${a+1}`),1)]),_:2},1024),l(j,null,{default:i(()=>[l(g,{cols:"6"},{default:i(()=>{var s,d,m,h,V,b,T,W,M,F,to;return[o.tipo===2?(f(),C(jo,{key:0,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((s=_.value.find(t=>t.id===o.color))==null?void 0:s.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):o.tipo===45?(f(),C(Oo,{key:1,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((d=_.value.find(t=>t.id===o.color))==null?void 0:d.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):o.tipo===3?(f(),C(Fo,{key:2,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((m=_.value.find(t=>t.id===o.color))==null?void 0:m.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"hojas-totales":o.hojas_totales,"hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):o.tipo===52?(f(),C(Lo,{key:3,ancho:o.ancho,alto:o.alto,"color-marco":((h=_.value.find(t=>t.id===o.color))==null?void 0:h.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"hojas-totales":o.hojas_totales,"hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):o.tipo===47?(f(),C(ko,{key:4,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((V=_.value.find(t=>t.id===o.color))==null?void 0:V.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"ancho-izquierda":o.ancho_izquierda,"ancho-centro":o.ancho_centro,"ancho-derecha":o.ancho_derecha,"tipo-ventana-izquierda":o.tipoVentanaIzquierda,"tipo-ventana-centro":o.tipoVentanaCentro,"tipo-ventana-derecha":o.tipoVentanaDerecha},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","ancho-izquierda","ancho-centro","ancho-derecha","tipo-ventana-izquierda","tipo-ventana-centro","tipo-ventana-derecha"])):o.tipo===46?(f(),C(Ro,{key:5,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((b=_.value.find(t=>t.id===o.color))==null?void 0:b.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"hojas-totales":o.hojas_totales,"hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):o.tipo===53?(f(),C(wo,{key:6,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((T=_.value.find(t=>t.id===o.color))==null?void 0:T.nombre)||"blanco","lado-apertura":o.ladoApertura},null,8,["ancho","alto","color-marco","lado-apertura"])):o.tipo===49?(f(),C(Mo,{key:7,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((W=_.value.find(t=>t.id===o.color))==null?void 0:W.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"lado-inicial":o.ladoApertura||"izquierda"},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-inicial"])):o.tipo===50?(f(),C(xo,{key:8,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((M=_.value.find(t=>t.id===o.color))==null?void 0:M.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"lado-apertura":o.ladoApertura,"direccion-apertura":o.direccionApertura,"paso-libre":o.pasoLibre},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-apertura","direccion-apertura","paso-libre"])):o.tipo===51?(f(),C(qo,{key:9,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((F=_.value.find(t=>t.id===o.color))==null?void 0:F.nombre)||"blanco","hoja-activa":o.hojaActiva,"direccion-apertura":o.direccionApertura,"paso-libre":o.pasoLibre},null,8,["ancho","alto","color-marco","hoja-activa","direccion-apertura","paso-libre"])):o.tipo===58?(f(),C(Bo,{key:10,ref_for:!0,ref:t=>{t&&(y.value[a]=t)},ancho:o.ancho,alto:o.alto,"color-marco":((to=_.value.find(t=>t.id===o.color))==null?void 0:to.nombre)||"blanco",orientacion:o.orientacionComp,items:o.itemsComp},null,8,["ancho","alto","color-marco","orientacion","items"])):lo("",!0)]}),_:2},1024),l(g,{cols:"6"},{default:i(()=>[l(q,{variant:"outlined"},{default:i(()=>[l(G,null,{default:i(()=>e[27]||(e[27]=[c("Detalles")])),_:1}),l(uo,null,{default:i(()=>[P("p",null,[e[28]||(e[28]=P("strong",null,"Ancho:",-1)),c(" "+I(o.ancho)+"mm",1)]),P("p",null,[e[29]||(e[29]=P("strong",null,"Alto:",-1)),c(" "+I(o.alto)+"mm",1)]),P("p",null,[e[30]||(e[30]=P("strong",null,"Cantidad:",-1)),c(" "+I(o.cantidad),1)]),P("p",null,[e[31]||(e[31]=P("strong",null,"Precio:",-1)),c(" $"+I(o.precio),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])):lo("",!0)]),_:1})]),_:1}),l(Ko,{modelValue:L.value,"onUpdate:modelValue":e[14]||(e[14]=o=>L.value=o),"max-width":"600px"},{default:i(()=>[l(q,null,{default:i(()=>[l(G,{class:"text-h5 pa-4"},{default:i(()=>[l(S,{class:"mr-2",color:"primary"},{default:i(()=>e[32]||(e[32]=[c("mdi-account-plus")])),_:1}),e[33]||(e[33]=c(" Crear Cliente Nuevo "))]),_:1}),l(D),l(uo,{class:"pa-4"},{default:i(()=>[l(oe,{type:"info",variant:"tonal",class:"mb-4"},{default:i(()=>e[34]||(e[34]=[c(" Este cliente se guardarÃ¡ en tu base de datos local. Para facturar, deberÃ¡s seleccionar un cliente sincronizado con Bsale. ")])),_:1}),l(ee,{ref:"formCliente"},{default:i(()=>[l(j,null,{default:i(()=>[l(g,{cols:"12"},{default:i(()=>[l(O,{modelValue:v.value.razon_social,"onUpdate:modelValue":e[7]||(e[7]=o=>v.value.razon_social=o),label:"RazÃ³n Social / Nombre *",rules:[o=>!!o||"RazÃ³n social es requerida"],required:"",outlined:""},null,8,["modelValue","rules"])]),_:1}),l(g,{cols:"12",md:"6"},{default:i(()=>[l(O,{modelValue:v.value.identification,"onUpdate:modelValue":e[8]||(e[8]=o=>v.value.identification=o),label:"RUT",outlined:"",hint:"Formato: 12345678-9"},null,8,["modelValue"])]),_:1}),l(g,{cols:"12",md:"6"},{default:i(()=>[l(O,{modelValue:v.value.email,"onUpdate:modelValue":e[9]||(e[9]=o=>v.value.email=o),label:"Email",type:"email",outlined:""},null,8,["modelValue"])]),_:1}),l(g,{cols:"12",md:"6"},{default:i(()=>[l(O,{modelValue:v.value.phone,"onUpdate:modelValue":e[10]||(e[10]=o=>v.value.phone=o),label:"TelÃ©fono",outlined:""},null,8,["modelValue"])]),_:1}),l(g,{cols:"12",md:"6"},{default:i(()=>[l(O,{modelValue:v.value.ciudad,"onUpdate:modelValue":e[11]||(e[11]=o=>v.value.ciudad=o),label:"Ciudad",outlined:""},null,8,["modelValue"])]),_:1}),l(g,{cols:"12"},{default:i(()=>[l(O,{modelValue:v.value.address,"onUpdate:modelValue":e[12]||(e[12]=o=>v.value.address=o),label:"DirecciÃ³n",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),l(D),l(Qo,{class:"pa-4"},{default:i(()=>[l(ae),l(z,{color:"grey",text:"",onClick:e[13]||(e[13]=o=>L.value=!1)},{default:i(()=>e[35]||(e[35]=[c(" Cancelar ")])),_:1}),l(z,{color:"primary",onClick:No},{default:i(()=>[l(S,{left:""},{default:i(()=>e[36]||(e[36]=[c("mdi-content-save")])),_:1}),e[37]||(e[37]=c(" Guardar Cliente "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Fe=Do(te,[["__scopeId","data-v-260694b4"]]);export{Fe as default};
