import{V as C}from"./VDialog-DbzeL1Fr.js";import{V as x,b as U,c as k}from"./VCard-BivyUXWm.js";import{V as T}from"./VCardText-C6b6sPjd.js";import{V as w,a as d}from"./VRow-C1LQQmap.js";import{V as u}from"./VSelect-DPytfcsj.js";import{V as p}from"./VTextField-B1sfjoWq.js";import{V as B}from"./VSpacer-Cu14cexP.js";import{X as V,r as F,w as M,f as N,e as i,o as c,b as a,t as v,c as $,m as D,n as t,F as H,a3 as b}from"./index-zXGCFGIg.js";import"./VOverlay-C3-CcM7k.js";import"./forwardRefs-DWGaNmQL.js";import"./transition-BvxzZJi3.js";import"./VAvatar-MgFTNfdu.js";import"./VImg-CHMTV0xF.js";/* empty css              */import"./VInput-pyJZwFq9.js";import"./VList-B-_lPbF_.js";import"./VDivider-Dz9kH9oT.js";import"./VMenu-5q30PoDq.js";import"./VCheckboxBtn-D0lPBrIw.js";import"./VSelectionControl-DgQkzTB8.js";import"./VChip-8OtzmJWd.js";const ao={__name:"AgregarVentanaModal",props:{modelValue:Boolean,materiales:Array,colores:Array,tiposVidrio:Array,tiposVentana:{type:Array,default:()=>[]},productosVidrio:Array},emits:["update:modelValue","agregar"],setup(n,{emit:y}){const m=n,_=y,s=V({get:()=>m.modelValue,set:r=>_("update:modelValue",r)}),l=F({tipo_ventana_id:null,ancho:null,alto:null,cantidad:1,material:null,color:null,tipo_vidrio_id:null,producto_vidrio_proveedor_id:null,hojas_totales:2,hojas_moviles:2}),g=V(()=>{var r;return((r=m.tiposVentana)==null?void 0:r.filter(o=>o.material_id===l.value.material))||[]}),j=V(()=>{const r=l.value.tipo_vidrio_id;return m.productosVidrio.filter(o=>o.tipo_producto_id===r).flatMap(o=>o.colores_por_proveedor.map(e=>{var f;return{id:e.id,producto_id:o.id,proveedor_id:e.proveedor_id,nombre:`${o.nombre} (${((f=e.proveedor)==null?void 0:f.nombre)||"Desconocido"})`}}))}),A=()=>{const r=m.productosVidrio.flatMap(o=>o.colores_por_proveedor.map(e=>({id:e.id,producto:o,proveedor:e.proveedor,...e}))).find(o=>o.id===l.value.producto_vidrio_proveedor_id);_("agregar",{...l.value,producto_vidrio_proveedor:r,tipo_ventana:m.tiposVentana.find(o=>o.id===l.value.tipo_ventana_id),color_obj:m.colores.find(o=>o.id===l.value.color)}),s.value=!1};return M(()=>m.modelValue,r=>{r||Object.assign(l.value,{tipo_ventana_id:null,ancho:null,alto:null,cantidad:1,material:null,color:null,tipo_vidrio_id:null,producto_vidrio_proveedor_id:null,hojas_totales:2,hojas_moviles:2})}),(r,o)=>(c(),N(C,{modelValue:s.value,"onUpdate:modelValue":o[11]||(o[11]=e=>s.value=e),"max-width":"900px"},{default:i(()=>[a(x,null,{default:i(()=>[a(U,{class:"text-h6"},{default:i(()=>o[12]||(o[12]=[v("Agregar Ventana")])),_:1}),a(T,null,{default:i(()=>[a(w,{dense:""},{default:i(()=>[a(d,{cols:"12",sm:"6"},{default:i(()=>[a(u,{modelValue:t(l).material,"onUpdate:modelValue":o[0]||(o[0]=e=>t(l).material=e),items:n.materiales,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",sm:"6"},{default:i(()=>[a(u,{modelValue:t(l).tipo_ventana_id,"onUpdate:modelValue":o[1]||(o[1]=e=>t(l).tipo_ventana_id=e),items:g.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",sm:"6"},{default:i(()=>[a(p,{modelValue:t(l).ancho,"onUpdate:modelValue":o[2]||(o[2]=e=>t(l).ancho=e),label:"Ancho (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",sm:"6"},{default:i(()=>[a(p,{modelValue:t(l).alto,"onUpdate:modelValue":o[3]||(o[3]=e=>t(l).alto=e),label:"Alto (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",sm:"6"},{default:i(()=>[a(p,{modelValue:t(l).cantidad,"onUpdate:modelValue":o[4]||(o[4]=e=>t(l).cantidad=e),label:"Cantidad",type:"number",min:"1",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),t(l).tipo_ventana_id===3?(c(),$(H,{key:0},[a(d,{cols:"6",sm:"3"},{default:i(()=>[a(u,{modelValue:t(l).hojas_totales,"onUpdate:modelValue":o[5]||(o[5]=e=>t(l).hojas_totales=e),items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(d,{cols:"6",sm:"3"},{default:i(()=>[a(u,{modelValue:t(l).hojas_moviles,"onUpdate:modelValue":o[6]||(o[6]=e=>t(l).hojas_moviles=e),items:[1,2,3,4],label:"Hojas mÃ³viles",disabled:!t(l).hojas_totales,rules:[e=>!e||e<=t(l).hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","disabled","rules"])]),_:1})],64)):D("",!0),a(d,{cols:"12",sm:"6"},{default:i(()=>[a(u,{modelValue:t(l).color_id,"onUpdate:modelValue":o[7]||(o[7]=e=>t(l).color_id=e),items:n.colores,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",sm:"6"},{default:i(()=>[a(u,{modelValue:t(l).tipo_vidrio_id,"onUpdate:modelValue":o[8]||(o[8]=e=>t(l).tipo_vidrio_id=e),items:n.tiposVidrio,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12"},{default:i(()=>[a(u,{modelValue:t(l).producto_vidrio_proveedor_id,"onUpdate:modelValue":o[9]||(o[9]=e=>t(l).producto_vidrio_proveedor_id=e),items:j.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),a(k,null,{default:i(()=>[a(B),a(b,{text:"",onClick:o[10]||(o[10]=e=>s.value=!1)},{default:i(()=>o[13]||(o[13]=[v("Cancelar")])),_:1}),a(b,{color:"primary",onClick:A},{default:i(()=>o[14]||(o[14]=[v("Agregar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{ao as default};
