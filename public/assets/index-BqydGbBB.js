import{d as bo}from"./debounce-Bh-e6Mkd.js";import{ab as Ao,ac as No,ad as Io,b as l,ae as To,af as $o,ag as oe,Y as ee,at as ae,au as le,ah as re,av as te,aw as ie,ax as se,X as oo,ay as ne,an as de,ao as ce,az as ue,aA as me,aB as po,aC as lo,aD as zo,r as v,aE as yo,E as pe,j as fe,ar as $,k as _e,w as fo,c as K,e as t,F as _o,o as V,f as y,m as Y,d as k,t as m,v as N,i as Co,Z as D,a3 as S,aF as ge}from"./index-DVH5_zAC.js";/* empty css                                                                */import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Shapes-DW6qcN1k.js";import{_ as Ve,a as he,b as be,c as ye}from"./VistaBayWindow-Dh24kOBs.js";import{_ as Ce,a as Ee,b as Pe,c as Ae,d as Ne,e as Ie,f as Te,g as $e}from"./AgregarVentanaModal2-_dLmaAeG.js";import ze from"./ModalProductos-BWkKk8JP.js";import{_ as ke}from"./VistaVentanaCorredera-CuxUu8Jh.js";import{V as De}from"./VContainer-BQTr2538.js";import{V as Se}from"./VDialog-BnFs-wUc.js";import{V as Q,b as ro,d as to,c as Oe}from"./VCard-COrdRJy_.js";import{V as L}from"./VDivider-DRFFLgzE.js";import{V as M,a as C}from"./VRow-B11LxY42.js";import{V as q}from"./VTextField-CPMs-WRD.js";import{V as je,a as xe,b as Re,d as we}from"./VList-DlqD1lUI.js";import{V as Ue}from"./VTextarea-B4D_kEEq.js";import{V as go}from"./VCardText-CjaUBipx.js";import{V as io}from"./VSelect-1AUmKITv.js";import{V as Eo}from"./VDataTable-I1JlzO2v.js";import{V as Po}from"./VAlert-C8Os17kO.js";import{V as Le}from"./VImg-CFgr5isP.js";import{V as Me}from"./VForm-39R0lN7h.js";import{V as qe}from"./VSpacer-Doa9SyIl.js";import"./VSwitch-BVE41btl.js";import"./VInput-DvJG3W6V.js";import"./transition-sBQMWBRJ.js";import"./VSelectionControl-sJMu9Y8j.js";import"./VRadioGroup-Wqevq_U0.js";import"./VChip-6LEPsz9j.js";import"./VAvatar-DhgsH_Fv.js";import"./VCheckbox-B355fbFP.js";import"./VCheckboxBtn-7U5_OoeV.js";/* empty css              */import"./VOverlay-DzZwY3HF.js";import"./forwardRefs-DWGaNmQL.js";import"./VMenu-DPmMVBcN.js";import"./filter-bYy-Y7_U.js";const Be=No({text:String,...$o(),...To()},"VToolbarTitle"),ko=Ao()({name:"VToolbarTitle",props:Be(),setup(u,E){let{slots:p}=E;return Io(()=>{const B=!!(p.default||p.text||u.text);return l(u.tag,{class:["v-toolbar-title",u.class],style:u.style},{default:()=>{var x;return[B&&l("div",{class:"v-toolbar-title__placeholder"},[p.text?p.text():u.text,(x=p.default)==null?void 0:x.call(p)])]}})}),{}}}),Fe=[null,"prominent","default","comfortable","compact"],Ge=No({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:u=>Fe.includes(u)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...me(),...$o(),...ue(),...ce(),...To({tag:"header"}),...de()},"VToolbar"),He=Ao()({name:"VToolbar",props:Ge(),setup(u,E){var G;let{slots:p}=E;const{backgroundColorClasses:B,backgroundColorStyles:x}=oe(ee(u,"color")),{borderClasses:R}=ae(u),{elevationClasses:O}=le(u),{roundedClasses:eo}=re(u),{themeClasses:n}=te(u),{rtlClasses:F}=ie(),P=se(!!(u.extended||(G=p.extension)!=null&&G.call(p))),w=oo(()=>parseInt(Number(u.height)+(u.density==="prominent"?Number(u.height):0)-(u.density==="comfortable"?8:0)-(u.density==="compact"?16:0),10)),b=oo(()=>P.value?parseInt(Number(u.extensionHeight)+(u.density==="prominent"?Number(u.extensionHeight):0)-(u.density==="comfortable"?4:0)-(u.density==="compact"?8:0),10):0);return ne({VBtn:{variant:"text"}}),Io(()=>{var j;const T=!!(u.title||p.title),Z=!!(p.image||u.image),_=(j=p.extension)==null?void 0:j.call(p);return P.value=!!(u.extended||_),l(u.tag,{class:["v-toolbar",{"v-toolbar--absolute":u.absolute,"v-toolbar--collapse":u.collapse,"v-toolbar--flat":u.flat,"v-toolbar--floating":u.floating,[`v-toolbar--density-${u.density}`]:!0},B.value,R.value,O.value,eo.value,n.value,F.value,u.class],style:[x.value,u.style]},{default:()=>[Z&&l("div",{key:"image",class:"v-toolbar__image"},[p.image?l(po,{key:"image-defaults",disabled:!u.image,defaults:{VImg:{cover:!0,src:u.image}}},p.image):l(Le,{key:"image-img",cover:!0,src:u.image},null)]),l(po,{defaults:{VTabs:{height:lo(w.value)}}},{default:()=>{var H,z,I;return[l("div",{class:"v-toolbar__content",style:{height:lo(w.value)}},[p.prepend&&l("div",{class:"v-toolbar__prepend"},[(H=p.prepend)==null?void 0:H.call(p)]),T&&l(ko,{key:"title",text:u.title},{text:p.title}),(z=p.default)==null?void 0:z.call(p),p.append&&l("div",{class:"v-toolbar__append"},[(I=p.append)==null?void 0:I.call(p)])])]}}),l(po,{defaults:{VTabs:{height:lo(b.value)}}},{default:()=>[l(zo,null,{default:()=>[P.value&&l("div",{class:"v-toolbar__extension",style:{height:lo(b.value)}},[_])]})]})]})}),{contentHeight:w,extensionHeight:b}}}),Ke={style:{position:"relative"}},Ye={class:"font-weight-medium"},Qe={key:0,class:"text-caption text-grey"},Ze={class:"d-flex justify-end"},Xe={key:3,class:"mt-6"},Je=.45,We={__name:"index",setup(u){const E=v([]),p=v([]),B=_e(),x=fe(),R=v(!1),O=v(null),eo=oo(()=>{const r={};for(const e of p.value)r[Number(e.id)]=e.nombre;return r}),n=yo({cliente_id:null,observaciones:"",material:"",color:"",tipoVidrio:"",productoVidrioProveedor:"",ventanas:[],productos:[]});v({});const F=v(!1),P=yo({cliente:null}),w=v([]),b=v([]),G=v([]),T=v([]),Z=v([]),_=v([]),j=v(!1),H=v(null),z=v(""),I=v(!1);v("");const X=v(!1);v(0);const A=v({razon_social:"",identification:"",email:"",phone:"",address:"",ciudad:"",comuna:"",giro:""});oo(()=>T.value.flatMap(r=>!r.colores_por_proveedor||!Array.isArray(r.colores_por_proveedor)?[]:r.colores_por_proveedor.map(e=>{var o;return{id:`${r.id}-${e.proveedor_id}`,producto_id:r.id,proveedor_id:e.proveedor_id,nombre:`${r.nombre} (${((o=e.proveedor)==null?void 0:o.nombre)||"Proveedor desconocido"})`}})));const Do=oo(()=>{const r=n.tipoVidrio;return T.value.filter(e=>e.tipo_producto_id===r).flatMap(e=>!e.colores_por_proveedor||!Array.isArray(e.colores_por_proveedor)?[]:e.colores_por_proveedor.map(o=>{var a;return{id:o.id,producto_id:e.id,proveedor_id:o.proveedor_id,nombre:`${e.nombre} (${((a=o.proveedor)==null?void 0:a.nombre)||"Proveedor desconocido"})`}}))});pe(async()=>{var r;console.log("ğŸ”„ Iniciando carga de datos..."),x.query.id&&(R.value=!0,O.value=x.query.id,console.log("ğŸ“ MODO EDICIÃ“N activado - ID:",O.value));try{const[e,o,a,c,d]=await Promise.all([$.get("/api/tipos_material"),$.get("/api/colores"),$.get("/api/tipos_producto"),$.get("/api/productos"),$.get("/api/tipos_ventana")]);console.log("âœ… Datos bÃ¡sicos cargados"),w.value=e.data,b.value=o.data,G.value=a.data.filter(f=>[1,2].includes(f.id)),T.value=c.data.filter(f=>[1,2].includes(f.tipo_producto_id)),console.log("ğŸ“¦ PRODUCTOS DE VIDRIO CARGADOS:",T.value.length),console.log("ğŸ“¦ Primer producto:",T.value[0]),T.value[0]&&(console.log("   - Tiene colores_por_proveedor?",!!T.value[0].colores_por_proveedor),console.log("   - Es array?",Array.isArray(T.value[0].colores_por_proveedor)),console.log("   - Cantidad:",(r=T.value[0].colores_por_proveedor)==null?void 0:r.length)),p.value=d.data,console.log("TIPOS VENTANA CARGADOS:",p.value),console.log("ğŸ”„ Cargando primeros clientes..."),Xo(),R.value&&await So(),document.addEventListener("click",f=>{const g=f.target;!g.closest(".v-text-field")&&!g.closest(".v-card")&&(I.value=!1)})}catch(e){console.error("âŒ Error cargando datos:",e),alert("Error cargando datos: "+e.message)}});const so=r=>(r=parseInt(r),T.value.flatMap(e=>!e.colores_por_proveedor||!Array.isArray(e.colores_por_proveedor)?[]:e.colores_por_proveedor.map(o=>({id:o.id,producto_id:e.id,proveedor_id:o.proveedor_id}))).find(e=>e.id===r)),So=async()=>{try{console.log("ğŸ“¥ Cargando cotizaciÃ³n ID:",O.value);const e=(await $.get(`/api/cotizaciones/${O.value}`)).data;console.log("âœ… CotizaciÃ³n cargada:",e),console.log("ğŸ“¦ DETALLES COMPLETOS:",e.detalles),e.cliente&&(P.cliente=e.cliente,n.cliente_id=e.cliente.id,z.value=e.cliente.razon_social),n.observaciones=e.observaciones||"",e.ventanas&&e.ventanas.length>0&&(n.ventanas=e.ventanas.map(o=>{const a=so(o.producto_vidrio_proveedor_id);return{tipo:o.tipo_ventana_id,ancho:o.ancho,alto:o.alto,cantidad:o.cantidad||1,color:o.color_id,tipoVidrio:o.tipo_vidrio_id,productoVidrioProveedor:o.producto_vidrio_proveedor_id,productoVidrio:a==null?void 0:a.producto_id,proveedorVidrio:a==null?void 0:a.proveedor_id,costo:o.costo||0,costo_unitario:o.costo_unitario||0,costo_total:o.costo||0,precio:o.precio||0,precio_unitario:o.precio_unitario||0,hojas_totales:o.hojas_totales,hojas_moviles:o.hojas_moviles,materiales:o.materiales||[],tipoVentanaIzquierda:o.tipo_ventana_izquierda,tipoVentanaCentro:o.tipo_ventana_centro,tipoVentanaDerecha:o.tipo_ventana_derecha,ancho_izquierda:o.ancho_izquierda,ancho_centro:o.ancho_centro,ancho_derecha:o.ancho_derecha,id:o.id}}),console.log("âœ… Ventanas cargadas:",n.ventanas.length)),e.detalles&&e.detalles.length>0&&(n.productos=e.detalles.filter(o=>o.tipo_item==="producto").map(o=>{console.log("ğŸ“¦ Detalle del producto:",o);const a=o.producto_lista||o.productoLista||{},c=o.lista_precio||o.listaPrecio||{},d=a.tipo_producto||a.tipoProducto||{},f=a.unidad||{};return{id:o.id,producto_lista_id:o.producto_lista_id,lista_precio_id:o.lista_precio_id,descripcion:o.descripcion,cantidad:o.cantidad,precio_venta:o.precio_unitario,total:o.total,codigo:a.codigo||"",nombre:a.nombre||o.descripcion,tipo:d.nombre||"",unidad:f.nombre||f.simbolo||"",precio_costo:c.precio_costo||0,margen:c.margen||0}}),console.log("âœ… Productos cargados:",n.productos.length),console.log("ğŸ“¦ Primer producto mapeado:",n.productos[0]))}catch(r){console.error("âŒ Error cargando cotizaciÃ³n:",r),alert("Error al cargar la cotizaciÃ³n"),B.push({name:"cotizaciones"})}},J=v(!1),no=v(!1),co=v(!1),uo=v(null),Oo=[{title:"Tipo",key:"tipo"},{title:"Ancho",key:"ancho"},{title:"Alto",key:"alto"},{title:"Cantidad",key:"cantidad"},{title:"Precio",key:"precio",align:"end"},{title:"Acciones",key:"acciones",sortable:!1}],jo=[{title:"CÃ³digo",key:"codigo"},{title:"Nombre",key:"nombre"},{title:"Color",key:"color"},{title:"Proveedor",key:"proveedor"},{title:"Tipo",key:"tipo_producto"},{title:"Unidad",key:"unidad"},{title:"Cantidad",key:"cantidad"},{title:"Precio Costo",key:"precio_costo",align:"end"},{title:"Precio Venta",key:"precio_venta",align:"end"},{title:"Acciones",key:"acciones",sortable:!1}],xo=()=>{uo.value=null,J.value=!0},Ro=()=>{no.value=!no.value},wo=()=>{co.value=!0},Uo=r=>{uo.value={...n.ventanas[r],index:r},J.value=!0},Lo=r=>{console.log("VENTANA RECIBIDA:",r),r.index!==void 0?n.ventanas[r.index]={...r}:n.ventanas.push({...r}),J.value=!1},Mo=r=>{console.log("ğŸ“¦ PRODUCTOS RECIBIDOS DEL MODAL:",r),r.forEach(e=>{var a,c,d,f,g,i,h;const o={producto_lista_id:e.producto_lista_id,lista_precio_id:e.lista_precio_id,nombre:e.nombre||((a=e.producto)==null?void 0:a.nombre),codigo:e.codigo||((c=e.producto)==null?void 0:c.codigo_proveedor),color:e.color||"-",proveedor:e.proveedor||"-",tipo_producto:e.tipo||((f=(d=e.producto)==null?void 0:d.tipoProducto)==null?void 0:f.nombre)||"-",unidad:e.unidad||((i=(g=e.producto)==null?void 0:g.unidad)==null?void 0:i.abreviacion)||"-",cantidad:e.cantidad,precio_costo:e.precio_costo,margen:e.margen,precio_venta:e.precio_venta,descripcion:e.descripcion||e.nombre||((h=e.producto)==null?void 0:h.nombre)||"",total:e.precio_venta*e.cantidad,esVidrio:e.esVidrio||!1,ancho_mm:e.ancho_mm||null,alto_mm:e.alto_mm||null,m2:e.m2||null,pulido:e.pulido||!1};console.log("âœ… PRODUCTO AGREGADO A COTIZACIÃ“N:",o),n.productos.push(o)})},qo=r=>{n.productos.splice(r,1)},vo=r=>new Intl.NumberFormat("es-CL").format(r||0),Bo=r=>{n.ventanas.splice(r,1)},Fo=bo(async(r,e)=>{if(!r.productoVidrio||!r.proveedorVidrio){console.warn("âš ï¸ Faltan datos en el payload para calcular materiales:",r);return}try{const o=await $.post("/api/cotizador/calcular-materiales",r);e.costo_unitario=o.data.costo_unitario;const a=Number(e.cantidad)>0?Number(e.cantidad):1;e.costo_total=o.data.costo_unitario*a;const c=Math.ceil(o.data.costo_unitario/(1-Je));e.precio_unitario=c,e.precio=c*a,e.materiales=o.data.materiales}catch(o){console.error("âŒ Error al calcular materiales",o),e.costo_total=0,e.materiales=[]}},1e3);fo(()=>n.ventanas,r=>{r.forEach(e=>{fo(()=>[e.tipo,e.ancho,e.alto,e.cantidad,e.material,e.color,e.tipoVidrio,e.productoVidrioProveedor,e.hojas_totales,e.hojas_moviles],()=>{const o=[];e.tipo||o.push("tipo_ventana_id faltante"),e.ancho||o.push("ancho faltante"),e.alto||o.push("alto faltante"),(!e.cantidad||e.cantidad<=0)&&o.push("cantidad invÃ¡lida"),e.productoVidrioProveedor||o.push("productoVidrioProveedor faltante");const a=so(e.productoVidrioProveedor);if(a||o.push(`relaciÃ³n producto-proveedor no encontrada (ID: ${e.productoVidrioProveedor})`),o.length>0){console.warn(`âŒ No se puede recalcular la ventana (tipo ${e.tipo}):`,o.join(", "));return}const c={...e,productoVidrio:a.producto_id,proveedorVidrio:a.proveedor_id,hojas_moviles:e.tipo===3||e.tipo===46?e.hojas_moviles:void 0};console.log("âœ… Recalculando ventana:",c),Fo(c,e)},{deep:!0,immediate:!1})})},{deep:!0}),fo(()=>P.cliente,r=>{console.log("âœ… Cliente seleccionado:",r),r&&(console.log("âœ… Nombre:",r.razon_social),console.log("âœ… RUT:",r.identification))});const Go=()=>{X.value=!0},Ho=async()=>{var e,o;const r=(e=z.value)==null?void 0:e.trim();if(console.log("ğŸ” BÃšSQUEDA LOCAL:",r),P.cliente&&r!==P.cliente.razon_social&&(P.cliente=null,n.cliente_id=null),!r||r.length<2){_.value=[],I.value=!1;return}j.value=!0,I.value=!0;try{const a=await $.get(`/api/clientes/buscar?q=${encodeURIComponent(r)}`);console.log("âœ… RESPUESTA LOCAL:",a.data),((o=a.data)==null?void 0:o.length)>0?(_.value=a.data.map(c=>({id:c.id,razon_social:c.razon_social||`${c.first_name||""} ${c.last_name||""}`.trim()||"Sin nombre",identification:c.identification||"",email:c.email||"",phone:c.phone||""})),console.log("âœ… CLIENTES PROCESADOS:",_.value),I.value=!0):(_.value=[],I.value=!1,console.log("âŒ NO HAY CLIENTES"))}catch(a){console.error("âŒ ERROR:",a),_.value=[],I.value=!1}finally{j.value=!1}},Ko=r=>{console.log("âœ… CLIENTE SELECCIONADO:",r),P.cliente=r,n.cliente_id=r.id,z.value=r.razon_social,I.value=!1,_.value=[]},Yo=()=>{_.value.length>0&&(I.value=!0)},Qo=()=>{z.value="",_.value=[],I.value=!1,P.cliente=null},Zo=async()=>{var r,e;try{console.log("ğŸ’¾ Guardando cliente local:",A.value);const o=await $.post("/api/clientes",A.value);console.log("âœ… Respuesta completa:",o.data);const a=o.data.cliente||o.data;console.log("âœ… Cliente creado:",a),_.value.push(a),P.cliente=a,n.cliente_id=a.id,z.value=a.razon_social,I.value=!1,_.value=[],X.value=!1,A.value={razon_social:"",identification:"",email:"",phone:"",address:"",ciudad:""},console.log("âœ… Cliente seleccionado:",P.cliente),console.log("âœ… Cliente ID asignado:",n.cliente_id),console.log("âœ… TÃ©rmino bÃºsqueda:",z.value),alert("âœ… Cliente creado y seleccionado exitosamente")}catch(o){console.error("âŒ Error al crear cliente:",o),alert("âŒ Error al crear cliente: "+(((e=(r=o.response)==null?void 0:r.data)==null?void 0:e.message)||o.message))}};bo(async r=>{var e;if(r||(r=z.value),console.log("ğŸ” Buscando clientes con query:",r),!r||r.length<2){_.value=Z.value.slice(0,20),console.log("ğŸ“‹ Mostrando clientes iniciales:",_.value.length);return}j.value=!0;try{console.log("ğŸŒ Buscando en API de Bsale...");const o=await $.get(`/api/bsale-clientes/buscar?q=${encodeURIComponent(r)}`);console.log("âœ… Respuesta de API:",o.data),o.data&&o.data.items&&o.data.items.length>0?(_.value=o.data.items.map(a=>{console.log("ğŸ” Procesando cliente:",a);let c="";a.company&&a.company.trim()?c=a.company.trim():a.firstName||a.lastName?c=`${a.firstName||""} ${a.lastName||""}`.trim():a.razon_social?c=a.razon_social:a.displayName?c=a.displayName:c="Cliente sin nombre",(!c||c.trim()==="")&&(c=`Cliente ID: ${a.id}`);const d={id:a.id,razon_social:c,identification:a.identification||"",email:a.email||"",phone:a.phone||"",address:a.address||"",city:a.city||"",municipality:a.municipality||"",first_name:a.firstName||"",last_name:a.lastName||"",company:a.company||"",tipo_cliente:a.companyOrPerson==1?"empresa":"persona"};return console.log("âœ… Cliente procesado:",d),d}),console.log("âœ… Total clientes procesados:",_.value.length),console.log("âœ… Lista final:",_.value),_.value.length>0&&(console.log("ğŸ” Primer cliente para autocomplete:",{id:_.value[0].id,razon_social:_.value[0].razon_social,hasId:!!_.value[0].id,hasTitle:!!_.value[0].razon_social}),setTimeout(()=>{H.value&&H.value.menu&&(console.log("ğŸ¯ Forzando apertura del menÃº..."),H.value.menu=!0)},100))):(console.log("âŒ No se encontraron clientes en la respuesta"),_.value=[])}catch(o){console.error("âŒ Error en bÃºsqueda:",o),console.error("âŒ Detalles del error:",(e=o.response)==null?void 0:e.data),_.value=[]}finally{j.value=!1}},300);const Xo=async()=>{var r;try{const e=await $.get("/api/bsale-clientes?limit=50&offset=0");console.log("âœ… Primeros clientes cargados:",e.data);const o=((r=e.data.items)==null?void 0:r.map(a=>({id:a.id,razon_social:a.razon_social||a.displayName||"Sin nombre",identification:a.identification,email:a.email,phone:a.phone,address:a.address,city:a.city,municipality:a.municipality,first_name:a.firstName,last_name:a.lastName,company:a.company,tipo_cliente:a.companyOrPerson==1?"empresa":"persona"})))||[];Z.value=o,_.value=o.slice(0,20),console.log("âœ… Clientes iniciales listos:",Z.value.length)}catch(e){console.error("âŒ Error cargando clientes iniciales:",e),_.value=[]}},Jo=async()=>{var e,o;await new Promise(a=>setTimeout(a,2e3));const r=[];console.log("ğŸ” INICIANDO CAPTURA DE IMÃGENES"),console.log("ğŸ” VENTANA REFS:",E.value),console.log("ğŸ” TOTAL VENTANAS:",n.ventanas.length);for(let a=0;a<n.ventanas.length;a++){const c=n.ventanas[a];console.log(`ğŸ” VENTANA ${a} - TIPO:`,c.tipo);try{const d=E.value[a];if(console.log(`ğŸ” COMPONENTE ${a}:`,d),console.log(`ğŸ” TIPO DE COMPONENTE ${a}:`,typeof d),console.log(`ğŸ” $el DE COMPONENTE ${a}:`,d==null?void 0:d.$el),console.log(`ğŸ” TIPO DE $el ${a}:`,typeof(d==null?void 0:d.$el)),d!=null&&d.exportarImagen&&typeof d.exportarImagen=="function"){console.log(`ğŸ”§ Usando exportarImagen() del componente ${a}`);try{const f=await d.exportarImagen();if(f&&f!==null){console.log(`âœ… IMAGEN ${a} CAPTURADA VIA exportarImagen:`,f.substring(0,50)),r.push(f);continue}else console.warn(`âš ï¸ exportarImagen() devolviÃ³ null para componente ${a}`)}catch(f){console.error(`âŒ Error en exportarImagen del componente ${a}:`,f)}}if(d!=null&&d.$el&&d.$el.nodeType===Node.ELEMENT_NODE&&typeof d.$el.querySelectorAll=="function"){console.log(`ğŸ” ELEMENTO DOM ${a} VÃLIDO:`,d.$el.tagName);const f=d.$el.querySelectorAll("canvas");console.log(`ğŸ” CANVAS ENCONTRADOS EN COMPONENTE ${a}:`,f.length);let g=null;for(let i=0;i<f.length;i++){const h=f[i];console.log(`ğŸ” CANVAS ${a}.${i} - DIMENSIONES:`,h.width,"x",h.height);try{const W=h.getContext("2d").getImageData(0,0,h.width,h.height).data.some(ao=>ao!==0);if(console.log(`ğŸ” CANVAS ${a}.${i} - TIENE CONTENIDO:`,W),W){g=h;break}}catch(U){console.error(`âŒ Error verificando canvas ${a}.${i}:`,U)}}if(g){try{const h=(e=g.getStage)==null?void 0:e.call(g);h&&(console.log(`ğŸ”„ Forzando redibujado de Konva en ventana ${a}`),h.draw(),await new Promise(U=>setTimeout(U,500)))}catch{console.log(`â„¹ï¸ Ventana ${a} no es Konva`)}const i=g.toDataURL("image/png");console.log(`âœ… IMAGEN ${a} CAPTURADA VIA CANVAS:`,i.substring(0,50)),r.push(i)}else if(f.length>0){console.log("ğŸ”§ Usando primer canvas aunque estÃ© vacÃ­o...");try{const i=f[0].toDataURL("image/png");r.push(i)}catch(i){console.error("âŒ Error en toDataURL:",i),r.push(null)}}else console.warn(`âš ï¸ No se encontraron canvas en componente ${a}`),r.push(null)}else{console.warn(`âš ï¸ Componente ${a} no tiene $el vÃ¡lido o querySelectorAll`),console.log("ğŸ” Â¿$el existe?:",!!(d!=null&&d.$el)),console.log("ğŸ” Â¿Es Element?:",(d==null?void 0:d.$el)instanceof Element),console.log("ğŸ” Â¿Tiene querySelectorAll?:",typeof((o=d==null?void 0:d.$el)==null?void 0:o.querySelectorAll)),console.log("ğŸ”§ Ãšltimo recurso: buscando canvas globalmente...");const f=document.querySelectorAll("canvas");if(console.log("ğŸ” Canvas globales encontrados:",f.length),f.length>a)try{const g=f[a].toDataURL("image/png");console.log(`âœ… IMAGEN ${a} CAPTURADA VIA BÃšSQUEDA GLOBAL`),r.push(g)}catch(g){console.error("âŒ Error en canvas global:",g),r.push(null)}else r.push(null)}}catch(d){console.error(`âŒ ERROR GENERAL capturando imagen ${a}:`,d),r.push(null)}}return console.log("ğŸ–¼ï¸ RESULTADO FINAL:",r.map((a,c)=>`${c}: ${a?"OK":"NULL"}`)),r},Wo=async()=>{var r,e,o;F.value=!0;try{const a=await Jo();console.log("ğŸ–¼ï¸ IMÃGENES CAPTURADAS:",a),console.log("ğŸ–¼ï¸ NÃšMERO DE IMÃGENES:",a.length),console.log("ğŸ–¼ï¸ PRIMERA IMAGEN (primeros 100 chars):",(r=a[0])==null?void 0:r.substring(0,100));const c=P.cliente;if(!c){alert("Debes seleccionar un cliente");return}const d=n.ventanas.length>0,f=n.productos&&n.productos.length>0;if(!d&&!f){alert("Debes agregar al menos una ventana o un producto a la cotizaciÃ³n");return}const g={cliente_id:c.id,vendedor_id:1,fecha:new Date().toISOString().split("T")[0],estado_cotizacion_id:n.estado_cotizacion_id??1,observaciones:n.observaciones,imagenes_ventanas:a,ventanas:n.ventanas.map(i=>{const h=so(i.productoVidrioProveedor);return{id:i.id,tipo_ventana_id:i.tipo,ancho:i.ancho,alto:i.alto,cantidad:i.cantidad,color_id:i.color,producto_vidrio_proveedor_id:i.productoVidrioProveedor,producto_id:h==null?void 0:h.producto_id,proveedor_id:h==null?void 0:h.proveedor_id,costo:i.costo_total||i.costo||0,costo_unitario:i.costo_unitario||0,precio:i.precio||0,precio_unitario:i.precio_unitario||0,tipo_ventana_izquierda:i.tipoVentanaIzquierda??null,tipo_ventana_centro:i.tipoVentanaCentro??null,tipo_ventana_derecha:i.tipoVentanaDerecha??null,ancho_izquierda:i.ancho_izquierda??null,ancho_centro:i.ancho_centro??null,ancho_derecha:i.ancho_derecha??null,hojas_totales:i.hojas_totales??null,hojas_moviles:i.hojas_moviles??null,hoja_movil_seleccionada:i.hojaMovilSeleccionada??null,hoja1_al_frente:i.hoja1AlFrente??null}}),productos:(n.productos||[]).map(i=>({id:i.id,producto_lista_id:i.producto_lista_id,lista_precio_id:i.lista_precio_id,descripcion:i.descripcion||i.nombre||"",cantidad:i.cantidad,precio_unitario:i.precio_venta/i.cantidad,total:i.total||i.precio_venta*i.cantidad,esVidrio:i.esVidrio||!1,ancho_mm:i.ancho_mm||null,alto_mm:i.alto_mm||null,m2:i.m2||null,pulido:i.pulido||!1}))};console.log("ğŸ“¤ PAYLOAD A ENVIAR:",g),console.log("ğŸ“¤ VENTANAS ESPECÃFICAS:",g.ventanas),console.log("ğŸ“¤ PRODUCTOS ESPECÃFICOS:",g.productos),R.value?(console.log("ğŸ”„ Actualizando cotizaciÃ³n existente ID:",O.value),await $.put(`/api/cotizaciones/${O.value}`,g),alert("CotizaciÃ³n actualizada correctamente")):(console.log("âœ¨ Creando nueva cotizaciÃ³n"),await $.post("/api/cotizaciones",g),alert("CotizaciÃ³n guardada correctamente")),B.push({name:"cotizaciones"})}catch(a){console.error("Error al guardar cotizaciÃ³n:",a),(o=(e=a.response)==null?void 0:e.data)!=null&&o.message?alert(a.response.data.message):alert("Error al guardar la cotizaciÃ³n")}finally{F.value=!1}};return(r,e)=>(V(),K(_o,null,[l(De,{fluid:""},{default:t(()=>[l(Q,{class:"pa-6",elevation:"2"},{default:t(()=>[l(ro,{class:"text-h5 mb-4"},{default:t(()=>[m(N(R.value?"Editar CotizaciÃ³n":"Nueva CotizaciÃ³n"),1)]),_:1}),l(to,{class:"text-h5"},{default:t(()=>e[16]||(e[16]=[m("Datos generales")])),_:1}),l(L,{class:"mb-4"}),l(M,{dense:""},{default:t(()=>[l(C,{cols:"6",md:"4"},{default:t(()=>[l(M,{"no-gutters":"",align:"center"},{default:t(()=>[l(C,null,{default:t(()=>[k("div",Ke,[l(q,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=o=>z.value=o),onInput:Ho,onFocus:Yo,"onClick:clear":Qo,label:"Cliente",placeholder:"Buscar por RUT o nombre...",outlined:"",clearable:"",loading:j.value,color:"primary","append-inner-icon":P.cliente?"mdi-check-circle":"mdi-magnify",hint:P.cliente?`Seleccionado: ${P.cliente.razon_social}`:"","persistent-hint":""},null,8,["modelValue","loading","append-inner-icon","hint"]),I.value&&_.value.length>0?(V(),y(Q,{key:0,style:{position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto"},class:"mt-1",elevation:"8"},{default:t(()=>[l(je,{density:"compact"},{default:t(()=>[(V(!0),K(_o,null,Co(_.value,o=>(V(),y(xe,{key:o.id,onClick:a=>Ko(o),class:"cursor-pointer",hover:""},{prepend:t(()=>[l(D,null,{default:t(()=>e[17]||(e[17]=[m("mdi-account")])),_:1})]),default:t(()=>[l(Re,null,{default:t(()=>[m(N(o.razon_social),1)]),_:2},1024),l(we,null,{default:t(()=>[m(N(o.identification),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):Y("",!0)])]),_:1}),l(C,{cols:"auto"},{default:t(()=>[l(S,{icon:"",color:"primary",onClick:Go,class:"ml-2"},{default:t(()=>[l(D,null,{default:t(()=>e[18]||(e[18]=[m("mdi-plus")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(M,{dense:""},{default:t(()=>[l(C,{cols:"4"},{default:t(()=>[l(Ue,{modelValue:n.observaciones,"onUpdate:modelValue":e[1]||(e[1]=o=>n.observaciones=o),label:"Observaciones","row-height":"15",rows:"1",outlined:"",color:"primary","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(L,{class:"my-4"}),l(to,{class:"text-h5"},{default:t(()=>e[19]||(e[19]=[m("Items de la CotizaciÃ³n")])),_:1}),l(L,{class:"mb-4"}),l(M,{class:"mb-4"},{default:t(()=>[l(C,{cols:"auto"},{default:t(()=>[l(S,{color:"primary",onClick:Ro,disabled:!p.value.length},{default:t(()=>[l(D,{left:""},{default:t(()=>e[20]||(e[20]=[m("mdi-window-closed-variant")])),_:1}),e[21]||(e[21]=m(" Ventana "))]),_:1},8,["disabled"])]),_:1}),l(C,{cols:"auto"},{default:t(()=>[l(S,{color:"success",onClick:wo},{default:t(()=>[l(D,{left:""},{default:t(()=>e[22]||(e[22]=[m("mdi-package-variant")])),_:1}),e[23]||(e[23]=m(" Productos "))]),_:1})]),_:1})]),_:1}),l(zo,null,{default:t(()=>[no.value?(V(),y(Q,{key:0,class:"mb-4",outlined:""},{default:t(()=>[l(go,null,{default:t(()=>[l(to,{class:"text-subtitle-1 font-weight-bold"},{default:t(()=>e[24]||(e[24]=[m("Pre-configuraciÃ³n de Ventana")])),_:1}),l(M,{dense:"",class:"mt-2"},{default:t(()=>[l(C,{cols:"12",md:"6"},{default:t(()=>[l(io,{modelValue:n.material,"onUpdate:modelValue":e[2]||(e[2]=o=>n.material=o),items:w.value,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",dense:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),l(C,{cols:"12",md:"6"},{default:t(()=>[l(io,{modelValue:n.color,"onUpdate:modelValue":e[3]||(e[3]=o=>n.color=o),items:b.value,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",dense:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),l(C,{cols:"12",sm:"6"},{default:t(()=>[l(io,{modelValue:n.tipoVidrio,"onUpdate:modelValue":e[4]||(e[4]=o=>n.tipoVidrio=o),items:G.value,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",dense:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),l(C,{cols:"12",sm:"6"},{default:t(()=>[l(io,{modelValue:n.productoVidrioProveedor,"onUpdate:modelValue":e[5]||(e[5]=o=>n.productoVidrioProveedor=o),items:Do.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",dense:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(S,{color:"primary",onClick:xo,block:"",class:"mt-2"},{default:t(()=>[l(D,{left:""},{default:t(()=>e[25]||(e[25]=[m("mdi-plus")])),_:1}),e[26]||(e[26]=m(" Agregar Ventana "))]),_:1})]),_:1})]),_:1})):Y("",!0)]),_:1}),n.ventanas.length>0?(V(),y(Eo,{key:0,headers:Oo,items:n.ventanas,class:"mt-4","items-per-page":5},{"item.tipo":t(({item:o})=>[m(N(eo.value[Number(o.tipo)]||o.tipo),1)]),"item.acciones":t(({item:o,index:a})=>[l(S,{icon:"",onClick:c=>Uo(a)},{default:t(()=>[l(D,null,{default:t(()=>e[27]||(e[27]=[m("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),l(S,{icon:"",color:"error",onClick:c=>Bo(a)},{default:t(()=>[l(D,null,{default:t(()=>e[28]||(e[28]=[m("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])):(V(),y(Po,{key:1,type:"info",variant:"tonal",class:"mt-4"},{default:t(()=>e[29]||(e[29]=[m(' No hay ventanas agregadas. Haz clic en "Agregar Ventana" para comenzar. ')])),_:1})),n.productos.length>0?(V(),y(Eo,{key:2,headers:jo,items:n.productos,class:"mt-4","items-per-page":5},{top:t(()=>[l(He,{flat:"",color:"transparent"},{default:t(()=>[l(ko,{class:"text-subtitle-1"},{default:t(()=>e[30]||(e[30]=[m("Productos")])),_:1})]),_:1})]),"item.nombre":t(({item:o})=>[k("div",null,[k("div",Ye,N(o.nombre),1),o.descripcion&&o.descripcion!==o.nombre?(V(),K("div",Qe,N(o.descripcion),1)):Y("",!0)])]),"item.precio_costo":t(({item:o})=>[m(" $"+N(vo(o.precio_costo)),1)]),"item.margen":t(({item:o})=>[m(N(o.margen)+"% ",1)]),"item.precio_venta":t(({item:o})=>[m(" $"+N(vo(o.precio_venta)),1)]),"item.acciones":t(({item:o,index:a})=>[l(S,{icon:"",color:"error",onClick:c=>qo(a)},{default:t(()=>[l(D,null,{default:t(()=>e[31]||(e[31]=[m("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])):Y("",!0),l(Ce,{mostrar:J.value,"onUpdate:mostrar":e[6]||(e[6]=o=>J.value=o),materiales:w.value,colores:b.value,tiposVidrio:G.value,productosVidrio:T.value,tiposVentana:p.value,ventana:uo.value,"material-default":n.material,"color-default":n.color,"tipo-vidrio-default":n.tipoVidrio,"producto-vidrio-default":n.productoVidrioProveedor,onGuardar:Lo},null,8,["mostrar","materiales","colores","tiposVidrio","productosVidrio","tiposVentana","ventana","material-default","color-default","tipo-vidrio-default","producto-vidrio-default"]),l(ze,{mostrar:co.value,"onUpdate:mostrar":e[7]||(e[7]=o=>co.value=o),onAgregarProductos:Mo},null,8,["mostrar"]),l(L,{class:"my-4"}),k("div",Ze,[l(S,{color:"primary",loading:F.value,disabled:F.value,onClick:Wo},{loader:t(()=>[l(ge,{indeterminate:"",color:"white",size:"20"})]),default:t(()=>[m(" "+N(R.value?"Guardar Cambios":"Guardar CotizaciÃ³n"),1)]),_:1},8,["loading","disabled"])]),n.ventanas.length>0?(V(),K("div",Xe,[l(to,{class:"text-h5"},{default:t(()=>e[32]||(e[32]=[m("Vista previa de ventanas")])),_:1}),l(L,{class:"mb-4"}),(V(!0),K(_o,null,Co(n.ventanas,(o,a)=>(V(),K("div",{key:a,class:"mb-4"},[l(Q,{class:"pa-4",outlined:""},{default:t(()=>[l(ro,null,{default:t(()=>[m(N(eo.value[o.tipo]||`Ventana ${a+1}`),1)]),_:2},1024),l(M,null,{default:t(()=>[l(C,{cols:"6"},{default:t(()=>{var c,d,f,g,i,h,U,mo,W,ao,Vo,ho;return[o.tipo===1?(V(),y(Ee,{key:0,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((c=b.value.find(s=>s.id===o.color))==null?void 0:c.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):o.tipo===2?(V(),y(Ve,{key:1,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((d=b.value.find(s=>s.id===o.color))==null?void 0:d.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):o.tipo===45?(V(),y(he,{key:2,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((f=b.value.find(s=>s.id===o.color))==null?void 0:f.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):o.tipo===3?(V(),y(ke,{key:3,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((g=b.value.find(s=>s.id===o.color))==null?void 0:g.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"hojas-totales":o.hojas_totales,"hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):o.tipo===52?(V(),y(Pe,{key:4,ancho:o.ancho,alto:o.alto,"color-marco":((i=b.value.find(s=>s.id===o.color))==null?void 0:i.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"hojas-totales":o.hojas_totales,"hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):o.tipo===47?(V(),y(be,{key:5,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((h=b.value.find(s=>s.id===o.color))==null?void 0:h.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"ancho-izquierda":o.ancho_izquierda,"ancho-centro":o.ancho_centro,"ancho-derecha":o.ancho_derecha,"tipo-ventana-izquierda":o.tipoVentanaIzquierda,"tipo-ventana-centro":o.tipoVentanaCentro,"tipo-ventana-derecha":o.tipoVentanaDerecha},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","ancho-izquierda","ancho-centro","ancho-derecha","tipo-ventana-izquierda","tipo-ventana-centro","tipo-ventana-derecha"])):o.tipo===46?(V(),y(ye,{key:6,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((U=b.value.find(s=>s.id===o.color))==null?void 0:U.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"hojas-totales":o.hojas_totales,"hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):o.tipo===53?(V(),y(Ae,{key:7,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((mo=b.value.find(s=>s.id===o.color))==null?void 0:mo.nombre)||"blanco","lado-apertura":o.ladoApertura},null,8,["ancho","alto","color-marco","lado-apertura"])):o.tipo===49?(V(),y(Ne,{key:8,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((W=b.value.find(s=>s.id===o.color))==null?void 0:W.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"lado-inicial":o.ladoApertura||"izquierda"},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-inicial"])):o.tipo===50?(V(),y(Ie,{key:9,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((ao=b.value.find(s=>s.id===o.color))==null?void 0:ao.nombre)||"blanco",material:o.material,tipoVidrio:o.tipoVidrio,productoVidrioProveedor:o.productoVidrioProveedor,"lado-apertura":o.ladoApertura,"direccion-apertura":o.direccionApertura,"paso-libre":o.pasoLibre},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-apertura","direccion-apertura","paso-libre"])):o.tipo===51?(V(),y(Te,{key:10,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((Vo=b.value.find(s=>s.id===o.color))==null?void 0:Vo.nombre)||"blanco","hoja-activa":o.hojaActiva,"direccion-apertura":o.direccionApertura,"paso-libre":o.pasoLibre},null,8,["ancho","alto","color-marco","hoja-activa","direccion-apertura","paso-libre"])):o.tipo===58?(V(),y($e,{key:11,ref_for:!0,ref:s=>{s&&(E.value[a]=s)},ancho:o.ancho,alto:o.alto,"color-marco":((ho=b.value.find(s=>s.id===o.color))==null?void 0:ho.nombre)||"blanco",orientacion:o.orientacionComp,items:o.itemsComp},null,8,["ancho","alto","color-marco","orientacion","items"])):Y("",!0)]}),_:2},1024),l(C,{cols:"6"},{default:t(()=>[l(Q,{variant:"outlined"},{default:t(()=>[l(ro,null,{default:t(()=>e[33]||(e[33]=[m("Detalles")])),_:1}),l(go,null,{default:t(()=>[k("p",null,[e[34]||(e[34]=k("strong",null,"Ancho:",-1)),m(" "+N(o.ancho)+"mm",1)]),k("p",null,[e[35]||(e[35]=k("strong",null,"Alto:",-1)),m(" "+N(o.alto)+"mm",1)]),k("p",null,[e[36]||(e[36]=k("strong",null,"Cantidad:",-1)),m(" "+N(o.cantidad),1)]),k("p",null,[e[37]||(e[37]=k("strong",null,"Precio:",-1)),m(" $"+N(o.precio),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])):Y("",!0)]),_:1})]),_:1}),l(Se,{modelValue:X.value,"onUpdate:modelValue":e[15]||(e[15]=o=>X.value=o),"max-width":"600px"},{default:t(()=>[l(Q,null,{default:t(()=>[l(ro,{class:"text-h5 pa-4"},{default:t(()=>[l(D,{class:"mr-2",color:"primary"},{default:t(()=>e[38]||(e[38]=[m("mdi-account-plus")])),_:1}),e[39]||(e[39]=m(" Crear Cliente Nuevo "))]),_:1}),l(L),l(go,{class:"pa-4"},{default:t(()=>[l(Po,{type:"info",variant:"tonal",class:"mb-4"},{default:t(()=>e[40]||(e[40]=[m(" Este cliente se guardarÃ¡ en tu base de datos local. Para facturar, deberÃ¡s seleccionar un cliente sincronizado con Bsale. ")])),_:1}),l(Me,{ref:"formCliente"},{default:t(()=>[l(M,null,{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(q,{modelValue:A.value.razon_social,"onUpdate:modelValue":e[8]||(e[8]=o=>A.value.razon_social=o),label:"RazÃ³n Social / Nombre *",rules:[o=>!!o||"RazÃ³n social es requerida"],required:"",outlined:""},null,8,["modelValue","rules"])]),_:1}),l(C,{cols:"12",md:"6"},{default:t(()=>[l(q,{modelValue:A.value.identification,"onUpdate:modelValue":e[9]||(e[9]=o=>A.value.identification=o),label:"RUT",outlined:"",hint:"Formato: 12345678-9"},null,8,["modelValue"])]),_:1}),l(C,{cols:"12",md:"6"},{default:t(()=>[l(q,{modelValue:A.value.email,"onUpdate:modelValue":e[10]||(e[10]=o=>A.value.email=o),label:"Email",type:"email",outlined:""},null,8,["modelValue"])]),_:1}),l(C,{cols:"12",md:"6"},{default:t(()=>[l(q,{modelValue:A.value.phone,"onUpdate:modelValue":e[11]||(e[11]=o=>A.value.phone=o),label:"TelÃ©fono",outlined:""},null,8,["modelValue"])]),_:1}),l(C,{cols:"12",md:"6"},{default:t(()=>[l(q,{modelValue:A.value.ciudad,"onUpdate:modelValue":e[12]||(e[12]=o=>A.value.ciudad=o),label:"Ciudad",outlined:""},null,8,["modelValue"])]),_:1}),l(C,{cols:"12"},{default:t(()=>[l(q,{modelValue:A.value.address,"onUpdate:modelValue":e[13]||(e[13]=o=>A.value.address=o),label:"DirecciÃ³n",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),l(L),l(Oe,{class:"pa-4"},{default:t(()=>[l(qe),l(S,{color:"grey",text:"",onClick:e[14]||(e[14]=o=>X.value=!1)},{default:t(()=>e[41]||(e[41]=[m(" Cancelar ")])),_:1}),l(S,{color:"primary",onClick:Zo},{default:t(()=>[l(D,{left:""},{default:t(()=>e[42]||(e[42]=[m("mdi-content-save")])),_:1}),e[43]||(e[43]=m(" Guardar Cliente "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ua=ve(We,[["__scopeId","data-v-baf74aa4"]]);export{Ua as default};
