import{d as Le}from"./debounce-DeDBwGcv.js";import{ab as Be,ac as Oe,ai as Ke,r as U,ay as ne,aA as Pe,X as w,aj as He,a_ as Ge,w as G,aD as Se,ad as Ze,b as l,q as le,as as Qe,a$ as We,b0 as Xe,F as O,Z as ie,b1 as Ye,b2 as Je,aO as eo,t as C,b3 as oo,aY as lo,E as ao,ar as H,f as g,e as r,k as to,o as v,c as ae,a3 as de,i as io,m as S,d as B,v as te,aZ as ro}from"./index-BvfQPV0N.js";/* empty css                                                                */import{_ as uo}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as no,a as so,c as co,b as mo}from"./VistaBayWindow-CuLiholl.js";import"./Shapes-DW6qcN1k.js";import{_ as po}from"./VistaVentanaCorredera-DbOePJmS.js";import{V as fo}from"./VContainer-9im5ZaQE.js";import{V as we,b as Vo,d as Ue}from"./VCard-CinWIJLb.js";import{V as ve}from"./VDivider-BpWSazon.js";import{V as $,a as d}from"./VRow-D3aY5PKO.js";import{u as vo,m as _o,a as bo,V as y}from"./VSelect-BqlDueew.js";import{V as F,m as ho}from"./VTextField-B4VmNjS8.js";import{u as yo,m as go}from"./filter-DlAMle0g.js";import{u as Co}from"./VInput-BHIiLFNN.js";import{f as Uo}from"./forwardRefs-DWGaNmQL.js";import{e as ko,t as se,V as jo,a as Ie}from"./VList-Bx4XFBEr.js";import{m as xo}from"./transition-G8jXjCNh.js";import{V as zo}from"./VMenu-Np42M1LE.js";import{V as Po}from"./VCheckboxBtn-0m9q25Ip.js";import{V as So}from"./VAvatar-CAVw4-C3.js";import{V as wo}from"./VChip-B_9e-xcw.js";import{V as Io}from"./VTextarea-BGi4UPuF.js";import{V as De}from"./VSwitch-C1VPwLYF.js";import{V as qe,a as _e}from"./VRadioGroup-C1y_l-M1.js";import{V as ke}from"./VAlert-BhOg_jqb.js";import{V as Do}from"./VDataTable-LWZ6A2SJ.js";/* empty css              */import"./VCardText-BS-UVcGE.js";import"./VImg-BgC9H45U.js";import"./VOverlay-9DZnkhUb.js";import"./VSelectionControl-Dp-XQzR0.js";import"./VTable-D5XG77cT.js";function qo(t,x,X){if(x==null)return t;if(Array.isArray(x))throw new Error("Multiple matches is not implemented");return typeof x=="number"&&~x?l(O,null,[l("span",{class:"v-combobox__unmask"},[t.substr(0,x)]),l("span",{class:"v-combobox__mask"},[t.substr(x,X)]),l("span",{class:"v-combobox__unmask"},[t.substr(x+X)])]):t}const Ao=Oe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...go({filterKeys:["title"]}),..._o({hideNoData:!0,returnObject:!0}),...Qe(ho({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...xo({transition:!1})},"VCombobox"),Mo=Be()({name:"VCombobox",props:Ao(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,x){var je;let{emit:X,slots:u}=x;const{t:R}=Ke(),T=U(),z=ne(!1),I=ne(!0),K=ne(!1),Y=U(),q=U(),Z=Pe(t,"menu"),V=w({get:()=>Z.value,set:i=>{var c;Z.value&&!i&&((c=Y.value)!=null&&c.ΨopenChildren.size)||(Z.value=i)}}),_=ne(-1);let J=!1;const re=w(()=>{var i;return(i=T.value)==null?void 0:i.color}),ce=w(()=>V.value?t.closeText:t.openText),{items:be,transformIn:he,transformOut:ue}=ko(t),{textColorClasses:ye,textColorStyles:ge}=He(re),p=Pe(t,"modelValue",[],i=>he(Ge(i)),i=>{const c=ue(i);return t.multiple?c:c[0]??null}),ee=Co(t),oe=w(()=>!!(t.chips||u.chip)),A=w(()=>oe.value||!!u.selection),E=ne(!t.multiple&&!A.value?((je=p.value[0])==null?void 0:je.title)??"":""),b=w({get:()=>E.value,set:i=>{var c;if(E.value=i??"",!t.multiple&&!A.value&&(p.value=[se(t,i)]),i&&t.multiple&&((c=t.delimiters)!=null&&c.length)){const h=i.split(new RegExp(`(?:${t.delimiters.join("|")})+`));h.length>1&&(h.forEach(m=>{m=m.trim(),m&&L(se(t,m))}),E.value="")}i||(_.value=-1),I.value=!i}}),Ce=w(()=>typeof t.counterValue=="function"?t.counterValue(p.value):typeof t.counterValue=="number"?t.counterValue:t.multiple?p.value.length:b.value.length);G(E,i=>{J?Se(()=>J=!1):z.value&&!V.value&&(V.value=!0),X("update:search",i)}),G(p,i=>{var c;!t.multiple&&!A.value&&(E.value=((c=i[0])==null?void 0:c.title)??"")});const{filteredItems:n,getMatches:o}=yo(t,be,()=>I.value?"":b.value),e=w(()=>t.hideSelected?n.value.filter(i=>!p.value.some(c=>c.value===i.value)):n.value),s=w(()=>p.value.map(i=>i.value)),a=w(()=>{var c;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&b.value===((c=e.value[0])==null?void 0:c.title))&&e.value.length>0&&!I.value&&!K.value}),k=w(()=>t.hideNoData&&!e.value.length||ee.isReadonly.value||ee.isDisabled.value),N=U(),me=vo(N,T);function pe(i){J=!0,t.openOnClear&&(V.value=!0)}function j(){k.value||(V.value=!0)}function Ae(i){k.value||(z.value&&(i.preventDefault(),i.stopPropagation()),V.value=!V.value)}function Me(i){var c;oo(i)&&((c=T.value)==null||c.focus())}function Fe(i){var m;if(We(i)||ee.isReadonly.value)return;const c=T.value.selectionStart,h=p.value.length;if((_.value>-1||["Enter","ArrowDown","ArrowUp"].includes(i.key))&&i.preventDefault(),["Enter","ArrowDown"].includes(i.key)&&(V.value=!0),["Escape"].includes(i.key)&&(V.value=!1),["Enter","Escape","Tab"].includes(i.key)&&(a.value&&["Enter","Tab"].includes(i.key)&&!p.value.some(f=>{let{value:M}=f;return M===e.value[0].value})&&L(n.value[0]),I.value=!0),i.key==="ArrowDown"&&a.value&&((m=N.value)==null||m.focus("next")),i.key==="Enter"&&b.value&&(L(se(t,b.value)),A.value&&(E.value="")),["Backspace","Delete"].includes(i.key)){if(!t.multiple&&A.value&&p.value.length>0&&!b.value)return L(p.value[0],!1);if(~_.value){const f=_.value;L(p.value[_.value],!1),_.value=f>=h-1?h-2:f}else i.key==="Backspace"&&!b.value&&(_.value=h-1)}if(t.multiple){if(i.key==="ArrowLeft"){if(_.value<0&&c>0)return;const f=_.value>-1?_.value-1:h-1;p.value[f]?_.value=f:(_.value=-1,T.value.setSelectionRange(b.value.length,b.value.length))}if(i.key==="ArrowRight"){if(_.value<0)return;const f=_.value+1;p.value[f]?_.value=f:(_.value=-1,T.value.setSelectionRange(0,0))}}}function Te(){var i;t.eager&&((i=q.value)==null||i.calculateVisibleItems())}function $e(){var i;z.value&&(I.value=!0,(i=T.value)==null||i.focus())}function L(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!i||i.props.disabled))if(t.multiple){const h=p.value.findIndex(f=>t.valueComparator(f.value,i.value)),m=c??!~h;if(~h){const f=m?[...p.value,i]:[...p.value];f.splice(h,1),p.value=f}else m&&(p.value=[...p.value,i]);t.clearOnSelect&&(b.value="")}else{const h=c!==!1;p.value=h?[i]:[],E.value=h&&!A.value?i.title:"",Se(()=>{V.value=!1,I.value=!0})}}function Re(i){z.value=!0,setTimeout(()=>{K.value=!0})}function Ee(i){K.value=!1}function Ne(i){(i==null||i===""&&!t.multiple&&!A.value)&&(p.value=[])}return G(z,(i,c)=>{if(!(i||i===c)&&(_.value=-1,V.value=!1,b.value)){if(t.multiple){L(se(t,b.value));return}if(!A.value)return;p.value.some(h=>{let{title:m}=h;return m===b.value})?E.value="":L(se(t,b.value))}}),G(V,()=>{if(!t.hideSelected&&V.value&&p.value.length){const i=e.value.findIndex(c=>p.value.some(h=>t.valueComparator(h.value,c.value)));Xe&&window.requestAnimationFrame(()=>{var c;i>=0&&((c=q.value)==null||c.scrollToIndex(i))})}}),G(()=>t.items,(i,c)=>{V.value||z.value&&!c.length&&i.length&&(V.value=!0)}),Ze(()=>{const i=!!(!t.hideNoData||e.value.length||u["prepend-item"]||u["append-item"]||u["no-data"]),c=p.value.length>0,h=F.filterProps(t);return l(F,le({ref:T},h,{modelValue:b.value,"onUpdate:modelValue":[m=>b.value=m,Ne],focused:z.value,"onUpdate:focused":m=>z.value=m,validationValue:p.externalValue,counterValue:Ce.value,dirty:c,class:["v-combobox",{"v-combobox--active-menu":V.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!A.value,"v-combobox--selecting-index":_.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:ee.isReadonly.value,placeholder:c?void 0:t.placeholder,"onClick:clear":pe,"onMousedown:control":j,onKeydown:Fe}),{...u,default:()=>l(O,null,[l(zo,le({ref:Y,modelValue:V.value,"onUpdate:modelValue":m=>V.value=m,activator:"parent",contentClass:"v-combobox__content",disabled:k.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:Te,onAfterLeave:$e},t.menuProps),{default:()=>[i&&l(jo,le({ref:N,selected:s.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:m=>m.preventDefault(),onKeydown:Me,onFocusin:Re,onFocusout:Ee,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},me,t.listProps),{default:()=>{var m,f,M;return[(m=u["prepend-item"])==null?void 0:m.call(u),!e.value.length&&!t.hideNoData&&(((f=u["no-data"])==null?void 0:f.call(u))??l(Ie,{title:R(t.noDataText)},null)),l(bo,{ref:q,renderless:!0,items:e.value},{default:Q=>{var ze;let{item:P,index:W,itemRef:D}=Q;const xe=le(P.props,{ref:D,key:W,active:a.value&&W===0?!0:void 0,onClick:()=>L(P,null)});return((ze=u.item)==null?void 0:ze.call(u,{item:P,index:W,props:xe}))??l(Ie,le(xe,{role:"option"}),{prepend:fe=>{let{isSelected:Ve}=fe;return l(O,null,[t.multiple&&!t.hideSelected?l(Po,{key:P.value,modelValue:Ve,ripple:!1,tabindex:"-1"},null):void 0,P.props.prependAvatar&&l(So,{image:P.props.prependAvatar},null),P.props.prependIcon&&l(ie,{icon:P.props.prependIcon},null)])},title:()=>{var fe,Ve;return I.value?P.title:qo(P.title,(fe=o(P))==null?void 0:fe.title,((Ve=b.value)==null?void 0:Ve.length)??0)}})}}),(M=u["append-item"])==null?void 0:M.call(u)]}})]}),p.value.map((m,f)=>{function M(D){D.stopPropagation(),D.preventDefault(),L(m,!1)}const Q={"onClick:close":M,onKeydown(D){D.key!=="Enter"&&D.key!==" "||(D.preventDefault(),D.stopPropagation(),M(D))},onMousedown(D){D.preventDefault(),D.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},P=oe.value?!!u.chip:!!u.selection,W=P?Je(oe.value?u.chip({item:m,index:f,props:Q}):u.selection({item:m,index:f})):void 0;if(!(P&&!W))return l("div",{key:m.value,class:["v-combobox__selection",f===_.value&&["v-combobox__selection--selected",ye.value]],style:f===_.value?ge.value:{}},[oe.value?u.chip?l(eo,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:m.title}}},{default:()=>[W]}):l(wo,le({key:"chip",closable:t.closableChips,size:"small",text:m.title,disabled:m.props.disabled},Q),null):W??l("span",{class:"v-combobox__selection-text"},[m.title,t.multiple&&f<p.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[C(",")])])])})]),"append-inner":function(){var Q;for(var m=arguments.length,f=new Array(m),M=0;M<m;M++)f[M]=arguments[M];return l(O,null,[(Q=u["append-inner"])==null?void 0:Q.call(u,...f),(!t.hideNoData||t.items.length)&&t.menuIcon?l(ie,{class:"v-combobox__menu-icon",icon:t.menuIcon,onMousedown:Ae,onClick:Ye,"aria-label":R(ce.value),title:R(ce.value),tabindex:"-1"},null):void 0])}})}),Uo({isFocused:z,isPristine:I,menu:V,search:b,selectionIndex:_,filteredItems:n,select:L},T)}}),Fo=.45,To={__name:"index copy",setup(t){const x=U([]),X=to(),u=U({cliente_id:null,observaciones:"",material:"",color:"",tipoVidrio:"",productoVidrioProveedor:"",ventanas:[]}),R=[{id:1,nombre:"Fija"},{id:2,nombre:"Proyectante"},{id:3,nombre:"Corredera"}],T=[{id:2,nombre:"Fija"},{id:3,nombre:"Corredera Sliding"},{id:45,nombre:"Proyectante S60"}],z=U({}),I=U(!1),K=lo({cliente:null}),Y=U([]),q=U([]),Z=U([]),V=U([]),_=U([]),J=U([]),re=U(""),ce=U(!1),be=U(0);U({firstName:"",lastName:"",company:"",code:"",email:"",phone:"",city:"",municipality:"",address:"",activity:""}),w(()=>V.value.flatMap(n=>n.colores_por_proveedor.map(o=>{var e;return{id:`${n.id}-${o.proveedor_id}`,producto_id:n.id,proveedor_id:o.proveedor_id,nombre:`${n.nombre} (${((e=o.proveedor)==null?void 0:e.nombre)||"Proveedor desconocido"})`}})));const he=w(()=>{const n=u.value.tipoVidrio;return V.value.filter(o=>o.tipo_producto_id===n).flatMap(o=>o.colores_por_proveedor.map(e=>{var s;return{id:e.id,producto_id:o.id,proveedor_id:e.proveedor_id,nombre:`${o.nombre} (${((s=e.proveedor)==null?void 0:s.nombre)||"Proveedor desconocido"})`}}))});ao(async()=>{const[n,o,e,s,a,k]=await Promise.all([H.get("/api/tipos_material"),H.get("/api/colores"),H.get("/api/tipos_producto"),H.get("/api/productos"),H.get("/api/tipos_ventana"),H.get("/api/clientes")]);Y.value=n.data,q.value=o.data,Z.value=e.data.filter(N=>[1,2].includes(N.id)),V.value=s.data.filter(N=>[1,2].includes(N.tipo_producto_id)),_.value=a.data,J.value=k.data});const ue=n=>(n=parseInt(n),V.value.flatMap(o=>o.colores_por_proveedor.map(e=>({id:e.id,producto_id:o.id,proveedor_id:e.proveedor_id}))).find(o=>o.id===n)),ye=n=>{const o=n.tipoVidrio??u.value.tipoVidrio;return V.value.filter(e=>e.tipo_producto_id===o).flatMap(e=>e.colores_por_proveedor.map(s=>{var a;return{id:s.id,producto_id:e.id,proveedor_id:s.proveedor_id,nombre:`${e.nombre} (${((a=s.proveedor)==null?void 0:a.nombre)||"Proveedor desconocido"})`}}))},ge=w(()=>{const n=re.value.toLowerCase(),o=new Set;return J.value.filter(e=>{var s;return(s=e.razon_social)==null?void 0:s.toLowerCase().includes(n)}).filter(e=>o.has(e.id)?!1:(o.add(e.id),!0)).map((e,s)=>{var a;return{uid:`${e.id}-${s}`,id:e.id,razon_social:(a=e.razon_social)==null?void 0:a.trim(),raw:e}})}),p=(n=null)=>{const e={...{tipo:null,ancho:null,alto:null,cantidad:1,material:u.value.material,color:u.value.color,tipoVidrio:u.value.tipoVidrio,productoVidrioProveedor:u.value.productoVidrioProveedor??null,hojas_totales:2,hojas_moviles:2,materiales:[],costo_total:0,costo_total_unitario:0,costo:0,precio_unitario:0,precio:0,hoja1AlFrente:!0,tipoVentanaIzquierda:{compuesta:!1,partes:[{tipo:null,alto:null},{tipo:null,alto:null}]},tipoVentanaDerecha:{compuesta:!1,partes:[{tipo:null,alto:null},{tipo:null,alto:null}]},tipoVentanaCentro:{tipo:null,hojas_totales:null,hojas_moviles:null,hojaMovilSeleccionada:null,hoja1AlFrente:!0},ancho_izquierda:null,ancho_centro:null,ancho_derecha:null},...n||{}};e.tipo===47&&(e.ancho_izquierda=null,e.ancho_centro=null,e.ancho_derecha=null),u.value.ventanas.push(e);const s=ue(e.productoVidrioProveedor);if(e.tipo&&e.ancho&&e.alto&&s){const a={...e,productoVidrio:s.producto_id,proveedorVidrio:s.proveedor_id,hojas_moviles:e.tipo===3||e.tipo===46?e.hojas_moviles:void 0};A(a,e)}},ee=n=>{u.value.ventanas.splice(n,1)},oe=n=>{const o=n.material??u.value.material;return _.value.filter(e=>e.material_id===o)},A=Le(async(n,o)=>{if(!n.productoVidrio||!n.proveedorVidrio){console.warn("⚠️ Faltan datos en el payload para calcular materiales:",n);return}try{const e=await H.post("/api/cotizador/calcular-materiales",n);o.costo_total_unitario=e.data.costo_unitario;const s=o.cantidad>0?o.cantidad:1;o.costo_total=e.data.costo_unitario*o.cantidad,o.precio=Math.ceil(o.costo_total/(1-Fo)),o.materiales=e.data.materiales}catch(e){console.error("❌ Error al calcular materiales",e),o.costo_total=0,o.materiales=[]}},1e3);G(()=>u.value.ventanas,n=>{n.forEach(o=>{G(()=>[o.tipo,o.ancho,o.alto,o.cantidad,o.material,o.color,o.tipoVidrio,o.productoVidrioProveedor,o.hojas_totales,o.hojas_moviles],()=>{const e=[];o.tipo||e.push("tipo_ventana_id faltante"),o.ancho||e.push("ancho faltante"),o.alto||e.push("alto faltante"),(!o.cantidad||o.cantidad<=0)&&e.push("cantidad inválida"),o.productoVidrioProveedor||e.push("productoVidrioProveedor faltante");const s=ue(o.productoVidrioProveedor);if(s||e.push(`relación producto-proveedor no encontrada (ID: ${o.productoVidrioProveedor})`),e.length>0){console.warn(`❌ No se puede recalcular la ventana (tipo ${o.tipo}):`,e.join(", "));return}const a={...o,productoVidrio:s.producto_id,proveedorVidrio:s.proveedor_id,hojas_moviles:o.tipo===3||o.tipo===46?o.hojas_moviles:void 0};console.log("✅ Recalculando ventana:",a),A(a,o)},{deep:!0,immediate:!1})})},{deep:!0}),G(()=>K.cliente,n=>{n!=null&&n.raw&&console.log("✅ Cliente seleccionado:",n.raw)});const E=()=>{ce.value=!0},b=async()=>{const n=[];for(let o=0;o<x.value.length;o++){const e=x.value[o];if(e!=null&&e.exportarImagen){const s=e.exportarImagen();n.push(s)}else n.push(null)}return n},Ce=async()=>{var n;I.value=!0;try{const o=await b(),e=(n=K.cliente)==null?void 0:n.raw;if(!e||u.value.ventanas.length===0){alert("Debes seleccionar un cliente y agregar al menos una ventana");return}const s={cliente_id:e.id,vendedor_id:1,fecha:new Date().toISOString().split("T")[0],estado_cotizacion_id:u.value.estado_cotizacion_id??1,observaciones:u.value.observaciones,imagenes_ventanas:o,ventanas:u.value.ventanas.map(a=>{const k=ue(a.productoVidrioProveedor);return{tipo_ventana_id:a.tipo,ancho:a.ancho,alto:a.alto,cantidad:a.cantidad,color_id:a.color,producto_vidrio_proveedor_id:a.productoVidrioProveedor,producto_id:k==null?void 0:k.producto_id,proveedor_id:k==null?void 0:k.proveedor_id,costo:a.costo_total||a.costo||0,costo_unitario:a.costo_unitario||0,precio:a.precio||0,precio_unitario:a.precio_unitario||0,tipo_ventana_izquierda:a.tipoVentanaIzquierda??null,tipo_ventana_centro:a.tipoVentanaCentro??null,tipo_ventana_derecha:a.tipoVentanaDerecha??null,ancho_izquierda:a.ancho_izquierda??null,ancho_centro:a.ancho_centro??null,ancho_derecha:a.ancho_derecha??null}})};await H.post("api/cotizaciones",s),alert("Cotización guardada correctamente"),X.push({name:"cotizaciones"})}catch(o){console.error("Error al guardar cotización:",o),alert("Error al guardar la cotización")}finally{I.value=!1}};return(n,o)=>(v(),g(fo,{fluid:""},{default:r(()=>[l(we,{class:"pa-6",elevation:"2"},{default:r(()=>[l(Vo,{class:"text-h5 mb-4"},{default:r(()=>o[7]||(o[7]=[C("Nueva Cotización")])),_:1}),l(Ue,{class:"text-h5"},{default:r(()=>o[8]||(o[8]=[C("Datos generales")])),_:1}),l(ve,{class:"mb-4"}),l($,{dense:""},{default:r(()=>[l(d,{cols:"6",md:"4"},{default:r(()=>[l($,{"no-gutters":"",align:"center"},{default:r(()=>[l(d,null,{default:r(()=>[(v(),g(Mo,{modelValue:K.cliente,"onUpdate:modelValue":o[0]||(o[0]=e=>K.cliente=e),rules:[e=>!!e||"Selecciona un cliente"],search:re.value,"onUpdate:search":o[1]||(o[1]=e=>re.value=e),items:ge.value,"item-title":"razon_social","item-value":"uid",label:"Cliente","return-object":"",clearable:"","menu-props":{virtualScroll:!1},key:be.value,outlined:"",color:"primary"},null,8,["modelValue","rules","search","items"]))]),_:1}),l(d,{cols:"auto"},{default:r(()=>[l(de,{icon:"",color:"primary",onClick:E,class:"ml-2"},{default:r(()=>[l(ie,null,{default:r(()=>o[9]||(o[9]=[C("mdi-plus")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l($,{dense:""},{default:r(()=>[l(d,{cols:"6"},{default:r(()=>[l(Io,{modelValue:u.value.observaciones,"onUpdate:modelValue":o[2]||(o[2]=e=>u.value.observaciones=e),label:"Observaciones",outlined:"",color:"primary","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l($,{dense:"",class:"mb-4"},{default:r(()=>[l(d,{cols:"12",md:"6"},{default:r(()=>[l(y,{modelValue:u.value.material,"onUpdate:modelValue":o[3]||(o[3]=e=>u.value.material=e),items:Y.value,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",md:"6"},{default:r(()=>[l(y,{modelValue:u.value.color,"onUpdate:modelValue":o[4]||(o[4]=e=>u.value.color=e),items:q.value,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(Ue,{class:"text-h5"},{default:r(()=>o[10]||(o[10]=[C("Vidrio por defecto")])),_:1}),l(ve,{class:"mb-4"}),l($,{dense:"",class:"mb-4"},{default:r(()=>[l(d,{cols:"12",sm:"6"},{default:r(()=>[l(y,{modelValue:u.value.tipoVidrio,"onUpdate:modelValue":o[5]||(o[5]=e=>u.value.tipoVidrio=e),items:Z.value,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",sm:"6"},{default:r(()=>[l(y,{modelValue:u.value.productoVidrioProveedor,"onUpdate:modelValue":o[6]||(o[6]=e=>u.value.productoVidrioProveedor=e),items:he.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(Ue,{class:"text-h5"},{default:r(()=>o[11]||(o[11]=[C("Ventanas")])),_:1}),l(ve,{class:"mb-4"}),(v(!0),ae(O,null,io(u.value.ventanas,(e,s)=>(v(),ae("div",{key:s,class:"mb-4"},[l(we,{class:"pa-4",outlined:""},{default:r(()=>[l($,{dense:""},{default:r(()=>[l(d,{cols:"6",sm:"4"},{default:r(()=>[l(y,{modelValue:e.tipo,"onUpdate:modelValue":a=>e.tipo=a,items:oe(e),"item-title":"nombre","item-value":"id",label:"Tipo de ventana",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(F,{modelValue:e.ancho,"onUpdate:modelValue":a=>e.ancho=a,modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(F,{modelValue:e.alto,"onUpdate:modelValue":a=>e.alto=a,modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(F,{modelValue:e.cantidad,"onUpdate:modelValue":a=>e.cantidad=a,label:"Cantidad",type:"number",min:"1",rules:[a=>a>0||"Debe ser mayor a 0"],outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(y,{modelValue:e.material,"onUpdate:modelValue":a=>e.material=a,items:Y.value,"item-title":"nombre","item-value":"id",label:"Material (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(y,{modelValue:e.color,"onUpdate:modelValue":a=>e.color=a,items:q.value,"item-title":"nombre","item-value":"id",label:"Color (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(y,{modelValue:e.tipoVidrio,"onUpdate:modelValue":a=>e.tipoVidrio=a,items:Z.value,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(d,{cols:"12",sm:"6"},{default:r(()=>[l(y,{modelValue:e.productoVidrioProveedor,"onUpdate:modelValue":a=>e.productoVidrioProveedor=a,items:ye(e),"item-title":"nombre","item-value":"id",label:"Producto de vidrio (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e.tipo===47?(v(),g($,{key:0},{default:r(()=>[l(d,{cols:"4"},{default:r(()=>[l(F,{modelValue:e.ancho_izquierda,"onUpdate:modelValue":a=>e.ancho_izquierda=a,label:"Ancho izquierda (mm)",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"4"},{default:r(()=>[l(F,{modelValue:e.ancho_centro,"onUpdate:modelValue":a=>e.ancho_centro=a,label:"Ancho centro (mm)",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"4"},{default:r(()=>[l(F,{modelValue:e.ancho_derecha,"onUpdate:modelValue":a=>e.ancho_derecha=a,label:"Ancho derecha (mm)",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):S("",!0),e.tipo===47?(v(),g(d,{key:1,cols:"12"},{default:r(()=>[l(De,{modelValue:e.tipoVentanaIzquierda.compuesta,"onUpdate:modelValue":a=>e.tipoVentanaIzquierda.compuesta=a,label:"¿Ventana izquierda compuesta?",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):S("",!0),e.tipo===47?(v(),g(d,{key:2,cols:"12"},{default:r(()=>[l(De,{modelValue:e.tipoVentanaDerecha.compuesta,"onUpdate:modelValue":a=>e.tipoVentanaDerecha.compuesta=a,label:"¿Ventana derecha compuesta?",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):S("",!0),e.tipo===47?(v(),ae(O,{key:3},[l($,{dense:""},{default:r(()=>[e.tipoVentanaIzquierda.compuesta?(v(),ae(O,{key:0},[l(d,{cols:"12"},{default:r(()=>o[12]||(o[12]=[B("h4",null,"Ventana izquierda compuesta",-1)])),_:1}),l(d,{cols:"12",sm:"6"},{default:r(()=>[o[13]||(o[13]=B("h5",null,"Parte superior",-1)),l(y,{modelValue:e.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":a=>e.tipoVentanaIzquierda.partes[0].tipo=a,items:R,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),l(F,{modelValue:e.tipoVentanaIzquierda.partes[0].alto,"onUpdate:modelValue":a=>e.tipoVentanaIzquierda.partes[0].alto=a,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"12",sm:"6"},{default:r(()=>[o[14]||(o[14]=B("h5",null,"Parte inferior",-1)),l(y,{modelValue:e.tipoVentanaIzquierda.partes[1].tipo,"onUpdate:modelValue":a=>e.tipoVentanaIzquierda.partes[1].tipo=a,items:R,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),l(F,{modelValue:e.tipoVentanaIzquierda.partes[1].alto,"onUpdate:modelValue":a=>e.tipoVentanaIzquierda.partes[1].alto=a,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):(v(),g(d,{key:1,cols:"4"},{default:r(()=>[l(y,{modelValue:e.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":a=>e.tipoVentanaIzquierda.partes[0].tipo=a,items:R,"item-title":"nombre","item-value":"id",label:"Tipo de ventana izquierda",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024),l($,{dense:""},{default:r(()=>[l(d,{cols:"4"},{default:r(()=>[l(y,{modelValue:e.tipoVentanaCentro.tipo,"onUpdate:modelValue":a=>e.tipoVentanaCentro.tipo=a,items:T,"item-title":"nombre","item-value":"id",label:"Tipo de ventana centro",outlined:"",color:"primary",rules:[a=>!!a||"Seleccione un tipo"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e.tipoVentanaCentro&&[3,46].includes(e.tipoVentanaCentro.tipo)?(v(),ae(O,{key:0},[l(d,{cols:"6",sm:"3"},{default:r(()=>[l(y,{modelValue:e.tipoVentanaCentro.hojas_totales,"onUpdate:modelValue":a=>e.tipoVentanaCentro.hojas_totales=a,items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(y,{modelValue:e.tipoVentanaCentro.hojas_moviles,"onUpdate:modelValue":a=>e.tipoVentanaCentro.hojas_moviles=a,items:[1,2,3,4],label:"Hojas móviles",disabled:!e.tipoVentanaCentro.hojas_totales,rules:[a=>!a||a<=e.tipoVentanaCentro.hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","disabled","rules"])]),_:2},1024),e.tipoVentanaCentro.hojas_moviles===1?(v(),g(d,{key:0,cols:"12",sm:"6"},{default:r(()=>[l(qe,{modelValue:e.tipoVentanaCentro.hojaMovilSeleccionada,"onUpdate:modelValue":a=>e.tipoVentanaCentro.hojaMovilSeleccionada=a,row:"",label:"Selecciona la hoja que se mueve"},{default:r(()=>[l(_e,{label:"Mover hoja izquierda (1)",value:1}),l(_e,{label:"Mover hoja derecha (2)",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)):S("",!0)],64)):S("",!0)]),_:2},1024),l($,{dense:""},{default:r(()=>[e.tipoVentanaDerecha.compuesta?(v(),ae(O,{key:0},[l(d,{cols:"12"},{default:r(()=>o[15]||(o[15]=[B("h4",null,"Ventana derecha compuesta",-1)])),_:1}),l(d,{cols:"12",sm:"6"},{default:r(()=>[o[16]||(o[16]=B("h5",null,"Parte superior",-1)),l(y,{modelValue:e.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":a=>e.tipoVentanaDerecha.partes[0].tipo=a,items:R,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),l(F,{modelValue:e.tipoVentanaDerecha.partes[0].alto,"onUpdate:modelValue":a=>e.tipoVentanaDerecha.partes[0].alto=a,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"12",sm:"6"},{default:r(()=>[o[17]||(o[17]=B("h5",null,"Parte inferior",-1)),l(y,{modelValue:e.tipoVentanaDerecha.partes[1].tipo,"onUpdate:modelValue":a=>e.tipoVentanaDerecha.partes[1].tipo=a,items:R,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),l(F,{modelValue:e.tipoVentanaDerecha.partes[1].alto,"onUpdate:modelValue":a=>e.tipoVentanaDerecha.partes[1].alto=a,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):(v(),g(d,{key:1,cols:"4"},{default:r(()=>[l(y,{modelValue:e.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":a=>e.tipoVentanaDerecha.partes[0].tipo=a,items:R,"item-title":"nombre","item-value":"id",label:"Tipo de ventana derecha",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024)],64)):S("",!0),[3,46].includes(e.tipo)?(v(),g($,{key:4,dense:""},{default:r(()=>[l(d,{cols:"6",sm:"3"},{default:r(()=>[l(y,{modelValue:e.hojas_totales,"onUpdate:modelValue":a=>e.hojas_totales=a,items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"6",sm:"3"},{default:r(()=>[l(y,{modelValue:e.hojas_moviles,"onUpdate:modelValue":a=>e.hojas_moviles=a,items:[1,2,3,4],label:"Hojas móviles",disabled:!e.hojas_totales,rules:[a=>!a||a<=e.hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","disabled","rules"])]),_:2},1024),e.hojas_moviles===1?(v(),g(d,{key:0,cols:"12",sm:"6"},{default:r(()=>[l(qe,{modelValue:e.hojaMovilSeleccionada,"onUpdate:modelValue":a=>e.hojaMovilSeleccionada=a,row:"",label:"Selecciona la hoja que se mueve"},{default:r(()=>[l(_e,{label:"Mover hoja izquierda (1)",value:1}),l(_e,{label:"Mover hoja derecha (2)",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)):S("",!0)]),_:2},1024)):S("",!0),l(d,{cols:"6"},{default:r(()=>{var a,k,N,me,pe;return[e.tipo===2?(v(),g(no,{key:0,ancho:e.ancho,alto:e.alto,"color-marco":((a=q.value.find(j=>j.id===e.color))==null?void 0:a.nombre)||"blanco"},null,8,["ancho","alto","color-marco"])):e.tipo===3?(v(),g(po,{key:1,ref_for:!0,ref:j=>x.value[s]=j,ancho:e.ancho,alto:e.alto,"color-marco":((k=q.value.find(j=>j.id===e.color))==null?void 0:k.nombre)||"blanco","hojas-moviles":e.hojas_moviles,"hoja-movil-seleccionada":e.hojaMovilSeleccionada,"hojas-totales":e.hojas_totales,"orden-hoja1-al-frente":e.hoja1AlFrente},null,8,["ancho","alto","color-marco","hojas-moviles","hoja-movil-seleccionada","hojas-totales","orden-hoja1-al-frente"])):S("",!0),e.tipo===45?(v(),g(so,{key:2,ancho:e.ancho,alto:e.alto,"color-marco":((N=q.value.find(j=>j.id===e.color))==null?void 0:N.nombre)||"blanco"},null,8,["ancho","alto","color-marco"])):e.tipo===46?(v(),g(co,{key:3,ref_for:!0,ref:j=>x.value[s]=j,ancho:e.ancho,alto:e.alto,"color-marco":((me=q.value.find(j=>j.id===e.color))==null?void 0:me.nombre)||"blanco","hojas-moviles":e.hojas_moviles,"hoja-movil-seleccionada":e.hojaMovilSeleccionada,"hojas-totales":e.hojas_totales,"orden-hoja1-al-frente":e.hoja1AlFrente},null,8,["ancho","alto","color-marco","hojas-moviles","hoja-movil-seleccionada","hojas-totales","orden-hoja1-al-frente"])):e.tipo===47?(v(),g(mo,{key:4,ancho:e.ancho,alto:e.alto,"color-marco":((pe=q.value.find(j=>j.id===e.color))==null?void 0:pe.nombre)||"blanco","ancho-izquierda":e.ancho_izquierda,"ancho-centro":e.ancho_centro,"ancho-derecha":e.ancho_derecha,"tipo-ventana-izquierda":e.tipoVentanaIzquierda,"tipo-ventana-centro":e.tipoVentanaCentro,"tipo-ventana-derecha":e.tipoVentanaDerecha},null,8,["ancho","alto","color-marco","ancho-izquierda","ancho-centro","ancho-derecha","tipo-ventana-izquierda","tipo-ventana-centro","tipo-ventana-derecha"])):S("",!0)]}),_:2},1024),l(d,{cols:"12"},{default:r(()=>[e.costo_total_unitario?(v(),g(ke,{key:0,type:"info",variant:"outlined",dense:"",class:"mb-2"},{default:r(()=>[o[18]||(o[18]=B("strong",null,"Costo unitario:",-1)),C(" $"+te(e.costo_total_unitario.toLocaleString()),1)]),_:2},1024)):S("",!0),e.costo_total?(v(),g(ke,{key:1,type:"info",variant:"tonal",dense:"",class:"mb-2"},{default:r(()=>[o[19]||(o[19]=B("strong",null,"Costo total de materiales:",-1)),C(" $"+te(e.costo_total.toLocaleString()),1)]),_:2},1024)):S("",!0),e.precio?(v(),g(ke,{key:2,type:"success",variant:"tonal",dense:"",class:"mt-2"},{default:r(()=>[o[20]||(o[20]=B("strong",null,"Precio sugerido:",-1)),C(" $"+te(e.precio.toLocaleString()),1)]),_:2},1024)):S("",!0),l(de,{onClick:a=>z.value[s]=!z.value[s],color:"primary",variant:"outlined"},{default:r(()=>[l(ie,{left:""},{default:r(()=>o[21]||(o[21]=[C("mdi-eye")])),_:1}),C(" "+te(z.value[s]?"Ocultar":"Ver")+" Costos ",1)]),_:2},1032,["onClick"]),z.value[s]&&e.materiales&&e.materiales.length?(v(),g(Do,{key:3,headers:[{title:"Producto",key:"nombre"},{title:"Proveedor",key:"proveedor"},{title:"Cantidad",key:"cantidad"},{title:"Unidad",key:"unidad"},{title:"Costo Unitario",key:"costo_unitario"},{title:"Costo Total",key:"costo_total"}],items:e.materiales,"items-per-page":-1,class:"elevation-1 mt-4","hide-default-footer":""},{"item.costo_unitario":r(({item:a})=>[C(" $"+te(a.costo_unitario.toLocaleString()),1)]),"item.costo_total":r(({item:a})=>[C(" $"+te(a.costo_total.toLocaleString()),1)]),_:2},1032,["items"])):S("",!0)]),_:2},1024),l(d,{cols:"12",class:"text-right"},{default:r(()=>[l(de,{color:"error",variant:"outlined",onClick:a=>ee(s)},{default:r(()=>[l(ie,{left:""},{default:r(()=>o[22]||(o[22]=[C("mdi-delete")])),_:1}),o[23]||(o[23]=C(" Quitar ventana "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),l(de,{onClick:p,color:"primary",variant:"outlined",class:"mb-4"},{default:r(()=>[l(ie,{left:""},{default:r(()=>o[24]||(o[24]=[C("mdi-plus")])),_:1}),o[25]||(o[25]=C(" Agregar ventana "))]),_:1}),l(ve,{class:"my-4"}),l(de,{color:"primary",loading:I.value,disabled:I.value,onClick:Ce},{loader:r(()=>[l(ro,{indeterminate:"",color:"white",size:"20"})]),default:r(()=>[o[26]||(o[26]=C(" Guardar Cotización "))]),_:1},8,["loading","disabled"])]),_:1})]),_:1}))}},_l=uo(To,[["__scopeId","data-v-5e189ee2"]]);export{_l as default};
