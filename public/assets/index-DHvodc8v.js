import{ci as qe,g as He,ab as $e,ac as Ke,ai as We,aG as Qe,aH as Me,X as Y,cl as Le,r as pe,w as Ge,ad as Je,aV as Ze,b as m,q as Ae,F as Ee,aI as Xe,aZ as Ye,f as ce,e as C,o as B,t as X,m as fe,c as ge,d as Z,v as _e,i as Oe,a3 as De,cg as et,ar as tt}from"./index-BAT6t6dn.js";import{V as rt}from"./VContainer-BzGFklfp.js";import{V as Te,a as he}from"./VRow-D-y_YGx3.js";import{V as nt,b as it,d as at}from"./VCard-BwJMo3Sa.js";import{V as ze}from"./VDivider-B77JXK-_.js";import{V as Pe}from"./VCardText-BzaBTWSG.js";import{V as st,a as je}from"./VRadioGroup-D0py2HUQ.js";import{V as ke}from"./VAlert-KDtKTwGG.js";import{f as ot,a as lt,b as ut,c as dt}from"./VTextField-BwzlFcri.js";import{a as ct,V as Be,m as ft}from"./VInput-CdCpa2l2.js";import{f as ht}from"./forwardRefs-DWGaNmQL.js";import{V as Ne,a as pt}from"./VChip-Cn1fsBNb.js";import{V as mt}from"./VDataTable--xW2Rabd.js";import{V as gt,a as vt}from"./VList-C2cLds-k.js";/* empty css              */import"./VAvatar-B1MGj36n.js";import"./VImg-CddH4jLD.js";import"./transition-nEvIYTAk.js";import"./VSelectionControl-C2iAaFOT.js";import"./VSelect-lk15yJVS.js";import"./VOverlay-eVUtE9Lb.js";import"./VMenu-c_WJAP6D.js";import"./VCheckboxBtn-DArM_N6A.js";import"./filter-MkpO6Exy.js";var Ue={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(c,ee){((te,k)=>{c.exports=k()})(qe,function te(){var k=typeof self<"u"?self:typeof window<"u"?window:k!==void 0?k:{},b,$=!k.document&&!!k.postMessage,z=k.IS_PAPA_WORKER||!1,O={},be=0,l={};function K(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var r=N(e);r.chunkSize=parseInt(r.chunkSize),e.step||e.chunk||(r.chunkSize=null),this._handle=new ye(r),(this._handle.streamer=this)._config=r}).call(this,t),this.parseChunk=function(e,r){var n=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<n){let g=this._config.newline;g||(i=this._config.quoteChar||'"',g=this._handle.guessLineEndings(e,i)),e=[...e.split(g).slice(n)].join(g)}this.isFirstChunk&&o(this._config.beforeFirstChunk)&&(i=this._config.beforeFirstChunk(e))!==void 0&&(e=i),this.isFirstChunk=!1,this._halted=!1;var n=this._partialLine+e,i=(this._partialLine="",this._handle.parse(n,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=i.meta.cursor,n=(this._finished||(this._partialLine=n.substring(e-this._baseIndex),this._baseIndex=e),i&&i.data&&(this._rowCount+=i.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),z)k.postMessage({results:i,workerId:l.WORKER_ID,finished:n});else if(o(this._config.chunk)&&!r){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!n||!o(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),n||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(e){o(this._config.error)?this._config.error(e):z&&this._config.error&&k.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function se(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),K.call(this,t),this._nextChunk=$?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),$||(e.onload=V(this._chunkLoaded,this),e.onerror=V(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!$),this._config.downloadRequestHeaders){var r,n=this._config.downloadRequestHeaders;for(r in n)e.setRequestHeader(r,n[r])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+i));try{e.send(this._config.downloadRequestBody)}catch(g){this._chunkError(g.message)}$&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(r){r=e.statusText||r,this._sendError(new Error(r))}}function ie(t){(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),K.call(this,t);var e,r,n=typeof FileReader<"u";this.stream=function(i){this._input=i,r=i.slice||i.webkitSlice||i.mozSlice,n?((e=new FileReader).onload=V(this._chunkLoaded,this),e.onerror=V(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var i=this._input,g=(this._config.chunkSize&&(g=Math.min(this._start+this._config.chunkSize,this._input.size),i=r.call(i,this._start,g)),e.readAsText(i,this._config.encoding));n||this._chunkLoaded({target:{result:g}})},this._chunkLoaded=function(i){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(i.target.result)},this._chunkError=function(){this._sendError(e.error)}}function re(t){var e;K.call(this,t=t||{}),this.stream=function(r){return e=r,this._nextChunk()},this._nextChunk=function(){var r,n;if(!this._finished)return r=this._config.chunkSize,e=r?(n=e.substring(0,r),e.substring(r)):(n=e,""),this._finished=!e,this.parseChunk(n)}}function ne(t){K.call(this,t=t||{});var e=[],r=!0,n=!1;this.pause=function(){K.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){K.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(i){this._input=i,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):r=!0},this._streamData=V(function(i){try{e.push(typeof i=="string"?i:i.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(g){this._streamError(g)}},this),this._streamError=V(function(i){this._streamCleanUp(),this._sendError(i)},this),this._streamEnd=V(function(){this._streamCleanUp(),n=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ye(t){var e,r,n,i,g=Math.pow(2,53),D=-g,Q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,E=0,u=0,P=!1,f=!1,v=[],s={data:[],errors:[],meta:{}};function T(_){return t.skipEmptyLines==="greedy"?_.join("").trim()==="":_.length===1&&_[0].length===0}function I(){if(s&&n&&(G("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines&&(s.data=s.data.filter(function(d){return!T(d)})),S()){let d=function(L,j){o(t.transformHeader)&&(L=t.transformHeader(L,j)),v.push(L)};if(s)if(Array.isArray(s.data[0])){for(var _=0;S()&&_<s.data.length;_++)s.data[_].forEach(d);s.data.splice(0,1)}else s.data.forEach(d)}function w(d,L){for(var j=t.header?{}:[],R=0;R<d.length;R++){var x=R,y=d[R],y=((ae,p)=>(A=>(t.dynamicTypingFunction&&t.dynamicTyping[A]===void 0&&(t.dynamicTyping[A]=t.dynamicTypingFunction(A)),(t.dynamicTyping[A]||t.dynamicTyping)===!0))(ae)?p==="true"||p==="TRUE"||p!=="false"&&p!=="FALSE"&&((A=>{if(Q.test(A)&&(A=parseFloat(A),D<A&&A<g))return 1})(p)?parseFloat(p):U.test(p)?new Date(p):p===""?null:p):p)(x=t.header?R>=v.length?"__parsed_extra":v[R]:x,y=t.transform?t.transform(y,x):y);x==="__parsed_extra"?(j[x]=j[x]||[],j[x].push(y)):j[x]=y}return t.header&&(R>v.length?G("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+R,u+L):R<v.length&&G("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+R,u+L)),j}var F;s&&(t.header||t.dynamicTyping||t.transform)&&(F=1,!s.data.length||Array.isArray(s.data[0])?(s.data=s.data.map(w),F=s.data.length):s.data=w(s.data,0),t.header&&s.meta&&(s.meta.fields=v),u+=F)}function S(){return t.header&&v.length===0}function G(_,w,F,d){_={type:_,code:w,message:F},d!==void 0&&(_.row=d),s.errors.push(_)}o(t.step)&&(i=t.step,t.step=function(_){s=_,S()?I():(I(),s.data.length!==0&&(E+=_.data.length,t.preview&&E>t.preview?r.abort():(s.data=s.data[0],i(s,h))))}),this.parse=function(_,w,F){var d=t.quoteChar||'"',d=(t.newline||(t.newline=this.guessLineEndings(_,d)),n=!1,t.delimiter?o(t.delimiter)&&(t.delimiter=t.delimiter(_),s.meta.delimiter=t.delimiter):((d=((L,j,R,x,y)=>{var ae,p,A,ve;y=y||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var we=0;we<y.length;we++){for(var le,Se=y[we],H=0,ue=0,q=0,J=(A=void 0,new W({comments:x,delimiter:Se,newline:j,preview:10}).parse(L)),me=0;me<J.data.length;me++)R&&T(J.data[me])?q++:(le=J.data[me].length,ue+=le,A===void 0?A=le:0<le&&(H+=Math.abs(le-A),A=le));0<J.data.length&&(ue/=J.data.length-q),(p===void 0||H<=p)&&(ve===void 0||ve<ue)&&1.99<ue&&(p=H,ae=Se,ve=ue)}return{successful:!!(t.delimiter=ae),bestDelimiter:ae}})(_,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=d.bestDelimiter:(n=!0,t.delimiter=l.DefaultDelimiter),s.meta.delimiter=t.delimiter),N(t));return t.preview&&t.header&&d.preview++,e=_,r=new W(d),s=r.parse(e,w,F),I(),P?{meta:{paused:!0}}:s||{meta:{paused:!1}}},this.paused=function(){return P},this.pause=function(){P=!0,r.abort(),e=o(t.chunk)?"":e.substring(r.getCharIndex())},this.resume=function(){h.streamer._halted?(P=!1,h.streamer.parseChunk(e,!0)):setTimeout(h.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,r.abort(),s.meta.aborted=!0,o(t.complete)&&t.complete(s),e=""},this.guessLineEndings=function(L,d){L=L.substring(0,1048576);var d=new RegExp(oe(d)+"([^]*?)"+oe(d),"gm"),F=(L=L.replace(d,"")).split("\r"),d=L.split(`
`),L=1<d.length&&d[0].length<F[0].length;if(F.length===1||L)return`
`;for(var j=0,R=0;R<F.length;R++)F[R][0]===`
`&&j++;return j>=F.length/2?`\r
`:"\r"}}function oe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function W(t){var e=(t=t||{}).delimiter,r=t.newline,n=t.comments,i=t.step,g=t.preview,D=t.fastMode,Q=null,U=!1,h=t.quoteChar==null?'"':t.quoteChar,E=h;if(t.escapeChar!==void 0&&(E=t.escapeChar),(typeof e!="string"||-1<l.BAD_DELIMITERS.indexOf(e))&&(e=","),n===e)throw new Error("Comment character same as delimiter");n===!0?n="#":(typeof n!="string"||-1<l.BAD_DELIMITERS.indexOf(n))&&(n=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var u=0,P=!1;this.parse=function(f,v,s){if(typeof f!="string")throw new Error("Input must be a string");var T=f.length,I=e.length,S=r.length,G=n.length,_=o(i),w=[],F=[],d=[],L=u=0;if(!f)return H();if(D||D!==!1&&f.indexOf(h)===-1){for(var j=f.split(r),R=0;R<j.length;R++){if(d=j[R],u+=d.length,R!==j.length-1)u+=r.length;else if(s)return H();if(!n||d.substring(0,G)!==n){if(_){if(w=[],ve(d.split(e)),ue(),P)return H()}else ve(d.split(e));if(g&&g<=R)return w=w.slice(0,g),H(!0)}}return H()}for(var x=f.indexOf(e,u),y=f.indexOf(r,u),ae=new RegExp(oe(E)+oe(h),"g"),p=f.indexOf(h,u);;)if(f[u]===h)for(p=u,u++;;){if((p=f.indexOf(h,p+1))===-1)return s||F.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:u}),le();if(p===T-1)return le(f.substring(u,p).replace(ae,h));if(h===E&&f[p+1]===E)p++;else if(h===E||p===0||f[p-1]!==E){x!==-1&&x<p+1&&(x=f.indexOf(e,p+1));var A=we((y=y!==-1&&y<p+1?f.indexOf(r,p+1):y)===-1?x:Math.min(x,y));if(f.substr(p+1+A,I)===e){d.push(f.substring(u,p).replace(ae,h)),f[u=p+1+A+I]!==h&&(p=f.indexOf(h,u)),x=f.indexOf(e,u),y=f.indexOf(r,u);break}if(A=we(y),f.substring(p+1+A,p+1+A+S)===r){if(d.push(f.substring(u,p).replace(ae,h)),Se(p+1+A+S),x=f.indexOf(e,u),p=f.indexOf(h,u),_&&(ue(),P))return H();if(g&&w.length>=g)return H(!0);break}F.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:u}),p++}}else if(n&&d.length===0&&f.substring(u,u+G)===n){if(y===-1)return H();u=y+S,y=f.indexOf(r,u),x=f.indexOf(e,u)}else if(x!==-1&&(x<y||y===-1))d.push(f.substring(u,x)),u=x+I,x=f.indexOf(e,u);else{if(y===-1)break;if(d.push(f.substring(u,y)),Se(y+S),_&&(ue(),P))return H();if(g&&w.length>=g)return H(!0)}return le();function ve(q){w.push(q),L=u}function we(q){var J=0;return J=q!==-1&&(q=f.substring(p+1,q))&&q.trim()===""?q.length:J}function le(q){return s||(q===void 0&&(q=f.substring(u)),d.push(q),u=T,ve(d),_&&ue()),H()}function Se(q){u=q,ve(d),d=[],y=f.indexOf(r,u)}function H(q){if(t.header&&!v&&w.length&&!U){var J=w[0],me=Object.create(null),Ie=new Set(J);let Ve=!1;for(let Ce=0;Ce<J.length;Ce++){let de=J[Ce];if(me[de=o(t.transformHeader)?t.transformHeader(de,Ce):de]){let xe,Fe=me[de];for(;xe=de+"_"+Fe,Fe++,Ie.has(xe););Ie.add(xe),J[Ce]=xe,me[de]++,Ve=!0,(Q=Q===null?{}:Q)[xe]=de}else me[de]=1,J[Ce]=de;Ie.add(de)}Ve&&console.warn("Duplicate headers found and renamed."),U=!0}return{data:w,errors:F,meta:{delimiter:e,linebreak:r,aborted:P,truncated:!!q,cursor:L+(v||0),renamedHeaders:Q}}}function ue(){i(H()),w=[],F=[]}},this.abort=function(){P=!0},this.getCharIndex=function(){return u}}function Re(t){var e=t.data,r=O[e.workerId],n=!1;if(e.error)r.userError(e.error,e.file);else if(e.results&&e.results.data){var i={abort:function(){n=!0,M(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:a,resume:a};if(o(r.userStep)){for(var g=0;g<e.results.data.length&&(r.userStep({data:e.results.data[g],errors:e.results.errors,meta:e.results.meta},i),!n);g++);delete e.results}else o(r.userChunk)&&(r.userChunk(e.results,i,e.file),delete e.results)}e.finished&&!n&&M(e.workerId,e.results)}function M(t,e){var r=O[t];o(r.userComplete)&&r.userComplete(e),r.terminate(),delete O[t]}function a(){throw new Error("Not implemented.")}function N(t){if(typeof t!="object"||t===null)return t;var e,r=Array.isArray(t)?[]:{};for(e in t)r[e]=N(t[e]);return r}function V(t,e){return function(){t.apply(e,arguments)}}function o(t){return typeof t=="function"}return l.parse=function(t,e){var r=(e=e||{}).dynamicTyping||!1;if(o(r)&&(e.dynamicTypingFunction=r,r={}),e.dynamicTyping=r,e.transform=!!o(e.transform)&&e.transform,!e.worker||!l.WORKERS_SUPPORTED)return r=null,l.NODE_STREAM_INPUT,typeof t=="string"?(t=(n=>n.charCodeAt(0)!==65279?n:n.slice(1))(t),r=new(e.download?se:re)(e)):t.readable===!0&&o(t.read)&&o(t.on)?r=new ne(e):(k.File&&t instanceof File||t instanceof Object)&&(r=new ie(e)),r.stream(t);(r=(()=>{var n;return!!l.WORKERS_SUPPORTED&&(n=(()=>{var i=k.URL||k.webkitURL||null,g=te.toString();return l.BLOB_URL||(l.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",g,")();"],{type:"text/javascript"})))})(),(n=new k.Worker(n)).onmessage=Re,n.id=be++,O[n.id]=n)})()).userStep=e.step,r.userChunk=e.chunk,r.userComplete=e.complete,r.userError=e.error,e.step=o(e.step),e.chunk=o(e.chunk),e.complete=o(e.complete),e.error=o(e.error),delete e.worker,r.postMessage({input:t,config:e,workerId:r.id})},l.unparse=function(t,e){var r=!1,n=!0,i=",",g=`\r
`,D='"',Q=D+D,U=!1,h=null,E=!1,u=((()=>{if(typeof e=="object"){if(typeof e.delimiter!="string"||l.BAD_DELIMITERS.filter(function(v){return e.delimiter.indexOf(v)!==-1}).length||(i=e.delimiter),typeof e.quotes!="boolean"&&typeof e.quotes!="function"&&!Array.isArray(e.quotes)||(r=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(U=e.skipEmptyLines),typeof e.newline=="string"&&(g=e.newline),typeof e.quoteChar=="string"&&(D=e.quoteChar),typeof e.header=="boolean"&&(n=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");h=e.columns}e.escapeChar!==void 0&&(Q=e.escapeChar+D),e.escapeFormulae instanceof RegExp?E=e.escapeFormulae:typeof e.escapeFormulae=="boolean"&&e.escapeFormulae&&(E=/^[=+\-@\t\r].*$/)}})(),new RegExp(oe(D),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return P(null,t,U);if(typeof t[0]=="object")return P(h||Object.keys(t[0]),t,U)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||h),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),P(t.fields||[],t.data||[],U);throw new Error("Unable to serialize unrecognized input");function P(v,s,T){var I="",S=(typeof v=="string"&&(v=JSON.parse(v)),typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(v)&&0<v.length),G=!Array.isArray(s[0]);if(S&&n){for(var _=0;_<v.length;_++)0<_&&(I+=i),I+=f(v[_],_);0<s.length&&(I+=g)}for(var w=0;w<s.length;w++){var F=(S?v:s[w]).length,d=!1,L=S?Object.keys(s[w]).length===0:s[w].length===0;if(T&&!S&&(d=T==="greedy"?s[w].join("").trim()==="":s[w].length===1&&s[w][0].length===0),T==="greedy"&&S){for(var j=[],R=0;R<F;R++){var x=G?v[R]:R;j.push(s[w][x])}d=j.join("").trim()===""}if(!d){for(var y=0;y<F;y++){0<y&&!L&&(I+=i);var ae=S&&G?v[y]:y;I+=f(s[w][ae],y)}w<s.length-1&&(!T||0<F&&!L)&&(I+=g)}}return I}function f(v,s){var T,I;return v==null?"":v.constructor===Date?JSON.stringify(v).slice(1,25):(I=!1,E&&typeof v=="string"&&E.test(v)&&(v="'"+v,I=!0),T=v.toString().replace(u,Q),(I=I||r===!0||typeof r=="function"&&r(v,s)||Array.isArray(r)&&r[s]||((S,G)=>{for(var _=0;_<G.length;_++)if(-1<S.indexOf(G[_]))return!0;return!1})(T,l.BAD_DELIMITERS)||-1<T.indexOf(i)||T.charAt(0)===" "||T.charAt(T.length-1)===" ")?D+T+D:T)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!$&&!!k.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=W,l.ParserHandle=ye,l.NetworkStreamer=se,l.FileStreamer=ie,l.StringStreamer=re,l.ReadableStreamStreamer=ne,k.jQuery&&((b=k.jQuery).fn.parse=function(t){var e=t.config||{},r=[];return this.each(function(g){if(!(b(this).prop("tagName").toUpperCase()==="INPUT"&&b(this).attr("type").toLowerCase()==="file"&&k.FileReader)||!this.files||this.files.length===0)return!0;for(var D=0;D<this.files.length;D++)r.push({file:this.files[D],inputElem:this,instanceConfig:b.extend({},e)})}),n(),this;function n(){if(r.length===0)o(t.complete)&&t.complete();else{var g,D,Q,U,h=r[0];if(o(t.before)){var E=t.before(h.file,h.inputElem);if(typeof E=="object"){if(E.action==="abort")return g="AbortError",D=h.file,Q=h.inputElem,U=E.reason,void(o(t.error)&&t.error({name:g},D,Q,U));if(E.action==="skip")return void i();typeof E.config=="object"&&(h.instanceConfig=b.extend(h.instanceConfig,E.config))}else if(E==="skip")return void i()}var u=h.instanceConfig.complete;h.instanceConfig.complete=function(P){o(u)&&u(P,h.file,h.inputElem),i()},l.parse(h.file,h.instanceConfig)}}function i(){r.splice(0,1),n()}}),z&&(k.onmessage=function(t){t=t.data,l.WORKER_ID===void 0&&t&&(l.WORKER_ID=t.workerId),typeof t.input=="string"?k.postMessage({workerId:l.WORKER_ID,results:l.parse(t.input,t.config),finished:!0}):(k.File&&t.input instanceof File||t.input instanceof Object)&&(t=l.parse(t.input,t.config))&&k.postMessage({workerId:l.WORKER_ID,results:t,finished:!0})}),(se.prototype=Object.create(K.prototype)).constructor=se,(ie.prototype=Object.create(K.prototype)).constructor=ie,(re.prototype=Object.create(re.prototype)).constructor=re,(ne.prototype=Object.create(K.prototype)).constructor=ne,l})})(Ue);var _t=Ue.exports;const yt=He(_t),kt=Ke({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:c=>typeof c=="boolean"||[1e3,1024].includes(Number(c))},...ft({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:c=>c.multiple?[]:null,validator:c=>Me(c).every(ee=>ee!=null&&typeof ee=="object")},...lt({clearable:!0})},"VFileInput"),bt=$e()({name:"VFileInput",inheritAttrs:!1,props:kt(),emits:{"click:control":c=>!0,"mousedown:control":c=>!0,"update:focused":c=>!0,"update:modelValue":c=>!0},setup(c,ee){let{attrs:te,emit:k,slots:b}=ee;const{t:$}=We(),z=Qe(c,"modelValue",c.modelValue,e=>Me(e),e=>!c.multiple&&Array.isArray(e)?e[0]:e),{isFocused:O,focus:be,blur:l}=ct(c),K=Y(()=>typeof c.showSize!="boolean"?c.showSize:void 0),se=Y(()=>(z.value??[]).reduce((e,r)=>{let{size:n=0}=r;return e+n},0)),ie=Y(()=>Le(se.value,K.value)),re=Y(()=>(z.value??[]).map(e=>{const{name:r="",size:n=0}=e;return c.showSize?`${r} (${Le(n,K.value)})`:r})),ne=Y(()=>{var r;const e=((r=z.value)==null?void 0:r.length)??0;return c.showSize?$(c.counterSizeString,e,ie.value):$(c.counterString,e)}),ye=pe(),oe=pe(),W=pe(),Re=Y(()=>O.value||c.active),M=Y(()=>["plain","underlined"].includes(c.variant));function a(){var e;W.value!==document.activeElement&&((e=W.value)==null||e.focus()),O.value||be()}function N(e){var r;(r=W.value)==null||r.click()}function V(e){k("mousedown:control",e)}function o(e){var r;(r=W.value)==null||r.click(),k("click:control",e)}function t(e){e.stopPropagation(),a(),Xe(()=>{z.value=[],Ye(c["onClick:clear"],e)})}return Ge(z,e=>{(!Array.isArray(e)||!e.length)&&W.value&&(W.value.value="")}),Je(()=>{const e=!!(b.counter||c.counter),r=!!(e||b.details),[n,i]=Ze(te),{modelValue:g,...D}=Be.filterProps(c),Q=ot(c);return m(Be,Ae({ref:ye,modelValue:z.value,"onUpdate:modelValue":U=>z.value=U,class:["v-file-input",{"v-file-input--chips":!!c.chips,"v-file-input--hide":c.hideInput,"v-input--plain-underlined":M.value},c.class],style:c.style,"onClick:prepend":N},n,D,{centerAffix:!M.value,focused:O.value}),{...b,default:U=>{let{id:h,isDisabled:E,isDirty:u,isReadonly:P,isValid:f}=U;return m(dt,Ae({ref:oe,"prepend-icon":c.prependIcon,onMousedown:V,onClick:o,"onClick:clear":t,"onClick:prependInner":c["onClick:prependInner"],"onClick:appendInner":c["onClick:appendInner"]},Q,{id:h.value,active:Re.value||u.value,dirty:u.value||c.dirty,disabled:E.value,focused:O.value,error:f.value===!1}),{...b,default:v=>{var I;let{props:{class:s,...T}}=v;return m(Ee,null,[m("input",Ae({ref:W,type:"file",readonly:P.value,disabled:E.value,multiple:c.multiple,name:c.name,onClick:S=>{S.stopPropagation(),P.value&&S.preventDefault(),a()},onChange:S=>{if(!S.target)return;const G=S.target;z.value=[...G.files??[]]},onFocus:a,onBlur:l},T,i),null),m("div",{class:s},[!!((I=z.value)!=null&&I.length)&&!c.hideInput&&(b.selection?b.selection({fileNames:re.value,totalBytes:se.value,totalBytesReadable:ie.value}):c.chips?re.value.map(S=>m(Ne,{key:S,size:"small",text:S},null)):re.value.join(", "))])])}})},details:r?U=>{var h,E;return m(Ee,null,[(h=b.details)==null?void 0:h.call(b,U),e&&m(Ee,null,[m("span",null,null),m(ut,{active:!!((E=z.value)!=null&&E.length),value:ne.value,disabled:c.disabled},b.counter)])])}:void 0})}),ht({},ye,oe,W)}}),wt={key:0},Ct={key:1},Et={class:"mt-1"},Rt={key:0},St={key:1},xt={key:2},Xt={__name:"index",setup(c){const ee=pe("productos"),te=pe(null),k=pe(!1),b=pe(null),$=pe(""),z=pe(""),O=pe({ready:!1,headers:[],rows:[],totalRows:0,warnings:[]}),be=Y(()=>O.value.rows.slice(0,50)),l=Y(()=>O.value.headers.map(M=>({title:M,value:M}))),K=Y(()=>ee.value==="productos"?"/api/importar-productos":"/api/importar-pcp"),se=Y(()=>ee.value==="productos"?["nombre","tipo_producto_id","largo_total","peso_por_metro","unidad_id"]:[["producto","color","proveedor","costo","codigo_proveedor","stock"],["producto_id","color_id","proveedor_id","costo","codigo_proveedor","stock"]]),ie=Y(()=>{if(!O.value.ready)return{ok:!1,missing:[]};const M=O.value.headers.map(a=>String(a).toLowerCase().trim());if(ee.value==="productos"){const a=se.value.filter(N=>!M.includes(N));return{ok:a.length===0,missing:a}}else{const[a,N]=se.value,V=a.filter(r=>!M.includes(r)),o=N.filter(r=>!M.includes(r)),t=V.length===0||o.length===0,e=t?[]:V.length<=o.length?V:o;return{ok:t,missing:e}}}),re=Y(()=>te.value&&O.value.ready&&ie.value.ok&&!k.value);function ne(){O.value={ready:!1,headers:[],rows:[],totalRows:0,warnings:[]},b.value=null,$.value=""}function ye(){te.value=null,z.value="",ne()}function oe(){if(b.value=null,$.value="",z.value="",!te.value){ne();return}W(te.value)}function W(M){ne(),yt.parse(M,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,worker:!0,complete:a=>{var t;const N=[];a.errors&&a.errors.length&&a.errors.forEach(e=>N.push(`${e.type} @row ${e.row}: ${e.message}`));const V=(((t=a.meta)==null?void 0:t.fields)||[]).map(e=>String(e).toLowerCase().trim()),o=(a.data||[]).map(e=>{const r={};for(const n in e)r[String(n).toLowerCase().trim()]=e[n];return r});O.value={ready:!0,headers:V,rows:o,totalRows:o.length,warnings:N}},error:a=>{z.value=`Error al leer CSV: ${(a==null?void 0:a.message)||a}`,ne()}})}async function Re(){var M,a,N,V;if(re.value)try{k.value=!0,$.value="",b.value=null;const o=new FormData;o.append("file",te.value);const{data:t}=await tt.post(K.value,o,{headers:{"Content-Type":"multipart/form-data"},maxBodyLength:1/0});b.value=t}catch(o){$.value=((a=(M=o==null?void 0:o.response)==null?void 0:M.data)==null?void 0:a.message)||((V=(N=o==null?void 0:o.response)==null?void 0:N.data)==null?void 0:V.error)||(o==null?void 0:o.message)||"Error al importar"}finally{k.value=!1}}return(M,a)=>(B(),ce(rt,{class:"py-6",fluid:""},{default:C(()=>[m(Te,{justify:"center"},{default:C(()=>[m(he,{cols:"12",md:"9",lg:"8"},{default:C(()=>[m(nt,{elevation:"2"},{default:C(()=>[m(it,{class:"text-h6"},{default:C(()=>a[2]||(a[2]=[X(" Importar datos (CSV) con previsualización ")])),_:1}),m(at,{class:"text-body-2"},{default:C(()=>a[3]||(a[3]=[X(" 1) Selecciona tipo · 2) Carga CSV · 3) Revisa vista previa · 4) Importa ")])),_:1}),m(ze),m(Pe,null,{default:C(()=>[m(Te,{dense:""},{default:C(()=>{var N,V,o;return[m(he,{cols:"12"},{default:C(()=>[m(st,{modelValue:ee.value,"onUpdate:modelValue":a[0]||(a[0]=t=>ee.value=t),inline:"",onChange:ne},{default:C(()=>[m(je,{label:"Productos",value:"productos"}),m(je,{label:"Producto-Color-Proveedor",value:"pcp"})]),_:1},8,["modelValue"])]),_:1}),m(he,{cols:"12"},{default:C(()=>[m(ke,{type:"info",variant:"tonal",density:"comfortable",class:"mb-2"},{default:C(()=>[ee.value==="productos"?(B(),ge("div",wt,a[4]||(a[4]=[Z("strong",null,"Columnas requeridas (con cabecera):",-1),Z("code",null,"nombre,tipo_producto_id,largo_total,peso_por_metro,unidad_id",-1)]))):(B(),ge("div",Ct,a[5]||(a[5]=[Z("strong",null,"Elige uno de los dos formatos (con cabecera):",-1),Z("div",{class:"text-caption"},[Z("em",null,"Por nombres:"),Z("code",null,"producto,color,proveedor,costo,codigo_proveedor,stock")],-1),Z("div",{class:"text-caption"},[Z("em",null,"Por IDs:"),Z("code",null,"producto_id,color_id,proveedor_id,costo,codigo_proveedor,stock")],-1)])))]),_:1})]),_:1}),m(he,{cols:"12"},{default:C(()=>[m(bt,{modelValue:te.value,"onUpdate:modelValue":a[1]||(a[1]=t=>te.value=t),label:"Archivo CSV",accept:".csv,.txt","show-size":!0,clearable:"","prepend-icon":"mdi-file-delimited-outline",disabled:k.value,"error-messages":z.value,onChange:oe},null,8,["modelValue","disabled","error-messages"])]),_:1}),O.value.ready?(B(),ce(he,{key:0,cols:"12"},{default:C(()=>[ie.value.ok?fe("",!0):(B(),ce(ke,{key:0,type:"warning",variant:"tonal",class:"mb-2"},{default:C(()=>[a[6]||(a[6]=X(" Faltan columnas requeridas: ")),Z("strong",null,_e(ie.value.missing.join(", ")),1)]),_:1})),m(ke,{type:"info",variant:"tonal",class:"mb-2"},{default:C(()=>[a[7]||(a[7]=X(" Filas totales detectadas: ")),Z("strong",null,_e(O.value.totalRows.toLocaleString()),1),X(". Mostrando las primeras "+_e(be.value.length)+". ",1)]),_:1}),m(pt,{class:"mb-2",column:""},{default:C(()=>[(B(!0),ge(Ee,null,Oe(O.value.headers,(t,e)=>(B(),ce(Ne,{key:e,size:"small",class:"ma-1",color:"primary",variant:"tonal"},{default:C(()=>[X(_e(t),1)]),_:2},1024))),128))]),_:1}),m(mt,{headers:l.value,items:be.value,"items-per-page":10,density:"compact",class:"mb-4"},null,8,["headers","items"]),O.value.warnings.length?(B(),ce(ke,{key:1,type:"warning",variant:"tonal",class:"mb-2"},{default:C(()=>[a[8]||(a[8]=X(" Advertencias del parser (máx 10): ")),Z("ul",Et,[(B(!0),ge(Ee,null,Oe(O.value.warnings.slice(0,10),(t,e)=>(B(),ge("li",{key:e},_e(t),1))),128))])]),_:1})):fe("",!0)]),_:1})):fe("",!0),m(he,{cols:"12",class:"d-flex gap-2"},{default:C(()=>[m(De,{color:"primary",loading:k.value,disabled:!re.value,onClick:Re},{default:C(()=>a[9]||(a[9]=[X(" Confirmar e importar ")])),_:1},8,["loading","disabled"]),m(De,{variant:"text",onClick:ye,disabled:k.value&&!b.value},{default:C(()=>a[10]||(a[10]=[X(" Limpiar ")])),_:1},8,["disabled"])]),_:1}),k.value?(B(),ce(he,{key:1,cols:"12"},{default:C(()=>[m(et,{indeterminate:"",rounded:""})]),_:1})):fe("",!0),(N=b.value)!=null&&N.ok||(V=b.value)!=null&&V.message?(B(),ce(he,{key:2,cols:"12"},{default:C(()=>[m(ke,{type:"success",variant:"tonal",class:"mb-2"},{default:C(()=>{var t,e,r;return[(t=b.value)!=null&&t.message?(B(),ge("div",Rt,_e(b.value.message),1)):fe("",!0),(e=b.value)!=null&&e.ok?(B(),ge("div",St,"Importación completada.")):fe("",!0),typeof((r=b.value)==null?void 0:r.importadas)<"u"?(B(),ge("div",xt,[a[11]||(a[11]=X(" Filas importadas: ")),Z("strong",null,_e(Number(b.value.importadas).toLocaleString()),1)])):fe("",!0)]}),_:1})]),_:1})):fe("",!0),$.value?(B(),ce(he,{key:3,cols:"12"},{default:C(()=>[m(ke,{type:"error",variant:"tonal"},{default:C(()=>[X(_e($.value),1)]),_:1})]),_:1})):fe("",!0),Array.isArray((o=b.value)==null?void 0:o.errores)&&b.value.errores.length?(B(),ce(he,{key:4,cols:"12"},{default:C(()=>[m(ke,{type:"warning",variant:"tonal",class:"mb-2"},{default:C(()=>a[12]||(a[12]=[X(" Se detectaron errores en algunas filas (mostrando hasta 50): ")])),_:1}),m(gt,{density:"compact",class:"border"},{default:C(()=>[(B(!0),ge(Ee,null,Oe(b.value.errores.slice(0,50),(t,e)=>(B(),ce(vt,{key:e,title:t},null,8,["title"]))),128))]),_:1})]),_:1})):fe("",!0)]}),_:1})]),_:1}),m(ze),m(Pe,{class:"text-caption"},{default:C(()=>a[13]||(a[13]=[Z("strong",null,"Notas:",-1),X(" La previsualización no toca la base de datos. La importación real se realiza al confirmar. Si tu CSV es muy grande, considera dividirlo o aumentar límites de subida. ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Xt as default};
