import{i as x,r as N,D as T,at as k,f as F,e as t,j as S,o as v,b as l,s as i,t as n,a2 as f,Y as $,d as u,c as w,l as B}from"./index-DSpdjK4Q.js";import{V as E}from"./VContainer-lLQXYt9N.js";import{V as _,b as g}from"./VCard-DD3VMs3y.js";import{V as A}from"./VSpacer-BRiSNnp1.js";import{V as R}from"./VCardText-CB02Z-DT.js";import{V,a as m}from"./VRow-B5MPFBPQ.js";import{V as P}from"./VChip-B0f8PvnB.js";import{V as j}from"./VDataTable-6AP4BVMc.js";import{V as I}from"./VAlert-kMwHiF9I.js";/* empty css              */import"./VAvatar-wQDiyjur.js";import"./VImg-BIVIgcNF.js";import"./index-DB-2EOUy.js";import"./VSelect-V_XHzyal.js";import"./VTextField-B2Oyrwcs.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-Bu_21Wxr.js";import"./VDivider-vxdHBkin.js";import"./VOverlay-D_v1GgS9.js";import"./VMenu-DCFpGudB.js";import"./VCheckboxBtn-CgRL2_y5.js";const q={key:0},uo={__name:"cotizacion-ver",setup(M){const b=x(),C=S(),y=b.query.id,s=N(null),z=[{title:"Tipo de ventana",value:"tipo_ventana_id"},{title:"Ancho (mm)",value:"ancho"},{title:"Alto (mm)",value:"alto"},{title:"Cantidad",value:"cantidad"},{title:"Color",value:"color.nombre"},{title:"Vidrio",value:"producto_vidrio_proveedor_id"},{title:"Costo",value:"costo"},{title:"Precio Unitario",value:"precio"},{title:"Precio Total",value:"precio_total"}],D=d=>{switch(d){case"Evaluación":return"grey";case"Aprobada":return"green";case"Rechazada":return"red";default:return"blue"}},L=()=>{C.push({name:"cotizaciones"})};return T(async()=>{try{const{data:d}=await k.get(`/api/cotizaciones/${y}`);s.value=d}catch(d){console.error("Error al cargar cotización:",d)}}),(d,e)=>(v(),F(E,null,{default:t(()=>[l(_,{class:"mb-4"},{default:t(()=>[l(g,null,{default:t(()=>{var r,o;return[i(" Cotización #"+n((r=s.value)==null?void 0:r.id)+" ",1),l(f,{class:"ml-2",color:"secondary",href:`/cotizaciones/${(o=s.value)==null?void 0:o.id}/pdf`,target:"_blank"},{default:t(()=>e[0]||(e[0]=[i(" Descargar PDF ")])),_:1},8,["href"]),l(A),l(f,{icon:"",onClick:L},{default:t(()=>[l($,null,{default:t(()=>e[1]||(e[1]=[i("mdi-arrow-left")])),_:1})]),_:1})]}),_:1}),l(R,null,{default:t(()=>[l(V,null,{default:t(()=>[l(m,{cols:"12",sm:"6"},{default:t(()=>{var r,o;return[e[2]||(e[2]=u("strong",null,"Cliente:",-1)),i(" "+n((o=(r=s.value)==null?void 0:r.cliente)==null?void 0:o.nombre),1)]}),_:1}),l(m,{cols:"12",sm:"6"},{default:t(()=>{var r,o;return[e[3]||(e[3]=u("strong",null,"Vendedor:",-1)),i(" "+n((o=(r=s.value)==null?void 0:r.vendedor)==null?void 0:o.name),1)]}),_:1}),l(m,{cols:"12",sm:"6"},{default:t(()=>{var r;return[e[4]||(e[4]=u("strong",null,"Fecha:",-1)),i(" "+n((r=s.value)==null?void 0:r.fecha),1)]}),_:1}),l(m,{cols:"12",sm:"6"},{default:t(()=>{var r,o;return[e[5]||(e[5]=u("strong",null,"Estado:",-1)),l(P,{color:D((o=(r=s.value)==null?void 0:r.estado)==null?void 0:o.nombre)},{default:t(()=>{var a,c;return[i(n(((c=(a=s.value)==null?void 0:a.estado)==null?void 0:c.nombre)||"—"),1)]}),_:1},8,["color"])]}),_:1}),l(m,{cols:"12"},{default:t(()=>{var r;return[e[6]||(e[6]=u("strong",null,"Observaciones:",-1)),e[7]||(e[7]=u("br",null,null,-1)),i(" "+n(((r=s.value)==null?void 0:r.observaciones)||"—"),1)]}),_:1})]),_:1})]),_:1})]),_:1}),l(_,null,{default:t(()=>{var r;return[l(g,null,{default:t(()=>e[8]||(e[8]=[i("Ventanas")])),_:1}),l(j,{headers:z,items:((r=s.value)==null?void 0:r.ventanas)||[],"items-per-page":5,class:"elevation-1"},{"item.tipo_ventana_id":t(({item:o})=>{var a;return[i(n(((a=o.tipo_ventana)==null?void 0:a.nombre)||"—"),1)]}),"item.producto_vidrio_proveedor_id":t(({item:o})=>{var a,c,p;return[i(n(((c=(a=o.producto_vidrio_proveedor)==null?void 0:a.producto)==null?void 0:c.nombre)||"—")+" ",1),(p=o.producto_vidrio_proveedor)!=null&&p.proveedor?(v(),w("span",q," ("+n(o.producto_vidrio_proveedor.proveedor.nombre)+") ",1)):B("",!0)]}),"item.costo":t(({item:o})=>{var a;return[i(" $"+n(((a=Number(o.costo))==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),"item.precio":t(({item:o})=>{var a;return[i(" $"+n(((a=Number(o.precio))==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),"item.precio_total":t(({item:o})=>{var a;return[i(" $"+n(((a=Number(o.precio_total))==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),_:1},8,["items"]),l(V,{justify:"end",class:"px-6 pb-4"},{default:t(()=>[l(m,{cols:"12",sm:"4",class:"text-right"},{default:t(()=>[l(I,{type:"success",variant:"tonal",border:"start","border-color":"green"},{default:t(()=>{var o,a;return[e[9]||(e[9]=u("strong",null,"Total general:",-1)),i(" $"+n(((a=(o=s.value)==null?void 0:o.total_general)==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1}))}};export{uo as default};
