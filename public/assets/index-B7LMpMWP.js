import{r as k,E as y,ar as m,f as $,e as a,k as w,o as _,b as i,t as n,a3 as s,n as g,Z as d,v as u}from"./index-CD365Aji.js";import{V as h,b as x}from"./VCard-CkWxEHLF.js";import{V as E}from"./VSpacer-BuC_rkvP.js";import{V as A}from"./VDataTable-93zKKaRQ.js";import{V as D}from"./VChip-DaCJ0I76.js";import"./VAvatar-gMPu-xIL.js";import"./VImg-C9tyhnok.js";import"./transition-BWRh3BCA.js";import"./VCardText-8BOOw6sf.js";/* empty css              */import"./VSelect-DfBTMMFt.js";import"./VTextField-DMrA2WQ9.js";import"./VInput-C-5acitD.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-Ba1ounFd.js";import"./VDivider-BH61yt7x.js";import"./VOverlay-CRkImYiy.js";import"./VMenu-BDxp3Ww4.js";import"./VCheckboxBtn-DYCMfKAu.js";import"./VSelectionControl-BZBxuiyV.js";import"./filter-ClBDsSZw.js";const Y={__name:"index",setup(B){const c=w(),p=k([]),f=[{title:"ID",value:"id"},{title:"Cliente",value:"cliente"},{title:"Vendedor",value:"vendedor"},{title:"Fecha",value:"fecha"},{title:"Estado",value:"estado"},{title:"Acciones",value:"acciones",sortable:!1}],v=t=>{switch(t){case"Evaluación":return"grey";case"Aprobada":return"green";case"Rechazada":return"red";default:return"blue"}},C=t=>{c.push(`/cotizacion-ver?id=${t.id}`)},z=t=>{c.push(`/cotizador?id=${t.id}`)},b=async t=>{if(confirm(`¿Deseas duplicar la cotización #${t.id}?`))try{const o=await m.post(`/api/cotizaciones/${t.id}/duplicar`);alert("Cotización duplicada con éxito"),c.push(`/cotizador?id=${o.data.id}`)}catch(o){console.error(o),alert("Error al duplicar la cotización")}},V=t=>{const o=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:8000":"https://proyectovialum-production.up.railway.app";window.open(`${o}/api/cotizaciones/${t}/pdf`,"_blank")};return y(async()=>{try{const t=await m.get("/api/cotizaciones");p.value=Array.isArray(t.data)?t.data:[]}catch(t){console.error("Error al cargar cotizaciones:",t),p.value=[]}}),(t,o)=>(_(),$(h,null,{default:a(()=>[i(x,null,{default:a(()=>[o[2]||(o[2]=n(" Cotizaciones ")),i(E),i(s,{color:"primary",onClick:o[0]||(o[0]=e=>g(c).push({name:"cotizador"}))},{default:a(()=>o[1]||(o[1]=[n("Nueva")])),_:1})]),_:1}),i(A,{headers:f,items:p.value,"items-per-page":10,class:"elevation-1"},{"item.cliente":a(({item:e})=>{var r;return[n(u(((r=e.cliente)==null?void 0:r.razon_social)||"—"),1)]}),"item.vendedor":a(({item:e})=>{var r;return[n(u(((r=e.vendedor)==null?void 0:r.name)||"—"),1)]}),"item.estado":a(({item:e})=>{var r;return[i(D,{color:v((r=e.estado)==null?void 0:r.nombre)},{default:a(()=>{var l;return[n(u(((l=e.estado)==null?void 0:l.nombre)||"—"),1)]}),_:2},1032,["color"])]}),"item.acciones":a(({item:e})=>{var r;return[i(s,{icon:"",onClick:l=>C(e)},{default:a(()=>[i(d,null,{default:a(()=>o[3]||(o[3]=[n("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),i(s,{icon:"",onClick:l=>z(e),disabled:((r=e.estado)==null?void 0:r.nombre)==="Aprobada"},{default:a(()=>[i(d,null,{default:a(()=>o[4]||(o[4]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick","disabled"]),i(s,{icon:"",onClick:l=>V(e.id)},{default:a(()=>[i(d,null,{default:a(()=>o[5]||(o[5]=[n("mdi-file-pdf-box")])),_:1})]),_:2},1032,["onClick"]),i(s,{icon:"",onClick:l=>b(e)},{default:a(()=>[i(d,null,{default:a(()=>o[6]||(o[6]=[n("mdi-content-copy")])),_:1})]),_:2},1032,["onClick"])]}),_:1},8,["items"])]),_:1}))}};export{Y as default};
