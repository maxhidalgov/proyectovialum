import{r as de,w as Ce,X as u,a as le,c as oe,o as m,d as ge,b as a,e as r,f as N,m as re,F as ne,i as ke,E as Xa,aH as me,aI as fe,q as Se,n as Te,aJ as Ya,t as ye,v as ze,a2 as Ga,a3 as Ue,az as Ja,au as Ka}from"./index-BVpA1Ywp.js";import{d as Qa,_ as Za,a as el,c as al,b as ll}from"./VistaBayWindow-CHF2LBBd.js";import{a as De,r as Wa,n as Fa,_ as ol}from"./VistaVentanaCorredera-CwmK8hIh.js";import{a as E,V as ve}from"./VRadioGroup-DmKb6bTH.js";import{V as Ne}from"./VSwitch-C0dzuavd.js";import{_ as tl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Oe}from"./VDialog-wDD9wl6W.js";import{V as Le,b as He,c as Be}from"./VCard-C1RMa97J.js";import{V as $e}from"./VDivider-DDPKeGJQ.js";import{V as ul}from"./VForm-CGghkbox.js";import{V as ce,a as I}from"./VRow-BZumZuoX.js";import{V as he}from"./VSelect-B1lTgiKR.js";import{V as Ae}from"./VTextField-D456lAgx.js";import{V as Pe}from"./VAlert-U45pBzdr.js";import{V as rl}from"./VDataTable-5Qc8kTby.js";import{V as nl,a as La,b as Na}from"./VList-D6lOss7d.js";import{V as Ra}from"./VSpacer-D4z7Uk_7.js";import{V as il}from"./VCardText-vvruW0LQ.js";import{V as vl}from"./VContainer-BRpYNVHh.js";const sl={style:{"margin-bottom":"10px"}},J=50,cl=60,Ee=0,$a=300,dl={__name:"VistaVentanaAbatirS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],material:[String,Number],tipoVidrio:[String,Number],productoVidrioProveedor:[String,Number],ladoInicial:{type:String,default:"izquierda",validator:T=>["izquierda","derecha"].includes(T)},direccionApertura:{type:String,default:"interior",validator:T=>["interior","exterior"].includes(T)}},emits:["update:ladoApertura","update:direccionApertura"],setup(T,{expose:xe,emit:s}){const F=T,W=s,h=de(F.ladoInicial),k=de(F.direccionApertura);Ce(h,M=>{console.log("🔄 Lado apertura cambió a:",M),W("update:ladoApertura",M)}),Ce(k,M=>{console.log("🔄 Dirección apertura cambió a:",M),W("update:direccionApertura",M)});const q={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},f={roble:new Image,nogal:new Image};f.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,f.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const e=u(()=>{var x,X,n;const M=typeof F.colorMarco=="object"?(X=(x=F.colorMarco)==null?void 0:x.nombre)==null?void 0:X.toLowerCase():(n=F.colorMarco)==null?void 0:n.toLowerCase();return q[M]||"#ffffff"});function p(M,x=!1){var n,l;const X=typeof F.colorMarco=="object"?(l=(n=F.colorMarco)==null?void 0:n.nombre)==null?void 0:l.toLowerCase():F.colorMarco.toLowerCase();return["roble","nogal"].includes(X)&&f[X]?{points:M,closed:!0,fillPatternImage:f[X],fillPatternRepeat:"repeat",fillPatternScale:{x:x?.15:.2,y:x?.15:.2},stroke:"black"}:{points:M,closed:!0,fill:e.value,stroke:"black"}}const ue=u(()=>{const M=$a/F.ancho,x=$a/F.alto;return Math.min(M,x,1)*.9}),R=u(()=>cl*ue.value),te=u(()=>F.ancho*ue.value),D=u(()=>F.alto*ue.value),H={width:400,height:400},_=u(()=>p([J,J,J+te.value,J,J+te.value-R.value,J+R.value,J+R.value,J+R.value])),t=u(()=>p([J+te.value,J,J+te.value,J+D.value,J+te.value-R.value,J+D.value-R.value,J+te.value-R.value,J+R.value])),c=u(()=>p([J+te.value,J+D.value,J,J+D.value,J+R.value,J+D.value-R.value,J+te.value-R.value,J+D.value-R.value])),v=u(()=>p([J,J+D.value,J,J,J+R.value,J+R.value,J+R.value,J+D.value-R.value])),A=u(()=>({x:J+R.value,y:J+R.value,width:te.value-R.value*2,height:D.value-R.value*2,fill:"#b3e5fc",stroke:"black"})),y=u(()=>A.value.x+Ee*ue.value),b=u(()=>A.value.y+Ee*ue.value),O=u(()=>A.value.width-Ee*2*ue.value),U=u(()=>A.value.height-Ee*2*ue.value),ee=u(()=>R.value*.8),i=u(()=>p([y.value,b.value,y.value+O.value,b.value,y.value+O.value-ee.value,b.value+ee.value,y.value+ee.value,b.value+ee.value],!0)),g=u(()=>p([y.value+O.value,b.value,y.value+O.value,b.value+U.value,y.value+O.value-ee.value,b.value+U.value-ee.value,y.value+O.value-ee.value,b.value+ee.value],!0)),w=u(()=>p([y.value+O.value,b.value+U.value,y.value,b.value+U.value,y.value+ee.value,b.value+U.value-ee.value,y.value+O.value-ee.value,b.value+U.value-ee.value],!0)),C=u(()=>p([y.value,b.value+U.value,y.value,b.value,y.value+ee.value,b.value+ee.value,y.value+ee.value,b.value+U.value-ee.value],!0)),P=u(()=>h.value==="izquierda"?y.value+O.value-15:y.value+15),$=u(()=>b.value+U.value/2),je=u(()=>h.value==="izquierda"?{points:[y.value+5,b.value+5,y.value+O.value-5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}:{points:[y.value+O.value-5,b.value+5,y.value+5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}),Me=u(()=>h.value==="izquierda"?{points:[y.value+5,b.value+U.value-5,y.value+O.value-5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}:{points:[y.value+O.value-5,b.value+U.value-5,y.value+5,b.value+U.value/2],stroke:"black",dash:[10,5],strokeWidth:2}),be=u(()=>Math.min(Math.max(F.ancho/100,20),40)),Ve=u(()=>({x:J+te.value/2-30,y:J+D.value+10,text:`${F.ancho}mm`,fontSize:be.value,fill:"black"})),Ie=u(()=>({x:J-25,y:J+D.value/2,text:`${F.alto}mm`,fontSize:be.value,fill:"black",rotation:-90,offsetX:be.value/2})),qe=u(()=>({x:Ve.value.x,y:Ve.value.y+be.value+5,text:`Apertura ${k.value.charAt(0).toUpperCase()}${k.value.slice(1)}`,fontSize:Math.min(18,be.value*.8),fill:"black"})),L=de(null);return xe({exportarImagen:()=>L.value?L.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null}),(M,x)=>{const X=le("v-line"),n=le("v-rect"),l=le("v-text"),o=le("v-layer"),V=le("v-stage");return m(),oe("div",null,[ge("div",sl,[a(ve,{modelValue:h.value,"onUpdate:modelValue":x[0]||(x[0]=d=>h.value=d),row:"",density:"compact",label:"Lado de apertura:"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ve,{modelValue:k.value,"onUpdate:modelValue":x[1]||(x[1]=d=>k.value=d),row:"",density:"compact",label:"Dirección de apertura:"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),a(V,{ref_key:"stageRef",ref:L,config:H},{default:r(()=>[a(o,null,{default:r(()=>[a(X,{config:_.value},null,8,["config"]),a(X,{config:t.value},null,8,["config"]),a(X,{config:c.value},null,8,["config"]),a(X,{config:v.value},null,8,["config"]),a(n,{config:A.value},null,8,["config"]),a(X,{config:i.value},null,8,["config"]),a(X,{config:g.value},null,8,["config"]),a(X,{config:w.value},null,8,["config"]),a(X,{config:C.value},null,8,["config"]),a(De,{x:P.value,y:$.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),a(X,{config:je.value},null,8,["config"]),a(X,{config:Me.value},null,8,["config"]),a(l,{config:Ve.value},null,8,["config"]),a(l,{config:Ie.value},null,8,["config"]),a(l,{config:qe.value},null,8,["config"])]),_:1})]),_:1},512)])}}},K=50,pl=60,ml=80,Ea=300,fl={__name:"VistaPuertaS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],ladoApertura:{type:String,default:"izquierda",validator:T=>["izquierda","derecha"].includes(T)},direccionApertura:{type:String,default:"interior",validator:T=>["interior","exterior"].includes(T)},pasoLibre:{type:Boolean,default:!1}},setup(T,{expose:xe}){const s=T;de(s.ladoApertura);const F={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},W={roble:new Image,nogal:new Image};W.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,W.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const h=u(()=>{var M,x,X;const j=typeof s.colorMarco=="object"?(x=(M=s.colorMarco)==null?void 0:M.nombre)==null?void 0:x.toLowerCase():(X=s.colorMarco)==null?void 0:X.toLowerCase();return F[j]||"#ffffff"});function k(j,M=!1){var X,n;const x=typeof s.colorMarco=="object"?(n=(X=s.colorMarco)==null?void 0:X.nombre)==null?void 0:n.toLowerCase():s.colorMarco.toLowerCase();return["roble","nogal"].includes(x)&&W[x]?{points:j,closed:!0,fillPatternImage:W[x],fillPatternRepeat:"repeat",fillPatternScale:{x:M?.15:.2,y:M?.15:.2},stroke:"black"}:{points:j,closed:!0,fill:h.value,stroke:"black"}}const q=u(()=>{const j=Ea/s.ancho,M=Ea/s.alto;return Math.min(j,M,1)*.9}),f=u(()=>pl*q.value),e=u(()=>s.ancho*q.value),p=u(()=>s.alto*q.value),ue=u(()=>k([K,K,K+e.value,K,K+e.value-f.value,K+f.value,K+f.value,K+f.value])),R=u(()=>k([K+e.value,K,K+e.value,K+p.value,K+e.value-f.value,K+p.value-(s.pasoLibre?0:f.value),K+e.value-f.value,K+f.value])),te=u(()=>k([K,K+p.value,K,K,K+f.value,K+f.value,K+f.value,K+p.value-(s.pasoLibre?0:f.value)])),D=u(()=>s.pasoLibre?null:k([K+e.value,K+p.value,K,K+p.value,K+f.value,K+p.value-f.value,K+e.value-f.value,K+p.value-f.value])),H=u(()=>{const j=p.value-f.value-(s.pasoLibre?0:f.value),M=Math.max(j,5),x=Math.max(e.value-f.value*2,5);return{x:K+f.value,y:K+f.value,width:x,height:M,fill:"#b3e5fc",stroke:"black"}}),_=u(()=>H.value.x),t=u(()=>H.value.y),c=u(()=>H.value.width),v=u(()=>H.value.height),A=u(()=>{const j=ml*q.value,M=f.value*1.15,x=c.value*.45;return Math.min(Math.max(j,M),x)}),y=u(()=>k([_.value,t.value,_.value+c.value,t.value,_.value+c.value-A.value,t.value+A.value,_.value+A.value,t.value+A.value],!0)),b=u(()=>k([_.value+c.value,t.value,_.value+c.value,t.value+v.value,_.value+c.value-A.value,t.value+v.value-A.value,_.value+c.value-A.value,t.value+A.value],!0)),O=u(()=>k([_.value+c.value,t.value+v.value,_.value,t.value+v.value,_.value+A.value,t.value+v.value-A.value,_.value+c.value-A.value,t.value+v.value-A.value],!0)),U=u(()=>k([_.value,t.value+v.value,_.value,t.value,_.value+A.value,t.value+A.value,_.value+A.value,t.value+v.value-A.value],!0)),ee=u(()=>s.ladoApertura==="izquierda"?_.value+c.value-15:_.value+15),i=u(()=>t.value+v.value/2),g=u(()=>s.direccionApertura==="interior"?0:Math.min(Math.max(c.value*.1,8*q.value),25*q.value)),w=u(()=>{const j=s.ladoApertura==="izquierda",M=g.value*(j?-1:1),x=j?_.value:_.value+c.value,X=t.value+8,n=t.value+v.value-8,l=t.value+v.value/2,o=j?_.value+c.value-8:_.value+8,V=x+M;return[{points:[V,X,o,l],stroke:"black",dash:[10,5],strokeWidth:2},{points:[V,n,o,l],stroke:"black",dash:[10,5],strokeWidth:2}]}),C=u(()=>Math.min(Math.max(s.ancho/100,20),40)),P=u(()=>({x:K+e.value/2-30,y:K+p.value+10,text:`${s.ancho}mm`,fontSize:C.value,fill:"black"})),$=u(()=>({x:K-25,y:K+p.value/2,text:`${s.alto}mm`,fontSize:C.value,fill:"black",rotation:-90,offsetX:C.value/2})),je=u(()=>({x:P.value.x,y:P.value.y+C.value+5,text:`Apertura ${s.direccionApertura.charAt(0).toUpperCase()}${s.direccionApertura.slice(1)}`,fontSize:Math.min(18,C.value*.8),fill:"black"})),Me=de(null);xe({exportarImagen:()=>Me.value?Me.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null});const Ve=u(()=>Math.max(28*q.value,f.value*.45)),Ie=u(()=>Math.min(Math.max(140*q.value,30*q.value),v.value*.4));u(()=>2*q.value);const qe=u(()=>s.direccionApertura==="interior"),L=u(()=>{if(!qe.value)return[];let j=v.value>2200?4:3;const M=Math.max(v.value-16*q.value,20);let x=Ie.value;x*j>M*.85&&(x=M*.85/j);const X=(M-x*j)/(j+1),n=[];for(let l=0;l<j;l++){const o=t.value+8*q.value+X*(l+1)+x*l,V=s.ladoApertura==="izquierda"?_.value-Ve.value/2+2*q.value:_.value+c.value-Ve.value/2-2*q.value;n.push({x:V,y:o,width:Ve.value,height:x,fill:"#888",stroke:"black",cornerRadius:2})}return n});return(j,M)=>{const x=le("v-line"),X=le("v-rect"),n=le("v-text"),l=le("v-layer"),o=le("v-stage");return m(),oe("div",null,[a(o,{ref_key:"stageRef",ref:Me,config:{width:400,height:400}},{default:r(()=>[a(l,null,{default:r(()=>[a(x,{config:ue.value},null,8,["config"]),a(x,{config:R.value},null,8,["config"]),a(x,{config:te.value},null,8,["config"]),D.value?(m(),N(x,{key:0,config:D.value},null,8,["config"])):re("",!0),a(X,{config:H.value},null,8,["config"]),a(x,{config:y.value},null,8,["config"]),a(x,{config:b.value},null,8,["config"]),a(x,{config:O.value},null,8,["config"]),a(x,{config:U.value},null,8,["config"]),a(De,{x:ee.value,y:i.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),(m(!0),oe(ne,null,ke(w.value,(V,d)=>(m(),N(x,{key:"apertura-"+d,config:V},null,8,["config"]))),128)),(m(!0),oe(ne,null,ke(L.value,(V,d)=>(m(),N(X,{key:"hinge-"+d,config:V},null,8,["config"]))),128)),a(n,{config:P.value},null,8,["config"]),a(n,{config:$.value},null,8,["config"]),a(n,{config:je.value},null,8,["config"])]),_:1})]),_:1},512)])}}},Q=50,hl=60,gl=80,Ta=320,bl={__name:"VistaMamparaS60",props:{ancho:Number,alto:Number,colorMarco:[String,Object],hojaActiva:{type:String,default:"derecha",validator:T=>["izquierda","derecha"].includes(T)},direccionApertura:{type:String,default:"interior",validator:T=>["interior","exterior"].includes(T)},pasoLibre:{type:Boolean,default:!1}},setup(T,{expose:xe}){const s=T,F={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},W={roble:new Image,nogal:new Image};W.roble.src=new URL("/assets/roble-DlssfbLU.png",import.meta.url).href,W.nogal.src=new URL("/assets/nogal-Lbu-T-XE.png",import.meta.url).href;const h=u(()=>{var B,z,S;const d=typeof s.colorMarco=="object"?(z=(B=s.colorMarco)==null?void 0:B.nombre)==null?void 0:z.toLowerCase():(S=s.colorMarco)==null?void 0:S.toLowerCase();return F[d]||"#ffffff"});function k(d,B=!1){var S,ae,ie;const z=typeof s.colorMarco=="object"?(ae=(S=s.colorMarco)==null?void 0:S.nombre)==null?void 0:ae.toLowerCase():(ie=s.colorMarco)==null?void 0:ie.toLowerCase();return["roble","nogal"].includes(z)&&W[z]?{points:d,closed:!0,fillPatternImage:W[z],fillPatternRepeat:"repeat",fillPatternScale:{x:B?.15:.2,y:B?.15:.2},stroke:"black"}:{points:d,closed:!0,fill:h.value,stroke:"black"}}const q=u(()=>Math.min(Ta/s.ancho,Ta/s.alto,1)*.9),f=u(()=>hl*q.value),e=u(()=>s.ancho*q.value),p=u(()=>s.alto*q.value),ue=u(()=>k([Q,Q,Q+e.value,Q,Q+e.value-f.value,Q+f.value,Q+f.value,Q+f.value])),R=u(()=>k([Q+e.value,Q,Q+e.value,Q+p.value,Q+e.value-f.value,Q+p.value-(s.pasoLibre?0:f.value),Q+e.value-f.value,Q+f.value])),te=u(()=>k([Q,Q+p.value,Q,Q,Q+f.value,Q+f.value,Q+f.value,Q+p.value-(s.pasoLibre?0:f.value)])),D=u(()=>s.pasoLibre?null:k([Q+e.value,Q+p.value,Q,Q+p.value,Q+f.value,Q+p.value-f.value,Q+e.value-f.value,Q+p.value-f.value])),H=u(()=>{const d=Math.max(e.value-2*f.value,5),B=Math.max(p.value-f.value-(s.pasoLibre?0:f.value),5);return{x:Q+f.value,y:Q+f.value,width:d,height:B,fill:"#b3e5fc",stroke:"black"}}),_=u(()=>Math.max(6*q.value,f.value*.15)),t=u(()=>{const d=(H.value.width-_.value)/2;return{x:H.value.x,y:H.value.y,w:d,h:H.value.height}}),c=u(()=>{const d=(H.value.width-_.value)/2;return{x:H.value.x+d+_.value,y:H.value.y,w:d,h:H.value.height}}),v=u(()=>{const d=gl*q.value,B=f.value*1.15,z=Math.min(t.value.w,c.value.w)*.45;return Math.min(Math.max(d,B),z)}),A=u(()=>k([t.value.x,t.value.y,t.value.x+t.value.w,t.value.y,t.value.x+t.value.w-v.value,t.value.y+v.value,t.value.x+v.value,t.value.y+v.value],!0)),y=u(()=>k([t.value.x+t.value.w,t.value.y,t.value.x+t.value.w,t.value.y+t.value.h,t.value.x+t.value.w-v.value,t.value.y+t.value.h-v.value,t.value.x+t.value.w-v.value,t.value.y+v.value],!0)),b=u(()=>k([t.value.x+t.value.w,t.value.y+t.value.h,t.value.x,t.value.y+t.value.h,t.value.x+v.value,t.value.y+t.value.h-v.value,t.value.x+t.value.w-v.value,t.value.y+t.value.h-v.value],!0)),O=u(()=>k([t.value.x,t.value.y+t.value.h,t.value.x,t.value.y,t.value.x+v.value,t.value.y+v.value,t.value.x+v.value,t.value.y+t.value.h-v.value],!0)),U=u(()=>k([c.value.x,c.value.y,c.value.x+c.value.w,c.value.y,c.value.x+c.value.w-v.value,c.value.y+v.value,c.value.x+v.value,c.value.y+v.value],!0)),ee=u(()=>k([c.value.x+c.value.w,c.value.y,c.value.x+c.value.w,c.value.y+c.value.h,c.value.x+c.value.w-v.value,c.value.y+c.value.h-v.value,c.value.x+c.value.w-v.value,c.value.y+v.value],!0)),i=u(()=>k([c.value.x+c.value.w,c.value.y+c.value.h,c.value.x,c.value.y+c.value.h,c.value.x+v.value,c.value.y+c.value.h-v.value,c.value.x+c.value.w-v.value,c.value.y+c.value.h-v.value],!0)),g=u(()=>k([c.value.x,c.value.y+c.value.h,c.value.x,c.value.y,c.value.x+v.value,c.value.y+v.value,c.value.x+v.value,c.value.y+c.value.h-v.value],!0)),w=u(()=>s.hojaActiva==="izquierda"?t.value.x+t.value.w-12:c.value.x+12),C=u(()=>H.value.y+H.value.height/2);function P(d){return s.direccionApertura==="interior"?0:Math.min(Math.max(d.w*.1,8*q.value),25*q.value)}function $(d,B){const z=B==="left",S=P(d)*(z?-1:1),ie=(z?d.x:d.x+d.w)+S,_e=d.y+d.h/2,se=d.y+8,pe=d.y+d.h-8,G=z?d.x+d.w-8:d.x+8;return[{points:[ie,se,G,_e],stroke:"black",dash:[10,5],strokeWidth:2},{points:[ie,pe,G,_e],stroke:"black",dash:[10,5],strokeWidth:2}]}const je=u(()=>$(t.value,"left")),Me=u(()=>$(c.value,"right")),be=u(()=>s.direccionApertura==="interior"),Ve=u(()=>Math.max(28*q.value,f.value*.45)),Ie=u(()=>Math.min(Math.max(140*q.value,30*q.value),Math.min(t.value.h,c.value.h)*.4)),qe=u(()=>2*q.value);function L(d,B){const z=[];let S=d.h>2200*q.value?4:3;const ae=Math.max(d.h-16*q.value,20);let ie=Ie.value;ie*S>ae*.85&&(ie=ae*.85/S);const _e=(ae-ie*S)/(S+1);for(let se=0;se<S;se++){const pe=d.y+8*q.value+_e*(se+1)+ie*se,G=B==="left"?d.x-Ve.value/2+qe.value:d.x+d.w-Ve.value/2-qe.value;z.push({x:G,y:pe,width:Ve.value,height:ie,fill:"#888",stroke:"black",cornerRadius:2})}return z}const j=u(()=>be.value?L(t.value,"left"):[]),M=u(()=>be.value?L(c.value,"right"):[]),x=u(()=>Math.min(Math.max(s.ancho/100,20),40)),X=u(()=>({x:Q+e.value/2-30,y:Q+p.value+10,text:`${s.ancho}mm`,fontSize:x.value,fill:"black"})),n=u(()=>({x:Q-25,y:Q+p.value/2,text:`${s.alto}mm`,fontSize:x.value,fill:"black",rotation:-90,offsetX:x.value/2})),l=u(()=>({x:X.value.x,y:X.value.y+x.value+5,text:`Apertura ${s.direccionApertura.charAt(0).toUpperCase()}${s.direccionApertura.slice(1)}`,fontSize:Math.min(18,x.value*.8),fill:"black"})),o=de(null);return xe({exportarImagen:()=>o.value?o.value.getStage().toDataURL({pixelRatio:1,quality:.9}):null}),(d,B)=>{const z=le("v-line"),S=le("v-rect"),ae=le("v-text"),ie=le("v-layer"),_e=le("v-stage");return m(),oe("div",null,[a(_e,{ref_key:"stageRef",ref:o,config:{width:420,height:420}},{default:r(()=>[a(ie,null,{default:r(()=>[a(z,{config:ue.value},null,8,["config"]),a(z,{config:R.value},null,8,["config"]),a(z,{config:te.value},null,8,["config"]),D.value?(m(),N(z,{key:0,config:D.value},null,8,["config"])):re("",!0),a(S,{config:H.value},null,8,["config"]),a(z,{config:A.value},null,8,["config"]),a(z,{config:y.value},null,8,["config"]),a(z,{config:b.value},null,8,["config"]),a(z,{config:O.value},null,8,["config"]),a(z,{config:U.value},null,8,["config"]),a(z,{config:ee.value},null,8,["config"]),a(z,{config:i.value},null,8,["config"]),a(z,{config:g.value},null,8,["config"]),a(De,{x:w.value,y:C.value,width:6,height:20,rotation:0,offsetX:3,offsetY:10},null,8,["x","y"]),(m(!0),oe(ne,null,ke(je.value,(se,pe)=>(m(),N(z,{key:"apertura-left-"+pe,config:se},null,8,["config"]))),128)),(m(!0),oe(ne,null,ke(Me.value,(se,pe)=>(m(),N(z,{key:"apertura-right-"+pe,config:se},null,8,["config"]))),128)),(m(!0),oe(ne,null,ke(j.value,(se,pe)=>(m(),N(S,{key:"hl-"+pe,config:se},null,8,["config"]))),128)),(m(!0),oe(ne,null,ke(M.value,(se,pe)=>(m(),N(S,{key:"hr-"+pe,config:se},null,8,["config"]))),128)),a(ae,{config:X.value},null,8,["config"]),a(ae,{config:n.value},null,8,["config"]),a(ae,{config:l.value},null,8,["config"])]),_:1})]),_:1},512)])}}},Vl={style:{"margin-bottom":"10px"}},Y=40,yl=54,xl=98,Oa=20,Ha=300,Al={__name:"VistaVentanaCorredera98",props:{ancho:Number,alto:Number,colorMarco:{type:String,default:"blanco"},hojasMoviles:{type:Number,default:"2"},hojaMovilSeleccionada:{type:Number,default:1},ordenHoja1AlFrente:{type:Boolean,default:!0},color:Object},setup(T,{expose:xe}){const s=de(null);xe({exportarImagen:()=>{if(console.log("🖼️ exportarImagen llamado en VentanaCorredera"),console.log("🖼️ stageRef.value:",s.value),s.value)try{const n=s.value.getStage();console.log("🖼️ stage obtenido:",n),n.draw();const l=n.toDataURL({pixelRatio:1,quality:.9});return console.log("🖼️ dataURL generado:",l.substring(0,50)),l}catch(n){return console.error("❌ Error en exportarImagen:",n),null}return console.warn("⚠️ stageRef no disponible"),null}});const W={roble:null,nogal:null};Xa(()=>{const n=(l,o)=>{const V=new Image;V.src=l,V.onload=()=>{W[o]=V}};n(Wa,"roble"),n(Fa,"nogal")});const h=T,k=u(()=>h.colorMarco.toLowerCase());function q(n){const l=k.value.toLowerCase();return["roble","nogal"].includes(l)&&W[l]?{points:n,closed:!0,fillPatternImage:W[l],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:n,closed:!0,fill:D.value,stroke:"black"}}const f=de(h.ordenHoja1AlFrente),e=u(()=>ue.value),p=u(()=>R.value);Ce(()=>h.ordenHoja1AlFrente,n=>{f.value=n});const ue=u(()=>h.hojasMoviles===2||h.hojaMovilSeleccionada===1),R=u(()=>h.hojasMoviles===2||h.hojaMovilSeleccionada===2),te={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},D=u(()=>{var l,o;const n=(o=(l=h.colorMarco)==null?void 0:l.toLowerCase)==null?void 0:o.call(l);return te[n]||"#ffffff"}),H=u(()=>{const n=Ha/h.ancho,l=Ha/h.alto;return Math.min(n,l,1)*.9}),_=u(()=>yl*H.value),t=u(()=>xl*H.value),c=u(()=>h.ancho*H.value),v=u(()=>h.alto*H.value),A=u(()=>Oa*H.value);function y(n){const l=h.colorMarco.toLowerCase();return["roble","nogal"].includes(l)&&W[l]?{points:n,closed:!0,fillPatternImage:W[l],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:n,closed:!0,fill:D.value,stroke:"black"}}const b=u(()=>y([Y,Y,Y+c.value,Y,Y+c.value-_.value,Y+_.value,Y+_.value,Y+_.value])),O=u(()=>y([Y+c.value,Y,Y+c.value,Y+v.value,Y+c.value-_.value,Y+v.value-_.value,Y+c.value-_.value,Y+_.value])),U=u(()=>y([Y+c.value,Y+v.value,Y,Y+v.value,Y+_.value,Y+v.value-_.value,Y+c.value-_.value,Y+v.value-_.value])),ee=u(()=>y([Y,Y+v.value,Y,Y,Y+_.value,Y+_.value,Y+_.value,Y+v.value-_.value])),i=u(()=>(c.value-_.value*2+Oa)/2),g=u(()=>v.value-_.value*2),w=u(()=>Y+_.value),C=u(()=>Y+_.value),P=u(()=>Y+c.value-_.value-i.value+A.value-t.value*.22),$=C,je=u(()=>f.value?[{points:[w.value,C.value,w.value+i.value,C.value,w.value+i.value-t.value,C.value+t.value,w.value+t.value,C.value+t.value],closed:!0,fill:D.value,stroke:"black"},{points:[w.value+i.value,C.value,w.value+i.value,C.value+g.value,w.value+i.value-t.value,C.value+g.value-t.value,w.value+i.value-t.value,C.value+t.value],closed:!0,fill:D.value,stroke:"black"},{points:[w.value+i.value,C.value+g.value,w.value,C.value+g.value,w.value+t.value,C.value+g.value-t.value,w.value+i.value-t.value,C.value+g.value-t.value],closed:!0,fill:D.value,stroke:"black"},{points:[w.value,C.value+g.value,w.value,C.value,w.value+t.value,C.value+t.value,w.value+t.value,C.value+g.value-t.value],closed:!0,fill:D.value,stroke:"black"}]:[{points:[w.value,C.value+g.value,w.value+t.value,C.value+g.value-t.value,w.value+i.value-t.value,C.value+g.value-t.value,w.value+i.value,C.value+g.value],closed:!0,fill:D.value,stroke:"black"},{points:[w.value,C.value+g.value,w.value,C.value,w.value+t.value,C.value+t.value,w.value+t.value,C.value+g.value-t.value],closed:!0,fill:D.value,stroke:"black"},{points:[w.value,C.value,w.value+i.value,C.value,w.value+i.value-t.value,C.value+t.value,w.value+t.value,C.value+t.value],closed:!0,fill:D.value,stroke:"black"},{points:[w.value+i.value,C.value,w.value+i.value,C.value+g.value,w.value+i.value-t.value,C.value+g.value-t.value,w.value+i.value-t.value,C.value+t.value],closed:!0,fill:D.value,stroke:"black"}]),Me=u(()=>f.value?[{points:[P.value,$.value,P.value+i.value,$.value,P.value+i.value-t.value,$.value+t.value,P.value+t.value,$.value+t.value],closed:!0,fill:D.value,stroke:"black"},{points:[P.value+i.value,$.value,P.value+i.value,$.value+g.value,P.value+i.value-t.value,$.value+g.value-t.value,P.value+i.value-t.value,$.value+t.value],closed:!0,fill:D.value,stroke:"black"},{points:[P.value+i.value,$.value+g.value,P.value,$.value+g.value,P.value+t.value,$.value+g.value-t.value,P.value+i.value-t.value,$.value+g.value-t.value],closed:!0,fill:D.value,stroke:"black"},{points:[P.value,$.value+g.value,P.value,$.value,P.value+t.value,$.value+t.value,P.value+t.value,$.value+g.value-t.value],closed:!0,fill:D.value,stroke:"black"}]:[{points:[P.value,$.value,P.value+i.value,$.value,P.value+i.value-t.value,$.value+t.value,P.value+t.value,$.value+t.value],closed:!0,fill:D.value,stroke:"black"},{points:[P.value+i.value,$.value,P.value+i.value,$.value+g.value,P.value+i.value-t.value,$.value+g.value-t.value,P.value+i.value-t.value,$.value+t.value],closed:!0,fill:D.value,stroke:"black"},{points:[P.value+i.value,$.value+g.value,P.value,$.value+g.value,P.value+t.value,$.value+g.value-t.value,P.value+i.value-t.value,$.value+g.value-t.value],closed:!0,fill:D.value,stroke:"black"},{points:[P.value,$.value+g.value,P.value,$.value,P.value+t.value,$.value+t.value,P.value+t.value,$.value+g.value-t.value],closed:!0,fill:D.value,stroke:"black"}]),be=u(()=>{if(f.value)return{x:w.value+t.value,y:C.value+t.value,width:i.value-t.value*2,height:g.value-t.value*2,fill:"lightblue",stroke:"black"};const n=t.value*.35+H.value*50,l=t.value*1.3+H.value*1;return{x:w.value+n,y:C.value+t.value,width:i.value-l-15,height:g.value-t.value*2,fill:"lightblue",stroke:"black"}}),Ve=u(()=>{if(f.value){const n=t.value*.4+H.value*10,l=t.value*1.4+H.value*10;return{x:P.value+n+10,y:$.value+t.value,width:i.value-l-10,height:g.value-t.value*2,fill:"lightblue",stroke:"black"}}return{x:P.value+t.value,y:$.value+t.value,width:i.value-t.value*2,height:g.value-t.value*2,fill:"lightblue",stroke:"black"}}),Ie=u(()=>h.hojasMoviles===2||h.hojasMoviles===1&&h.hojaMovilSeleccionada===1?"→":"+"),qe=u(()=>h.hojasMoviles===2||h.hojasMoviles===1&&h.hojaMovilSeleccionada===2?"←":"+"),L=u(()=>({x:w.value+i.value/2-10,y:C.value+g.value/2+10,text:Ie.value,fontSize:30,fill:"black"})),j=u(()=>({x:P.value+i.value/2-10,y:$.value+g.value/2+10,text:qe.value,fontSize:30,fill:"black"})),M=u(()=>{const n=Math.max(h.ancho,h.alto);return Math.min(Math.max(n/100,20),40)}),x=u(()=>({x:Y+c.value/2-30,y:Y+v.value+10,text:`${h.ancho}mm`,fontSize:M.value,fill:"black"})),X=u(()=>({x:Y-25,y:Y+v.value/2,text:`${h.alto}mm`,fontSize:M.value,fill:"black",rotation:-90,offsetX:M.value/2}));return(n,l)=>{const o=le("v-line"),V=le("v-rect"),d=le("v-text"),B=le("v-layer"),z=le("v-stage");return m(),oe("div",null,[ge("div",Vl,[a(Ne,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=S=>f.value=S),label:"Hoja 1 adelante",density:"compact"},null,8,["modelValue"])]),a(z,{ref_key:"stageRef",ref:s,config:{width:400,height:400}},{default:r(()=>[a(B,null,{default:r(()=>[a(o,me(fe(b.value)),null,16),a(o,me(fe(O.value)),null,16),a(o,me(fe(U.value)),null,16),a(o,me(fe(ee.value)),null,16),f.value?(m(),oe(ne,{key:0},[a(V,me(fe(Ve.value)),null,16),(m(!0),oe(ne,null,ke(Me.value,(S,ae)=>(m(),N(o,Se({key:"mitra-h2-"+ae,ref_for:!0},q(S.points)),null,16))),128)),a(d,{x:P.value+i.value/2-10,y:Te($)+g.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(V,me(fe(be.value)),null,16),(m(!0),oe(ne,null,ke(je.value,(S,ae)=>(m(),N(o,Se({key:"mitra-h1-"+ae,ref_for:!0},q(S.points)),null,16))),128)),a(d,{x:w.value+i.value/2-10,y:C.value+g.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)):(m(),oe(ne,{key:1},[a(V,me(fe(be.value)),null,16),(m(!0),oe(ne,null,ke(je.value,(S,ae)=>(m(),N(o,Se({key:"mitra-h1-"+ae,ref_for:!0},q(S.points)),null,16))),128)),a(d,{x:w.value+i.value/2-10,y:C.value+g.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),a(V,me(fe(Ve.value)),null,16),(m(!0),oe(ne,null,ke(Me.value,(S,ae)=>(m(),N(o,Se({key:"mitra-h2-"+ae,ref_for:!0},q(S.points)),null,16))),128)),a(d,{x:P.value+i.value/2-10,y:Te($)+g.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)),a(d,me(fe(x.value)),null,16),a(d,me(fe(X.value)),null,16),a(d,me(fe(L.value)),null,16),a(d,me(fe(j.value)),null,16),e.value?(m(),N(De,{key:2,x:w.value+t.value-H.value*35,y:C.value+g.value/2,escalaManilla:H.value*4},null,8,["x","y","escalaManilla"])):re("",!0),p.value?(m(),N(De,{key:3,x:P.value+i.value-t.value+H.value*35,y:Te($)+g.value/2,escalaManilla:H.value*4},null,8,["x","y","escalaManilla"])):re("",!0)]),_:1})]),_:1},512)])}}},Z=40,Ba=300,kl=54,Ml=80,_l={__name:"VistaVentanaMonorriel",props:{ancho:{type:Number,required:!0},alto:{type:Number,required:!0},colorMarco:{type:String,default:"blanco"},ladoApertura:{type:String,default:"derecha",validator:T=>["izquierda","derecha"].includes(T)}},setup(T,{expose:xe}){const s=T,F={roble:null,nogal:null};Xa(()=>{const L=(j,M)=>{const x=new Image;x.src=j,x.onload=()=>F[M]=x};L(Wa,"roble"),L(Fa,"nogal")});const W={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b",roble:"#c9a36b"},h=u(()=>{var L,j;return W[(j=(L=s.colorMarco)==null?void 0:L.toLowerCase)==null?void 0:j.call(L)]||"#ffffff"});function k(L){var M,x;const j=(x=(M=s.colorMarco)==null?void 0:M.toLowerCase)==null?void 0:x.call(M);return["roble","nogal"].includes(j)&&F[j]?{points:L,closed:!0,fillPatternImage:F[j],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:L,closed:!0,fill:h.value,stroke:"black"}}const q=de(null),f=u(()=>Math.min(Ba/s.ancho,Ba/s.alto,1)*.9),e=u(()=>kl*f.value),p=u(()=>Ml*f.value),ue=u(()=>s.ancho*f.value),R=u(()=>s.alto*f.value),te=u(()=>s.ladoApertura==="derecha"),D=u(()=>k([Z,Z,Z+ue.value,Z,Z+ue.value-e.value,Z+e.value,Z+e.value,Z+e.value])),H=u(()=>k([Z+ue.value,Z,Z+ue.value,Z+R.value,Z+ue.value-e.value,Z+R.value-e.value,Z+ue.value-e.value,Z+e.value])),_=u(()=>k([Z+ue.value,Z+R.value,Z,Z+R.value,Z+e.value,Z+R.value-e.value,Z+ue.value-e.value,Z+R.value-e.value])),t=u(()=>k([Z,Z+R.value,Z,Z,Z+e.value,Z+e.value,Z+e.value,Z+R.value-e.value])),c=u(()=>Z+e.value),v=u(()=>Z+e.value),A=u(()=>Math.max(ue.value-2*e.value,5)),y=u(()=>Math.max(R.value-2*e.value,5)),b=u(()=>Math.max(A.value/2,10)),O=u(()=>te.value?{x:c.value+b.value,y:v.value,w:b.value,h:y.value}:{x:c.value,y:v.value,w:b.value,h:y.value}),U=u(()=>te.value?{x:c.value,y:v.value,w:b.value,h:y.value}:{x:c.value+b.value,y:v.value,w:b.value,h:y.value}),ee=u(()=>({x:O.value.x,y:O.value.y,width:O.value.w,height:O.value.h,fill:"lightblue",stroke:"black"}));function i(L,j,M,x){return[k([L,j,L+M,j,L+M-p.value,j+p.value,L+p.value,j+p.value]),k([L+M,j,L+M,j+x,L+M-p.value,j+x-p.value,L+M-p.value,j+p.value]),k([L+M,j+x,L,j+x,L+p.value,j+x-p.value,L+M-p.value,j+x-p.value]),k([L,j+x,L,j,L+p.value,j+p.value,L+p.value,j+x-p.value])]}const g=u(()=>i(U.value.x,U.value.y,U.value.w,U.value.h)),w=u(()=>({x:U.value.x+p.value,y:U.value.y+p.value,width:Math.max(U.value.w-2*p.value,5),height:Math.max(U.value.h-2*p.value,5),fill:"lightblue",stroke:"black"})),C=u(()=>{const L=U.value.x+p.value/2,j=U.value.x+U.value.w-p.value/2;return te.value?L:j}),P=u(()=>U.value.y+U.value.h/2),$=u(()=>te.value?"→":"←"),je=u(()=>U.value.x+U.value.w/2-10),Me=u(()=>U.value.y+U.value.h/2-15),be=u(()=>Math.min(Math.max(Math.max(s.ancho,s.alto)/100,20),40)),Ve=u(()=>({x:Z+ue.value/2-30,y:Z+R.value+10,text:`${s.ancho}mm`,fontSize:be.value,fill:"black"})),Ie=u(()=>({x:Z-25,y:Z+R.value/2,text:`${s.alto}mm`,fontSize:be.value,fill:"black",rotation:-90,offsetX:be.value/2}));return xe({exportarImagen:()=>{if(q.value){const L=q.value.getStage();return L.draw(),L.toDataURL({pixelRatio:1,quality:.9})}return null}}),(L,j)=>{const M=le("v-line"),x=le("v-rect"),X=le("v-text"),n=le("v-layer"),l=le("v-stage");return m(),oe("div",null,[a(l,{ref_key:"stageRef",ref:q,config:{width:400,height:400}},{default:r(()=>[a(n,null,{default:r(()=>[a(M,me(fe(D.value)),null,16),a(M,me(fe(H.value)),null,16),a(M,me(fe(_.value)),null,16),a(M,me(fe(t.value)),null,16),a(x,me(fe(ee.value)),null,16),a(x,me(fe(w.value)),null,16),(m(!0),oe(ne,null,ke(g.value,(o,V)=>(m(),N(M,Se({key:"hm-"+V,ref_for:!0},o),null,16))),128)),a(De,{x:C.value,y:P.value,escalaManilla:f.value*4},null,8,["x","y","escalaManilla"]),a(X,{x:je.value,y:Me.value,text:$.value,fontSize:30,fontStyle:"bold",fill:"black"},null,8,["x","y","text"]),a(X,me(fe(Ve.value)),null,16),a(X,me(fe(Ie.value)),null,16)]),_:1})]),_:1},512)])}}},zl=Object.assign({name:"VistaVentanaCompuestaInterna"},{__name:"VistaVentanaCompuestaInterna",props:{ancho:{type:[Number,String],required:!0},alto:{type:[Number,String],required:!0},colorMarco:{type:[String,Object],default:"blanco"},orientacion:{type:String,default:"horizontal"},items:{type:Array,default:()=>[]},escala:{type:Number,default:1},x:{type:Number,default:0},y:{type:Number,default:0},pathPrefix:{type:String,default:""}},emits:["agregar","agregar-borde","editar-ventana","eliminar-ventana"],setup(T,{emit:xe}){const s=xe,F=de(new Map),W=de(new Map),h=T;function k(v){s("agregar",v)}function q(v){console.log("🔧 Editando ventana por path:",v),s("editar-ventana",v)}function f(v){s("eliminar-ventana",v)}function e(v,A){console.log("🔧 Click en botón editar:",A),v&&v.evt&&v.evt.stopPropagation&&v.evt.stopPropagation(),q(A)}function p(v,A){console.log("🗑️ Click en botón eliminar:",A),v&&v.evt&&v.evt.stopPropagation&&v.evt.stopPropagation(),f(A)}function ue(v){const A=Date.now(),y=W.value.get(v)||0,b=A-y;if(console.log(`👆 Click en ventana ${v}, tiempo desde último: ${b}ms`),b<400&&b>50){console.log("🎯 ¡DOBLE CLICK detectado! Editando ventana:",v),F.value.has(v)&&(clearTimeout(F.value.get(v)),F.value.delete(v)),W.value.delete(v),q(v);return}W.value.set(v,A),F.value.has(v)&&clearTimeout(F.value.get(v));const O=setTimeout(()=>{console.log("⏱️ Timer expirado para ventana:",v),W.value.delete(v),F.value.delete(v)},400);F.value.set(v,O)}Ya(()=>{F.value.forEach(v=>clearTimeout(v)),F.value.clear(),W.value.clear()});const R=u(()=>Number(h.ancho)||1),te=u(()=>Number(h.alto)||1),D=u(()=>h.items.filter(v=>v&&(typeof v.tipo=="number"||v.tipo==="compuesta")&&v.tipo!==null&&v.tipo!==void 0)),H=u(()=>{const v=D.value.length;if(!v)return[];const A=D.value.reduce((y,b)=>{const O=Number(b==null?void 0:b.sizePercent)||0;return y+O},0);return A>0?D.value.map(y=>{const b=Number(y==null?void 0:y.sizePercent)||0;return Math.max(0,Math.min(1,b/A))}):Array(v).fill(1/v)});Ce(()=>h.items,()=>{console.log("🔄 Items cambiaron, forzando recálculo de segmentos")},{deep:!0});const _=u(()=>{console.log("🎯 INTERNA - RECALCULANDO SEGMENTOS"),console.log("Props colorMarco:",h.colorMarco);const v=[];let A=0,y=0;return D.value.forEach((b,O)=>{let U,ee;if(b.ancho&&b.alto)U=Number(b.ancho),ee=Number(b.alto),console.log(`📐 Ventana ${O} - Usando dimensiones específicas:`,{ancho:U,alto:ee});else{const P=H.value[O]||0;h.orientacion==="horizontal"?(U=R.value*P,ee=te.value):(U=R.value,ee=te.value*P),console.log(`📐 Ventana ${O} - Calculado por porcentaje:`,{ancho:U,alto:ee,porcentaje:P})}const i=h.x+(h.orientacion==="horizontal"?A*h.escala:0),g=h.y+(h.orientacion==="vertical"?y*h.escala:0),w=h.pathPrefix?`${h.pathPrefix}.${O}`:`${O}`,C={x:i,y:g,ancho:U,alto:ee,escala:h.escala,colorMarco:h.colorMarco};(b==null?void 0:b.tipo)==="compuesta"?v.push({key:"comp-"+O,path:w,isCompuesta:!0,props:{...C,orientacion:b.orientacion||"horizontal",items:b.items||[],pathPrefix:w}}):v.push({key:"simple-"+O,path:w,isCompuesta:!1,props:{...C,tipo:b.tipo,ladoApertura:b.ladoApertura||"izquierda",direccionApertura:b.direccionApertura||"interior"}}),h.orientacion==="horizontal"?A+=U:y+=ee}),v}),t=v=>{if(h.orientacion==="horizontal"){let A=h.x;for(let y=0;y<v;y++){const b=D.value[y];if(b!=null&&b.ancho)A+=Number(b.ancho)*h.escala;else{const O=H.value[y]||0;A+=R.value*O*h.escala}}return A}return h.x+R.value*h.escala/2},c=v=>{if(h.orientacion==="vertical"){let A=h.y;for(let y=0;y<v;y++){const b=D.value[y];if(b!=null&&b.alto)A+=Number(b.alto)*h.escala;else{const O=H.value[y]||0;A+=te.value*O*h.escala}}return A}return h.y+te.value*h.escala/2};return(v,A)=>{const y=le("v-rect"),b=le("v-circle"),O=le("v-text"),U=le("v-group"),ee=le("VistaVentanaCompuestaInterna",!0);return m(),N(U,null,{default:r(()=>[(m(!0),oe(ne,null,ke(_.value,i=>(m(),oe(ne,{key:i.key},[i.isCompuesta?(m(),N(ee,Se({key:1,ref_for:!0},i.props,{"path-prefix":i.path,onAgregar:A[0]||(A[0]=g=>s("agregar",g)),onAgregarBorde:A[1]||(A[1]=g=>s("agregar-borde",g)),onEditarVentana:A[2]||(A[2]=g=>s("editar-ventana",g)),onEliminarVentana:A[3]||(A[3]=g=>s("eliminar-ventana",g))}),null,16,["path-prefix"])):(m(),N(U,{key:0},{default:r(()=>[a(Qa,Se({ref_for:!0},i.props,{color:i.props.colorMarco,colorMarco:i.props.colorMarco}),null,16,["color","colorMarco"]),a(y,{x:i.props.x,y:i.props.y,width:i.props.ancho*i.props.escala,height:i.props.alto*i.props.escala,fill:"transparent",onClick:g=>ue(i.path),style:{cursor:"pointer"}},null,8,["x","y","width","height","onClick"]),a(b,{x:i.props.x+i.props.ancho*i.props.escala-15,y:i.props.y+10,radius:8,fill:"#2196f3",opacity:"0.8",onClick:g=>e(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(O,{x:i.props.x+i.props.ancho*i.props.escala-18,y:i.props.y+6,text:"✏",fontSize:"10",fill:"white",onClick:g=>e(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(b,{x:i.props.x+i.props.ancho*i.props.escala-35,y:i.props.y+10,radius:8,fill:"#f44336",opacity:"0.8",onClick:g=>p(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"]),a(O,{x:i.props.x+i.props.ancho*i.props.escala-38,y:i.props.y+6,text:"✖",fontSize:"10",fill:"white",onClick:g=>p(g,i.path),style:{cursor:"pointer"}},null,8,["x","y","onClick"])]),_:2},1024))],64))),128)),(m(!0),oe(ne,null,ke(D.value.length+1,i=>(m(),N(U,{key:"plus-"+i,onClick:g=>k(i-1),style:{cursor:"pointer"}},{default:r(()=>[a(b,{x:t(i-1),y:c(i-1),radius:14,fill:"#fff",stroke:"#1976d2",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(O,{x:t(i-1)-7,y:c(i-1)-10,text:"+",fontSize:"24",fill:"#1976d2",fontStyle:"bold"},null,8,["x","y"])]),_:2},1032,["onClick"]))),128))]),_:1})}}}),jl=tl(zl,[["__scopeId","data-v-86a7a837"]]),Xe=860,We=360,Cl={__name:"VistaVentanaCompuestaDinamica",props:{ancho:{type:[Number,String],required:!0},alto:{type:[Number,String],required:!0},colorMarco:{type:[String,Object],default:"blanco"},orientacion:{type:String,default:"horizontal"},items:{type:Array,default:()=>[]},forceReRender:{type:Number,default:0}},emits:["agregar","agregar-borde","editar-ventana","eliminar-ventana"],setup(T,{emit:xe}){const s=xe,F=T,W=u(()=>Number(F.ancho)||1),h=u(()=>Number(F.alto)||1),k=u(()=>{const e=Xe/W.value,p=We/h.value,ue=Math.min(e,p);return Math.max(ue,.1)}),q=u(()=>{const e=W.value*k.value;return e<Xe?(Xe-e)/2+20:20}),f=u(()=>{const e=h.value*k.value;return e<We?(We-e)/2+20:20});return(e,p)=>{const ue=le("v-rect"),R=le("v-circle"),te=le("v-text"),D=le("v-group"),H=le("v-layer"),_=le("v-stage");return m(),N(_,{config:{width:900,height:420}},{default:r(()=>[a(H,null,{default:r(()=>[a(ue,{x:0,y:0,width:900,height:420,stroke:"#444",strokeWidth:1}),(m(),N(jl,{key:`interna-${T.forceReRender}`,ancho:T.ancho,alto:T.alto,colorMarco:T.colorMarco,orientacion:T.orientacion,items:T.items,escala:k.value,x:q.value,y:f.value,onAgregar:p[0]||(p[0]=t=>s("agregar",t)),onAgregarBorde:p[1]||(p[1]=t=>s("agregar-borde",t)),onEditarVentana:p[2]||(p[2]=t=>s("editar-ventana",t)),onEliminarVentana:p[3]||(p[3]=t=>s("eliminar-ventana",t))},null,8,["ancho","alto","colorMarco","orientacion","items","escala","x","y"])),a(D,{onClick:p[4]||(p[4]=t=>s("agregar-borde","arriba")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:q.value+W.value*k.value/2,y:f.value-15,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(te,{x:q.value+W.value*k.value/2-7,y:f.value-25,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(D,{onClick:p[5]||(p[5]=t=>s("agregar-borde","abajo")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:q.value+W.value*k.value/2,y:f.value+h.value*k.value+15,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(te,{x:q.value+W.value*k.value/2-7,y:f.value+h.value*k.value+5,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(D,{onClick:p[6]||(p[6]=t=>s("agregar-borde","izquierda")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:q.value-15,y:f.value+h.value*k.value/2,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(te,{x:q.value-22,y:f.value+h.value*k.value/2-10,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1}),a(D,{onClick:p[7]||(p[7]=t=>s("agregar-borde","derecha")),style:{cursor:"pointer"}},{default:r(()=>[a(R,{x:q.value+W.value*k.value+15,y:f.value+h.value*k.value/2,radius:14,fill:"#fff",stroke:"#ff5722",strokeWidth:2,opacity:"0.85"},null,8,["x","y"]),a(te,{x:q.value+W.value*k.value+8,y:f.value+h.value*k.value/2-10,text:"+",fontSize:"24",fill:"#ff5722",fontStyle:"bold"},null,8,["x","y"])]),_:1})]),_:1})]),_:1})}}},Il={class:"d-flex align-center justify-space-between"},ql={class:"text-h6"},Sl={class:"text-caption"},wl=.45,Pl={__name:"AgregarVentanaModal2",props:{mostrar:Boolean,materiales:Array,colores:Array,tiposVidrio:Array,tiposVentana:Array,productosVidrio:Array,ventana:Object,materialDefault:[String,Number],colorDefault:[String,Number],tipoVidrioDefault:[String,Number],productoVidrioDefault:[String,Number]},emits:["update:mostrar","guardar"],setup(T,{emit:xe}){const s=T,F=xe,W=de(s.mostrar);Ce(()=>s.mostrar,n=>{W.value=n}),Ce(W,n=>{F("update:mostrar",n)});const h=u(()=>!!s.ventana),k=()=>({tipo:2,sizePercent:null,ladoApertura:"izquierda",direccionApertura:"interior"});function q(){const n=Math.min(Math.max(Number(e.value.cantidadComp||2),2),8);if(e.value.cantidadComp=n,e.value.itemsComp||(e.value.itemsComp=[]),e.value.itemsComp.length<n){const l=n-e.value.itemsComp.length;for(let o=0;o<l;o++)e.value.itemsComp.push(k())}else e.value.itemsComp.length>n&&e.value.itemsComp.splice(n);e.value.itemsComp.forEach(l=>{l.tipo||(l.tipo=2)}),console.log("ajustarCantidadItems ejecutado, items finales:",e.value.itemsComp)}const f={tipo:null,ancho:null,alto:null,cantidad:1,material:s.materialDefault??null,color:s.colorDefault??null,tipoVidrio:s.tipoVidrioDefault??null,productoVidrioProveedor:s.productoVidrioDefault??null,hojas_totales:2,hojas_moviles:2,materiales:[],costo_total:0,costo_total_unitario:0,costo:0,precio_unitario:0,precio:0,hoja1AlFrente:!0,ladoApertura:"izquierda",direccionApertura:"interior",pasoLibre:!1,hojaActiva:"derecha",tipoVentanaIzquierda:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaDerecha:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaCentro:{tipo:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:null,hoja1AlFrente:!0},ancho_izquierda:null,ancho_centro:null,ancho_derecha:null,orientacionComp:"horizontal",cantidadComp:2,itemsComp:[k(),k()]},e=de({...f,...s.ventana||{}}),p=[{id:2,nombre:"Fija"},{id:45,nombre:"Proyectante"},{id:3,nombre:"Corredera"},{id:49,nombre:"Abatible"},{id:50,nombre:"Puerta S60"}],ue=[{id:2,nombre:"Fija"},{id:3,nombre:"Corredera Sliding"},{id:45,nombre:"Proyectante S60"},{id:50,nombre:"Puerta S60"}];Ce(()=>s.mostrar,n=>{n&&!s.ventana&&(e.value={...f,material:s.materialDefault??null,color:s.colorDefault??null,tipoVidrio:s.tipoVidrioDefault??null,productoVidrioProveedor:s.productoVidrioDefault??null,tipoVentanaIzquierda:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"}]},tipoVentanaDerecha:{compuesta:!1,ladoApertura:"izquierda",direccionApertura:"interior",partes:[{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:null,alto:null,hojas_totales:2,hojas_moviles:2,hojaMovilSeleccionada:1,ladoApertura:"izquierda",direccionApertura:"interior"}]}}),n&&s.ventana&&(e.value={...f,...s.ventana})},{immediate:!0});const R=u(()=>e.value.tipoVidrio?s.productosVidrio.filter(n=>n.tipo_producto_id===e.value.tipoVidrio).flatMap(n=>n.colores_por_proveedor.map(l=>{var o;return{id:l.id,producto_id:n.id,proveedor_id:l.proveedor_id,nombre:`${n.nombre} (${((o=l.proveedor)==null?void 0:o.nombre)||"Proveedor desconocido"})`}})):[]),te=u(()=>{const n=e.value.material??s.materialDefault;return s.tiposVentana.filter(l=>l.material_id===n)}),D=de(null),H=()=>{W.value=!1};async function _(){if(e.value.tipo&&e.value.ancho&&e.value.alto&&e.value.cantidad&&e.value.color&&e.value.productoVidrioProveedor)try{const n=s.productosVidrio.flatMap(V=>V.colores_por_proveedor.map(d=>({id:d.id,producto_id:V.id,proveedor_id:d.proveedor_id}))).find(V=>V.id===e.value.productoVidrioProveedor),l={tipo_ventana_id:e.value.tipo,tipo:e.value.tipo,ancho:e.value.ancho,alto:e.value.alto,cantidad:e.value.cantidad,color_id:e.value.color,color:e.value.color,producto_vidrio_proveedor_id:e.value.productoVidrioProveedor,producto_id:n==null?void 0:n.producto_id,proveedor_id:n==null?void 0:n.proveedor_id,productoVidrio:n==null?void 0:n.producto_id,proveedorVidrio:n==null?void 0:n.proveedor_id,tipoVidrio:e.value.tipoVidrio,hojas_totales:[3,46,52].includes(e.value.tipo)?e.value.hojas_totales:void 0,hojas_moviles:[3,46,52].includes(e.value.tipo)?e.value.hojas_moviles:void 0,hojaMovilSeleccionada:[3,46,52].includes(e.value.tipo)?e.value.hojaMovilSeleccionada:void 0,hoja1AlFrente:[3,46,52].includes(e.value.tipo)?e.value.hoja1AlFrente:void 0,direccionApertura:e.value.direccionApertura,ladoApertura:e.value.ladoApertura,pasoLibre:[50,51].includes(e.value.tipo)?e.value.pasoLibre:void 0,hojaActiva:e.value.tipo===51?e.value.hojaActiva:void 0,...e.value.tipo===47&&{ancho_izquierda:e.value.ancho_izquierda,ancho_centro:e.value.ancho_centro,ancho_derecha:e.value.ancho_derecha,tipoVentanaIzquierda:e.value.tipoVentanaIzquierda,tipoVentanaCentro:e.value.tipoVentanaCentro,tipoVentanaDerecha:e.value.tipoVentanaDerecha}};console.log("Payload a calcular-materiales:",l);const{data:o}=await Ka.post("/api/cotizador/calcular-materiales",l);e.value.costo_total_unitario=o.costo_unitario,e.value.costo_total=o.costo_unitario*e.value.cantidad,e.value.precio=Math.ceil(e.value.costo_total/(1-wl)),e.value.materiales=o.materiales}catch{e.value.costo_total_unitario=0,e.value.costo_total=0,e.value.precio=0,e.value.materiales=[]}else e.value.costo_total_unitario=0,e.value.costo_total=0,e.value.precio=0,e.value.materiales=[]}const t=()=>{var n;if(!e.value.tipo||!e.value.ancho||!e.value.alto||!e.value.cantidad){alert("Completa todos los campos obligatorios");return}F("guardar",{...e.value,index:(n=s.ventana)==null?void 0:n.index}),H()};Ce(()=>e.value.material,()=>{e.value.tipo=null}),Ce(()=>{var n,l,o,V,d,B,z,S,ae,ie,_e,se,pe,G,we,Re,Fe,Ye,Ge,Je,Ke,Qe,Ze,ea,aa,la,oa,ta,ua,ra,na,ia,va,sa,ca,da,pa,ma,fa,ha,ga,ba,Va,ya,xa,Aa,ka,Ma,_a,za,ja,Ca,Ia,qa,Sa,wa,Pa,Da,Ua;return[e.value.tipo,e.value.ancho,e.value.alto,e.value.cantidad,e.value.material,e.value.color,e.value.tipoVidrio,e.value.productoVidrioProveedor,e.value.direccionApertura,e.value.ladoApertura,e.value.pasoLibre,e.value.ancho_izquierda,e.value.ancho_centro,e.value.ancho_derecha,(n=e.value.tipoVentanaIzquierda)==null?void 0:n.compuesta,(l=e.value.tipoVentanaIzquierda)==null?void 0:l.ladoApertura,(o=e.value.tipoVentanaIzquierda)==null?void 0:o.direccionApertura,(B=(d=(V=e.value.tipoVentanaIzquierda)==null?void 0:V.partes)==null?void 0:d[0])==null?void 0:B.tipo,(ae=(S=(z=e.value.tipoVentanaIzquierda)==null?void 0:z.partes)==null?void 0:S[0])==null?void 0:ae.alto,(se=(_e=(ie=e.value.tipoVentanaIzquierda)==null?void 0:ie.partes)==null?void 0:_e[0])==null?void 0:se.ladoApertura,(we=(G=(pe=e.value.tipoVentanaIzquierda)==null?void 0:pe.partes)==null?void 0:G[0])==null?void 0:we.direccionApertura,(Ye=(Fe=(Re=e.value.tipoVentanaIzquierda)==null?void 0:Re.partes)==null?void 0:Fe[1])==null?void 0:Ye.tipo,(Ke=(Je=(Ge=e.value.tipoVentanaIzquierda)==null?void 0:Ge.partes)==null?void 0:Je[1])==null?void 0:Ke.alto,(ea=(Ze=(Qe=e.value.tipoVentanaIzquierda)==null?void 0:Qe.partes)==null?void 0:Ze[1])==null?void 0:ea.ladoApertura,(oa=(la=(aa=e.value.tipoVentanaIzquierda)==null?void 0:aa.partes)==null?void 0:la[1])==null?void 0:oa.direccionApertura,(ta=e.value.tipoVentanaCentro)==null?void 0:ta.tipo,(ua=e.value.tipoVentanaCentro)==null?void 0:ua.hojas_totales,(ra=e.value.tipoVentanaCentro)==null?void 0:ra.hojas_moviles,(na=e.value.tipoVentanaCentro)==null?void 0:na.hojaMovilSeleccionada,(ia=e.value.tipoVentanaCentro)==null?void 0:ia.hoja1AlFrente,(va=e.value.tipoVentanaDerecha)==null?void 0:va.compuesta,(sa=e.value.tipoVentanaDerecha)==null?void 0:sa.ladoApertura,(ca=e.value.tipoVentanaDerecha)==null?void 0:ca.direccionApertura,(ma=(pa=(da=e.value.tipoVentanaDerecha)==null?void 0:da.partes)==null?void 0:pa[0])==null?void 0:ma.tipo,(ga=(ha=(fa=e.value.tipoVentanaDerecha)==null?void 0:fa.partes)==null?void 0:ha[0])==null?void 0:ga.alto,(ya=(Va=(ba=e.value.tipoVentanaDerecha)==null?void 0:ba.partes)==null?void 0:Va[0])==null?void 0:ya.ladoApertura,(ka=(Aa=(xa=e.value.tipoVentanaDerecha)==null?void 0:xa.partes)==null?void 0:Aa[0])==null?void 0:ka.direccionApertura,(za=(_a=(Ma=e.value.tipoVentanaDerecha)==null?void 0:Ma.partes)==null?void 0:_a[1])==null?void 0:za.tipo,(Ia=(Ca=(ja=e.value.tipoVentanaDerecha)==null?void 0:ja.partes)==null?void 0:Ca[1])==null?void 0:Ia.alto,(wa=(Sa=(qa=e.value.tipoVentanaDerecha)==null?void 0:qa.partes)==null?void 0:Sa[1])==null?void 0:wa.ladoApertura,(Ua=(Da=(Pa=e.value.tipoVentanaDerecha)==null?void 0:Pa.partes)==null?void 0:Da[1])==null?void 0:Ua.direccionApertura]},_,{immediate:!0}),Ce(()=>e.value.productoVidrioProveedor,n=>{const l=s.productosVidrio.flatMap(o=>o.colores_por_proveedor.map(V=>({...o,cpp:V}))).find(o=>o.cpp.id===n);e.value.productoVidrio=l?l.id:null});const c=n=>{if(n==null)return!1;const l=Number(n);return!Number.isNaN(l)&&l===49||String(n).toLowerCase().includes("abat")},v=de([]);Ce(()=>{var n,l;return(l=(n=e.value)==null?void 0:n.itemsComp)==null?void 0:l.length},()=>{v.value=[]}),Ce(()=>e.value.tipo,n=>{var l,o,V;Number(n)===54&&((l=e.value).orientacionComp??(l.orientacionComp="horizontal"),(o=e.value).cantidadComp??(o.cantidadComp=2),(V=e.value).itemsComp??(V.itemsComp=[k(),k()]))});const A=de(!1),y=de(null);function b(n){y.value=n,A.value=!0}function O(n){console.log("=== AGREGAR BORDE ==="),console.log("Posición:",n),console.log("Orientación actual:",e.value.orientacionComp),console.log("Items ANTES:",JSON.stringify(e.value.itemsComp,null,2));const l=["arriba","abajo"].includes(n)?"vertical":"horizontal";if(console.log("Nueva orientación necesaria:",l),e.value.orientacionComp!==l){console.log("Orientación cambió, envolviendo items existentes...");const o=[...e.value.itemsComp],V={tipo:"compuesta",orientacion:e.value.orientacionComp,items:o};e.value.itemsComp=[V],e.value.orientacionComp=l,console.log("Items después de envolver:",JSON.stringify(e.value.itemsComp,null,2))}else console.log("Orientación NO cambió, no envolviendo");switch(n){case"arriba":case"izquierda":y.value=0;break;case"abajo":case"derecha":y.value=e.value.itemsComp.length;break}console.log("Índice para insertar:",y.value),console.log("Orientación final:",e.value.orientacionComp),console.log("=== FIN DEBUG ==="),A.value=!0}function U(n){const l=k();l.tipo=n||2,e.value.itemsComp.splice(y.value,0,l),e.value.itemsComp=[...e.value.itemsComp],L.value++,console.log("Items después de agregar:",e.value.itemsComp),A.value=!1}function ee(){const n={tipo:"compuesta",orientacion:"horizontal",items:[{tipo:2,ladoApertura:"izquierda",direccionApertura:"interior"},{tipo:2,ladoApertura:"izquierda",direccionApertura:"interior"}]};e.value.itemsComp.splice(y.value,0,n),L.value++,A.value=!1}const i=de(null),g=de(!1),w=de("");function C(n){console.log("=== EDITAR VENTANA INDIVIDUAL ==="),console.log("Path:",n),w.value=n;const l=Ie(n);if(l){const o=P(n);i.value={tipo:l.tipo||2,ancho:o.ancho,alto:o.alto,sizePercent:l.sizePercent||null,ladoApertura:l.ladoApertura||"izquierda",direccionApertura:l.direccionApertura||"interior",...l},console.log("Dimensiones reales calculadas:",o),console.log("Datos de ventana a editar:",i.value),g.value=!0}else console.error("No se encontró ventana en path:",n)}function P(n){const l=n.split(".").map(Number);let o=e.value.ancho||2e3,V=e.value.alto||2e3,d=e.value.orientacionComp||"horizontal",B=e.value.itemsComp;console.log("🔍 Calculando dimensiones para path:",n),console.log("Dimensiones iniciales:",{ancho:o,alto:V,orientacion:d});for(let S=0;S<l.length;S++){const ae=l[S],ie=B[ae];if(!ie){console.error("Item no encontrado en nivel",S,"índice",ae);break}console.log(`Nivel ${S}, índice ${ae}:`,ie);const _e=B.length,se=B.map(we=>Number(we.sizePercent)||0),pe=se.reduce((we,Re)=>we+Re,0);let G;if(pe>0?G=se[ae]/pe:G=1/_e,console.log(`Porcentaje del item en este nivel: ${G} (${(G*100).toFixed(1)}%)`),d==="horizontal"?o=o*G:V=V*G,console.log(`Nuevas dimensiones: ${o} x ${V}`),S===l.length-1)break;if(ie.tipo==="compuesta")d=ie.orientacion||"horizontal",B=ie.items||[],console.log(`Navegando a compuesta con orientación: ${d}`);else{console.error("Item no es compuesta pero no es el último nivel");break}}const z={ancho:Math.round(o),alto:Math.round(V)};return console.log("✅ Dimensiones finales calculadas:",z),z}const $=u(()=>{const n=Number(i.value.ancho)||0,l=Number(i.value.alto)||0;return n*l/1e6}),je=u(()=>{const n=$.value,l=i.value.tipo;return n*({2:15e4,3:2e5,45:22e4,49:25e4,50:28e4}[l]||15e4)});function Me(n){const l=p.find(o=>o.id===n);return l?l.nombre:`Tipo ${n}`}function be(){var l;function n(o,V,d){var B;if(o.tipo==="compuesta")return((B=o.items)==null?void 0:B.reduce((z,S)=>z+n(S,V,d),0))||0;{const z=o.ancho||V,S=o.alto||d;return z*S/1e6*({2:15e4,3:2e5,45:22e4,49:25e4,50:28e4}[o.tipo]||15e4)}}return((l=e.value.itemsComp)==null?void 0:l.reduce((o,V)=>o+n(V,e.value.ancho,e.value.alto),0))||0}const Ve=u(()=>be());function Ie(n){var d;const l=n.split(".").map(Number);let o=e.value.itemsComp;console.log("Navegando path:",n,"indices:",l),console.log("Items iniciales:",o);for(let B=0;B<l.length-1;B++){const z=l[B];if(console.log(`Navegando índice ${B}: ${z}`),((d=o[z])==null?void 0:d.tipo)==="compuesta")o=o[z].items,console.log("Items en nivel",B+1,":",o);else return console.error("No es compuesta en índice",z),null}const V=l[l.length-1];return console.log("Índice final:",V,"Item encontrado:",o[V]),o[V]}function qe(n,l){var B;const o=n.split(".").map(Number);let V=e.value.itemsComp;for(let z=0;z<o.length-1;z++){const S=o[z];if(((B=V[S])==null?void 0:B.tipo)==="compuesta")V=V[S].items;else return console.error("Error: no es compuesta en índice",S),!1}const d=o[o.length-1];if(V[d]){const z={...V[d],tipo:l.tipo,ancho:l.ancho,alto:l.alto,sizePercent:l.sizePercent,ladoApertura:l.ladoApertura,direccionApertura:l.direccionApertura};return V[d]=z,console.log("Ventana actualizada:",V[d]),e.value.itemsComp=JSON.parse(JSON.stringify(e.value.itemsComp)),e.value={...e.value},Ja(()=>{console.log("✅ Forzando re-render después de actualizar ventana")}),!0}return!1}const L=de(0);function j(){console.log("=== GUARDANDO CAMBIOS ==="),console.log("Datos a guardar:",i.value),console.log("Path:",w.value),qe(w.value,{tipo:i.value.tipo,ancho:i.value.ancho,alto:i.value.alto,sizePercent:i.value.sizePercent,ladoApertura:i.value.ladoApertura,direccionApertura:i.value.direccionApertura})?(console.log("✅ Ventana actualizada correctamente"),M(),L.value++,console.log("🔄 Forzando re-render con key:",L.value),g.value=!1):(console.error("❌ Error al actualizar ventana"),alert("Error al actualizar la ventana"))}function M(){console.log("=== DEBUG ITEMS COMPUESTA ==="),console.log("Items actuales:",JSON.stringify(e.value.itemsComp,null,2)),console.log("Orientación:",e.value.orientacionComp),console.log("Dimensiones contenedor:",{ancho:e.value.ancho,alto:e.value.alto}),console.log("=== FIN DEBUG ===")}function x(n){console.log("=== ELIMINAR VENTANA ==="),console.log("Path:",n),confirm("¿Estás seguro de eliminar esta ventana?")&&(X(n)?(console.log("✅ Ventana eliminada correctamente"),L.value++):(console.error("❌ Error al eliminar ventana"),alert("Error al eliminar la ventana")))}function X(n){var z;const l=n.split(".").map(Number);let o=e.value.itemsComp,V=null,d=null;for(let S=0;S<l.length-1;S++){const ae=l[S];if(V=o,d=ae,((z=o[ae])==null?void 0:z.tipo)==="compuesta")o=o[ae].items;else return console.error("Error: no es compuesta en índice",ae),!1}const B=l[l.length-1];if(V===null&&(V={items:e.value.itemsComp},o=e.value.itemsComp),o[B]){if(o.splice(B,1),console.log("Ventana eliminada. Items restantes:",o.length),o.length===1&&V!==null&&d!==null){const S=o[0];V.items?V.items[d]=S:V[d]=S,console.log("Compuesta simplificada porque quedó solo 1 item")}return e.value.itemsComp.length===0&&(e.value.itemsComp=[k(),k()],console.log("Sin items restantes, reiniciando con defaults")),e.value.itemsComp=[...e.value.itemsComp],!0}return!1}return(n,l)=>(m(),oe(ne,null,[a(Oe,{modelValue:W.value,"onUpdate:modelValue":l[53]||(l[53]=o=>W.value=o),"max-width":"1200px",persistent:""},{default:r(()=>[a(Le,{class:"pa-4"},{default:r(()=>[a(He,{class:"text-h5"},{default:r(()=>[ye(ze(h.value?"Editar ventana":"Agregar ventana"),1)]),_:1}),a($e,{class:"mb-4"}),a(ul,{ref_key:"formRef",ref:D,onSubmit:Ga(t,["prevent"])},{default:r(()=>[a(ce,{dense:""},{default:r(()=>[a(I,{cols:"12",md:"4"},{default:r(()=>[a(he,{modelValue:e.value.tipo,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.tipo=o),items:te.value,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","items","rules"])]),_:1}),a(I,{cols:"6",md:"2"},{default:r(()=>[a(Ae,{modelValue:e.value.ancho,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.ancho=o),modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",min:"1",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1}),a(I,{cols:"6",md:"2"},{default:r(()=>[a(Ae,{modelValue:e.value.alto,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",min:"1",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1}),a(I,{cols:"6",md:"2"},{default:r(()=>[a(Ae,{modelValue:e.value.cantidad,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.cantidad=o),modelModifiers:{number:!0},label:"Cantidad",type:"number",min:"1",rules:[o=>!!o||"Requerido"],outlined:"",color:"primary",required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),a(ce,{dense:""},{default:r(()=>[a(I,{cols:"6",md:"3"},{default:r(()=>[a(he,{modelValue:e.value.material,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.material=o),items:T.materiales,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(I,{cols:"6",md:"3"},{default:r(()=>[a(he,{modelValue:e.value.color,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.color=o),items:T.colores,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(I,{cols:"6",md:"3"},{default:r(()=>[a(he,{modelValue:e.value.tipoVidrio,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.tipoVidrio=o),items:T.tiposVidrio,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(I,{cols:"6",md:"3"},{default:r(()=>[a(he,{modelValue:e.value.productoVidrioProveedor,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.productoVidrioProveedor=o),items:R.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),e.value.tipo===47?(m(),N(ce,{key:0,dense:""},{default:r(()=>[a(I,{cols:"4"},{default:r(()=>[a(Ae,{modelValue:e.value.ancho_izquierda,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.ancho_izquierda=o),modelModifiers:{number:!0},label:"Ancho izquierda (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(I,{cols:"4"},{default:r(()=>[a(Ae,{modelValue:e.value.ancho_centro,"onUpdate:modelValue":l[9]||(l[9]=o=>e.value.ancho_centro=o),modelModifiers:{number:!0},label:"Ancho centro (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(I,{cols:"4"},{default:r(()=>[a(Ae,{modelValue:e.value.ancho_derecha,"onUpdate:modelValue":l[10]||(l[10]=o=>e.value.ancho_derecha=o),modelModifiers:{number:!0},label:"Ancho derecha (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})):re("",!0),e.value.tipo===47?(m(),N(ce,{key:1,dense:""},{default:r(()=>[a(I,{cols:"6"},{default:r(()=>[a(Ne,{modelValue:e.value.tipoVentanaIzquierda.compuesta,"onUpdate:modelValue":l[11]||(l[11]=o=>e.value.tipoVentanaIzquierda.compuesta=o),label:"¿Ventana izquierda compuesta?",color:"primary"},null,8,["modelValue"])]),_:1}),a(I,{cols:"6"},{default:r(()=>[a(Ne,{modelValue:e.value.tipoVentanaDerecha.compuesta,"onUpdate:modelValue":l[12]||(l[12]=o=>e.value.tipoVentanaDerecha.compuesta=o),label:"¿Ventana derecha compuesta?",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})):re("",!0),e.value.tipo===47?(m(),oe(ne,{key:2},[a(ce,{dense:""},{default:r(()=>[a(I,{cols:"12"},{default:r(()=>l[64]||(l[64]=[ge("h4",null,"Ventana Izquierda",-1)])),_:1}),e.value.tipoVentanaIzquierda.compuesta?(m(),oe(ne,{key:0},[a(I,{cols:"6"},{default:r(()=>[l[65]||(l[65]=ge("h5",null,"Parte superior",-1)),a(he,{modelValue:e.value.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":l[13]||(l[13]=o=>e.value.tipoVentanaIzquierda.partes[0].tipo=o),items:p,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(Ae,{modelValue:e.value.tipoVentanaIzquierda.partes[0].alto,"onUpdate:modelValue":l[14]||(l[14]=o=>e.value.tipoVentanaIzquierda.partes[0].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaIzquierda.partes[0].tipo)?(m(),oe(ne,{key:0},[a(ve,{modelValue:e.value.tipoVentanaIzquierda.partes[0].ladoApertura,"onUpdate:modelValue":l[15]||(l[15]=o=>e.value.tipoVentanaIzquierda.partes[0].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ve,{modelValue:e.value.tipoVentanaIzquierda.partes[0].direccionApertura,"onUpdate:modelValue":l[16]||(l[16]=o=>e.value.tipoVentanaIzquierda.partes[0].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1}),a(I,{cols:"6"},{default:r(()=>[l[66]||(l[66]=ge("h5",null,"Parte inferior",-1)),a(he,{modelValue:e.value.tipoVentanaIzquierda.partes[1].tipo,"onUpdate:modelValue":l[17]||(l[17]=o=>e.value.tipoVentanaIzquierda.partes[1].tipo=o),items:p,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(Ae,{modelValue:e.value.tipoVentanaIzquierda.partes[1].alto,"onUpdate:modelValue":l[18]||(l[18]=o=>e.value.tipoVentanaIzquierda.partes[1].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaIzquierda.partes[1].tipo)?(m(),oe(ne,{key:0},[a(ve,{modelValue:e.value.tipoVentanaIzquierda.partes[1].ladoApertura,"onUpdate:modelValue":l[19]||(l[19]=o=>e.value.tipoVentanaIzquierda.partes[1].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ve,{modelValue:e.value.tipoVentanaIzquierda.partes[1].direccionApertura,"onUpdate:modelValue":l[20]||(l[20]=o=>e.value.tipoVentanaIzquierda.partes[1].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1})],64)):(m(),oe(ne,{key:1},[a(I,{cols:"4"},{default:r(()=>[a(he,{modelValue:e.value.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":l[21]||(l[21]=o=>e.value.tipoVentanaIzquierda.partes[0].tipo=o),items:p,"item-title":"nombre","item-value":"id",label:"Tipo de ventana izquierda",outlined:""},null,8,["modelValue"])]),_:1}),c(e.value.tipoVentanaIzquierda.partes[0].tipo)?(m(),N(I,{key:0,cols:"4"},{default:r(()=>[a(ve,{modelValue:e.value.tipoVentanaIzquierda.ladoApertura,"onUpdate:modelValue":l[22]||(l[22]=o=>e.value.tipoVentanaIzquierda.ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1})):re("",!0),c(e.value.tipoVentanaIzquierda.partes[0].tipo)?(m(),N(I,{key:1,cols:"4"},{default:r(()=>[a(ve,{modelValue:e.value.tipoVentanaIzquierda.direccionApertura,"onUpdate:modelValue":l[23]||(l[23]=o=>e.value.tipoVentanaIzquierda.direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})):re("",!0)],64))]),_:1}),a(ce,{dense:""},{default:r(()=>[a(I,{cols:"12"},{default:r(()=>l[67]||(l[67]=[ge("h4",null,"Ventana Centro",-1)])),_:1}),a(I,{cols:"4"},{default:r(()=>[a(he,{modelValue:e.value.tipoVentanaCentro.tipo,"onUpdate:modelValue":l[24]||(l[24]=o=>e.value.tipoVentanaCentro.tipo=o),items:ue,"item-title":"nombre","item-value":"id",label:"Tipo de ventana centro",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),e.value.tipoVentanaCentro&&[3,46].includes(e.value.tipoVentanaCentro.tipo)?(m(),oe(ne,{key:0},[a(I,{cols:"4"},{default:r(()=>[a(he,{modelValue:e.value.tipoVentanaCentro.hojas_totales,"onUpdate:modelValue":l[25]||(l[25]=o=>e.value.tipoVentanaCentro.hojas_totales=o),items:[1,2,3,4],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(I,{cols:"4"},{default:r(()=>[a(he,{modelValue:e.value.tipoVentanaCentro.hojas_moviles,"onUpdate:modelValue":l[26]||(l[26]=o=>e.value.tipoVentanaCentro.hojas_moviles=o),items:[1,2,3,4],label:"Hojas móviles",disabled:!e.value.tipoVentanaCentro.hojas_totales,outlined:"",color:"primary"},null,8,["modelValue","disabled"])]),_:1}),e.value.tipoVentanaCentro.hojas_moviles===1?(m(),N(I,{key:0,cols:"12"},{default:r(()=>[a(ve,{modelValue:e.value.tipoVentanaCentro.hojaMovilSeleccionada,"onUpdate:modelValue":l[27]||(l[27]=o=>e.value.tipoVentanaCentro.hojaMovilSeleccionada=o),row:"",label:"Selecciona la hoja que se mueve"},{default:r(()=>[a(E,{label:"Mover hoja izquierda (1)",value:1}),a(E,{label:"Mover hoja derecha (2)",value:2})]),_:1},8,["modelValue"])]),_:1})):re("",!0)],64)):re("",!0)]),_:1}),a(ce,{dense:""},{default:r(()=>[a(I,{cols:"12"},{default:r(()=>l[68]||(l[68]=[ge("h4",null,"Ventana Derecha",-1)])),_:1}),e.value.tipoVentanaDerecha.compuesta?(m(),oe(ne,{key:0},[a(I,{cols:"6"},{default:r(()=>[l[69]||(l[69]=ge("h5",null,"Parte superior",-1)),a(he,{modelValue:e.value.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":l[28]||(l[28]=o=>e.value.tipoVentanaDerecha.partes[0].tipo=o),items:p,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(Ae,{modelValue:e.value.tipoVentanaDerecha.partes[0].alto,"onUpdate:modelValue":l[29]||(l[29]=o=>e.value.tipoVentanaDerecha.partes[0].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaDerecha.partes[0].tipo)?(m(),oe(ne,{key:0},[a(ve,{modelValue:e.value.tipoVentanaDerecha.partes[0].ladoApertura,"onUpdate:modelValue":l[30]||(l[30]=o=>e.value.tipoVentanaDerecha.partes[0].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ve,{modelValue:e.value.tipoVentanaDerecha.partes[0].direccionApertura,"onUpdate:modelValue":l[31]||(l[31]=o=>e.value.tipoVentanaDerecha.partes[0].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1}),a(I,{cols:"6"},{default:r(()=>[l[70]||(l[70]=ge("h5",null,"Parte inferior",-1)),a(he,{modelValue:e.value.tipoVentanaDerecha.partes[1].tipo,"onUpdate:modelValue":l[32]||(l[32]=o=>e.value.tipoVentanaDerecha.partes[1].tipo=o),items:p,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue"]),a(Ae,{modelValue:e.value.tipoVentanaDerecha.partes[1].alto,"onUpdate:modelValue":l[33]||(l[33]=o=>e.value.tipoVentanaDerecha.partes[1].alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue"]),c(e.value.tipoVentanaDerecha.partes[1].tipo)?(m(),oe(ne,{key:0},[a(ve,{modelValue:e.value.tipoVentanaDerecha.partes[1].ladoApertura,"onUpdate:modelValue":l[34]||(l[34]=o=>e.value.tipoVentanaDerecha.partes[1].ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"]),a(ve,{modelValue:e.value.tipoVentanaDerecha.partes[1].direccionApertura,"onUpdate:modelValue":l[35]||(l[35]=o=>e.value.tipoVentanaDerecha.partes[1].direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])],64)):re("",!0)]),_:1})],64)):(m(),oe(ne,{key:1},[a(I,{cols:"4"},{default:r(()=>[a(he,{modelValue:e.value.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":l[36]||(l[36]=o=>e.value.tipoVentanaDerecha.partes[0].tipo=o),items:p,"item-title":"nombre","item-value":"id",label:"Tipo de ventana derecha",outlined:""},null,8,["modelValue"])]),_:1}),c(e.value.tipoVentanaDerecha.partes[0].tipo)?(m(),N(I,{key:0,cols:"4"},{default:r(()=>[a(ve,{modelValue:e.value.tipoVentanaDerecha.ladoApertura,"onUpdate:modelValue":l[37]||(l[37]=o=>e.value.tipoVentanaDerecha.ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1})):re("",!0),c(e.value.tipoVentanaDerecha.partes[0].tipo)?(m(),N(I,{key:1,cols:"4"},{default:r(()=>[a(ve,{modelValue:e.value.tipoVentanaDerecha.direccionApertura,"onUpdate:modelValue":l[38]||(l[38]=o=>e.value.tipoVentanaDerecha.direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})):re("",!0)],64))]),_:1})],64)):re("",!0),[3,46,52].includes(e.value.tipo)?(m(),N(ce,{key:3},{default:r(()=>[a(I,{cols:"6",md:"3"},{default:r(()=>[a(he,{modelValue:e.value.hojas_totales,"onUpdate:modelValue":l[39]||(l[39]=o=>e.value.hojas_totales=o),items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue"])]),_:1}),a(I,{cols:"6",md:"3"},{default:r(()=>[a(he,{modelValue:e.value.hojas_moviles,"onUpdate:modelValue":l[40]||(l[40]=o=>e.value.hojas_moviles=o),items:[1,2,3,4],label:"Hojas móviles",disabled:!e.value.hojas_totales,rules:[o=>!o||o<=e.value.hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","disabled","rules"])]),_:1}),e.value.hojas_moviles===1?(m(),N(I,{key:0,cols:"12",md:"6"},{default:r(()=>[a(ve,{modelValue:e.value.hojaMovilSeleccionada,"onUpdate:modelValue":l[41]||(l[41]=o=>e.value.hojaMovilSeleccionada=o),row:"",label:"Selecciona la hoja que se mueve"},{default:r(()=>[a(E,{label:"Mover hoja izquierda (1)",value:1}),a(E,{label:"Mover hoja derecha (2)",value:2})]),_:1},8,["modelValue"])]),_:1})):re("",!0)]),_:1})):re("",!0),e.value.tipo===50?(m(),N(ce,{key:4,dense:""},{default:r(()=>[a(I,{cols:"12",md:"4"},{default:r(()=>[a(ve,{modelValue:e.value.ladoApertura,"onUpdate:modelValue":l[42]||(l[42]=o=>e.value.ladoApertura=o),label:"Lado apertura",row:""},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(I,{cols:"12",md:"4"},{default:r(()=>[a(ve,{modelValue:e.value.direccionApertura,"onUpdate:modelValue":l[43]||(l[43]=o=>e.value.direccionApertura=o),label:"Apertura",row:""},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1}),a(I,{cols:"12",md:"4"},{default:r(()=>[a(Ne,{modelValue:e.value.pasoLibre,"onUpdate:modelValue":l[44]||(l[44]=o=>e.value.pasoLibre=o),inset:"",color:"primary",label:e.value.pasoLibre?"Paso libre (sin perfil inferior)":"Paso cerrado"},null,8,["modelValue","label"])]),_:1})]),_:1})):re("",!0),e.value.tipo===51?(m(),N(ce,{key:5,dense:""},{default:r(()=>[a(I,{cols:"12",md:"4"},{default:r(()=>[a(ve,{modelValue:e.value.hojaActiva,"onUpdate:modelValue":l[45]||(l[45]=o=>e.value.hojaActiva=o),label:"Hoja activa",row:""},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(I,{cols:"12",md:"4"},{default:r(()=>[a(ve,{modelValue:e.value.direccionApertura,"onUpdate:modelValue":l[46]||(l[46]=o=>e.value.direccionApertura=o),label:"Apertura",row:""},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1}),a(I,{cols:"12",md:"4"},{default:r(()=>[a(Ne,{modelValue:e.value.pasoLibre,"onUpdate:modelValue":l[47]||(l[47]=o=>e.value.pasoLibre=o),inset:"",color:"primary",label:e.value.pasoLibre?"Paso libre (sin perfil inferior)":"Paso cerrado"},null,8,["modelValue","label"])]),_:1})]),_:1})):re("",!0),e.value.tipo===53?(m(),N(ce,{key:6,dense:""},{default:r(()=>[a(I,{cols:"12",md:"6"},{default:r(()=>[a(ve,{modelValue:e.value.ladoApertura,"onUpdate:modelValue":l[48]||(l[48]=o=>e.value.ladoApertura=o),label:"Lado de apertura (movimiento)",row:""},{default:r(()=>[a(E,{label:"Hacia la derecha",value:"derecha"}),a(E,{label:"Hacia la izquierda",value:"izquierda"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):re("",!0),e.value.tipo===54?(m(),N(Le,{key:7,class:"pa-3",variant:"tonal"},{default:r(()=>[a(ce,{dense:""},{default:r(()=>[a(I,{cols:"12",sm:"3"},{default:r(()=>[a(he,{modelValue:e.value.orientacionComp,"onUpdate:modelValue":l[49]||(l[49]=o=>e.value.orientacionComp=o),items:[{title:"Horizontal",value:"horizontal"},{title:"Vertical",value:"vertical"}],label:"Orientación",density:"comfortable"},null,8,["modelValue"])]),_:1}),a(I,{cols:"12",sm:"3"},{default:r(()=>[a(Ae,{modelValue:e.value.cantidadComp,"onUpdate:modelValue":l[50]||(l[50]=o=>e.value.cantidadComp=o),modelModifiers:{number:!0},type:"number",min:"2",max:"8",label:"Cantidad de ventanas",density:"comfortable",onBlur:l[51]||(l[51]=o=>q())},null,8,["modelValue"])]),_:1})]),_:1}),a($e,{class:"my-2"}),a(ce,{dense:""},{default:r(()=>[(m(!0),oe(ne,null,ke(e.value.itemsComp,(o,V)=>(m(),N(I,{key:"comp-item-"+V,cols:"12",md:"6"},{default:r(()=>[a(Le,{class:"pa-3"},{default:r(()=>[ge("div",Il,[ge("strong",null,"Sección "+ze(V+1),1),a(Ae,{modelValue:o.sizePercent,"onUpdate:modelValue":d=>o.sizePercent=d,modelModifiers:{number:!0},type:"number",min:"0",max:"100",suffix:"%",label:"Tamaño",density:"compact",style:{"max-width":"140px"}},null,8,["modelValue","onUpdate:modelValue"])]),a(he,{modelValue:o.tipo,"onUpdate:modelValue":d=>o.tipo=d,items:p,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue"]),c(o.tipo)?(m(),oe(ne,{key:0},[a(ve,{modelValue:o.ladoApertura,"onUpdate:modelValue":d=>o.ladoApertura=d,row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),a(ve,{modelValue:o.direccionApertura,"onUpdate:modelValue":d=>o.direccionApertura=d,row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):re("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(Pe,{type:"info",variant:"text",density:"compact",class:"mt-2"},{default:r(()=>l[71]||(l[71]=[ye(" Si no defines porcentajes, las secciones se reparten por igual. ")])),_:1})]),_:1})):re("",!0),a(ce,null,{default:r(()=>[a(I,{cols:"12"},{default:r(()=>{var o,V,d,B,z,S,ae,ie,_e,se,pe;return[e.value.tipo===2?(m(),N(Za,{key:0,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((o=T.colores.find(G=>G.id===e.value.color))==null?void 0:o.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===45?(m(),N(el,{key:1,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((V=T.colores.find(G=>G.id===e.value.color))==null?void 0:V.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor"])):e.value.tipo===3?(m(),N(ol,{key:2,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((d=T.colores.find(G=>G.id===e.value.color))==null?void 0:d.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===52?(m(),N(Al,{key:3,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((B=T.colores.find(G=>G.id===e.value.color))==null?void 0:B.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===46?(m(),N(al,{key:4,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((z=T.colores.find(G=>G.id===e.value.color))==null?void 0:z.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"hojas-totales":e.value.hojas_totales,"hojas-moviles":e.value.hojas_moviles,"hoja-movil-seleccionada":e.value.hojaMovilSeleccionada,"orden-hoja1-al-frente":e.value.hoja1AlFrente},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","hojas-totales","hojas-moviles","hoja-movil-seleccionada","orden-hoja1-al-frente"])):e.value.tipo===53?(m(),N(_l,{key:5,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((S=T.colores.find(G=>G.id===e.value.color))==null?void 0:S.nombre)||"blanco","lado-apertura":e.value.ladoApertura},null,8,["ancho","alto","color-marco","lado-apertura"])):e.value.tipo===47?(m(),N(ll,{key:6,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((ae=T.colores.find(G=>G.id===e.value.color))==null?void 0:ae.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"ancho-izquierda":e.value.ancho_izquierda,"ancho-centro":e.value.ancho_centro,"ancho-derecha":e.value.ancho_derecha,"tipo-ventana-izquierda":e.value.tipoVentanaIzquierda,"tipo-ventana-centro":e.value.tipoVentanaCentro,"tipo-ventana-derecha":e.value.tipoVentanaDerecha},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","ancho-izquierda","ancho-centro","ancho-derecha","tipo-ventana-izquierda","tipo-ventana-centro","tipo-ventana-derecha"])):e.value.tipo===49?(m(),N(dl,{key:7,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((ie=T.colores.find(G=>G.id===e.value.color))==null?void 0:ie.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"lado-inicial":e.value.ladoApertura||"izquierda",direccionApertura:e.value.direccionApertura,"onUpdate:direccionApertura":l[52]||(l[52]=G=>e.value.direccionApertura=G)},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-inicial","direccionApertura"])):e.value.tipo===50?(m(),N(fl,{key:8,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((_e=T.colores.find(G=>G.id===e.value.color))==null?void 0:_e.nombre)||"blanco",material:e.value.material,tipoVidrio:e.value.tipoVidrio,productoVidrioProveedor:e.value.productoVidrioProveedor,"lado-apertura":e.value.ladoApertura,"direccion-apertura":e.value.direccionApertura,"paso-libre":e.value.pasoLibre},null,8,["ancho","alto","color-marco","material","tipoVidrio","productoVidrioProveedor","lado-apertura","direccion-apertura","paso-libre"])):e.value.tipo===51?(m(),N(bl,{key:9,ancho:e.value.ancho,alto:e.value.alto,"color-marco":((se=T.colores.find(G=>G.id===e.value.color))==null?void 0:se.nombre)||"blanco","hoja-activa":e.value.hojaActiva,"direccion-apertura":e.value.direccionApertura,"paso-libre":e.value.pasoLibre},null,8,["ancho","alto","color-marco","hoja-activa","direccion-apertura","paso-libre"])):e.value.tipo===54?(m(),N(Cl,{key:`compuesta-${L.value}`,ancho:e.value.ancho||2e3,alto:e.value.alto||2e3,"color-marco":((pe=T.colores.find(G=>G.id===e.value.color))==null?void 0:pe.nombre)||"blanco",orientacion:e.value.orientacionComp||"horizontal",items:e.value.itemsComp||[],forceReRender:L.value,onAgregar:b,onAgregarBorde:O,onEditarVentana:C,onEliminarVentana:x},null,8,["ancho","alto","color-marco","orientacion","items","forceReRender"])):re("",!0)]}),_:1})]),_:1}),a($e,{class:"my-4"}),a(ce,null,{default:r(()=>[a(I,{cols:"12",md:"4"},{default:r(()=>[e.value.costo_total_unitario?(m(),N(Pe,{key:0,type:"info",variant:"outlined"},{default:r(()=>[l[72]||(l[72]=ge("strong",null,"Costo unitario:",-1)),ye(" $"+ze(e.value.costo_total_unitario),1)]),_:1})):re("",!0)]),_:1}),a(I,{cols:"12",md:"4"},{default:r(()=>[e.value.costo_total?(m(),N(Pe,{key:0,type:"info",variant:"tonal"},{default:r(()=>[l[73]||(l[73]=ge("strong",null,"Costo total:",-1)),ye(" $"+ze(e.value.costo_total),1)]),_:1})):re("",!0)]),_:1}),a(I,{cols:"12",md:"4"},{default:r(()=>[e.value.precio?(m(),N(Pe,{key:0,type:"success",variant:"tonal"},{default:r(()=>[l[74]||(l[74]=ge("strong",null,"Precio de venta:",-1)),ye(" $"+ze(e.value.precio),1)]),_:1})):re("",!0)]),_:1})]),_:1}),e.value.materiales&&e.value.materiales.length?(m(),N(ce,{key:8},{default:r(()=>[a(I,{cols:"12"},{default:r(()=>[a(rl,{headers:[{title:"Material",key:"nombre"},{title:"Proveedor",key:"proveedor"},{title:"Cantidad",key:"cantidad"},{title:"Unidad",key:"unidad"},{title:"Costo unitario",key:"costo_unitario"},{title:"Costo total",key:"costo_total"}],items:e.value.materiales,class:"mt-2",dense:"","hide-default-footer":""},{"item.costo_unitario":r(({item:o})=>[ye(" $"+ze(o.costo_unitario),1)]),"item.costo_total":r(({item:o})=>[ye(" $"+ze(o.costo_total),1)]),_:1},8,["items"])]),_:1})]),_:1})):re("",!0),e.value.tipo===54?(m(),N(ce,{key:9},{default:r(()=>[a(I,{cols:"12"},{default:r(()=>[a(Pe,{color:"success",variant:"tonal"},{default:r(()=>[l[75]||(l[75]=ge("strong",null,"Costo total compuesta:",-1)),ye(" $"+ze(Ve.value.toLocaleString())+" ",1),l[76]||(l[76]=ge("div",{class:"text-caption"}," Suma de todas las ventanas individuales con sus medidas específicas ",-1))]),_:1})]),_:1})]),_:1})):re("",!0),a(Be,{class:"justify-end"},{default:r(()=>[a(Ue,{color:"secondary",variant:"text",onClick:H},{default:r(()=>l[77]||(l[77]=[ye(" Cancelar ")])),_:1}),a(Ue,{color:"primary",type:"submit"},{default:r(()=>[ye(ze(h.value?"Guardar cambios":"Agregar ventana"),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),a(Oe,{modelValue:A.value,"onUpdate:modelValue":l[55]||(l[55]=o=>A.value=o),"max-width":"400"},{default:r(()=>[a(Le,null,{default:r(()=>[a(He,null,{default:r(()=>l[78]||(l[78]=[ye("Agregar ventana")])),_:1}),a($e),a(nl,null,{default:r(()=>[(m(),oe(ne,null,ke(p,o=>a(La,{key:o.id,onClick:V=>U(o.id)},{default:r(()=>[a(Na,null,{default:r(()=>[ye(ze(o.nombre),1)]),_:2},1024)]),_:2},1032,["onClick"])),64)),a(La,{onClick:ee},{default:r(()=>[a(Na,null,{default:r(()=>l[79]||(l[79]=[ye("Compuesta (anidada)")])),_:1})]),_:1})]),_:1}),a(Be,null,{default:r(()=>[a(Ra),a(Ue,{text:"",onClick:l[54]||(l[54]=o=>A.value=!1)},{default:r(()=>l[80]||(l[80]=[ye("Cancelar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Oe,{modelValue:g.value,"onUpdate:modelValue":l[63]||(l[63]=o=>g.value=o),"max-width":"600px"},{default:r(()=>[a(Le,null,{default:r(()=>[a(He,null,{default:r(()=>l[81]||(l[81]=[ge("span",{class:"text-h5"},"Editar Ventana Individual",-1)])),_:1}),a(il,null,{default:r(()=>[a(vl,null,{default:r(()=>[a(ce,null,{default:r(()=>[a(I,{cols:"12",sm:"6"},{default:r(()=>[a(Ae,{modelValue:i.value.ancho,"onUpdate:modelValue":l[56]||(l[56]=o=>i.value.ancho=o),modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(I,{cols:"12",sm:"6"},{default:r(()=>[a(Ae,{modelValue:i.value.alto,"onUpdate:modelValue":l[57]||(l[57]=o=>i.value.alto=o),modelModifiers:{number:!0},label:"Alto (mm)",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(ce,null,{default:r(()=>[a(I,{cols:"12",sm:"6"},{default:r(()=>[a(Ae,{modelValue:i.value.sizePercent,"onUpdate:modelValue":l[58]||(l[58]=o=>i.value.sizePercent=o),modelModifiers:{number:!0},label:"Porcentaje del espacio (%)",type:"number",min:"10",max:"80",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(I,{cols:"12",sm:"6"},{default:r(()=>[a(he,{modelValue:i.value.tipo,"onUpdate:modelValue":l[59]||(l[59]=o=>i.value.tipo=o),items:p,"item-title":"nombre","item-value":"id",label:"Tipo de ventana",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),c(i.value.tipo)?(m(),N(ce,{key:0},{default:r(()=>[a(I,{cols:"12",sm:"6"},{default:r(()=>[a(ve,{modelValue:i.value.ladoApertura,"onUpdate:modelValue":l[60]||(l[60]=o=>i.value.ladoApertura=o),row:"",density:"compact",label:"Lado apertura"},{default:r(()=>[a(E,{label:"Izquierda",value:"izquierda"}),a(E,{label:"Derecha",value:"derecha"})]),_:1},8,["modelValue"])]),_:1}),a(I,{cols:"12",sm:"6"},{default:r(()=>[a(ve,{modelValue:i.value.direccionApertura,"onUpdate:modelValue":l[61]||(l[61]=o=>i.value.direccionApertura=o),row:"",density:"compact",label:"Dirección apertura"},{default:r(()=>[a(E,{label:"Interior",value:"interior"}),a(E,{label:"Exterior",value:"exterior"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):re("",!0),a(ce,null,{default:r(()=>[a(I,{cols:"12"},{default:r(()=>[a(Pe,{color:"info",variant:"tonal"},{default:r(()=>[ge("div",ql,"Costo estimado: $"+ze(je.value.toLocaleString()),1),ge("div",Sl," ID Tipo: "+ze(i.value.tipo)+" | Área: "+ze($.value.toFixed(2))+" m² | Tipo: "+ze(Me(i.value.tipo)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(Be,null,{default:r(()=>[a(Ra),a(Ue,{color:"blue-darken-1",variant:"text",onClick:l[62]||(l[62]=o=>g.value=!1)},{default:r(()=>l[82]||(l[82]=[ye(" Cancelar ")])),_:1}),a(Ue,{color:"blue-darken-1",variant:"text",onClick:j},{default:r(()=>l[83]||(l[83]=[ye(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Zl=Object.freeze(Object.defineProperty({__proto__:null,default:Pl},Symbol.toStringTag,{value:"Module"}));export{Zl as A,Pl as _,Al as a,_l as b,dl as c,fl as d,bl as e,Cl as f};
