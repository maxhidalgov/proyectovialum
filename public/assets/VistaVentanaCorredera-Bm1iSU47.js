import{a as P,f as N,o as b,e as W,b as d,r as T,E as me,X as r,w as pe,c as z,d as ge,m as Y,aR as p,aS as g,F as V,i as H,q as E,n as B}from"./index-BeJKwT3L.js";import{V as xe}from"./VSwitch-By68xJK5.js";const G={__name:"Manilla",props:{x:Number,y:Number,escalaManilla:{type:Number,default:1}},setup(A){const U=(M,X)=>{M.beginPath(),M.rect(-6,-12,12,24),M.rect(-4,-4,8,35),M.fillStrokeShape(X)};return(M,X)=>{const L=P("v-shape"),i=P("v-group");return b(),N(i,{x:A.x,y:A.y,scale:{x:A.escalaManilla,y:A.escalaManilla}},{default:W(()=>[d(L,{fill:"rgba(0,0,0,0.25)",stroke:"black",strokeWidth:1/A.escalaManilla,sceneFunc:U},null,8,["strokeWidth"])]),_:1},8,["x","y","scale"])}}},ye="/assets/roble-DlssfbLU.png",Me="/assets/nogal-Lbu-T-XE.png",je={style:{"margin-bottom":"10px"}},v=40,_e=54,Se=80,J=20,K=300,Le={__name:"VistaVentanaCorredera",props:{ancho:Number,alto:Number,colorMarco:{type:String,default:"blanco"},hojasMoviles:{type:Number,default:"2"},hojaMovilSeleccionada:{type:Number,default:1},ordenHoja1AlFrente:{type:Boolean,default:!0},color:Object},setup(A,{expose:U}){const M=T(null);U({exportarImagen:()=>{if(console.log("🖼️ exportarImagen llamado en VentanaCorredera"),console.log("🖼️ stageRef.value:",M.value),M.value)try{const s=M.value.getStage();console.log("🖼️ stage obtenido:",s),s.draw();const c=s.toDataURL({pixelRatio:1,quality:.9});return console.log("🖼️ dataURL generado:",c.substring(0,50)),c}catch(s){return console.error("❌ Error en exportarImagen:",s),null}return console.warn("⚠️ stageRef no disponible"),null}});const L={roble:null,nogal:null};me(()=>{const s=(c,m)=>{const S=new Image;S.src=c,S.onload=()=>{L[m]=S}};s(ye,"roble"),s(Me,"nogal")});const i=A,Q=r(()=>i.colorMarco.toLowerCase());function C(s){const c=Q.value.toLowerCase();return["roble","nogal"].includes(c)&&L[c]?{points:s,closed:!0,fillPatternImage:L[c],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:s,closed:!0,fill:h.value,stroke:"black"}}const _=T(i.ordenHoja1AlFrente),Z=r(()=>le.value),ee=r(()=>ae.value);pe(()=>i.ordenHoja1AlFrente,s=>{_.value=s});const le=r(()=>i.hojasMoviles===2||i.hojaMovilSeleccionada===1),ae=r(()=>i.hojasMoviles===2||i.hojaMovilSeleccionada===2),ue={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},h=r(()=>{var c,m;const s=(m=(c=i.colorMarco)==null?void 0:c.toLowerCase)==null?void 0:m.call(c);return ue[s]||"#ffffff"}),k=r(()=>{const s=K/i.ancho,c=K/i.alto;return Math.min(s,c,1)*.9}),f=r(()=>_e*k.value),e=r(()=>Se*k.value),x=r(()=>i.ancho*k.value),y=r(()=>i.alto*k.value),ve=r(()=>J*k.value);function I(s){const c=i.colorMarco.toLowerCase();return["roble","nogal"].includes(c)&&L[c]?{points:s,closed:!0,fillPatternImage:L[c],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:s,closed:!0,fill:h.value,stroke:"black"}}const te=r(()=>I([v,v,v+x.value,v,v+x.value-f.value,v+f.value,v+f.value,v+f.value])),oe=r(()=>I([v+x.value,v,v+x.value,v+y.value,v+x.value-f.value,v+y.value-f.value,v+x.value-f.value,v+f.value])),ne=r(()=>I([v+x.value,v+y.value,v,v+y.value,v+f.value,v+y.value-f.value,v+x.value-f.value,v+y.value-f.value])),re=r(()=>I([v,v+y.value,v,v,v+f.value,v+f.value,v+f.value,v+y.value-f.value])),l=r(()=>(x.value-f.value*2+J)/2),a=r(()=>y.value-f.value*2),t=r(()=>v+f.value),u=r(()=>v+f.value),o=r(()=>v+x.value-f.value-l.value+ve.value-e.value*.22),n=u,O=r(()=>_.value?[{points:[t.value,u.value,t.value+l.value,u.value,t.value+l.value-e.value,u.value+e.value,t.value+e.value,u.value+e.value],closed:!0,fill:h.value,stroke:"black"},{points:[t.value+l.value,u.value,t.value+l.value,u.value+a.value,t.value+l.value-e.value,u.value+a.value-e.value,t.value+l.value-e.value,u.value+e.value],closed:!0,fill:h.value,stroke:"black"},{points:[t.value+l.value,u.value+a.value,t.value,u.value+a.value,t.value+e.value,u.value+a.value-e.value,t.value+l.value-e.value,u.value+a.value-e.value],closed:!0,fill:h.value,stroke:"black"},{points:[t.value,u.value+a.value,t.value,u.value,t.value+e.value,u.value+e.value,t.value+e.value,u.value+a.value-e.value],closed:!0,fill:h.value,stroke:"black"}]:[{points:[t.value,u.value+a.value,t.value+e.value,u.value+a.value-e.value,t.value+l.value-e.value,u.value+a.value-e.value,t.value+l.value,u.value+a.value],closed:!0,fill:h.value,stroke:"black"},{points:[t.value,u.value+a.value,t.value,u.value,t.value+e.value,u.value+e.value,t.value+e.value,u.value+a.value-e.value],closed:!0,fill:h.value,stroke:"black"},{points:[t.value,u.value,t.value+l.value,u.value,t.value+l.value-e.value,u.value+e.value,t.value+e.value,u.value+e.value],closed:!0,fill:h.value,stroke:"black"},{points:[t.value+l.value,u.value,t.value+l.value,u.value+a.value,t.value+l.value-e.value,u.value+a.value-e.value,t.value+l.value-e.value,u.value+e.value],closed:!0,fill:h.value,stroke:"black"}]),$=r(()=>_.value?[{points:[o.value,n.value,o.value+l.value,n.value,o.value+l.value-e.value,n.value+e.value,o.value+e.value,n.value+e.value],closed:!0,fill:h.value,stroke:"black"},{points:[o.value+l.value,n.value,o.value+l.value,n.value+a.value,o.value+l.value-e.value,n.value+a.value-e.value,o.value+l.value-e.value,n.value+e.value],closed:!0,fill:h.value,stroke:"black"},{points:[o.value+l.value,n.value+a.value,o.value,n.value+a.value,o.value+e.value,n.value+a.value-e.value,o.value+l.value-e.value,n.value+a.value-e.value],closed:!0,fill:h.value,stroke:"black"},{points:[o.value,n.value+a.value,o.value,n.value,o.value+e.value,n.value+e.value,o.value+e.value,n.value+a.value-e.value],closed:!0,fill:h.value,stroke:"black"}]:[{points:[o.value,n.value,o.value+l.value,n.value,o.value+l.value-e.value,n.value+e.value,o.value+e.value,n.value+e.value],closed:!0,fill:h.value,stroke:"black"},{points:[o.value+l.value,n.value,o.value+l.value,n.value+a.value,o.value+l.value-e.value,n.value+a.value-e.value,o.value+l.value-e.value,n.value+e.value],closed:!0,fill:h.value,stroke:"black"},{points:[o.value+l.value,n.value+a.value,o.value,n.value+a.value,o.value+e.value,n.value+a.value-e.value,o.value+l.value-e.value,n.value+a.value-e.value],closed:!0,fill:h.value,stroke:"black"},{points:[o.value,n.value+a.value,o.value,n.value,o.value+e.value,n.value+e.value,o.value+e.value,n.value+a.value-e.value],closed:!0,fill:h.value,stroke:"black"}]),q=r(()=>{if(_.value)return{x:t.value+e.value,y:u.value+e.value,width:l.value-e.value*2,height:a.value-e.value*2,fill:"lightblue",stroke:"black"};const s=e.value*.35+k.value*50,c=e.value*1.3+k.value*1;return{x:t.value+s,y:u.value+e.value,width:l.value-c-15,height:a.value-e.value*2,fill:"lightblue",stroke:"black"}}),D=r(()=>{if(_.value){const s=e.value*.4+k.value*10,c=e.value*1.4+k.value*10;return{x:o.value+s+10,y:n.value+e.value,width:l.value-c-10,height:a.value-e.value*2,fill:"lightblue",stroke:"black"}}return{x:o.value+e.value,y:n.value+e.value,width:l.value-e.value*2,height:a.value-e.value*2,fill:"lightblue",stroke:"black"}}),se=r(()=>i.hojasMoviles===2||i.hojasMoviles===1&&i.hojaMovilSeleccionada===1?"→":"+"),ce=r(()=>i.hojasMoviles===2||i.hojasMoviles===1&&i.hojaMovilSeleccionada===2?"←":"+"),ie=r(()=>({x:t.value+l.value/2-10,y:u.value+a.value/2+10,text:se.value,fontSize:30,fill:"black"})),fe=r(()=>({x:o.value+l.value/2-10,y:n.value+a.value/2+10,text:ce.value,fontSize:30,fill:"black"})),F=r(()=>{const s=Math.max(i.ancho,i.alto);return Math.min(Math.max(s/100,20),40)}),de=r(()=>({x:v+x.value/2-30,y:v+y.value+10,text:`${i.ancho}mm`,fontSize:F.value,fill:"black"})),he=r(()=>({x:v-25,y:v+y.value/2,text:`${i.alto}mm`,fontSize:F.value,fill:"black",rotation:-90,offsetX:F.value/2}));return(s,c)=>{const m=P("v-line"),S=P("v-rect"),w=P("v-text"),be=P("v-layer"),ke=P("v-stage");return b(),z("div",null,[ge("div",je,[d(xe,{modelValue:_.value,"onUpdate:modelValue":c[0]||(c[0]=j=>_.value=j),label:"Hoja 1 adelante",density:"compact"},null,8,["modelValue"])]),d(ke,{ref_key:"stageRef",ref:M,config:{width:400,height:400}},{default:W(()=>[d(be,null,{default:W(()=>[d(m,p(g(te.value)),null,16),d(m,p(g(oe.value)),null,16),d(m,p(g(ne.value)),null,16),d(m,p(g(re.value)),null,16),_.value?(b(),z(V,{key:0},[d(S,p(g(D.value)),null,16),(b(!0),z(V,null,H($.value,(j,R)=>(b(),N(m,E({key:"mitra-h2-"+R,ref_for:!0},C(j.points)),null,16))),128)),d(w,{x:o.value+l.value/2-10,y:B(n)+a.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),d(S,p(g(q.value)),null,16),(b(!0),z(V,null,H(O.value,(j,R)=>(b(),N(m,E({key:"mitra-h1-"+R,ref_for:!0},C(j.points)),null,16))),128)),d(w,{x:t.value+l.value/2-10,y:u.value+a.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)):(b(),z(V,{key:1},[d(S,p(g(q.value)),null,16),(b(!0),z(V,null,H(O.value,(j,R)=>(b(),N(m,E({key:"mitra-h1-"+R,ref_for:!0},C(j.points)),null,16))),128)),d(w,{x:t.value+l.value/2-10,y:u.value+a.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),d(S,p(g(D.value)),null,16),(b(!0),z(V,null,H($.value,(j,R)=>(b(),N(m,E({key:"mitra-h2-"+R,ref_for:!0},C(j.points)),null,16))),128)),d(w,{x:o.value+l.value/2-10,y:B(n)+a.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)),d(w,p(g(de.value)),null,16),d(w,p(g(he.value)),null,16),d(w,p(g(ie.value)),null,16),d(w,p(g(fe.value)),null,16),Z.value?(b(),N(G,{key:2,x:t.value+e.value-k.value*35,y:u.value+a.value/2,escalaManilla:k.value*4},null,8,["x","y","escalaManilla"])):Y("",!0),ee.value?(b(),N(G,{key:3,x:o.value+l.value-e.value+k.value*35,y:B(n)+a.value/2,escalaManilla:k.value*4},null,8,["x","y","escalaManilla"])):Y("",!0)]),_:1})]),_:1},512)])}}};export{Le as _,G as a,Me as n,ye as r};
