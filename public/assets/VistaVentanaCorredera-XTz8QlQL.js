import{a as N,f as z,o as p,e as le,b as s,a6 as pe,a7 as xe,a8 as ve,bT as Me,r as ae,aB as _e,X as r,a9 as Se,aa as we,aI as je,q as U,F as L,aE as Ve,cj as Ce,Z as Pe,bV as Ae,aw as Ie,E as Re,w as ze,c as R,d as Le,m as oe,aQ as S,aR as w,i as D,n as ee}from"./index-CyUyC-Fi.js";import{a as Ne,V as ne,m as Be}from"./VInput-BggVTD7O.js";import{V as re,m as Fe}from"./VSelectionControl-CCD0pbXk.js";const se={__name:"Manilla",props:{x:Number,y:Number,escalaManilla:{type:Number,default:1}},setup(i){const E=(M,y)=>{M.beginPath(),M.rect(-6,-12,12,24),M.rect(-4,-4,8,35),M.fillStrokeShape(y)};return(M,y)=>{const _=N("v-shape"),c=N("v-group");return p(),z(c,{x:i.x,y:i.y,scale:{x:i.escalaManilla,y:i.escalaManilla}},{default:le(()=>[s(_,{fill:"rgba(0,0,0,0.25)",stroke:"black",strokeWidth:1/i.escalaManilla,sceneFunc:E},null,8,["strokeWidth"])]),_:1},8,["x","y","scale"])}}},Ue="/assets/roble-DlssfbLU.png",Ee="/assets/nogal-Lbu-T-XE.png",He=xe({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Be(),...Fe()},"VSwitch"),Xe=pe()({name:"VSwitch",inheritAttrs:!1,props:He(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,E){let{attrs:M,slots:y}=E;const _=ve(i,"indeterminate"),c=ve(i,"modelValue"),{loaderClasses:T}=Me(i),{isFocused:B,focus:j,blur:O}=Ne(i),H=ae(),X=_e&&window.matchMedia("(forced-colors: active)").matches,$=r(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),q=Se(),m=r(()=>i.id||`switch-${q}`);function g(){_.value&&(_.value=!1)}function h(e){var k,b;e.stopPropagation(),e.preventDefault(),(b=(k=H.value)==null?void 0:k.input)==null||b.click()}return we(()=>{const[e,k]=je(M),b=ne.filterProps(i),Y=re.filterProps(i);return s(ne,U({class:["v-switch",{"v-switch--flat":i.flat},{"v-switch--inset":i.inset},{"v-switch--indeterminate":_.value},T.value,i.class]},e,b,{modelValue:c.value,"onUpdate:modelValue":C=>c.value=C,id:m.value,focused:B.value,style:i.style}),{...y,default:C=>{let{id:Q,messagesId:Z,isDisabled:G,isReadonly:J,isValid:a}=C;const l={model:c,isValid:a};return s(re,U({ref:H},Y,{modelValue:c.value,"onUpdate:modelValue":[t=>c.value=t,g],id:Q.value,"aria-describedby":Z.value,type:"checkbox","aria-checked":_.value?"mixed":void 0,disabled:G.value,readonly:J.value,onFocus:j,onBlur:O},k),{...y,default:t=>{let{backgroundColorClasses:v,backgroundColorStyles:u}=t;return s("div",{class:["v-switch__track",X?void 0:v.value],style:u.value,onClick:h},[y["track-true"]&&s("div",{key:"prepend",class:"v-switch__track-true"},[y["track-true"](l)]),y["track-false"]&&s("div",{key:"append",class:"v-switch__track-false"},[y["track-false"](l)])])},input:t=>{let{inputNode:v,icon:u,backgroundColorClasses:o,backgroundColorStyles:W}=t;return s(L,null,[v,s("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":u||i.loading},i.inset||X?void 0:o.value],style:i.inset?void 0:W.value},[y.thumb?s(Ve,{defaults:{VIcon:{icon:u,size:"x-small"}}},{default:()=>[y.thumb({...l,icon:u})]}):s(Ce,null,{default:()=>[i.loading?s(Ae,{name:"v-switch",active:!0,color:a.value===!1?void 0:$.value},{default:F=>y.loader?y.loader(F):s(Ie,{active:F.isActive,color:F.color,indeterminate:!0,size:"16",width:"2"},null)}):u&&s(Pe,{key:String(u),icon:u,size:"x-small"},null)]})])])}})}})}),{}}}),We={style:{"margin-bottom":"10px"}},n=40,De=54,Te=80,ce=20,ie=300,Ye={__name:"VistaVentanaCorredera",props:{ancho:Number,alto:Number,colorMarco:{type:String,default:"blanco"},hojasMoviles:{type:Number,default:"2"},hojaMovilSeleccionada:{type:Number,default:1},ordenHoja1AlFrente:{type:Boolean,default:!0},color:Object},setup(i,{expose:E}){const M=ae(null);E({exportarImagen:()=>{if(console.log("🖼️ exportarImagen llamado en VentanaCorredera"),console.log("🖼️ stageRef.value:",M.value),M.value)try{const d=M.value.getStage();console.log("🖼️ stage obtenido:",d),d.draw();const f=d.toDataURL({pixelRatio:1,quality:.9});return console.log("🖼️ dataURL generado:",f.substring(0,50)),f}catch(d){return console.error("❌ Error en exportarImagen:",d),null}return console.warn("⚠️ stageRef no disponible"),null}});const _={roble:null,nogal:null};Re(()=>{const d=(f,x)=>{const P=new Image;P.src=f,P.onload=()=>{_[x]=P}};d(Ue,"roble"),d(Ee,"nogal")});const c=i,T=r(()=>c.colorMarco.toLowerCase());function B(d){const f=T.value.toLowerCase();return["roble","nogal"].includes(f)&&_[f]?{points:d,closed:!0,fillPatternImage:_[f],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:d,closed:!0,fill:m.value,stroke:"black"}}const j=ae(c.ordenHoja1AlFrente),O=r(()=>X.value),H=r(()=>$.value);ze(()=>c.ordenHoja1AlFrente,d=>{j.value=d});const X=r(()=>c.hojasMoviles===2||c.hojaMovilSeleccionada===1),$=r(()=>c.hojasMoviles===2||c.hojaMovilSeleccionada===2),q={blanco:"#ffffff",negro:"#0a0a0a",gris:"#808080",grafito:"#2f2f2f",nogal:"#8b5a2b"},m=r(()=>{var f,x;const d=(x=(f=c.colorMarco)==null?void 0:f.toLowerCase)==null?void 0:x.call(f);return q[d]||"#ffffff"}),g=r(()=>{const d=ie/c.ancho,f=ie/c.alto;return Math.min(d,f,1)*.9}),h=r(()=>De*g.value),e=r(()=>Te*g.value),k=r(()=>c.ancho*g.value),b=r(()=>c.alto*g.value),Y=r(()=>ce*g.value);function C(d){const f=c.colorMarco.toLowerCase();return["roble","nogal"].includes(f)&&_[f]?{points:d,closed:!0,fillPatternImage:_[f],fillPatternRepeat:"repeat",fillPatternScale:{x:.2,y:.2},stroke:"black"}:{points:d,closed:!0,fill:m.value,stroke:"black"}}const Q=r(()=>C([n,n,n+k.value,n,n+k.value-h.value,n+h.value,n+h.value,n+h.value])),Z=r(()=>C([n+k.value,n,n+k.value,n+b.value,n+k.value-h.value,n+b.value-h.value,n+k.value-h.value,n+h.value])),G=r(()=>C([n+k.value,n+b.value,n,n+b.value,n+h.value,n+b.value-h.value,n+k.value-h.value,n+b.value-h.value])),J=r(()=>C([n,n+b.value,n,n,n+h.value,n+h.value,n+h.value,n+b.value-h.value])),a=r(()=>(k.value-h.value*2+ce)/2),l=r(()=>b.value-h.value*2),t=r(()=>n+h.value),v=r(()=>n+h.value),u=r(()=>n+k.value-h.value-a.value+Y.value-e.value*.22),o=v,W=r(()=>j.value?[{points:[t.value,v.value,t.value+a.value,v.value,t.value+a.value-e.value,v.value+e.value,t.value+e.value,v.value+e.value],closed:!0,fill:m.value,stroke:"black"},{points:[t.value+a.value,v.value,t.value+a.value,v.value+l.value,t.value+a.value-e.value,v.value+l.value-e.value,t.value+a.value-e.value,v.value+e.value],closed:!0,fill:m.value,stroke:"black"},{points:[t.value+a.value,v.value+l.value,t.value,v.value+l.value,t.value+e.value,v.value+l.value-e.value,t.value+a.value-e.value,v.value+l.value-e.value],closed:!0,fill:m.value,stroke:"black"},{points:[t.value,v.value+l.value,t.value,v.value,t.value+e.value,v.value+e.value,t.value+e.value,v.value+l.value-e.value],closed:!0,fill:m.value,stroke:"black"}]:[{points:[t.value,v.value+l.value,t.value+e.value,v.value+l.value-e.value,t.value+a.value-e.value,v.value+l.value-e.value,t.value+a.value,v.value+l.value],closed:!0,fill:m.value,stroke:"black"},{points:[t.value,v.value+l.value,t.value,v.value,t.value+e.value,v.value+e.value,t.value+e.value,v.value+l.value-e.value],closed:!0,fill:m.value,stroke:"black"},{points:[t.value,v.value,t.value+a.value,v.value,t.value+a.value-e.value,v.value+e.value,t.value+e.value,v.value+e.value],closed:!0,fill:m.value,stroke:"black"},{points:[t.value+a.value,v.value,t.value+a.value,v.value+l.value,t.value+a.value-e.value,v.value+l.value-e.value,t.value+a.value-e.value,v.value+e.value],closed:!0,fill:m.value,stroke:"black"}]),F=r(()=>j.value?[{points:[u.value,o.value,u.value+a.value,o.value,u.value+a.value-e.value,o.value+e.value,u.value+e.value,o.value+e.value],closed:!0,fill:m.value,stroke:"black"},{points:[u.value+a.value,o.value,u.value+a.value,o.value+l.value,u.value+a.value-e.value,o.value+l.value-e.value,u.value+a.value-e.value,o.value+e.value],closed:!0,fill:m.value,stroke:"black"},{points:[u.value+a.value,o.value+l.value,u.value,o.value+l.value,u.value+e.value,o.value+l.value-e.value,u.value+a.value-e.value,o.value+l.value-e.value],closed:!0,fill:m.value,stroke:"black"},{points:[u.value,o.value+l.value,u.value,o.value,u.value+e.value,o.value+e.value,u.value+e.value,o.value+l.value-e.value],closed:!0,fill:m.value,stroke:"black"}]:[{points:[u.value,o.value,u.value+a.value,o.value,u.value+a.value-e.value,o.value+e.value,u.value+e.value,o.value+e.value],closed:!0,fill:m.value,stroke:"black"},{points:[u.value+a.value,o.value,u.value+a.value,o.value+l.value,u.value+a.value-e.value,o.value+l.value-e.value,u.value+a.value-e.value,o.value+e.value],closed:!0,fill:m.value,stroke:"black"},{points:[u.value+a.value,o.value+l.value,u.value,o.value+l.value,u.value+e.value,o.value+l.value-e.value,u.value+a.value-e.value,o.value+l.value-e.value],closed:!0,fill:m.value,stroke:"black"},{points:[u.value,o.value+l.value,u.value,o.value,u.value+e.value,o.value+e.value,u.value+e.value,o.value+l.value-e.value],closed:!0,fill:m.value,stroke:"black"}]),ue=r(()=>{if(j.value)return{x:t.value+e.value,y:v.value+e.value,width:a.value-e.value*2,height:l.value-e.value*2,fill:"lightblue",stroke:"black"};const d=e.value*.35+g.value*50,f=e.value*1.3+g.value*1;return{x:t.value+d,y:v.value+e.value,width:a.value-f-15,height:l.value-e.value*2,fill:"lightblue",stroke:"black"}}),te=r(()=>{if(j.value){const d=e.value*.4+g.value*10,f=e.value*1.4+g.value*10;return{x:u.value+d+10,y:o.value+e.value,width:a.value-f-10,height:l.value-e.value*2,fill:"lightblue",stroke:"black"}}return{x:u.value+e.value,y:o.value+e.value,width:a.value-e.value*2,height:l.value-e.value*2,fill:"lightblue",stroke:"black"}}),de=r(()=>c.hojasMoviles===2||c.hojasMoviles===1&&c.hojaMovilSeleccionada===1?"→":"+"),fe=r(()=>c.hojasMoviles===2||c.hojasMoviles===1&&c.hojaMovilSeleccionada===2?"←":"+"),he=r(()=>({x:t.value+a.value/2-10,y:v.value+l.value/2+10,text:de.value,fontSize:30,fill:"black"})),me=r(()=>({x:u.value+a.value/2-10,y:o.value+l.value/2+10,text:fe.value,fontSize:30,fill:"black"})),K=r(()=>{const d=Math.max(c.ancho,c.alto);return Math.min(Math.max(d/100,20),40)}),ke=r(()=>({x:n+k.value/2-30,y:n+b.value+10,text:`${c.ancho}mm`,fontSize:K.value,fill:"black"})),be=r(()=>({x:n-25,y:n+b.value/2,text:`${c.alto}mm`,fontSize:K.value,fill:"black",rotation:-90,offsetX:K.value/2}));return(d,f)=>{const x=N("v-line"),P=N("v-rect"),A=N("v-text"),ge=N("v-layer"),ye=N("v-stage");return p(),R("div",null,[Le("div",We,[s(Xe,{modelValue:j.value,"onUpdate:modelValue":f[0]||(f[0]=V=>j.value=V),label:"Hoja 1 adelante",density:"compact"},null,8,["modelValue"])]),s(ye,{ref_key:"stageRef",ref:M,config:{width:400,height:400}},{default:le(()=>[s(ge,null,{default:le(()=>[s(x,S(w(Q.value)),null,16),s(x,S(w(Z.value)),null,16),s(x,S(w(G.value)),null,16),s(x,S(w(J.value)),null,16),j.value?(p(),R(L,{key:0},[s(P,S(w(te.value)),null,16),(p(!0),R(L,null,D(F.value,(V,I)=>(p(),z(x,U({key:"mitra-h2-"+I,ref_for:!0},B(V.points)),null,16))),128)),s(A,{x:u.value+a.value/2-10,y:ee(o)+l.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),s(P,S(w(ue.value)),null,16),(p(!0),R(L,null,D(W.value,(V,I)=>(p(),z(x,U({key:"mitra-h1-"+I,ref_for:!0},B(V.points)),null,16))),128)),s(A,{x:t.value+a.value/2-10,y:v.value+l.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)):(p(),R(L,{key:1},[s(P,S(w(ue.value)),null,16),(p(!0),R(L,null,D(W.value,(V,I)=>(p(),z(x,U({key:"mitra-h1-"+I,ref_for:!0},B(V.points)),null,16))),128)),s(A,{x:t.value+a.value/2-10,y:v.value+l.value/2-20,text:"2",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"]),s(P,S(w(te.value)),null,16),(p(!0),R(L,null,D(F.value,(V,I)=>(p(),z(x,U({key:"mitra-h2-"+I,ref_for:!0},B(V.points)),null,16))),128)),s(A,{x:u.value+a.value/2-10,y:ee(o)+l.value/2-20,text:"1",fontSize:"30",fontStyle:"bold",fill:"black"},null,8,["x","y"])],64)),s(A,S(w(ke.value)),null,16),s(A,S(w(be.value)),null,16),s(A,S(w(he.value)),null,16),s(A,S(w(me.value)),null,16),O.value?(p(),z(se,{key:2,x:t.value+e.value-g.value*35,y:v.value+l.value/2,escalaManilla:g.value*4},null,8,["x","y","escalaManilla"])):oe("",!0),H.value?(p(),z(se,{key:3,x:u.value+a.value-e.value+g.value*35,y:ee(o)+l.value/2,escalaManilla:g.value*4},null,8,["x","y","escalaManilla"])):oe("",!0)]),_:1})]),_:1},512)])}}};export{Xe as V,Ye as _,se as a,Ee as n,Ue as r};
