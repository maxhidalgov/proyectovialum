import{j as k,r as x,E as N,au as T,f as E,e as t,k as F,o as v,b as i,t as l,v as n,a3 as f,Z as S,d as u,c as $,m as w}from"./index-BkN66Jee.js";import{V as B}from"./VContainer-DHMbZyNg.js";import{V as _,b as g}from"./VCard-BIq9KtZy.js";import{V as A}from"./VSpacer-DstO-xmX.js";import{V as R}from"./VCardText-yvZq5wFx.js";import{V,a as m}from"./VRow-zuKfOnXG.js";import{V as P}from"./VChip-B3ZmS2Q6.js";import{V as j}from"./VDataTable-DrR-NKoO.js";import{V as I}from"./VAlert-B_cBy9LO.js";/* empty css              */import"./VAvatar-CUG03JWJ.js";import"./VImg-B-BAd-J6.js";import"./transition-ClaezFJr.js";import"./VSelect-qe3QKkar.js";import"./VTextField-CvSPcfDi.js";import"./VInput-CN2X7-5r.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-CGw_ag0t.js";import"./VDivider-izuRbe5V.js";import"./VOverlay-CN7rzLfz.js";import"./VMenu-BRJgvGXh.js";import"./VCheckboxBtn-sD-GE5AJ.js";import"./VSelectionControl-Fr9-jP0N.js";const q={key:0},co={__name:"cotizacion-ver",setup(M){const b=k(),C=F(),y=b.query.id,s=x(null),z=[{title:"Tipo de ventana",value:"tipo_ventana_id"},{title:"Ancho (mm)",value:"ancho"},{title:"Alto (mm)",value:"alto"},{title:"Cantidad",value:"cantidad"},{title:"Color",value:"color.nombre"},{title:"Vidrio",value:"producto_vidrio_proveedor_id"},{title:"Costo",value:"costo"},{title:"Precio Unitario",value:"precio"},{title:"Precio Total",value:"precio_total"}],D=d=>{switch(d){case"Evaluación":return"grey";case"Aprobada":return"green";case"Rechazada":return"red";default:return"blue"}},L=()=>{C.push({name:"cotizaciones"})};return N(async()=>{try{const{data:d}=await T.get(`/api/cotizaciones/${y}`);s.value=d}catch(d){console.error("Error al cargar cotización:",d)}}),(d,e)=>(v(),E(B,null,{default:t(()=>[i(_,{class:"mb-4"},{default:t(()=>[i(g,null,{default:t(()=>{var r,o;return[l(" Cotización #"+n((r=s.value)==null?void 0:r.id)+" ",1),i(f,{class:"ml-2",color:"secondary",href:`/cotizaciones/${(o=s.value)==null?void 0:o.id}/pdf`,target:"_blank"},{default:t(()=>e[0]||(e[0]=[l(" Descargar PDF ")])),_:1},8,["href"]),i(A),i(f,{icon:"",onClick:L},{default:t(()=>[i(S,null,{default:t(()=>e[1]||(e[1]=[l("mdi-arrow-left")])),_:1})]),_:1})]}),_:1}),i(R,null,{default:t(()=>[i(V,null,{default:t(()=>[i(m,{cols:"12",sm:"6"},{default:t(()=>{var r,o;return[e[2]||(e[2]=u("strong",null,"Cliente:",-1)),l(" "+n((o=(r=s.value)==null?void 0:r.cliente)==null?void 0:o.nombre),1)]}),_:1}),i(m,{cols:"12",sm:"6"},{default:t(()=>{var r,o;return[e[3]||(e[3]=u("strong",null,"Vendedor:",-1)),l(" "+n((o=(r=s.value)==null?void 0:r.vendedor)==null?void 0:o.name),1)]}),_:1}),i(m,{cols:"12",sm:"6"},{default:t(()=>{var r;return[e[4]||(e[4]=u("strong",null,"Fecha:",-1)),l(" "+n((r=s.value)==null?void 0:r.fecha),1)]}),_:1}),i(m,{cols:"12",sm:"6"},{default:t(()=>{var r,o;return[e[5]||(e[5]=u("strong",null,"Estado:",-1)),i(P,{color:D((o=(r=s.value)==null?void 0:r.estado)==null?void 0:o.nombre)},{default:t(()=>{var a,c;return[l(n(((c=(a=s.value)==null?void 0:a.estado)==null?void 0:c.nombre)||"—"),1)]}),_:1},8,["color"])]}),_:1}),i(m,{cols:"12"},{default:t(()=>{var r;return[e[6]||(e[6]=u("strong",null,"Observaciones:",-1)),e[7]||(e[7]=u("br",null,null,-1)),l(" "+n(((r=s.value)==null?void 0:r.observaciones)||"—"),1)]}),_:1})]),_:1})]),_:1})]),_:1}),i(_,null,{default:t(()=>{var r;return[i(g,null,{default:t(()=>e[8]||(e[8]=[l("Ventanas")])),_:1}),i(j,{headers:z,items:((r=s.value)==null?void 0:r.ventanas)||[],"items-per-page":5,class:"elevation-1"},{"item.tipo_ventana_id":t(({item:o})=>{var a;return[l(n(((a=o.tipo_ventana)==null?void 0:a.nombre)||"—"),1)]}),"item.producto_vidrio_proveedor_id":t(({item:o})=>{var a,c,p;return[l(n(((c=(a=o.producto_vidrio_proveedor)==null?void 0:a.producto)==null?void 0:c.nombre)||"—")+" ",1),(p=o.producto_vidrio_proveedor)!=null&&p.proveedor?(v(),$("span",q," ("+n(o.producto_vidrio_proveedor.proveedor.nombre)+") ",1)):w("",!0)]}),"item.costo":t(({item:o})=>{var a;return[l(" $"+n(((a=Number(o.costo))==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),"item.precio":t(({item:o})=>{var a;return[l(" $"+n(((a=Number(o.precio))==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),"item.precio_total":t(({item:o})=>{var a;return[l(" $"+n(((a=Number(o.precio_total))==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),_:1},8,["items"]),i(V,{justify:"end",class:"px-6 pb-4"},{default:t(()=>[i(m,{cols:"12",sm:"4",class:"text-right"},{default:t(()=>[i(I,{type:"success",variant:"tonal",border:"start","border-color":"green"},{default:t(()=>{var o,a;return[e[9]||(e[9]=u("strong",null,"Total general:",-1)),l(" $"+n(((a=(o=s.value)==null?void 0:o.total_general)==null?void 0:a.toLocaleString("es-CL",{minimumFractionDigits:0}))||0),1)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1}))}};export{co as default};
