import{d as co}from"./debounce-DxNWq9_b.js";import{r as p,av as po,X as L,E as Vo,au as v,w as B,f as m,e as t,k as _o,o as s,b as a,c as g,t as c,a3 as q,Z as $,F as P,i as fo,m as V,d as y,v as z,aw as ho}from"./index-CMnXFOS4.js";/* empty css                                                                */import{_ as bo}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as X,d as M,_ as yo,a as jo,c as vo,b as Uo}from"./VRadioGroup-CfFZA5XQ.js";import{V as Co}from"./VCombobox-DT85P_q5.js";import{V as Z,_ as go}from"./VistaVentanaCorredera-CuArwG2Q.js";import{V as zo}from"./VContainer-BX97FtL7.js";import{V as J,b as ko,d as E}from"./VCard-DzQYgpTF.js";import{V as T}from"./VDivider-pVv6Q2VG.js";import{V as h,a as r}from"./VRow-DiNiWWrQ.js";import{V as qo}from"./VTextarea-B1PS_jLU.js";import{V as n}from"./VSelect-Djm-maiF.js";import{V as b}from"./VTextField-DvUNxgjT.js";import{V as H}from"./VAlert-CnMvz5JO.js";import{V as Po}from"./VDataTable-Bw7bCXHH.js";import"./VSelectionControl-DjUjCgzf.js";import"./VInput-HyLdnQGo.js";import"./transition-DJSp28vB.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-DX_scEdI.js";import"./VAvatar-Ce14rkLC.js";import"./VImg-CIOxAhPb.js";import"./VMenu-BL37aKEf.js";import"./VOverlay-D3FH7MJM.js";import"./VCheckboxBtn-C9EG1Xmn.js";import"./VChip-DX2m7F7n.js";/* empty css              */import"./VCardText-CyjnItnx.js";const So=.45,Do={__name:"index copy",setup(Io){const S=p([]),W=_o(),u=p({cliente_id:null,observaciones:"",material:"",color:"",tipoVidrio:"",productoVidrioProveedor:"",ventanas:[]}),U=[{id:1,nombre:"Fija"},{id:2,nombre:"Proyectante"},{id:3,nombre:"Corredera"}],Y=[{id:2,nombre:"Fija"},{id:3,nombre:"Corredera Sliding"},{id:45,nombre:"Proyectante S60"}],D=p({}),I=p(!1),w=po({cliente:null}),A=p([]),j=p([]),x=p([]),k=p([]),R=p([]),G=p([]),F=p(""),oo=p(!1),eo=p(0);p({firstName:"",lastName:"",company:"",code:"",email:"",phone:"",city:"",municipality:"",address:"",activity:""}),L(()=>k.value.flatMap(i=>i.colores_por_proveedor.map(e=>{var o;return{id:`${i.id}-${e.proveedor_id}`,producto_id:i.id,proveedor_id:e.proveedor_id,nombre:`${i.nombre} (${((o=e.proveedor)==null?void 0:o.nombre)||"Proveedor desconocido"})`}})));const lo=L(()=>{const i=u.value.tipoVidrio;return k.value.filter(e=>e.tipo_producto_id===i).flatMap(e=>e.colores_por_proveedor.map(o=>{var d;return{id:o.id,producto_id:e.id,proveedor_id:o.proveedor_id,nombre:`${e.nombre} (${((d=o.proveedor)==null?void 0:d.nombre)||"Proveedor desconocido"})`}}))});Vo(async()=>{const[i,e,o,d,l,f]=await Promise.all([v.get("/api/tipos_material"),v.get("/api/colores"),v.get("/api/tipos_producto"),v.get("/api/productos"),v.get("/api/tipos_ventana"),v.get("/api/clientes")]);A.value=i.data,j.value=e.data,x.value=o.data.filter(C=>[1,2].includes(C.id)),k.value=d.data.filter(C=>[1,2].includes(C.tipo_producto_id)),R.value=l.data,G.value=f.data});const N=i=>(i=parseInt(i),k.value.flatMap(e=>e.colores_por_proveedor.map(o=>({id:o.id,producto_id:e.id,proveedor_id:o.proveedor_id}))).find(e=>e.id===i)),ao=i=>{const e=i.tipoVidrio??u.value.tipoVidrio;return k.value.filter(o=>o.tipo_producto_id===e).flatMap(o=>o.colores_por_proveedor.map(d=>{var l;return{id:d.id,producto_id:o.id,proveedor_id:d.proveedor_id,nombre:`${o.nombre} (${((l=d.proveedor)==null?void 0:l.nombre)||"Proveedor desconocido"})`}}))},to=L(()=>{const i=F.value.toLowerCase(),e=new Set;return G.value.filter(o=>{var d;return(d=o.razon_social)==null?void 0:d.toLowerCase().includes(i)}).filter(o=>e.has(o.id)?!1:(e.add(o.id),!0)).map((o,d)=>{var l;return{uid:`${o.id}-${d}`,id:o.id,razon_social:(l=o.razon_social)==null?void 0:l.trim(),raw:o}})}),io=(i=null)=>{const o={...{tipo:null,ancho:null,alto:null,cantidad:1,material:u.value.material,color:u.value.color,tipoVidrio:u.value.tipoVidrio,productoVidrioProveedor:u.value.productoVidrioProveedor??null,hojas_totales:2,hojas_moviles:2,materiales:[],costo_total:0,costo_total_unitario:0,costo:0,precio_unitario:0,precio:0,hoja1AlFrente:!0,tipoVentanaIzquierda:{compuesta:!1,partes:[{tipo:null,alto:null},{tipo:null,alto:null}]},tipoVentanaDerecha:{compuesta:!1,partes:[{tipo:null,alto:null},{tipo:null,alto:null}]},tipoVentanaCentro:{tipo:null,hojas_totales:null,hojas_moviles:null,hojaMovilSeleccionada:null,hoja1AlFrente:!0},ancho_izquierda:null,ancho_centro:null,ancho_derecha:null},...i||{}};o.tipo===47&&(o.ancho_izquierda=null,o.ancho_centro=null,o.ancho_derecha=null),u.value.ventanas.push(o);const d=N(o.productoVidrioProveedor);if(o.tipo&&o.ancho&&o.alto&&d){const l={...o,productoVidrio:d.producto_id,proveedorVidrio:d.proveedor_id,hojas_moviles:o.tipo===3||o.tipo===46?o.hojas_moviles:void 0};O(l,o)}},ro=i=>{u.value.ventanas.splice(i,1)},uo=i=>{const e=i.material??u.value.material;return R.value.filter(o=>o.material_id===e)},O=co(async(i,e)=>{if(!i.productoVidrio||!i.proveedorVidrio){console.warn("⚠️ Faltan datos en el payload para calcular materiales:",i);return}try{const o=await v.post("/api/cotizador/calcular-materiales",i);e.costo_total_unitario=o.data.costo_unitario;const d=e.cantidad>0?e.cantidad:1;e.costo_total=o.data.costo_unitario*e.cantidad,e.precio=Math.ceil(e.costo_total/(1-So)),e.materiales=o.data.materiales}catch(o){console.error("❌ Error al calcular materiales",o),e.costo_total=0,e.materiales=[]}},1e3);B(()=>u.value.ventanas,i=>{i.forEach(e=>{B(()=>[e.tipo,e.ancho,e.alto,e.cantidad,e.material,e.color,e.tipoVidrio,e.productoVidrioProveedor,e.hojas_totales,e.hojas_moviles],()=>{const o=[];e.tipo||o.push("tipo_ventana_id faltante"),e.ancho||o.push("ancho faltante"),e.alto||o.push("alto faltante"),(!e.cantidad||e.cantidad<=0)&&o.push("cantidad inválida"),e.productoVidrioProveedor||o.push("productoVidrioProveedor faltante");const d=N(e.productoVidrioProveedor);if(d||o.push(`relación producto-proveedor no encontrada (ID: ${e.productoVidrioProveedor})`),o.length>0){console.warn(`❌ No se puede recalcular la ventana (tipo ${e.tipo}):`,o.join(", "));return}const l={...e,productoVidrio:d.producto_id,proveedorVidrio:d.proveedor_id,hojas_moviles:e.tipo===3||e.tipo===46?e.hojas_moviles:void 0};console.log("✅ Recalculando ventana:",l),O(l,e)},{deep:!0,immediate:!1})})},{deep:!0}),B(()=>w.cliente,i=>{i!=null&&i.raw&&console.log("✅ Cliente seleccionado:",i.raw)});const so=()=>{oo.value=!0},no=async()=>{const i=[];for(let e=0;e<S.value.length;e++){const o=S.value[e];if(o!=null&&o.exportarImagen){const d=o.exportarImagen();i.push(d)}else i.push(null)}return i},mo=async()=>{var i;I.value=!0;try{const e=await no(),o=(i=w.cliente)==null?void 0:i.raw;if(!o||u.value.ventanas.length===0){alert("Debes seleccionar un cliente y agregar al menos una ventana");return}const d={cliente_id:o.id,vendedor_id:1,fecha:new Date().toISOString().split("T")[0],estado_cotizacion_id:u.value.estado_cotizacion_id??1,observaciones:u.value.observaciones,imagenes_ventanas:e,ventanas:u.value.ventanas.map(l=>{const f=N(l.productoVidrioProveedor);return{tipo_ventana_id:l.tipo,ancho:l.ancho,alto:l.alto,cantidad:l.cantidad,color_id:l.color,producto_vidrio_proveedor_id:l.productoVidrioProveedor,producto_id:f==null?void 0:f.producto_id,proveedor_id:f==null?void 0:f.proveedor_id,costo:l.costo_total||l.costo||0,costo_unitario:l.costo_unitario||0,precio:l.precio||0,precio_unitario:l.precio_unitario||0,tipo_ventana_izquierda:l.tipoVentanaIzquierda??null,tipo_ventana_centro:l.tipoVentanaCentro??null,tipo_ventana_derecha:l.tipoVentanaDerecha??null,ancho_izquierda:l.ancho_izquierda??null,ancho_centro:l.ancho_centro??null,ancho_derecha:l.ancho_derecha??null}})};await v.post("api/cotizaciones",d),alert("Cotización guardada correctamente"),W.push({name:"cotizaciones"})}catch(e){console.error("Error al guardar cotización:",e),alert("Error al guardar la cotización")}finally{I.value=!1}};return(i,e)=>(s(),m(zo,{fluid:""},{default:t(()=>[a(J,{class:"pa-6",elevation:"2"},{default:t(()=>[a(ko,{class:"text-h5 mb-4"},{default:t(()=>e[7]||(e[7]=[c("Nueva Cotización")])),_:1}),a(E,{class:"text-h5"},{default:t(()=>e[8]||(e[8]=[c("Datos generales")])),_:1}),a(T,{class:"mb-4"}),a(h,{dense:""},{default:t(()=>[a(r,{cols:"6",md:"4"},{default:t(()=>[a(h,{"no-gutters":"",align:"center"},{default:t(()=>[a(r,null,{default:t(()=>[(s(),m(Co,{modelValue:w.cliente,"onUpdate:modelValue":e[0]||(e[0]=o=>w.cliente=o),rules:[o=>!!o||"Selecciona un cliente"],search:F.value,"onUpdate:search":e[1]||(e[1]=o=>F.value=o),items:to.value,"item-title":"razon_social","item-value":"uid",label:"Cliente","return-object":"",clearable:"","menu-props":{virtualScroll:!1},key:eo.value,outlined:"",color:"primary"},null,8,["modelValue","rules","search","items"]))]),_:1}),a(r,{cols:"auto"},{default:t(()=>[a(q,{icon:"",color:"primary",onClick:so,class:"ml-2"},{default:t(()=>[a($,null,{default:t(()=>e[9]||(e[9]=[c("mdi-plus")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(h,{dense:""},{default:t(()=>[a(r,{cols:"6"},{default:t(()=>[a(qo,{modelValue:u.value.observaciones,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value.observaciones=o),label:"Observaciones",outlined:"",color:"primary","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),a(h,{dense:"",class:"mb-4"},{default:t(()=>[a(r,{cols:"12",md:"6"},{default:t(()=>[a(n,{modelValue:u.value.material,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.material=o),items:A.value,"item-title":"nombre","item-value":"id",label:"Material",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(n,{modelValue:u.value.color,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value.color=o),items:j.value,"item-title":"nombre","item-value":"id",label:"Color",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(E,{class:"text-h5"},{default:t(()=>e[10]||(e[10]=[c("Vidrio por defecto")])),_:1}),a(T,{class:"mb-4"}),a(h,{dense:"",class:"mb-4"},{default:t(()=>[a(r,{cols:"12",sm:"6"},{default:t(()=>[a(n,{modelValue:u.value.tipoVidrio,"onUpdate:modelValue":e[5]||(e[5]=o=>u.value.tipoVidrio=o),items:x.value,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",sm:"6"},{default:t(()=>[a(n,{modelValue:u.value.productoVidrioProveedor,"onUpdate:modelValue":e[6]||(e[6]=o=>u.value.productoVidrioProveedor=o),items:lo.value,"item-title":"nombre","item-value":"id",label:"Producto de vidrio",outlined:"",color:"primary"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(E,{class:"text-h5"},{default:t(()=>e[11]||(e[11]=[c("Ventanas")])),_:1}),a(T,{class:"mb-4"}),(s(!0),g(P,null,fo(u.value.ventanas,(o,d)=>(s(),g("div",{key:d,class:"mb-4"},[a(J,{class:"pa-4",outlined:""},{default:t(()=>[a(h,{dense:""},{default:t(()=>[a(r,{cols:"6",sm:"4"},{default:t(()=>[a(n,{modelValue:o.tipo,"onUpdate:modelValue":l=>o.tipo=l,items:uo(o),"item-title":"nombre","item-value":"id",label:"Tipo de ventana",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(b,{modelValue:o.ancho,"onUpdate:modelValue":l=>o.ancho=l,modelModifiers:{number:!0},label:"Ancho (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(b,{modelValue:o.alto,"onUpdate:modelValue":l=>o.alto=l,modelModifiers:{number:!0},label:"Alto (mm)",type:"number",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(b,{modelValue:o.cantidad,"onUpdate:modelValue":l=>o.cantidad=l,label:"Cantidad",type:"number",min:"1",rules:[l=>l>0||"Debe ser mayor a 0"],outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(n,{modelValue:o.material,"onUpdate:modelValue":l=>o.material=l,items:A.value,"item-title":"nombre","item-value":"id",label:"Material (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(n,{modelValue:o.color,"onUpdate:modelValue":l=>o.color=l,items:j.value,"item-title":"nombre","item-value":"id",label:"Color (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(n,{modelValue:o.tipoVidrio,"onUpdate:modelValue":l=>o.tipoVidrio=l,items:x.value,"item-title":"nombre","item-value":"id",label:"Tipo de vidrio (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),a(r,{cols:"12",sm:"6"},{default:t(()=>[a(n,{modelValue:o.productoVidrioProveedor,"onUpdate:modelValue":l=>o.productoVidrioProveedor=l,items:ao(o),"item-title":"nombre","item-value":"id",label:"Producto de vidrio (opcional)",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),o.tipo===47?(s(),m(h,{key:0},{default:t(()=>[a(r,{cols:"4"},{default:t(()=>[a(b,{modelValue:o.ancho_izquierda,"onUpdate:modelValue":l=>o.ancho_izquierda=l,label:"Ancho izquierda (mm)",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"4"},{default:t(()=>[a(b,{modelValue:o.ancho_centro,"onUpdate:modelValue":l=>o.ancho_centro=l,label:"Ancho centro (mm)",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"4"},{default:t(()=>[a(b,{modelValue:o.ancho_derecha,"onUpdate:modelValue":l=>o.ancho_derecha=l,label:"Ancho derecha (mm)",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):V("",!0),o.tipo===47?(s(),m(r,{key:1,cols:"12"},{default:t(()=>[a(Z,{modelValue:o.tipoVentanaIzquierda.compuesta,"onUpdate:modelValue":l=>o.tipoVentanaIzquierda.compuesta=l,label:"¿Ventana izquierda compuesta?",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):V("",!0),o.tipo===47?(s(),m(r,{key:2,cols:"12"},{default:t(()=>[a(Z,{modelValue:o.tipoVentanaDerecha.compuesta,"onUpdate:modelValue":l=>o.tipoVentanaDerecha.compuesta=l,label:"¿Ventana derecha compuesta?",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):V("",!0),o.tipo===47?(s(),g(P,{key:3},[a(h,{dense:""},{default:t(()=>[o.tipoVentanaIzquierda.compuesta?(s(),g(P,{key:0},[a(r,{cols:"12"},{default:t(()=>e[12]||(e[12]=[y("h4",null,"Ventana izquierda compuesta",-1)])),_:1}),a(r,{cols:"12",sm:"6"},{default:t(()=>[e[13]||(e[13]=y("h5",null,"Parte superior",-1)),a(n,{modelValue:o.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":l=>o.tipoVentanaIzquierda.partes[0].tipo=l,items:U,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),a(b,{modelValue:o.tipoVentanaIzquierda.partes[0].alto,"onUpdate:modelValue":l=>o.tipoVentanaIzquierda.partes[0].alto=l,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"12",sm:"6"},{default:t(()=>[e[14]||(e[14]=y("h5",null,"Parte inferior",-1)),a(n,{modelValue:o.tipoVentanaIzquierda.partes[1].tipo,"onUpdate:modelValue":l=>o.tipoVentanaIzquierda.partes[1].tipo=l,items:U,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),a(b,{modelValue:o.tipoVentanaIzquierda.partes[1].alto,"onUpdate:modelValue":l=>o.tipoVentanaIzquierda.partes[1].alto=l,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):(s(),m(r,{key:1,cols:"4"},{default:t(()=>[a(n,{modelValue:o.tipoVentanaIzquierda.partes[0].tipo,"onUpdate:modelValue":l=>o.tipoVentanaIzquierda.partes[0].tipo=l,items:U,"item-title":"nombre","item-value":"id",label:"Tipo de ventana izquierda",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024),a(h,{dense:""},{default:t(()=>[a(r,{cols:"4"},{default:t(()=>[a(n,{modelValue:o.tipoVentanaCentro.tipo,"onUpdate:modelValue":l=>o.tipoVentanaCentro.tipo=l,items:Y,"item-title":"nombre","item-value":"id",label:"Tipo de ventana centro",outlined:"",color:"primary",rules:[l=>!!l||"Seleccione un tipo"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),o.tipoVentanaCentro&&[3,46].includes(o.tipoVentanaCentro.tipo)?(s(),g(P,{key:0},[a(r,{cols:"6",sm:"3"},{default:t(()=>[a(n,{modelValue:o.tipoVentanaCentro.hojas_totales,"onUpdate:modelValue":l=>o.tipoVentanaCentro.hojas_totales=l,items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(n,{modelValue:o.tipoVentanaCentro.hojas_moviles,"onUpdate:modelValue":l=>o.tipoVentanaCentro.hojas_moviles=l,items:[1,2,3,4],label:"Hojas móviles",disabled:!o.tipoVentanaCentro.hojas_totales,rules:[l=>!l||l<=o.tipoVentanaCentro.hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","disabled","rules"])]),_:2},1024),o.tipoVentanaCentro.hojas_moviles===1?(s(),m(r,{key:0,cols:"12",sm:"6"},{default:t(()=>[a(X,{modelValue:o.tipoVentanaCentro.hojaMovilSeleccionada,"onUpdate:modelValue":l=>o.tipoVentanaCentro.hojaMovilSeleccionada=l,row:"",label:"Selecciona la hoja que se mueve"},{default:t(()=>[a(M,{label:"Mover hoja izquierda (1)",value:1}),a(M,{label:"Mover hoja derecha (2)",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)):V("",!0)],64)):V("",!0)]),_:2},1024),a(h,{dense:""},{default:t(()=>[o.tipoVentanaDerecha.compuesta?(s(),g(P,{key:0},[a(r,{cols:"12"},{default:t(()=>e[15]||(e[15]=[y("h4",null,"Ventana derecha compuesta",-1)])),_:1}),a(r,{cols:"12",sm:"6"},{default:t(()=>[e[16]||(e[16]=y("h5",null,"Parte superior",-1)),a(n,{modelValue:o.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":l=>o.tipoVentanaDerecha.partes[0].tipo=l,items:U,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),a(b,{modelValue:o.tipoVentanaDerecha.partes[0].alto,"onUpdate:modelValue":l=>o.tipoVentanaDerecha.partes[0].alto=l,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"12",sm:"6"},{default:t(()=>[e[17]||(e[17]=y("h5",null,"Parte inferior",-1)),a(n,{modelValue:o.tipoVentanaDerecha.partes[1].tipo,"onUpdate:modelValue":l=>o.tipoVentanaDerecha.partes[1].tipo=l,items:U,"item-title":"nombre","item-value":"id",label:"Tipo",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),a(b,{modelValue:o.tipoVentanaDerecha.partes[1].alto,"onUpdate:modelValue":l=>o.tipoVentanaDerecha.partes[1].alto=l,label:"Alto (mm)",type:"number",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):(s(),m(r,{key:1,cols:"4"},{default:t(()=>[a(n,{modelValue:o.tipoVentanaDerecha.partes[0].tipo,"onUpdate:modelValue":l=>o.tipoVentanaDerecha.partes[0].tipo=l,items:U,"item-title":"nombre","item-value":"id",label:"Tipo de ventana derecha",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024)],64)):V("",!0),[3,46].includes(o.tipo)?(s(),m(h,{key:4,dense:""},{default:t(()=>[a(r,{cols:"6",sm:"3"},{default:t(()=>[a(n,{modelValue:o.hojas_totales,"onUpdate:modelValue":l=>o.hojas_totales=l,items:[2,3,4,6],label:"Hojas totales",outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"6",sm:"3"},{default:t(()=>[a(n,{modelValue:o.hojas_moviles,"onUpdate:modelValue":l=>o.hojas_moviles=l,items:[1,2,3,4],label:"Hojas móviles",disabled:!o.hojas_totales,rules:[l=>!l||l<=o.hojas_totales||"No puede exceder total"],outlined:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","disabled","rules"])]),_:2},1024),o.hojas_moviles===1?(s(),m(r,{key:0,cols:"12",sm:"6"},{default:t(()=>[a(X,{modelValue:o.hojaMovilSeleccionada,"onUpdate:modelValue":l=>o.hojaMovilSeleccionada=l,row:"",label:"Selecciona la hoja que se mueve"},{default:t(()=>[a(M,{label:"Mover hoja izquierda (1)",value:1}),a(M,{label:"Mover hoja derecha (2)",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)):V("",!0)]),_:2},1024)):V("",!0),a(r,{cols:"6"},{default:t(()=>{var l,f,C,K,Q;return[o.tipo===2?(s(),m(yo,{key:0,ancho:o.ancho,alto:o.alto,"color-marco":((l=j.value.find(_=>_.id===o.color))==null?void 0:l.nombre)||"blanco"},null,8,["ancho","alto","color-marco"])):o.tipo===3?(s(),m(go,{key:1,ref_for:!0,ref:_=>S.value[d]=_,ancho:o.ancho,alto:o.alto,"color-marco":((f=j.value.find(_=>_.id===o.color))==null?void 0:f.nombre)||"blanco","hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"hojas-totales":o.hojas_totales,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","hojas-moviles","hoja-movil-seleccionada","hojas-totales","orden-hoja1-al-frente"])):V("",!0),o.tipo===45?(s(),m(jo,{key:2,ancho:o.ancho,alto:o.alto,"color-marco":((C=j.value.find(_=>_.id===o.color))==null?void 0:C.nombre)||"blanco"},null,8,["ancho","alto","color-marco"])):o.tipo===46?(s(),m(vo,{key:3,ref_for:!0,ref:_=>S.value[d]=_,ancho:o.ancho,alto:o.alto,"color-marco":((K=j.value.find(_=>_.id===o.color))==null?void 0:K.nombre)||"blanco","hojas-moviles":o.hojas_moviles,"hoja-movil-seleccionada":o.hojaMovilSeleccionada,"hojas-totales":o.hojas_totales,"orden-hoja1-al-frente":o.hoja1AlFrente},null,8,["ancho","alto","color-marco","hojas-moviles","hoja-movil-seleccionada","hojas-totales","orden-hoja1-al-frente"])):o.tipo===47?(s(),m(Uo,{key:4,ancho:o.ancho,alto:o.alto,"color-marco":((Q=j.value.find(_=>_.id===o.color))==null?void 0:Q.nombre)||"blanco","ancho-izquierda":o.ancho_izquierda,"ancho-centro":o.ancho_centro,"ancho-derecha":o.ancho_derecha,"tipo-ventana-izquierda":o.tipoVentanaIzquierda,"tipo-ventana-centro":o.tipoVentanaCentro,"tipo-ventana-derecha":o.tipoVentanaDerecha},null,8,["ancho","alto","color-marco","ancho-izquierda","ancho-centro","ancho-derecha","tipo-ventana-izquierda","tipo-ventana-centro","tipo-ventana-derecha"])):V("",!0)]}),_:2},1024),a(r,{cols:"12"},{default:t(()=>[o.costo_total_unitario?(s(),m(H,{key:0,type:"info",variant:"outlined",dense:"",class:"mb-2"},{default:t(()=>[e[18]||(e[18]=y("strong",null,"Costo unitario:",-1)),c(" $"+z(o.costo_total_unitario.toLocaleString()),1)]),_:2},1024)):V("",!0),o.costo_total?(s(),m(H,{key:1,type:"info",variant:"tonal",dense:"",class:"mb-2"},{default:t(()=>[e[19]||(e[19]=y("strong",null,"Costo total de materiales:",-1)),c(" $"+z(o.costo_total.toLocaleString()),1)]),_:2},1024)):V("",!0),o.precio?(s(),m(H,{key:2,type:"success",variant:"tonal",dense:"",class:"mt-2"},{default:t(()=>[e[20]||(e[20]=y("strong",null,"Precio sugerido:",-1)),c(" $"+z(o.precio.toLocaleString()),1)]),_:2},1024)):V("",!0),a(q,{onClick:l=>D.value[d]=!D.value[d],color:"primary",variant:"outlined"},{default:t(()=>[a($,{left:""},{default:t(()=>e[21]||(e[21]=[c("mdi-eye")])),_:1}),c(" "+z(D.value[d]?"Ocultar":"Ver")+" Costos ",1)]),_:2},1032,["onClick"]),D.value[d]&&o.materiales&&o.materiales.length?(s(),m(Po,{key:3,headers:[{title:"Producto",key:"nombre"},{title:"Proveedor",key:"proveedor"},{title:"Cantidad",key:"cantidad"},{title:"Unidad",key:"unidad"},{title:"Costo Unitario",key:"costo_unitario"},{title:"Costo Total",key:"costo_total"}],items:o.materiales,"items-per-page":-1,class:"elevation-1 mt-4","hide-default-footer":""},{"item.costo_unitario":t(({item:l})=>[c(" $"+z(l.costo_unitario.toLocaleString()),1)]),"item.costo_total":t(({item:l})=>[c(" $"+z(l.costo_total.toLocaleString()),1)]),_:2},1032,["items"])):V("",!0)]),_:2},1024),a(r,{cols:"12",class:"text-right"},{default:t(()=>[a(q,{color:"error",variant:"outlined",onClick:l=>ro(d)},{default:t(()=>[a($,{left:""},{default:t(()=>e[22]||(e[22]=[c("mdi-delete")])),_:1}),e[23]||(e[23]=c(" Quitar ventana "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),a(q,{onClick:io,color:"primary",variant:"outlined",class:"mb-4"},{default:t(()=>[a($,{left:""},{default:t(()=>e[24]||(e[24]=[c("mdi-plus")])),_:1}),e[25]||(e[25]=c(" Agregar ventana "))]),_:1}),a(T,{class:"my-4"}),a(q,{color:"primary",loading:I.value,disabled:I.value,onClick:mo},{loader:t(()=>[a(ho,{indeterminate:"",color:"white",size:"20"})]),default:t(()=>[e[26]||(e[26]=c(" Guardar Cotización "))]),_:1},8,["loading","disabled"])]),_:1})]),_:1}))}},de=bo(Do,[["__scopeId","data-v-5e189ee2"]]);export{de as default};
